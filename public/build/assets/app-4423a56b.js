import{a as va,m as Xe,h as Da,f as Ee,d as ia,u as Ln,t as Bn,b as Ke,c as x,e as _e,r as I,g as na,i as fa,j as ba,k as ne,S as Ta,l as o,o as d,n as U,p as l,w as a,q as M,s as i,T as qn,v as et,x as ie,y as he,z as Vn,A as b,B as Kn,C as Sl,D as c,E as Ve,F as zn,G as Nn,H as L,I as D,J as we,K as jn,L as at,M as Pa,N as Le,O as G,P as Hn,Q as ke,R as $l,U as kt,V as Ct,W as wt,X as oa,Y as aa,Z as Ne,_ as De,$ as St,a0 as $t,a1 as tt,a2 as Al,a3 as At,a4 as lt,a5 as ya,a6 as Dl,a7 as Nt,a8 as Dt,a9 as Wn,aa as Yn,ab as ze,ac as de,ad as $e,ae as Tt,af as ga,ag as Se,ah as Et,ai as Oe,aj as Ea,ak as Aa,al as ua,am as nt,an as Tl,ao as Gn,ap as jt,aq as Xa,ar as Za,as as Ua,at as El,au as ot,av as Ul,aw as Jn,ax as Ma,ay as Ol,az as Il,aA as Qn,aB as Xn,aC as Oa,aD as Zn,aE as xn,aF as eo,aG as Fa,aH as ao,aI as st,aJ as Ra,aK as dt,aL as it,aM as to,aN as lo,aO as Pl,aP as Ml,aQ as no,aR as Ut,aS as oo,aT as so,aU as io,aV as Ga,aW as ro,aX as uo,aY as mo,aZ as co,a_ as Fl,a$ as Rl,b0 as po,b1 as _o,b2 as xa,b3 as fo,b4 as go,b5 as Ll,b6 as Bl,b7 as ho,b8 as vo,b9 as ql,ba as bo,bb as yo,bc as ko,bd as Co,be as wo,bf as So,bg as $o,bh as Ao,bi as Do,bj as To,bk as Eo,bl as Uo,bm as Oo,bn as Io,bo as Ja,bp as Ot,bq as Po,br as Vl,bs as It,bt as Kl,bu as zl,bv as Nl,bw as Mo,bx as Fo,by as Ro,bz as Lo,bA as Bo,bB as qo,bC as Vo,bD as Ko,bE as zo,bF as No,bG as jo}from"./vendor-43bf694e.js";const vt=(e,s)=>{const _=e[s];return _?typeof _=="function"?_():Promise.resolve(_):new Promise((n,v)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(v.bind(null,new Error("Unknown variable dynamic import: "+s)))})};var Qa=va.create({baseURL:window.config.path+"/api/v1"});Qa.defaults.headers.Accept="application/json";Qa.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Qa.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;Qa.interceptors.response.use(function(e){return e.data},function(e){if(e.response.status===401)window.location.href=window.config.path;else return Promise.reject(e.response)});window.axiosBase=Qa;var La=va.create({baseURL:window.config.path+"/api/v1"});La.defaults.headers.Accept="application/json";La.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";La.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("auth_token")&&(La.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("auth_token"));La.interceptors.response.use(function(e){return e.data},function(e){console.error(e);const s=e.response.status;if(s===401)window.location.href=window.config.path+"/admin/login",delete window.axiosAdmin.defaults.headers.common.Authorization,localStorage.removeItem("auth_token"),localStorage.setItem("auth_user",null);else if(s===400){var _=e.response.data.error.message;Xe.error(_)}else if(s===403){var _=e.response.data.error.message;Xe.error(_)}else if(s===404){var _=e.response.data.error.message;Xe.error(_)}return Promise.reject(e.response)});window.axiosAdmin=La;var Ba=va.create({baseURL:window.config.path+"/api/v1"});Ba.defaults.headers.Accept="application/json";Ba.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Ba.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("front_auth_token")&&(Ba.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("front_auth_token"));Ba.interceptors.response.use(function(e){return e.data},function(e){const s=e.response.status;if(s===401)window.location.href=window.config.path,delete window.axiosFront.defaults.headers.common.Authorization,localStorage.removeItem("front_auth_token"),localStorage.setItem("front_auth_user",null);else if(s===400){var _=e.response.data.error.message;Xe.error(_)}else if(s===403){var _=e.response.data.error.message;Xe.error(_)}else if(s===404){var _=e.response.data.error.message;Xe.error(_)}return Promise.reject(e.response)});window.axiosFront=Ba;const Ho=window.config.modules;Ho.forEach(e=>{require(`../../../../Modules/${e}/Resources/assets/js/plugins`)});Da.suppressDeprecationWarnings=!0;window.moment=Da;const za="#5F63F2",Wo="#4347D9",Yo="#FF69A5",Go="#E34A87",Jo="#1890ff",Qo="#0D79DF",Xo="rgba(0, 0, 0, 0.85)",_t="#20C997",Zo="#0CAB7C",ft="#FA8B0C",xo="#D47407",Ht="#f5222d",es="#E30D0F",Wt="#2C99FF",as="#0D79DF",Ia="#272B41",ts="#131623",Yt="#5A5F7D",Gt="#363A51",ls="#9299B8",ns="#e2e6ea",Jt="#ffffff",os="#5A5F7D",ss="#5A5F7D",ds="#ADB4D2",is="#FF4D4F",rs="#E30D0F",Qt="#F1F2F6",Xt="#E3E6EF",us="#C6D0DC",ms="#EFF0F3",cs="#F8F9FB",ps="#F4F5F7",_s="#868EAE",Zt="rgba(95,99,242,0.2)",fs="#9299b8",gs="#F63178",hs="48px",vs="36px",bs="29px",jl={"primary-color":za,"primary-hover":Wo,"secondary-color":Yo,"secondary-hover":Go,"link-color":Jo,"link-hover":Qo,"success-color":_t,"success-hover":Zo,"warning-color":ft,"warning-hover":xo,"error-color":Ht,"error-hover":es,"info-color":Wt,"info-hover":as,"dark-color":Ia,"dark-hover":ts,"gray-color":Yt,"gray-hover":Gt,"light-color":ls,"light-hover":ns,"white-color":Jt,"white-hover":ss,white:Jt,black:"#000",pink:gs,"dash-color":os,"dash-hover":Gt,"extra-light-color":ds,"danger-color":is,"danger-hover":rs,"font-family":"'Inter', sans-serif","font-size-base":"14px","heading-color":Xo,"text-color":Ia,"text-color-secondary":Yt,"disabled-color":"rgba(0, 0, 0, 0.25)","border-radius-base":"4px","border-color-base":"#d9d9d9","box-shadow-base":"0 2px 8px rgba(0, 0, 0, 0.15)","border-color-light":Qt,"border-color-normal":Xt,"border-color-deep":us,"bg-color-light":cs,"bg-color-normal":ps,"bg-color-deep":ms,"light-gray-color":_s,"gray-solid":fs,"btn-height-large":hs,"btn-height-small":vs,"btn-height-extra-small":bs,"btn-default-color":Ia,"card-head-background":"#ffffff","card-head-color":Ia,"card-background":"#ffffff","card-head-padding":"16px","card-padding-base":"12px","card-radius":"10px","card-shadow":"0 5px 20px rgba(146,153,184,0.03)","layout-body-background":"#F4F5F7","layout-header-background":"#ffffff","layout-footer-background":"#fafafa","layout-header-height":"64px","layout-header-padding":"0 15px","layout-footer-padding":"24px 15px","layout-sider-background":"#ffffff","layout-trigger-height":"48px","layout-trigger-background":"#002140","layout-trigger-color":"#fff","layout-zero-trigger-width":"36px","layout-zero-trigger-height":"42px","layout-sider-background-light":"#fff","layout-trigger-background-light":"#fff","layout-trigger-color-light":"rgba(0, 0, 0, 0.65)","page-header-padding":"24px","page-header-padding-vertical":"16px","page-header-padding-breadcrumb":"12px","page-header-back-color":"#000","page-header-ghost-bg":"inherit","popover-color":Ia,"alert-success-border-color":_t,"alert-success-bg-color":_t+15,"alert-error-bg-color":Ht+15,"alert-warning-bg-color":ft+15,"alert-info-bg-color":Wt+15,"radio-button-checked-bg":za,"grid-gutter-width":25,"skeleton-color":Qt,"slider-rail-background-color":Zt,"slider-rail-background-color-hover":Zt,"slider-track-background-color":za,"slider-track-background-color-hover":za,"slider-handle-color":za,"slider-handle-size":"16px","input-height-base":"48px","input-border-color":Xt,"input-height-sm":"30px","input-height-lg":"50px","rate-star-color":ft,"rate-star-size":"13px","switch-min-width":"30px","switch-sm-min-width":"30px","switch-height":"18px","switch-sm-height":"15px","result-title-font-size":"20px","result-subtitle-font-size":"12px","result-icon-font-size":"50px","tabs-horizontal-padding":"12px 15px","tabs-horizontal-margin":"0","list-item-padding":"10px 24px","tag-default-bg":"#EFF0F3","tag-default-color":Ia,"tag-font-size":"11px"};({...jl});const ys=(e,s)=>{var _=s.role.name=="admin";return Ee(s.role.perms,n=>{n.name==e&&(_=!0)}),_},je=e=>window.config.app_type=="non-saas"?e:`superadmin/${e}`;Da.suppressDeprecationWarnings=!0;ia.extend(Ln);ia.extend(Bn);const Z=()=>{const e=Ke(),{t:s}=x(),_=window.config.app_type,n=window.config.download_lang_csv_url,v=_e(()=>e.state.auth.menuCollapsed),y=_e(()=>e.state.auth.cssSettings),r=_e(()=>e.state.auth.activeModules),u=_e(()=>e.state.auth.visibleSubscriptionModules),m=_e(()=>e.state.auth.globalSetting),p=_e(()=>e.state.auth.appSetting),h=_e(()=>e.state.auth.addMenus),g=_e(()=>e.state.auth.lang),f=_e(()=>e.state.auth.user),w=_e(()=>e.state.auth.themeMode),k=_e(()=>e.state.auth.rightSidebar),C=_e(()=>e.state.auth.uphoneCallReloadString),S=I([{code:"1",name:"United States/Canada",length:10},{code:"7",name:"Russia",length:10},{code:"20",name:"Egypt",length:9},{code:"27",name:"South Africa",length:9},{code:"30",name:"Greece",length:10},{code:"31",name:"Netherlands",length:9},{code:"32",name:"Belgium",length:9},{code:"33",name:"France",length:9},{code:"34",name:"Spain",length:9},{code:"36",name:"Hungary",length:9},{code:"39",name:"Italy",length:9},{code:"40",name:"Romania",length:9},{code:"41",name:"Switzerland",length:9},{code:"43",name:"Austria",length:10},{code:"44",name:"United Kingdom",length:10},{code:"45",name:"Denmark",length:8},{code:"46",name:"Sweden",length:9},{code:"47",name:"Norway",length:8},{code:"48",name:"Poland",length:9},{code:"49",name:"Germany",length:10},{code:"51",name:"Peru",length:9},{code:"52",name:"Mexico",length:10},{code:"53",name:"Cuba",length:8},{code:"54",name:"Argentina",length:10},{code:"55",name:"Brazil",length:10},{code:"56",name:"Chile",length:9},{code:"57",name:"Colombia",length:10},{code:"58",name:"Venezuela",length:10},{code:"60",name:"Malaysia",length:9},{code:"61",name:"Australia",length:9},{code:"62",name:"Indonesia",length:10},{code:"63",name:"Philippines",length:10},{code:"64",name:"New Zealand",length:8},{code:"65",name:"Singapore",length:8},{code:"66",name:"Thailand",length:9},{code:"81",name:"Japan",length:10},{code:"82",name:"South Korea",length:9},{code:"84",name:"Vietnam",length:9},{code:"86",name:"China",length:11},{code:"90",name:"Turkey",length:10},{code:"91",name:"India",length:10},{code:"92",name:"Pakistan",length:10},{code:"93",name:"Afghanistan",length:9},{code:"94",name:"Sri Lanka",length:9},{code:"95",name:"Myanmar",length:9},{code:"98",name:"Iran",length:10},{code:"212",name:"Morocco",length:9},{code:"213",name:"Algeria",length:9},{code:"216",name:"Tunisia",length:8},{code:"218",name:"Libya",length:9},{code:"220",name:"Gambia",length:7},{code:"221",name:"Senegal",length:9},{code:"222",name:"Mauritania",length:9},{code:"223",name:"Mali",length:8},{code:"224",name:"Guinea",length:9},{code:"225",name:"Ivory Coast",length:8},{code:"226",name:"Burkina Faso",length:8},{code:"227",name:"Niger",length:8},{code:"228",name:"Togo",length:8},{code:"229",name:"Benin",length:8},{code:"230",name:"Mauritius",length:7},{code:"231",name:"Liberia",length:8},{code:"232",name:"Sierra Leone",length:8},{code:"233",name:"Ghana",length:9},{code:"234",name:"Nigeria",length:10},{code:"235",name:"Chad",length:8},{code:"236",name:"Central African Republic",length:8},{code:"237",name:"Cameroon",length:9},{code:"238",name:"Cape Verde",length:7},{code:"239",name:"São Tomé and Príncipe",length:7},{code:"240",name:"Equatorial Guinea",length:9},{code:"241",name:"Gabon",length:9},{code:"242",name:"Republic of the Congo",length:9},{code:"243",name:"Democratic Republic of the Congo",length:9},{code:"244",name:"Angola",length:9},{code:"245",name:"Guinea-Bissau",length:7},{code:"246",name:"British Indian Ocean Territory",length:7},{code:"247",name:"Ascension Island",length:4},{code:"248",name:"Seychelles",length:7},{code:"249",name:"Sudan",length:9},{code:"250",name:"Rwanda",length:9},{code:"251",name:"Ethiopia",length:9},{code:"252",name:"Somalia",length:8},{code:"253",name:"Djibouti",length:8},{code:"254",name:"Kenya",length:9},{code:"255",name:"Tanzania",length:9},{code:"256",name:"Uganda",length:9},{code:"257",name:"Burundi",length:8},{code:"258",name:"Mozambique",length:9},{code:"260",name:"Zambia",length:9},{code:"261",name:"Madagascar",length:9},{code:"262",name:"Réunion",length:9},{code:"263",name:"Zimbabwe",length:9},{code:"264",name:"Namibia",length:9},{code:"265",name:"Malawi",length:9},{code:"266",name:"Lesotho",length:8},{code:"267",name:"Botswana",length:9},{code:"268",name:"Eswatini",length:8},{code:"269",name:"Comoros",length:7},{code:"290",name:"Ascension Island",length:4},{code:"291",name:"Eritrea",length:7},{code:"297",name:"Aruba",length:7},{code:"298",name:"Faroe Islands",length:6},{code:"299",name:"Greenland",length:6},{code:"350",name:"Gibraltar",length:8},{code:"351",name:"Portugal",length:9},{code:"352",name:"Luxembourg",length:9},{code:"353",name:"Ireland",length:9},{code:"354",name:"Iceland",length:7},{code:"355",name:"Albania",length:9},{code:"356",name:"Malta",length:8},{code:"357",name:"Cyprus",length:8},{code:"358",name:"Finland",length:9},{code:"359",name:"Bulgaria",length:8},{code:"370",name:"Lithuania",length:8},{code:"371",name:"Latvia",length:8},{code:"372",name:"Estonia",length:8},{code:"373",name:"Moldova",length:8},{code:"374",name:"Armenia",length:8},{code:"375",name:"Belarus",length:9},{code:"376",name:"Andorra",length:6},{code:"377",name:"Monaco",length:8},{code:"378",name:"San Marino",length:8},{code:"379",name:"Vatican City",length:8},{code:"380",name:"Ukraine",length:9},{code:"381",name:"Serbia",length:8},{code:"382",name:"Montenegro",length:8},{code:"383",name:"Kosovo",length:8},{code:"385",name:"Croatia",length:9},{code:"386",name:"Slovenia",length:8},{code:"387",name:"Bosnia and Herzegovina",length:8},{code:"389",name:"North Macedonia",length:8},{code:"420",name:"Czech Republic",length:9},{code:"421",name:"Slovakia",length:9},{code:"423",name:"Liechtenstein",length:7},{code:"500",name:"Falkland Islands",length:5},{code:"501",name:"Belize",length:7},{code:"502",name:"Guatemala",length:8},{code:"503",name:"El Salvador",length:8},{code:"504",name:"Honduras",length:8},{code:"505",name:"Nicaragua",length:8},{code:"506",name:"Costa Rica",length:8},{code:"507",name:"Panama",length:8},{code:"508",name:"Saint Pierre and Miquelon",length:6},{code:"509",name:"Haiti",length:8},{code:"590",name:"Guadeloupe",length:9},{code:"591",name:"Bolivia",length:8},{code:"592",name:"Guyana",length:7},{code:"593",name:"Ecuador",length:8},{code:"594",name:"French Guiana",length:9},{code:"595",name:"Paraguay",length:9},{code:"596",name:"Martinique",length:9},{code:"597",name:"Suriname",length:7},{code:"598",name:"Uruguay",length:8},{code:"599",name:"Netherlands Antilles",length:7},{code:"670",name:"Timor-Leste",length:7},{code:"672",name:"Australian External Territories",length:6},{code:"673",name:"Brunei",length:7},{code:"674",name:"Nauru",length:7},{code:"675",name:"Papua New Guinea",length:8},{code:"676",name:"Tonga",length:5},{code:"677",name:"Solomon Islands",length:7},{code:"678",name:"Vanuatu",length:7},{code:"679",name:"Fiji",length:7},{code:"680",name:"Palau",length:7},{code:"681",name:"Wallis and Futuna",length:6},{code:"682",name:"Cook Islands",length:5},{code:"683",name:"Niue",length:4},{code:"685",name:"Samoa",length:5},{code:"686",name:"Kiribati",length:5},{code:"687",name:"New Caledonia",length:6},{code:"688",name:"Tuvalu",length:5},{code:"689",name:"French Polynesia",length:6},{code:"690",name:"Tokelau",length:4},{code:"691",name:"Micronesia",length:7},{code:"692",name:"Marshall Islands",length:7},{code:"850",name:"North Korea",length:9},{code:"852",name:"Hong Kong",length:8},{code:"853",name:"Macau",length:8},{code:"855",name:"Cambodia",length:9},{code:"856",name:"Laos",length:9},{code:"880",name:"Bangladesh",length:10},{code:"886",name:"Taiwan",length:9},{code:"960",name:"Maldives",length:7},{code:"961",name:"Lebanon",length:7},{code:"962",name:"Jordan",length:9},{code:"963",name:"Syria",length:9},{code:"964",name:"Iraq",length:9},{code:"965",name:"Kuwait",length:8},{code:"966",name:"Saudi Arabia",length:9},{code:"967",name:"Yemen",length:9},{code:"968",name:"Oman",length:8},{code:"970",name:"Palestine",length:9},{code:"971",name:"United Arab Emirates",length:9},{code:"972",name:"Israel",length:9},{code:"973",name:"Bahrain",length:8},{code:"974",name:"Qatar",length:8},{code:"975",name:"Bhutan",length:8},{code:"976",name:"Mongolia",length:8},{code:"977",name:"Nepal",length:10},{code:"992",name:"Tajikistan",length:9},{code:"993",name:"Turkmenistan",length:8},{code:"994",name:"Azerbaijan",length:9},{code:"995",name:"Georgia",length:9},{code:"996",name:"Kyrgyzstan",length:9},{code:"997",name:"Kazakhstan",length:10},{code:"998",name:"Uzbekistan",length:9}]),E={enabled:"success",disabled:"error"},A=[{key:"enabled",value:s("common.enabled")},{key:"disabled",value:s("common.disabled")}],$=H=>H&&H>Da().endOf("day"),P=H=>H==null?ia().tz(p.value.timezone):ia(H).tz(p.value.timezone),T=H=>H==null?ia().tz(p.value.timezone).format(`${p.value.date_format}`):ia(H).tz(p.value.timezone).format(`${p.value.date_format}`),F=H=>H==null?ia().tz(p.value.timezone).format(`${p.value.date_format} ${p.value.time_format}`):ia(H).tz(p.value.timezone).format(`${p.value.date_format} ${p.value.time_format}`),V=H=>{if(H==0)return 0;var ae=parseInt(H),ce=Math.floor(ae/3600);ae%=3600;var Ae=Math.floor(ae/60),Be=ae%60,Ie="";return ce>0&&(Ie+=`${ce} H,`),Ae>0&&(Ie+=` ${Ae} M,`),Be>0&&(Ie=Ie.trim()+` ${Be} S`),Ie.trim()},z=H=>parseFloat(parseFloat(H).toFixed(2)),K=H=>{const ae=parseFloat(Math.abs(H)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(p.value.currency.position=="front")var ce=`${p.value.currency.symbol}${ae}`;else var ce=`${ae}${p.value.currency.symbol}`;return H<0?`- ${ce}`:ce},B=(H,ae)=>{const ce=parseFloat(Math.abs(H)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(ae.position=="front")var Ae=`${ae.symbol}${ce}`;else var Ae=`${ce}${ae.symbol}`;return H<0?`- ${Ae}`:Ae},R=H=>{var ae="";return Ee(H,(ce,Ae)=>{ce!=null&&(ae+=`${Ae} eq "${ce}" and `)}),ae.length>0&&(ae=ae.substring(0,ae.length-4)),ae},O=H=>ys(H,f.value),W=H=>{e.commit("auth/updatePageTitle",s(`menu.${H}`,"CRM"))},q=_e(()=>{const H=f&&f.value&&f.value.role?[f.value.role.name]:[];return f&&f.value&&f.value.role&&Ee(f.value.role.perms,ae=>{H.push(ae.name)}),H}),N=H=>H.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),j=H=>H.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"_").replace(/^-+/,"").replace(/-+$/,""),te=H=>H<0?H*-1:H,le=H=>_=="non-saas"?!0:p.value.subscription_plan&&p.value.subscription_plan.modules?fa(p.value.subscription_plan.modules,H):!1,ue=(H,ae=null)=>{const ce=[],Ae=[];return H.data.map(Be=>{if(ae==null||ae!=null&&Be.x_parent_id!=ae){let Ie=!0,Je=ba(H.data,{xid:Be.x_parent_id});(Be.x_parent_id===null||Je!=null&&Je.x_parent_id===null)&&(Ie=!1),Ae.push({xid:Be.xid,x_parent_id:Be.x_parent_id,title:Be.name,value:Be.xid,disabled:Ie})}}),Ae.forEach(Be=>{if(!Be.x_parent_id)return ce.push(Be);const Ie=Ae.findIndex(Je=>Je.xid===Be.x_parent_id);if(!Ae[Ie].children)return Ae[Ie].children=[Be];Ae[Ie].children.push(Be)}),ce},ee=(H="active",ae="self")=>{var ce=`call-managers?fields=id,xid,name,status,form_id,x_form_id,form{id,xid,name,form_fields},campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url}&campaign_status=${H}&view_type=${ae}&limit=10000`;return ce},ve=(H="active",ae=void 0,ce=void 0)=>{var Ae=`leads/campaign-stats?campaign_status=${H}`;return ae!=null&&(Ae+=`&campaign_id=${ae}`),ce!=null&&(Ae+=`&user_id=${ce}`),Ae},X=H=>{let ce=H.toString().trim().replace(/\D/g,"").replace(/^\+/,""),Ae=null,Be=ce;for(let Ie=0;Ie<S.value.length;Ie++){const Je=S.value[Ie],xe=Je.code;if(ce.startsWith(xe)){const fe=ce.slice(xe.length);if(fe.length===Je.length){Ae=xe,Be=fe;break}}}return{remainingNumber:Be,countryCode:Ae||null}},oe=na(),se=_e(()=>oe.getRoutes().filter(H=>H.path.startsWith("/admin/formsUCB/")&&H.name!=="admin.formsUCB.index").map(H=>({name:H.name,title:H.meta.menuKey})));return{menuCollapsed:v,appSetting:p,appType:_,themeMode:w,addMenus:h,selectedLang:g,user:f,checkPermission:O,permsArray:q,statusColors:E,userStatus:A,disabledDate:$,formatAmount:z,formatAmountCurrency:K,formatAmountUsingCurrencyObject:B,convertToPositive:te,getRecursiveTypifications:ue,calculateFilterString:R,updatePageTitle:W,downloadLangCsvUrl:n,appModules:r,dayjs:ia,formatDate:T,formatDateTime:F,dayjsObject:P,slugify:N,convertStringToKey:j,cssSettings:y,globalSetting:m,willSubscriptionModuleVisible:le,visibleSubscriptionModules:u,formatTimeDuration:V,getCampaignUrl:ee,getCampaignStatsUrl:ve,rightSidebarValue:k,reloadUphoneStringData:C,countryCodes:S,extractCountryCodeAndNumber:X,formFolders:se}};const Y=(e,s)=>{const _=e.__vccOpts||e;for(const[n,v]of s)_[n]=v;return _},ks=ne({components:{SyncOutlined:Ta},setup(){const{appSetting:e}=Z();return{appSetting:e}}}),Cs={class:"loading-app-container"},ws={style:{color:"#7676e3"}},Ss=["src"];function $s(e,s,_,n,v,y){const r=o("SyncOutlined"),u=o("a-result");return d(),U("div",Cs,[l(u,null,{title:a(()=>[M("span",ws,i(e.$t("messages.loading_app_message")),1)]),icon:a(()=>[M("img",{style:{width:"150px"},src:e.appSetting.light_logo_url},null,8,Ss)]),extra:a(()=>[l(r,{style:{fontSize:"38px",color:"#5254cf"},spin:""})]),_:1})])}const As=Y(ks,[["render",$s],["__scopeId","data-v-f4c8b84b"]]);const Ds={name:"App",components:{ThemeProvider:qn,LoadingApp:As},setup(){const e=et(),s=na(),_=Ke(),n="dark",{updatePageTitle:v,appSetting:y,appType:r,themeMode:u}=Z(),m=_e(()=>_.state.auth.appChecking);return ie(()=>{}),he(e,(p,h)=>{const g=typeof p.meta.menuKey=="function"?p.meta.menuKey(p):p.meta.menuKey;v(g.replace("-","_")),r=="saas"&&y.value.is_global==0&&y.value.status=="license_expired"&&p&&p.meta&&!(p.meta.menuParent=="subscription"||p.name=="admin.login")&&s.push({name:"admin.subscription.current_plan"})}),{theme:Vn,themeVars:jl,darkTheme:n,appChecking:m,appSetting:y,themeMode:u}}},Ts={class:"theme-container"};function Es(e,s,_,n,v,y){const r=o("ThemeProvider"),u=o("a-config-provider"),m=o("router-view");return d(),b(m,null,{default:a(({Component:p,route:h})=>[(d(),b(Kn,null,{default:a(()=>[l(u,{theme:{algorithm:[n.themeMode=="dark"?n.theme.darkAlgorithm:n.theme.defaultAlgorithm],token:{colorPrimary:n.appSetting.primary_color,fontFamily:"Nunito,sans-serif",borderRadius:4}},direction:n.appSetting.rtl?"rtl":"ltr"},{default:a(()=>[M("div",Ts,[l(r,{theme:{...n.themeVars}},{default:a(()=>[(d(),b(Sl(p)))]),_:2},1032,["theme"])])]),_:2},1032,["theme","direction"])]),fallback:a(()=>[c(" Loading... ")]),_:2},1024))]),_:1})}const Us=Y(Ds,[["render",Es]]),xt="auth_user",el="theme_mode",al="auth_token",tl="expire_key",ll="app_settings",nl="global_settings",ol="per_page_item",sl="all_langs",dl="selected_lang",il="page_title",rl="dark_theme",ul="active_modules",ml="css_settings",cl="add_menus",pl="email_setting_verified",_l="visible_subscription_modules",fl="uphone_call_reload_string";Da.suppressDeprecationWarnings=!0;const pa=e=>{const s=window.localStorage.getItem(e);return s==="undefined"||s==="null"||s===void 0||s===null?null:JSON.parse(s)},Os={namespaced:!0,state(){return{user:pa(xt),themeMode:window.localStorage.getItem(el)||"light",allLangs:pa(sl)||[],lang:window.localStorage.getItem(dl)||"en",token:window.localStorage.getItem(al)||null,expires:window.localStorage.getItem(tl)||null,globalSetting:pa(nl),appSetting:pa(ll),addMenus:pa(cl)||[],visibleSubscriptionModules:pa(_l)||[],perPage:window.localStorage.getItem(ol)||window.config.path,pageTitle:window.localStorage.getItem(il)||"",darkTheme:pa(rl),activeModules:pa(ul),cssSettings:pa(ml)||{leftRightPadding:"50px",headerMenuMode:"vertical"},appChecking:!0,rightSidebar:!1,emailSettingVerified:window.localStorage.getItem(pl)||!1,menuCollapsed:window.innerWidth<=991,uphoneCallReloadString:window.localStorage.getItem(fl)||"en"}},mutations:{updateUphoneCallReloadString(e,s){e.uphoneCallReloadString=s,window.localStorage.setItem(fl,s)},updateUser(e,s){e.user=s,window.localStorage.setItem(xt,JSON.stringify(s))},updateThemeMode(e,s){e.themeMode=s,window.localStorage.setItem(el,s)},updateAppChecking(e,s){e.appChecking=s},updateRightSidebarValue(e,s){e.rightSidebar=s},updateToken(e,s){e.token=s,window.localStorage.setItem(al,s),axiosAdmin.defaults.headers.common.Authorization=`Bearer ${s}`},updateExpires(e,s){e.expires=new Date(s),window.localStorage.setItem(tl,s)},updateApp(e,s){e.appSetting=s,window.localStorage.setItem(ll,JSON.stringify(s));var _=document.querySelector("link[rel~='icon']");_.href=s.small_light_logo_url},updateGlobalSetting(e,s){e.globalSetting=s,window.localStorage.setItem(nl,JSON.stringify(s));var _=document.querySelector("link[rel~='icon']");_.href=s.small_light_logo_url},updateAddMenus(e,s){e.addMenus=s,window.localStorage.setItem(cl,JSON.stringify(s))},updatePerPage(e,s){e.perPage=s,window.localStorage.setItem(ol,s)},updateLang(e,s){e.lang=s,window.localStorage.setItem(dl,s)},updatePageTitle(e,s){e.pageTitle=s,window.localStorage.setItem(il,s),e.appSetting!==null&&e.appSetting!==void 0?document.title=`${s} - ${e.appSetting.name}`:document.title=`${s} - Stockify`},updateDarkTheme(e,s){e.darkTheme=s,window.localStorage.setItem(rl,s)},updateActiveModules(e,s){e.activeModules=s,window.localStorage.setItem(ul,JSON.stringify(s))},updateCssSettings(e,s){e.cssSettings=s,window.localStorage.setItem(ml,JSON.stringify(s))},updateAllLangs(e,s){e.allLangs=s,window.localStorage.setItem(sl,JSON.stringify(s))},updateMenuCollapsed(e,s){e.menuCollapsed=s},updateEmailVerifiedSetting(e,s){e.emailSettingVerified=s,window.localStorage.setItem(pl,s)},updateVisibleSubscriptionModules(e,s){e.visibleSubscriptionModules=s,window.localStorage.setItem(_l,JSON.stringify(s))}},actions:{updateUser(e){axiosAdmin.post("/user").then(function(s){e.commit("updateUser",s.data.user)}).catch(function(s){})},updateGlobalSetting(e){axiosAdmin.get("/global-setting").then(function(s){e.commit("updateGlobalSetting",s.data.global_setting);var _=document.querySelector("link[rel~='icon']");_.href=globalSetting.small_light_logo_url}).catch(function(s){})},updateApp(e){axiosAdmin.get("/app").then(function(s){e.commit("updateApp",s.data.app),e.commit("updateAddMenus",s.data.shortcut_menus.credentials),e.commit("updateEmailVerifiedSetting",s.data.email_setting_verified);var _=document.querySelector("link[rel~='icon']");_.href=s.data.app.small_light_logo_url}).catch(function(s){})},updateAllLangs(e){axiosAdmin.get("/all-langs").then(function(s){e.commit("updateAllLangs",s.data.langs)}).catch(function(s){})},refreshToken(e){const s=e.state.token;s!==""&&s!=="undefined"&&s!="null"&&s!=null&&axiosAdmin.post("/auth/refresh-token").then(function(_){e.commit("updateUser",_.data.user),e.commit("updateToken",_.data.token),e.commit("updateExpires",_.data.expires_in)}).catch(function(_){})},logout(e){axiosAdmin.post("/auth/logout").then(function(s){window.sessionStorage.clear(),e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),e.commit("updateEmailVerifiedSetting",0),Ya.push({name:"admin.login"})}).catch(function(s){})},logoutToRootUrl(e){axiosAdmin.post("/auth/logout").then(function(s){e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),window.location.href=window.config.path}).catch(function(s){})},updateVisibleSubscriptionModules(e){axiosAdmin.post("/visible-subscription-modules").then(function(s){e.commit("updateVisibleSubscriptionModules",s.data)}).catch(function(s){})},showNotificaiton(e,s){Ve.success({message:"Success",description:"Hello",placement:"bottomRight"})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:Da(e.expires).isAfter(Da())}},Is=window.config.modules;var bt={};Is.forEach(e=>{if(e){const s=require(`../../../../Modules/${e}/Resources/assets/js/store/index`).default;bt={...bt,...s}}});const ra=zn({modules:{auth:Os,...bt}}),pe=()=>{const e=I(!1),s=I({}),{t:_}=x(),{appSetting:n}=Z();return{loading:e,rules:s,addEditRequestAdmin:r=>{e.value=!0;const{url:u,data:m,success:p}=r;var h={};Ee(m,function(g,f){g==null?h[f]=null:h[f]=g}),axiosAdmin.post(u,h).then(g=>{if(g&&g.is_error&&g.is_error=="yes"&&g.error&&typeof g.error.details<"u"){var f=g,w={};if(f.error&&typeof f.error.details<"u")for(var k=Object.keys(f.error.details),C=0;C<k.length;C++){var S=k[C].replace(".","\\.");w[S]={required:!0,message:f.error.details[k[C]][0]}}s.value=w,Xe.error(_("common.fix_errors")),f&&f.message&&(Xe.error(f.message),f={error:{...f}}),r.error&&r.error(f),e.value=!1}else r.successMessage&&Ve.success({placement:n.value.rtl?"bottomLeft":"bottomRight",message:_("common.success"),description:r.successMessage}),p(g.data),e.value=!1,s.value={}}).catch(g=>{e.value=!1})},addEditFileRequestAdmin:r=>{e.value=!0;const{url:u,data:m,success:p}=r,h=new FormData;Ee(m,function(g,f){g==null?h.append(f,""):r.fieldTypes&&r.fieldTypes.json&&fa(r.fieldTypes.json,f)?h.append(f,JSON.stringify(g)):r.fieldTypes&&r.fieldTypes.file&&fa(r.fieldTypes.file,f)?h.append(f,g):g&&g.originFileObj?h.append(f,g.originFileObj):h.append(f,g)}),axiosAdmin.post(u,h,{headers:{"Content-Type":"multipart/form-data"}}).then(g=>{if(g&&g.is_error&&g.is_error=="yes"&&g.error&&typeof g.error.details<"u"){var f=g,w={};if(f.error&&typeof f.error.details<"u")for(var k=Object.keys(f.error.details),C=0;C<k.length;C++){var S=k[C].replace(".","\\.");w[S]={required:!0,message:f.error.details[k[C]][0]}}s.value=w,Xe.error(_("common.fix_errors")),f&&f.message&&(Xe.error(f.message),f={error:{...f}}),r.error&&r.error(f),e.value=!1}else r.successMessage&&Ve.success({placement:n.value.rtl?"bottomLeft":"bottomRight",message:_("common.success"),description:r.successMessage}),p(g.data),e.value=!1,s.value={}}).catch(g=>{e.value=!1})}}},Ps=ne({props:["credentials","backgroundColor"],components:{SnippetsOutlined:Nn},setup(){const e=window.config.app_env,s=window.config.app_type,_=I([{title:"Details",dataIndex:"details"},{title:"action",dataIndex:"action"}]),n=I([{name:"Admin",email:"admin@example.com",password:12345678},{name:"Supervisor",email:"jose@gmail.com",password:123}]);return ie(()=>{s=="saas"&&(n.value=[{name:"Supervisor",email:"jose@gmail.com",password:123},...n.value])}),{appEnv:e,demoCredentials:n,demoCredentialsColumns:_}}}),Ms={key:0},Fs=M("br",null,null,-1),Rs=M("br",null,null,-1);function Ls(e,s,_,n,v,y){const r=o("a-divider"),u=o("SnippetsOutlined"),m=o("a-tooltip"),p=o("a-table");return e.appEnv!="envato"?(d(),U("div",Ms,[l(r,{style:{"font-size":"inherit"}},{default:a(()=>[c(i(e.$t("common.demo_account_credentials")),1)]),_:1}),l(p,{pagination:!1,dataSource:e.demoCredentials,columns:e.demoCredentialsColumns,style:we({backgroundColor:e.backgroundColor})},{bodyCell:a(({column:h,record:g})=>[h.dataIndex==="details"?(d(),U(L,{key:0},[M("b",null,i(g.name),1),c(),Fs,c(" Email : "+i(g.email)+" ",1),Rs,c(" Password : "+i(g.password),1)],64)):D("",!0),h.dataIndex==="action"?(d(),b(m,{key:1,onClick:()=>{e.credentials.email=g.email,e.credentials.password=g.password}},{title:a(()=>[c(i(e.$t("popover.click_here_to_copy_credentials",[g.name])),1)]),default:a(()=>[l(u)]),_:2},1032,["onClick"])):D("",!0)]),_:1},8,["dataSource","columns","style"])])):D("",!0)}const Bs=Y(Ps,[["render",Ls]]);function qs(e={locale:"en",warnHtmlMessage:!1}){const s=jn(e);return Vs(s,e.locale),s}function Vs(e,s){e.mode==="legacy"?e.global.locale=s:e.global.locale.value=s,document.querySelector("html").setAttribute("lang",s)}async function Hl(e,s){const _=await axiosBase.get("lang-trans");Wl(_,e,s)}function Wl(e,s,_){const n={};return e.data.data.map(v=>{n[v.key]={},v.translations.map(y=>{n[v.key][y.group]==null&&(n[v.key][y.group]={}),n[v.key][y.group][y.key]=y.value})}),s.global.setLocaleMessage(_,n[_]),at()}const Ks=ne({components:{DemoCredentials:Bs,DownOutlined:Pa},emit:["login"],setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{globalSetting:y,appType:r,appSetting:u}=Z(),m=I(y.value.login_image_url),p=Ke(),h=na(),g=Le({email:null,password:null}),f=I({error:"",success:""}),w=I(y.value.login_card_color),k=I(p.state.auth.lang),{locale:C,t:S}=x();return{loading:n,rules:v,credentials:g,onSubmit:()=>{f.value={error:"",success:!1},_({url:"auth/login",data:g,success:$=>{if($&&$.status=="success"){const P=$.user;p.commit("auth/updateUser",P),p.commit("auth/updateToken",$.token),p.commit("auth/updateExpires",$.expires_in),p.commit("auth/updateVisibleSubscriptionModules",$.visible_subscription_modules),r=="non-saas"?h.push({name:"admin.dashboard.index",params:{success:!0}}):P.is_superadmin&&P.user_type=="super_admins"?(p.commit("auth/updateApp",$.app),p.commit("auth/updateEmailVerifiedSetting",$.email_setting_verified),h.push({name:"superadmin.dashboard.index",params:{success:!0}})):(p.commit("auth/updateApp",$.app),p.commit("auth/updateEmailVerifiedSetting",$.email_setting_verified),p.commit("auth/updateAddMenus",$.shortcut_menus.credentials),h.push({name:"admin.dashboard.index",params:{success:!0}}))}else f.value={error:$.message?$.message:"",success:!1}},error:$=>{}})},onRequestSend:f,globalSetting:y,loginBackgroundImage:m,langSelected:async $=>{p.commit("auth/updateLang",$),await Hl(i18n,$),k.value=$,C.value=$},selectedLang:k,langs:_e(()=>p.state.auth.allLangs),appSetting:u,loginCardColor:w,innerWidth:window.innerWidth}}}),zs={class:"login-logo mb-30"},Ns=["src"],js={style:{color:"white",opacity:"1"}},Hs={style:{color:"white"}},Ws={style:{float:"right",padding:"1px"}},Ys={style:{color:"white"}};function Gs(e,s,_,n,v,y){const r=o("a-col"),u=o("a-alert"),m=o("a-input"),p=o("a-form-item"),h=o("a-input-password"),g=o("a-button"),f=o("a-form"),w=o("DownOutlined"),k=o("a-avatar"),C=o("a-space"),S=o("a-menu-item"),E=o("a-menu"),A=o("a-dropdown"),$=o("DemoCredentials"),P=o("a-card"),T=o("a-row");return d(),U("div",{class:"login-main-container",style:we({backgroundImage:`url(${e.loginBackgroundImage})`})},[l(T,{class:"main-container-div"},{default:a(()=>[l(r,{xs:3,sm:3,md:8,lg:8,class:"opacity"}),l(r,{xs:18,sm:18,md:8,lg:8,class:"card_opacity"},{default:a(()=>[l(T,{class:"login-left-div"},{default:a(()=>[l(r,{xs:{span:24},sm:{span:24},md:{span:16,offset:4},lg:{span:16,offset:4}},{default:a(()=>[l(P,{title:null,class:"login-div",bordered:e.innerWidth<=768,style:we({backgroundColor:e.loginCardColor})},{default:a(()=>[l(f,{layout:"vertical"},{default:a(()=>[M("div",zs,[M("img",{class:"login-img-logo",src:e.globalSetting.light_logo_url},null,8,Ns)]),e.onRequestSend.error!=""?(d(),b(u,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):D("",!0),e.onRequestSend.success?(d(),b(u,{key:1,message:e.$t("messages.login_success"),type:"success","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):D("",!0),l(p,{name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{label:a(()=>[M("span",js,i(e.$t("user.email_phone")),1)]),default:a(()=>[l(m,{value:e.credentials.email,"onUpdate:value":s[0]||(s[0]=F=>e.credentials.email=F),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["help","validateStatus"]),l(p,{name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null,class:"color"},{label:a(()=>[M("span",Hs,i(e.$t("user.password")),1)]),default:a(()=>[l(h,{value:e.credentials.password,"onUpdate:value":s[1]||(s[1]=F=>e.credentials.password=F),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["help","validateStatus"]),l(p,{class:"mt-30"},{default:a(()=>[l(g,{loading:e.loading,onClick:e.onSubmit,class:"login-btn",block:""},{default:a(()=>[c(i(e.$t("menu.login")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1}),M("div",Ws,[l(A,{placement:e.appSetting.rtl?"bottomLeft":"bottomRight"},{overlay:a(()=>[l(E,null,{default:a(()=>[(d(!0),U(L,null,G(e.langs,F=>(d(),b(S,{key:F.key,onClick:V=>e.langSelected(F.key)},{default:a(()=>[l(C,null,{default:a(()=>[l(k,{shape:"square",size:"small",src:F.image_url},null,8,["src"]),c(" "+i(F.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[M("a",{class:"ant-dropdown-link",onClick:s[2]||(s[2]=Hn(()=>{},["prevent"]))},[M("span",Ys,[c(i(e.selectedLang)+" ",1),l(w)])])]),_:1},8,["placement"])]),l($,{credentials:e.credentials,backgroundColor:e.loginCardColor},null,8,["credentials","backgroundColor"])]),_:1},8,["bordered","style"])]),_:1})]),_:1})]),_:1}),l(r,{xs:3,sm:3,md:8,lg:8,class:"opacity"})]),_:1})],4)}const Js=Y(Ks,[["render",Gs]]),Qs=[{path:"/admin/login",component:Js,name:"admin.login",meta:{requireUnauth:!0,menuKey:e=>"login"}}],Xs="modulepreload",Zs=function(e){return"/build/"+e},gl={},la=function(s,_,n){if(!_||_.length===0)return s();const v=document.getElementsByTagName("link");return Promise.all(_.map(y=>{if(y=Zs(y),y in gl)return;gl[y]=!0;const r=y.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!n)for(let h=v.length-1;h>=0;h--){const g=v[h];if(g.href===y&&(!r||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${u}`))return;const p=document.createElement("link");if(p.rel=r?"stylesheet":Xs,r||(p.as="script",p.crossOrigin=""),p.href=y,document.head.appendChild(p),r)return new Promise((h,g)=>{p.addEventListener("load",h),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${y}`)))})})).then(()=>s()).catch(y=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=y,window.dispatchEvent(r),!r.defaultPrevented)throw y})},xs=ne({setup(){return{}}}),ed={class:"breadcrumb-header"};function ad(e,s,_,n,v,y){const r=o("a-col"),u=o("a-row"),m=o("a-card");return d(),U("div",ed,[l(m,{class:"page-content-sub-header breadcrumb-left-border"},{default:a(()=>[l(u,null,{default:a(()=>[l(r,{span:24},{default:a(()=>[ke(e.$slots,"header",{key:"header"})]),_:3}),l(r,{span:24},{default:a(()=>[ke(e.$slots,"breadcrumb",{key:"breadcrumb"})]),_:3})]),_:3})]),_:3})])}const Ce=Y(xs,[["render",ad]]),td=[],ld=["bgColor"],nd=$l("figure",td)`
display: flex;
margin: 0;
position: relative;
h2,
p {
  margin: 0;
}
figcaption {
  .more {
	position: absolute;
	top: 0px;
	left: 0;
	a {
	  color: #888;
	}
  }
  h2 {
	font-size: 20px;
	font-weight: 600;
  }
  p {
	font-size: 14px;
	color: #9299B8;
  }
}
`,od=$l("div",ld)`
  width: 60px;
  height: 60px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: ${e=>e.bgColor?e.bgColor:"#5F63F2"};
margin - right: 20px;
`,sd={props:{bgColor:{default:"#5F63F2"},bodyStyle:{default:{}}},components:{CardWidget:nd,CardWidgetIcon:od},setup(e,{emit:s}){const{themeMode:_}=Z();return{themeMode:_}}};function dd(e,s,_,n,v,y){const r=o("CardWidgetIcon"),u=o("a-space"),m=o("CardWidget"),p=o("a-card");return d(),b(p,{bordered:n.themeMode=="dark",bodyStyle:_.bodyStyle},{default:a(()=>[l(m,null,{default:a(()=>[l(u,null,{default:a(()=>[l(r,{bgColor:_.bgColor},{default:a(()=>[ke(e.$slots,"image")]),_:3},8,["bgColor"]),M("figcaption",null,[ke(e.$slots,"description")])]),_:3})]),_:3})]),_:3},8,["bordered","bodyStyle"])}const Yl=Y(sd,[["render",dd]]);kt.register(...Ct);const id={props:["data"],components:{DoughnutChart:wt.DoughnutChart},setup(e){const s=I(),_=I({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),n=I({});return he(e,(v,y)=>{n.value={labels:v.data.actionedCampaigns?v.data.actionedCampaigns.labels:[],datasets:[{data:v.data.actionedCampaigns?v.data.actionedCampaigns.values:[],backgroundColor:v.data.actionedCampaigns?v.data.actionedCampaigns.colors:[]}]}}),{chartRef:s,testData:n,options:_}}};function rd(e,s,_,n,v,y){const r=o("DoughnutChart");return d(),b(r,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const ud=Y(id,[["render",rd]]);kt.register(...Ct);const md={name:"SalesByTeleopChart",props:["data"],components:{BarChart:wt.BarChart},setup(e){const{t:s}=x(),_=I({labels:[],datasets:[{label:s("dashboard.sales_quantity"),data:[],backgroundColor:[],yAxisID:"yQuantity"},{label:s("dashboard.sales_amount"),data:[],backgroundColor:[],yAxisID:"yAmount"}]}),n=I({responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:s("dashboard.user")}},yQuantity:{type:"linear",position:"left",beginAtZero:!0,title:{display:!0,text:s("dashboard.quantity")},grid:{drawOnChartArea:!0}},yAmount:{type:"linear",position:"right",beginAtZero:!0,title:{display:!0,text:s("dashboard.amount")},grid:{drawOnChartArea:!1}}}});function v(){return"#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}function y(r){const u={};return Object.values(r.ventas).forEach(m=>{m.forEach(p=>{const h=p.agente,g=parseInt(p.total_logs,10),f=parseFloat(p.total_montos);u[h]||(u[h]={quantity:0,amount:0}),u[h].quantity+=g,u[h].amount+=f})}),Object.entries(u).map(([m,p])=>({teleoperatorName:m,quantity:p.quantity,amount:p.amount}))}return he(()=>e.data,r=>{if(!r||!r.ventas){_.value={labels:[],datasets:[{label:s("dashboard.sales_quantity"),data:[],backgroundColor:[],yAxisID:"yQuantity"},{label:s("dashboard.sales_amount"),data:[],backgroundColor:[],yAxisID:"yAmount"}]};return}const u=y(r),m=u.map(w=>w.teleoperatorName),p=u.map(w=>w.quantity),h=u.map(w=>w.amount),g=m.map(()=>v()),f=m.map(()=>v());_.value.labels=m,_.value.datasets[0].data=p,_.value.datasets[0].backgroundColor=g,_.value.datasets[1].data=h,_.value.datasets[1].backgroundColor=f},{immediate:!0,deep:!0}),{testData:_,salesByTeleopOptions:n}}};function cd(e,s,_,n,v,y){const r=o("BarChart");return d(),b(r,{chartData:n.testData,options:n.salesByTeleopOptions},null,8,["chartData","options"])}const pd=Y(md,[["render",cd]]);kt.register(...Ct);const _d={props:["data"],components:{BarChart:wt.BarChart},setup(e){const{t:s}=x(),_=I(),n=I({responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45,autoSkip:!1,font:{size:10}}},y:{beginAtZero:!0,title:{display:!0,text:s("dashboard.total_calls")}}}}),v=I({labels:[],datasets:[{label:s("dashboard.total_calls"),data:[],backgroundColor:[]}]});return he(()=>e.data.callMade,y=>{if(!y||!Array.isArray(y.dates)||!Array.isArray(y.series)){v.value={labels:[],datasets:[{label:s("dashboard.total_calls"),data:[],backgroundColor:[]}]};return}const r=y.dates,u=y.series,m=[],p=[],h=[];r.forEach(g=>{u.forEach(f=>{m.push(`${g} – ${f.user}`);const w=r.indexOf(g),k=f.counts[w]||0;p.push(k),h.push(f.color||"#333333")})}),v.value={labels:m,datasets:[{label:s("dashboard.total_calls"),data:p,backgroundColor:h}]}},{immediate:!0}),{chartRef:_,chartData:v,options:n}}};function fd(e,s,_,n,v,y){const r=o("BarChart");return d(),b(r,{ref:"chartRef",chartData:n.chartData,options:n.options},null,8,["chartData","options"])}const gd=Y(_d,[["render",fd]]),sa=()=>{const e=I({}),s=I(!1);return{viewDrawerData:e,isViewDrawerVisible:s,showViewDrawer:v=>{e.value=v,s.value=!0},hideViewDrawer:()=>{e.value={},s.value=!1}}},hd={props:["responseData"],components:{PlayCircleOutlined:oa,EyeOutlined:aa},setup(){const e=na(),{formatDateTime:s}=Z(),_=sa(),{t:n}=x(),v=I([{title:n("lead.campaign"),dataIndex:"campaign"},{title:n("salesman.salesman"),dataIndex:"salesman"},{title:n("lead.booking_time"),dataIndex:"booking_time"},{title:n("common.action"),dataIndex:"action"}]);return{formatDateTime:s,..._,appointmentColumns:v,goAndResumeLead:r=>{Ne.confirm({title:n("common.are_you_sure")+"?",icon:l(De),content:n("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:n("common.yes"),okType:"danger",cancelText:n("common.no"),onOk(){e.push({name:"admin.call_manager.take_action",params:{id:r.xid}})},onCancel(){}})}}}};function vd(e,s,_,n,v,y){const r=o("PlayCircleOutlined"),u=o("a-button"),m=o("EyeOutlined"),p=o("a-space"),h=o("a-tooltip"),g=o("a-table"),f=o("view-lead-details");return d(),U(L,null,[l(g,{columns:n.appointmentColumns,"row-key":w=>w.xid,"data-source":_.responseData.allAppointments,pagination:!1},{bodyCell:a(({column:w,record:k})=>[w.dataIndex==="campaign"?(d(),U(L,{key:0},[c(i(k.campaign.name),1)],64)):D("",!0),w.dataIndex==="salesman"?(d(),U(L,{key:1},[c(i(k.salesman_booking&&k.salesman_booking.user&&k.salesman_booking.user.name?k.salesman_booking.user.name:""),1)],64)):D("",!0),w.dataIndex==="booking_time"?(d(),U(L,{key:2},[c(i(k.salesman_booking&&k.salesman_booking.date_time?n.formatDateTime(k.salesman_booking.date_time):""),1)],64)):D("",!0),w.dataIndex==="action"?(d(),b(h,{key:3,title:e.$t("lead.go_resume_call")},{default:a(()=>[l(p,null,{default:a(()=>[l(u,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>n.goAndResumeLead(k)},{icon:a(()=>[l(r)]),_:2},1032,["onClick"]),l(u,{type:"primary",onClick:C=>e.showViewDrawer(k)},{icon:a(()=>[l(m)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):D("",!0)]),_:1},8,["columns","row-key","data-source"]),l(f,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const bd=Y(hd,[["render",vd]]),yd={props:["responseData"],components:{PlayCircleOutlined:oa,EyeOutlined:aa},setup(){const e=na(),{formatDateTime:s}=Z(),_=sa(),{t:n}=x(),v=I([{title:n("lead.campaign"),dataIndex:"campaign"},{title:n("common.action"),dataIndex:"action"}]);return{formatDateTime:s,..._,appointmentColumns:v,goAndResumeLead:r=>{Ne.confirm({title:n("common.are_you_sure")+"?",icon:l(De),content:n("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:n("common.yes"),okType:"danger",cancelText:n("common.no"),onOk(){e.push({name:"admin.formsUCB.CRM",params:{id:r.xid}})},onCancel(){}})}}}},kd=M("br",null,null,-1);function Cd(e,s,_,n,v,y){const r=o("PlayCircleOutlined"),u=o("a-button"),m=o("EyeOutlined"),p=o("a-space"),h=o("a-tooltip"),g=o("a-table"),f=o("view-lead-details");return d(),U(L,null,[l(g,{columns:n.appointmentColumns,"row-key":w=>w.xid,"data-source":_.responseData.allFollowUps,pagination:!1},{bodyCell:a(({column:w,record:k})=>[w.dataIndex==="campaign"?(d(),U(L,{key:0},[c(i(k.campaign.name)+" ",1),kd,M("small",null,i(k.lead_follow_up&&k.lead_follow_up.date_time?n.formatDateTime(k.lead_follow_up.date_time):""),1)],64)):D("",!0),w.dataIndex==="action"?(d(),b(h,{key:1,title:e.$t("lead.go_resume_call")},{default:a(()=>[l(p,null,{default:a(()=>[l(u,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>n.goAndResumeLead(k)},{icon:a(()=>[l(r)]),_:2},1032,["onClick"]),l(u,{type:"primary",onClick:C=>e.showViewDrawer(k)},{icon:a(()=>[l(m)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):D("",!0)]),_:1},8,["columns","row-key","data-source"]),l(f,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const wd=Y(yd,[["render",Cd]]),Sd=ne({props:{dateRange:{default:[]}},emits:["dateTimeChanged"],setup(e,{emit:s}){const{locale:_}=x(),n=_e(()=>_.value==="en"?St:$t);he(_,p=>{r.locale(p)});const v=I([]),{appSetting:y,dayjs:r}=Z();return ie(()=>{e.dateRange&&e.dateRange.length>0&&(v.value=[r(e.dateRange[0]),r(e.dateRange[1])])}),{antdLocale:n,appSetting:y,dateRangeValue:v,dateTimeChanged:p=>{p?s("dateTimeChanged",[p[0].tz(y.value.timezone).startOf("day").utc().format("YYYY-MM-DD HH:mm:ss"),p[1].tz(y.value.timezone).utc().format("YYYY-MM-DD HH:mm:ss")]):s("dateTimeChanged",[])},resetPicker:()=>{v.value=[]}}}});function $d(e,s,_,n,v,y){const r=o("a-range-picker"),u=o("a-config-provider");return d(),b(u,{locale:e.antdLocale},{default:a(()=>[l(r,{value:e.dateRangeValue,"onUpdate:value":s[0]||(s[0]=m=>e.dateRangeValue=m),format:e.appSetting.date_format,placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:e.dateTimeChanged},null,8,["value","format","placeholder","onChange"])]),_:1},8,["locale"])}const qa=Y(Sd,[["render",$d]]);const Ad={components:{AdminPageHeader:Ce,StateWidget:Yl,ActionedCampaigns:ud,graficoVentas:pd,CallMade:gd,SalesmanBooking:bd,Followups:wd,DateRangePicker:qa,MobileOutlined:tt,CopyrightCircleOutlined:Al,ClockCircleOutlined:At,ScheduleOutlined:lt,DoubleRightOutlined:ya},setup(){const{formatTimeDuration:e,permsArray:s}=Z();x();const _=I([]),n=Le({dates:[],usuarioPermitido:!!(s.value.includes("leads_view_all")||s.value.includes("admin"))});ie(()=>{v()});const v=()=>{const y=axiosAdmin.post("dashboard",n);Promise.all([y]).then(([r])=>{_.value=r.data})};return he([n],(y,r)=>{v()}),{formatTimeDuration:e,filters:n,responseData:_,permsArray:s}}},Dd={class:"dashboard-page-content-container"},Td={class:"mt-30 mb-20"},Ed={key:0},Ud={key:0},Od={key:0};function Id(e,s,_,n,v,y){const r=o("a-page-header"),u=o("AdminPageHeader"),m=o("DateRangePicker"),p=o("a-col"),h=o("a-row"),g=o("ActionedCampaigns"),f=o("a-card"),w=o("graficoVentas"),k=o("CopyrightCircleOutlined"),C=o("StateWidget"),S=o("MobileOutlined"),E=o("ClockCircleOutlined"),A=o("CallMade"),$=o("DoubleRightOutlined"),P=o("a-button");return d(),U(L,null,[l(u,null,{header:a(()=>[l(r,{title:e.$t("menu.dashboard"),style:{padding:"0px"}},null,8,["title"])]),_:1}),M("div",Dd,[l(h,{gutter:[8,8],class:"mt-30 mb-10"},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(m,{ref:"serachDateRangePicker",onDateTimeChanged:s[0]||(s[0]=T=>n.filters.dates=T)},null,512)]),_:1})]),_:1}),l(h,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24,xl:12},{default:a(()=>[l(f,{title:e.$t("dashboard.active_actioned_campaigns")},{default:a(()=>[l(g,{data:n.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1}),l(p,{style:{"max-height":"fit-content"},xs:24,sm:24,md:24,lg:24,xl:12},{default:a(()=>[l(f,{title:e.$t("dashboard.sales_user")},{default:a(()=>[l(w,{data:n.responseData.ventasMontos},null,8,["data"])]),_:1},8,["title"])]),_:1})]),_:1}),M("div",Td,[l(h,{gutter:[15,15]},{default:a(()=>[l(p,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[l(C,{bgColor:"#08979c"},{image:a(()=>[l(k,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(d(),U("h2",Ed,i(n.responseData.stateData.campaign_count),1)):D("",!0),M("p",null,i(e.$t("dashboard.active_campaigns")),1)]),_:1})]),_:1}),l(p,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[l(C,{bgColor:"#d46b08"},{image:a(()=>[l(S,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(d(),U("h2",Ud,i(n.responseData.stateData.lead_count),1)):D("",!0),M("p",null,i(e.$t("dashboard.call_made")),1)]),_:1})]),_:1}),l(p,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[l(C,{bgColor:"#ffa39e"},{image:a(()=>[l(E,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(d(),U("h2",Od,[M("small",null,i(n.formatTimeDuration(n.responseData.stateData.total_times)),1)])):D("",!0),M("p",null,i(e.$t("dashboard.total_duration")),1)]),_:1})]),_:1})]),_:1})]),n.permsArray.includes("users_view")||n.permsArray.includes("admin")?(d(),b(h,{key:0,gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[l(f,{title:e.$t("dashboard.call_made")},{extra:a(()=>[l(P,{class:"mt-10",type:"link",onClick:s[1]||(s[1]=T=>e.$router.push({name:"admin.leads.index"}))},{default:a(()=>[c(i(e.$t("common.view_all"))+" ",1),l($)]),_:1})]),default:a(()=>[l(A,{data:n.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1})]),_:1})):D("",!0)])],64)}const Pd=Y(Ad,[["render",Id]]),Md=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/dashboard",component:Pd,name:"admin.dashboard.index",meta:{requireAuth:!0,menuParent:"dashboard",menuKey:e=>"dashboard"}}]}],Gl=()=>{const{t:e}=x(),s="users?fields=id,xid,ucontact,ucontact_user,ucontact_password,is_sellers,notes,user_type,name,email,user,profile_image,profile_image_url,phone,address,status,created_at,role_id,x_role_id,role{id,xid,name,display_name}",_="users",n=["role_id"],v={name:"",user:"",email:"",password:"",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled",user_type:"staff_members",role_id:void 0,ucontact:1,notes:"",is_sellers:1,ucontact_user:"",ucontact_password:""},y=[{title:e("user.id"),dataIndex:"id",key:"id"},{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.user"),dataIndex:"user"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],r=[{key:"name",value:e("user.name")},{key:"email",value:e("user.email")},{key:"phone",value:e("user.phone")}];return{url:s,initData:v,columns:y,filterableColumns:r,addEditUrl:_,hashableColumns:n}},rt=()=>{const e=Ke(),s=Le({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1,sorter:{},searchColumn:void 0,searchString:"",searchStatus:void 0,filterLoading:!1,filterableColumns:[],selectedRowKeys:[],tableColumns:[]}),_=I(1),n=I({}),v=I([]),y=I(""),r=I({allowExport:!1,exportType:""}),u=k=>{const C=k.limit,S=(k.page-1)*C,E=p(n.value.url,C,S);return y.value=E,axiosAdmin.get(E)},m=k=>{const C=s.pagination.pageSize,S=(_.value-1)*C;return p(k,C,S)},p=(k,C,S)=>{var E="",A="",$=!1,P=!1;if("filterString"in n.value&&n.value.filterString!=""&&typeof n.value.filterString=="string"&&(E+=`${n.value.filterString} and `,$=!0),typeof n.value.filters=="object"&&Nt(n.value.filters,(F,V)=>{F!=null&&F!=""&&(E+=`${V} eq "${F}" and `,$=!0,fa(v.value,V)&&(A+=`${F},`,P=!0))}),s.searchColumn!=null&&s.searchString!="")E+=`${s.searchColumn} lk "%${s.searchString}%" and `,$=!0,s.filterLoading=!0;else if(s.searchString!=""&&s.filterableColumns.length>0){var T="";Ee(s.filterableColumns,F=>{T+=`${F.key} lk "%${s.searchString}%" or `}),T.length>0&&(E+=`(${T.substring(0,T.length-3)})`,$=!1),s.filterLoading=!0}if(E.length>0&&$==!0?k+=`&filters=${encodeURIComponent(E.substring(0,E.length-5))}`:E.length>0&&$==!1&&(k+=`&filters=${encodeURIComponent(E)}`),n.value.extraFilters&&typeof n.value.extraFilters=="object"&&Nt(n.value.extraFilters,(F,V)=>{F!=null&&F!=""&&(k+=`&${V}=${F}`,fa(v.value,V)&&(A+=`${F},`,P=!0))}),s.sorter&&s.sorter.field){const F=s.sorter.order=="ascend"||s.sorter.order=="asc"?"asc":"desc";k+=`&order=${s.sorter.field} ${F}`}else k+="&order=id desc";return k+=`&offset=${S}&limit=${C}`,P&&(A=A.substring(0,A.length-1),k+=`&hashable=${A}`),k},h=(k,C,S)=>{const E={...s.pagination};E.current=k.current,E.pageSize=k.pageSize,s.pagination=E,_.value=k.current,S=s.sorter,g({limit:k.pageSize,page:k.current,sortField:S.field,sortOrder:S.order,...C})},g=(k={})=>{s.loading=!0,u({limit:s.pagination.pageSize,page:_.value,...k}).then(C=>{const S=C.data,E={...s.pagination};if(E.total=C.meta.paging.total,s.loading=!1,s.data=S,s.pagination=E,s.filterLoading=!1,s.selectedRowKeys=[],r.value.allowExport){var A=r.value.exportType;if(A!=""){var $=e.state.auth.allExportData,P=Dt($,T=>T.export_type!=A);e.commit("auth/updatAllExportData",[...P,{export_type:A,data:S,url:y.value}])}}k.success!=null&&k.success(S)})},f=Dl(()=>{g({page:1})},400);return{table:s,tableUrl:n,exportDetails:r,currentPage:_,hashable:v,getUrlWithQueryStringFromUrl:m,handleTableChange:h,fetch:g,onTableSearch:f,onRowSelectChange:k=>{s.selectedRowKeys=k}}},Fe=()=>{const{table:e,tableUrl:s,hashable:_,getUrlWithQueryStringFromUrl:n,currentPage:v,handleTableChange:y,fetch:r,onTableSearch:u,onRowSelectChange:m,exportDetails:p}=rt(),h=I(!1),g=I({}),f=I(""),w=I(""),k=I({}),C=I([]),S=I({}),E=I(!1),A=I("add"),$=I(""),P=I({}),{t:T}=x(),F=Ke(),V=oe=>{h.value=!0,g.value=oe},z=()=>{$.value=f.value,A.value="add",E.value=!0,g.value={}},K=()=>{ue(),E.value=!1},B=()=>{h.value=!1,g.value={}},R=oe=>{const se={};var H=S.value;Object.keys(k.value).forEach(ae=>{if(Wn(H,ae)){const ce=H[ae];se[ae]=Yn(oe,ce)}else fa(C.value,ae)?se[ae]=oe[`x_${ae}`]:se[ae]=oe[ae]}),se._method="PUT",P.value=se,g.value=oe,$.value=`${f.value}/${oe.xid}`,A.value="edit",E.value=!0},O=()=>{F.dispatch("auth/updateVisibleSubscriptionModules")},W=oe=>{j(oe,"add-edit")},q=oe=>{j(oe,"add-new")},N=oe=>{j(oe,"add-continue")},j=(oe,se="add-edit")=>{if(A.value=="add"){const H={...e.pagination};H.current=1,v.value=1,e.pagination=H}O(),(se=="add-edit"||se=="add-new")&&ue(),r({page:A.value=="add"?1:v.value,limit:10}),se=="add-edit"&&(E.value=!1)},te=oe=>{Ne.confirm({title:T("common.delete")+"?",icon:l(De),content:T(`${w.value}.delete_message`),centered:!0,okText:T("common.yes"),okType:"danger",cancelText:T("common.no"),onOk(){return axiosAdmin.delete(`${f.value}/${oe}`).then(se=>{O(),r({page:v.value}),Ve.success({message:T("common.success"),description:T(`${w.value}.deleted`),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},le=()=>{Ne.confirm({title:T("common.delete")+"?",icon:l(De),content:T(`${w.value}.selected_delete_message`),centered:!0,okText:T("common.yes"),okType:"danger",cancelText:T("common.no"),onOk(){const oe=[];Ee(e.selectedRowKeys,se=>{oe.push(axiosAdmin.delete(`${f.value}/${se}`))}),Promise.all(oe).then(se=>{O(),r({page:v.value}),Ve.success({message:T("common.success"),description:T(`${w.value}.deleted`),placement:"bottomRight"})})},onCancel(){}})},ue=()=>{P.value={...k.value}},ee=oe=>{P.value={...P.value,...oe}},ve=_e(()=>w.value!=""?A.value=="add"?T(`${w.value}.add`):T(`${w.value}.edit`):""),X=_e(()=>w.value!=""?A.value=="add"?T(`${w.value}.created`):T(`${w.value}.updated`):"");return he(C,(oe,se)=>{_.value=oe}),{detailsVisible:h,viewData:g,onCloseDetails:B,addEditVisible:E,addEditType:A,addEditUrl:$,currentPage:v,formData:P,initData:k,crudUrl:f,langKey:w,hashableColumns:C,multiDimensalObjectColumns:S,pageTitle:ve,successMessage:X,viewItem:V,addItem:z,editItem:R,onCloseAddEdit:K,showDeleteConfirm:te,addEditSuccess:W,addAndNewSuccess:q,addAndContinueSuccess:N,restFormData:ue,assignNewFormData:ee,showSelectedDeleteConfirm:le,table:e,tableUrl:s,hashable:_,getUrlWithQueryStringFromUrl:n,handleTableChange:y,fetch:r,onTableSearch:u,onRowSelectChange:m,exportDetails:p}};const Fd=ne({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"upload-file",type:String}},components:{LoadingOutlined:ze,PlusOutlined:de},setup(e,{emit:s}){const _=I([]),n=I(!1),{t:v}=x();return{fileList:_,loading:n,customRequest:r=>{const u=new FormData;u.append("image",r.file),u.append("folder",e.folder),n.value=!0,axiosAdmin.post(e.url,u,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{_.value=[],n.value=!1,s("onFileUploaded",{file:m.data.file,file_url:m.data.file_url})}).catch(()=>{n.value=!1,Xe.error(v("messages.uploading_failed"))})}}}}),Rd={key:0},Ld=["src"],Bd={key:1},qd={class:"ant-upload-text"};function Vd(e,s,_,n,v,y){const r=o("loading-outlined"),u=o("plus-outlined"),m=o("a-upload");return d(),b(m,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=p=>e.fileList=p),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:a(()=>[e.formData[e.imageField]!=null?(d(),U("div",Rd,[M("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,Ld)])):(d(),U("div",Bd,[e.loading?(d(),b(r,{key:0})):(d(),b(u,{key:1})),M("div",qd,i(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const ka=Y(Fd,[["render",Vd]]),Jl=()=>{const e="roles?fields=id,xid,name,display_name,description,perms.limit(10000)",s="roles",{t:_}=x(),n=Le({permissions:[]}),v={name:"",display_name:"",description:"",permissions:[]},y=[{title:_("role.id"),dataIndex:"id",sorter:!0},{title:_("role.role_name"),dataIndex:"display_name",sorter:!0},{title:_("role.description"),dataIndex:"description"},{title:_("common.action"),dataIndex:"action"}],r=[{key:"name",value:_("role.role_name")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,preFetchData:n,getPreFetchData:()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(m=>{n.permissions=m.data})}}};const Kd=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y=I([]);x();const r=I([]),u=I([]),{slugify:m}=Z();ie(()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(g=>{const f=[];g.data.map(w=>{f[w.name]=w.xid}),r.value=f})});const p=()=>{const g={...e.formData,permissions:u.value};_({url:e.url,data:g,successMessage:e.successMessage,success:f=>{s("addEditSuccess",f.xid)}})},h=()=>{v.value={},s("closed")};return he(()=>e.visible,(g,f)=>{g&&e.addEditType=="edit"?e.data.perms.forEach(w=>{u.value.push(w.xid)}):u.value=[]}),{loading:n,rules:v,onClose:h,onSubmit:p,roles:y,permissions:r,drawerWidth:window.innerWidth<=991?"90%":"60%",checkedPermissions:u,slugify:m}}}),zd={class:"d-flex flex-column scroll-y"},Nd={class:"tbl-responsive"},jd={class:"table align-middle table-row-dashed row-gap"},Hd={class:"text-gray-600 fw-bold"},Wd={class:"text-gray-800"},Yd={class:"d-flex"},Gd={class:"form-check form-check-custom me-5 me-lg-20"},Jd={class:"text-gray-800"},Qd={class:"d-flex"},Xd={class:"form-check form-check-custom me-5 me-lg-20"},Zd={class:"form-check form-check-custom me-5 me-lg-20"},xd={class:"form-check form-check-custom me-5 me-lg-20"},ei={class:"form-check form-check-custom me-5 me-lg-20"},ai={class:"text-gray-800"},ti={class:"d-flex"},li={class:"form-check form-check-custom me-5 me-lg-20"},ni={class:"form-check form-check-custom me-5 me-lg-20"},oi={class:"form-check form-check-custom me-5 me-lg-20"},si={class:"form-check form-check-custom"},di={class:"text-gray-800"},ii={class:"d-flex"},ri={class:"form-check form-check-custom me-5 me-lg-20"},ui={class:"form-check form-check-custom me-5 me-lg-20"},mi={class:"form-check form-check-custom me-5 me-lg-20"},ci={class:"form-check form-check-custom me-5 me-lg-20"},pi={class:"text-gray-800"},_i={class:"d-flex"},fi={class:"form-check form-check-custom me-5 me-lg-20"},gi={class:"form-check form-check-custom me-5 me-lg-20"},hi={class:"text-gray-800"},vi={class:"d-flex"},bi={class:"form-check form-check-custom me-5 me-lg-20"},yi={class:"form-check form-check-custom me-5 me-lg-20"},ki={class:"form-check form-check-custom me-5 me-lg-20"},Ci={class:"form-check form-check-custom me-5 me-lg-20"},wi={class:"form-check form-check-custom me-5 me-lg-20"},Si={class:"form-check form-check-custom me-5 me-lg-20"},$i={class:"form-check form-check-custom me-5 me-lg-20"},Ai={class:"text-gray-800"},Di={class:"d-flex"},Ti={class:"form-check form-check-custom me-5 me-lg-20"},Ei={class:"form-check form-check-custom me-5 me-lg-20"},Ui={class:"form-check form-check-custom me-5 me-lg-20"},Oi={class:"text-gray-800"},Ii={class:"d-flex"},Pi={class:"form-check form-check-custom me-5 me-lg-20"},Mi={class:"form-check form-check-custom me-5 me-lg-20"},Fi={class:"text-gray-800"},Ri={class:"d-flex"},Li={class:"form-check form-check-custom me-5 me-lg-20"},Bi={class:"form-check form-check-custom me-5 me-lg-20"},qi={class:"form-check form-check-custom me-5 me-lg-20"},Vi={class:"form-check form-check-custom me-5 me-lg-20"},Ki={class:"text-gray-800"},zi={class:"d-flex"},Ni={class:"form-check form-check-custom me-5 me-lg-20"},ji={class:"form-check form-check-custom me-5 me-lg-20"},Hi={class:"form-check form-check-custom me-5 me-lg-20"},Wi={class:"form-check form-check-custom me-5 me-lg-20"},Yi={class:"text-gray-800"},Gi={class:"d-flex"},Ji={class:"form-check form-check-custom me-5 me-lg-20"},Qi={class:"form-check form-check-custom me-5 me-lg-20"},Xi={class:"form-check form-check-custom me-5 me-lg-20"},Zi={class:"form-check form-check-custom me-5 me-lg-20"},xi={class:"text-gray-800"},er={class:"d-flex"},ar={class:"form-check form-check-custom me-5 me-lg-20"},tr={class:"form-check form-check-custom me-5 me-lg-20"},lr={class:"form-check form-check-custom me-5 me-lg-20"},nr={class:"form-check form-check-custom me-5 me-lg-20"},or={class:"text-gray-800"},sr={class:"d-flex"},dr={class:"form-check form-check-custom me-5 me-lg-20"},ir={class:"form-check form-check-custom me-5 me-lg-20"},rr={class:"form-check form-check-custom me-5 me-lg-20"},ur={class:"form-check form-check-custom me-5 me-lg-20"},mr={class:"text-gray-800"},cr={class:"d-flex"},pr={class:"form-check form-check-custom me-5 me-lg-20"},_r={class:"form-check form-check-custom me-5 me-lg-20"},fr={class:"form-check form-check-custom me-5 me-lg-20"},gr={class:"form-check form-check-custom me-5 me-lg-20"},hr={class:"text-gray-800"},vr={class:"d-flex"},br={class:"form-check form-check-custom me-5 me-lg-20"},yr={class:"text-gray-800"},kr={class:"d-flex"},Cr={class:"form-check form-check-custom me-5 me-lg-20"},wr={class:"form-check form-check-custom me-5 me-lg-20"},Sr={class:"text-gray-800"},$r={class:"d-flex"},Ar={class:"form-check form-check-custom me-5 me-lg-20"},Dr={class:"form-check form-check-custom me-5 me-lg-20"},Tr={class:"form-check form-check-custom me-5 me-lg-20"},Er={class:"form-check form-check-custom me-5 me-lg-20"},Ur={class:"text-gray-800"},Or={class:"d-flex"},Ir={class:"form-check form-check-custom me-5 me-lg-20"},Pr={class:"text-gray-800"},Mr={class:"d-flex"},Fr={class:"form-check form-check-custom me-5 me-lg-20"},Rr={class:"form-check form-check-custom me-5 me-lg-20"},Lr={class:"form-check form-check-custom me-5 me-lg-20"},Br={class:"form-check form-check-custom"},qr={class:"text-gray-800"},Vr={class:"d-flex"},Kr={class:"form-check form-check-custom me-5 me-lg-20"},zr={class:"form-check form-check-custom me-5 me-lg-20"},Nr={class:"form-check form-check-custom me-5 me-lg-20"},jr={class:"form-check form-check-custom"},Hr={class:"text-gray-800"},Wr={class:"d-flex"},Yr={class:"form-check form-check-custom me-5 me-lg-20"},Gr={class:"form-check form-check-custom me-5 me-lg-20"},Jr={class:"form-check form-check-custom me-5 me-lg-20"},Qr={class:"form-check form-check-custom"},Xr={class:"text-gray-800"},Zr={class:"d-flex"},xr={class:"form-check form-check-custom me-5 me-lg-20"};function eu(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-textarea"),g=o("a-checkbox"),f=o("a-checkbox-group"),w=o("a-form"),k=o("SaveOutlined"),C=o("a-button"),S=o("a-drawer");return d(),b(S,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(C,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[l(k)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(C,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(w,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("role.display_name"),name:"display_name",help:e.rules.display_name?e.rules.display_name.message:null,validateStatus:e.rules.display_name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.display_name,"onUpdate:value":s[0]||(s[0]=E=>e.formData.display_name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.display_name")]),onKeyup:s[1]||(s[1]=E=>e.formData.name=e.slugify(E.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("role.role_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=E=>e.formData.name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.role_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("role.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[l(h,{value:e.formData.description,"onUpdate:value":s[3]||(s[3]=E=>e.formData.description=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("role.permissions"),name:"permissions",help:e.rules.permissions?e.rules.permissions.message:null,validateStatus:e.rules.permissions?"error":null},{default:a(()=>[M("div",zd,[M("div",Nd,[l(f,{value:e.checkedPermissions,"onUpdate:value":s[4]||(s[4]=E=>e.checkedPermissions=E)},{default:a(()=>[M("table",jd,[M("tbody",Hd,[M("tr",null,[M("td",Wd,i(e.$t("menu.forms")),1),M("td",null,[M("div",Yd,[M("label",Gd,[l(g,{value:e.permissions.forms_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Jd,i(e.$t("menu.categories")),1),M("td",null,[M("div",Qd,[M("label",Xd,[l(g,{value:e.permissions.categories_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",Zd,[l(g,{value:e.permissions.categories_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",xd,[l(g,{value:e.permissions.categories_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",ei,[l(g,{value:e.permissions.categories_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",ai,i(e.$t("menu.products")),1),M("td",null,[M("div",ti,[M("label",li,[l(g,{value:e.permissions.products_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",ni,[l(g,{value:e.permissions.products_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",oi,[l(g,{value:e.permissions.products_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",si,[l(g,{value:e.permissions.products_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",di,i(e.$t("menu.staff_members")),1),M("td",null,[M("div",ii,[M("label",ri,[l(g,{value:e.permissions.users_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",ui,[l(g,{value:e.permissions.users_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",mi,[l(g,{value:e.permissions.users_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",ci,[l(g,{value:e.permissions.users_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",pi,i(e.$t("campaign.campaign_view")),1),M("td",null,[M("div",_i,[M("label",fi,[l(g,{value:e.permissions.campaigns_view_all},{default:a(()=>[c(i(e.$t("common.view_all")),1)]),_:1},8,["value"])]),M("label",gi,[l(g,{value:e.permissions.view_completed_campaigns},{default:a(()=>[c(i(e.$t("campaign.view_completed_campaigns")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",hi,i(e.$t("menu.campaigns")),1),M("td",null,[M("div",vi,[M("label",bi,[l(g,{value:e.permissions.campaigns_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",yi,[l(g,{value:e.permissions.campaigns_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",ki,[l(g,{value:e.permissions.campaigns_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Ci,[l(g,{value:e.permissions.bases_view},{default:a(()=>[c(i(e.$t("common.add")+" "+e.$t("bases.bases")),1)]),_:1},8,["value"])]),M("label",wi,[l(g,{value:e.permissions.campaigns_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])]),M("label",Si,[l(g,{value:e.permissions.campaigns_recycle},{default:a(()=>[c(i(e.$t("common.campaigns_recycle")),1)]),_:1},8,["value"])]),M("label",$i,[l(g,{value:e.permissions.export_leads},{default:a(()=>[c(i(e.$t("common.export_leads")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Ai,i(e.$t("menu.leads")),1),M("td",null,[M("div",Di,[M("label",Ti,[l(g,{value:e.permissions.leads_view_all},{default:a(()=>[c(i(e.$t("common.view_all")),1)]),_:1},8,["value"])]),M("label",Ei,[l(g,{value:e.permissions.leads_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Ui,[l(g,{value:e.permissions.leads_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Oi,i(e.$t("common.notes")),1),M("td",null,[M("div",Ii,[M("label",Pi,[l(g,{value:e.permissions.notes_edit},{default:a(()=>[c(i(e.$t("notes.edit")),1)]),_:1},8,["value"])]),M("label",Mi,[l(g,{value:e.permissions.notes_delete},{default:a(()=>[c(i(e.$t("notes.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Fi,i(e.$t("menu.sales")),1),M("td",null,[M("div",Ri,[M("label",Li,[l(g,{value:e.permissions.sales_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",Bi,[l(g,{value:e.permissions.sales_add},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",qi,[l(g,{value:e.permissions.sales_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Vi,[l(g,{value:e.permissions.sales_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Ki,i(e.$t("menu.quality")),1),M("td",null,[M("div",zi,[M("label",Ni,[l(g,{value:e.permissions.quality_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",ji,[l(g,{value:e.permissions.quality_add},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Hi,[l(g,{value:e.permissions.quality_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Wi,[l(g,{value:e.permissions.quality_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Yi,i(e.$t("menu.templates")),1),M("td",null,[M("div",Gi,[M("label",Ji,[l(g,{value:e.permissions.plantillas_calidad_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",Qi,[l(g,{value:e.permissions.plantillas_calidad_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Xi,[l(g,{value:e.permissions.plantillas_calidad_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Zi,[l(g,{value:e.permissions.plantillas_calidad_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",xi,i(`${e.$t("menu.actions")}, ${e.$t("common.closures")} & ${e.$t("common.improvement_options")}`),1),M("td",null,[M("div",er,[M("label",ar,[l(g,{value:e.permissions.acciones_calidad_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",tr,[l(g,{value:e.permissions.acciones_calidad_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",lr,[l(g,{value:e.permissions.acciones_calidad_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",nr,[l(g,{value:e.permissions.acciones_calidad_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",or,i(e.$t("menu.reasons_cancellation")),1),M("td",null,[M("div",sr,[M("label",dr,[l(g,{value:e.permissions.motivos_calidad_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",ir,[l(g,{value:e.permissions.motivos_calidad_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",rr,[l(g,{value:e.permissions.motivos_calidad_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",ur,[l(g,{value:e.permissions.motivos_calidad_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",mr,i(e.$t("menu.notes_typifications")),1),M("td",null,[M("div",cr,[M("label",pr,[l(g,{value:e.permissions.notes_typifications_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",_r,[l(g,{value:e.permissions.notes_typifications_add},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",fr,[l(g,{value:e.permissions.notes_typifications_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",gr,[l(g,{value:e.permissions.notes_typifications_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",hr,i(e.$t("menu.company")),1),M("td",null,[M("div",vr,[M("label",br,[l(g,{value:e.permissions.companies_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",yr,i(e.$t("menu.password_settings")),1),M("td",null,[M("div",kr,[M("label",Cr,[l(g,{value:e.permissions.password_settings_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",wr,[l(g,{value:e.permissions.password_settings_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Sr,i(e.$t("menu.lead_status")),1),M("td",null,[M("div",$r,[M("label",Ar,[l(g,{value:e.permissions.lead_status_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",Dr,[l(g,{value:e.permissions.lead_status_add},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Tr,[l(g,{value:e.permissions.lead_status_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Er,[l(g,{value:e.permissions.lead_status_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Ur,i(e.$t("menu.audits")),1),M("td",null,[M("div",Or,[M("label",Ir,[l(g,{value:e.permissions.audits_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Pr,i(e.$t("menu.translations")),1),M("td",null,[M("div",Mr,[M("label",Fr,[l(g,{value:e.permissions.translations_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",Rr,[l(g,{value:e.permissions.translations_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Lr,[l(g,{value:e.permissions.translations_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Br,[l(g,{value:e.permissions.translations_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",qr,i(e.$t("menu.roles")),1),M("td",null,[M("div",Vr,[M("label",Kr,[l(g,{value:e.permissions.roles_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",zr,[l(g,{value:e.permissions.roles_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Nr,[l(g,{value:e.permissions.roles_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",jr,[l(g,{value:e.permissions.roles_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Hr,i(e.$t("menu.currencies")),1),M("td",null,[M("div",Wr,[M("label",Yr,[l(g,{value:e.permissions.currencies_view},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:1},8,["value"])]),M("label",Gr,[l(g,{value:e.permissions.currencies_create},{default:a(()=>[c(i(e.$t("common.add")),1)]),_:1},8,["value"])]),M("label",Jr,[l(g,{value:e.permissions.currencies_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])]),M("label",Qr,[l(g,{value:e.permissions.currencies_delete},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),M("tr",null,[M("td",Xr,i(e.$t("menu.storage_settings")),1),M("td",null,[M("div",Zr,[M("label",xr,[l(g,{value:e.permissions.storage_edit},{default:a(()=>[c(i(e.$t("common.edit")),1)]),_:1},8,["value"])])])])])])])]),_:1},8,["value"])])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Ql=Y(Kd,[["render",eu]]),au=ne({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:Ql},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=Jl(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),tu={key:0};function lu(e,s,_,n,v,y){const r=o("a-menu-item"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),h=o("AddEdit");return e.permsArray.includes("roles_create")||e.permsArray.includes("admin")?(d(),U("div",tu,[e.customType=="menu"?(d(),b(r,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick"])):(d(),U(L,{key:1},[e.tooltip?(d(),b(p,{key:0,placement:"topLeft",title:e.$t("role.add"),"arrow-point-at-center":""},{default:a(()=>[l(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),l(h,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("role.add"),successMessage:e.$t("role.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const Xl=Y(au,[["render",lu]]),nu=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,Upload:ka,RoleAddButton:Xl},setup(e,{emit:s}){const{permsArray:_,user:n,appSetting:v}=Z(),{addEditRequestAdmin:y,loading:r,rules:u}=pe(),m=I([]),p="roles?limit=10000",h=Ke();return ie(()=>{const k=axiosAdmin.get(p);Promise.all([k]).then(([C])=>{m.value=C.data})}),{loading:r,rules:u,onClose:()=>{u.value={},s("closed")},onSubmit:()=>{y({url:e.url,data:e.formData,successMessage:e.successMessage,success:k=>{s("addEditSuccess",k.xid),n.value.xid==k.xid&&h.dispatch("auth/updateUser")}})},roles:m,roleAdded:()=>{axiosAdmin.get(p).then(k=>{m.value=k.data})},permsArray:_,appSetting:v,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),ou={style:{display:"flex"}};function su(e,s,_,n,v,y){const r=o("Upload"),u=o("a-form-item"),m=o("a-col"),p=o("a-select-option"),h=o("a-select"),g=o("RoleAddButton"),f=o("a-row"),w=o("a-input"),k=o("a-input-password"),C=o("a-textarea"),S=o("a-form"),E=o("SaveOutlined"),A=o("a-button"),$=o("a-drawer");return d(),b($,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(A,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[l(E)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(A,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(S,{layout:"vertical"},{default:a(()=>[l(f,null,{default:a(()=>[l(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(u,{label:e.$t("user.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:a(()=>[l(r,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[0]||(s[0]=P=>{e.formData.profile_image=P.file,e.formData.profile_image_url=P.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:18,lg:18},{default:a(()=>[e.permsArray.includes("admin")?(d(),b(f,{key:0,gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("user.role"),name:"role_id",help:e.rules.role_id?e.rules.role_id.message:null,validateStatus:e.rules.role_id?"error":null,class:"required"},{default:a(()=>[M("span",ou,[l(h,{value:e.formData.role_id,"onUpdate:value":s[1]||(s[1]=P=>e.formData.role_id=P),placeholder:e.$t("common.select_default_text",[e.$t("user.role")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.roles,P=>(d(),b(p,{key:P.xid,value:P.xid},{default:a(()=>[c(i(P.display_name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(g,{onOnAddSuccess:e.roleAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):D("",!0),l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:a(()=>[l(w,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=P=>e.formData.name=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.phone,"onUpdate:value":s[3]||(s[3]=P=>e.formData.phone=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,null,{default:a(()=>[l(m,{span:24},{default:a(()=>[l(u,{label:e.$t("user.user"),name:"user",help:e.rules.user?e.rules.user.message:null,validateStatus:e.rules.user?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.user,"onUpdate:value":s[4]||(s[4]=P=>e.formData.user=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.user")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,null,{default:a(()=>[l(m,{span:24},{default:a(()=>[l(u,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null,class:"required"},{default:a(()=>[l(k,{value:e.formData.password,"onUpdate:value":s[5]||(s[5]=P=>e.formData.password=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.email,"onUpdate:value":s[6]||(s[6]=P=>e.formData.email=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("user.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:a(()=>[l(h,{value:e.formData.status,"onUpdate:value":s[7]||(s[7]=P=>e.formData.status=P),placeholder:e.$t("common.select_default_text",[e.$t("user.status")]),allowClear:!0},{default:a(()=>[l(p,{value:"enabled"},{default:a(()=>[c("Enabled")]),_:1}),l(p,{value:"disabled"},{default:a(()=>[c("Disabled")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("user.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[l(C,{value:e.formData.address,"onUpdate:value":s[8]||(s[8]=P=>e.formData.address=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("user.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[l(C,{value:e.formData.notes,"onUpdate:value":s[9]||(s[9]=P=>e.formData.notes=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.notes")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Zl=Y(nu,[["render",su]]),du=ne({props:{acceptFormat:{default:"image/*,.pdf",type:String},formData:null,folder:String,uploadField:{default:"file",type:String}},components:{UploadOutlined:Tt,DownloadOutlined:ga,DeleteOutlined:Se},setup(e,{emit:s}){const _=I([]),n=I(!1),{t:v}=x();return{fileList:_,loading:n,customRequest:r=>{const u=new FormData;u.append("file",r.file),u.append("folder",e.folder),n.value=!0,axiosAdmin.post("upload-file",u,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{_.value=[],n.value=!1,s("onFileUploaded",{file:m.data.file,file_url:m.data.file_url})}).catch(()=>{n.value=!1,Xe.error(v("messages.uploading_failed"))})}}}}),iu={key:0},ru={key:1};function uu(e,s,_,n,v,y){const r=o("UploadOutlined"),u=o("a-button"),m=o("a-upload"),p=o("DownloadOutlined"),h=o("a-tag"),g=o("a-typography-link"),f=o("DeleteOutlined");return e.formData[e.uploadField]==null?(d(),U("div",iu,[l(m,{accept:e.acceptFormat,"file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=w=>e.fileList=w),name:"file",customRequest:e.customRequest},{default:a(()=>[l(u,{loading:e.loading},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","customRequest"])])):(d(),U("div",ru,[l(g,{href:e.formData[`${e.uploadField}_url`],target:"_blank"},{default:a(()=>[l(h,{color:"success"},{icon:a(()=>[l(p)]),default:a(()=>[c(" "+i(e.$t("common.download")),1)]),_:1})]),_:1},8,["href"]),l(g,{onClick:s[1]||(s[1]=()=>{e.formData[e.uploadField]=void 0,e.formData[`${e.uploadField}_url`]=void 0})},{default:a(()=>[l(h,{color:"error"},{icon:a(()=>[l(f)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1})]),_:1})]))}const ut=Y(du,[["render",uu]]),mu=ne({props:["pageTitle","sampleFileUrl","importUrl","camposRequerido"],emits:["onUploadSuccess"],components:{CloudDownloadOutlined:Et,UploadFile:ut,UploadOutlined:Tt},setup(e,{emit:s}){const{addEditFileRequestAdmin:_,loading:n,rules:v}=pe(),{t:y}=x(),r=I([]),u=I(!1),m=f=>(r.value=[...r.value,f],!1),p=()=>{const f={};r&&r.value&&r.value[0]!=null&&(f.file=r.value[0]),n.value=!0,_({url:e.importUrl,data:f,successMessage:y("messages.imported_successfully"),success:w=>{g(),s("onUploadSuccess")}})},h=()=>{u.value=!0},g=f=>{r.value=[],u.value=!1};return{fileList:r,rules:v,loading:n,visible:u,showModal:h,handleCancel:g,importItems:p,beforeUpload:m}}});function cu(e,s,_,n,v,y){const r=o("CloudDownloadOutlined"),u=o("a-button"),m=o("a-typography-link"),p=o("a-typography-paragraph"),h=o("a-col"),g=o("a-row"),f=o("UploadOutlined"),w=o("a-upload"),k=o("a-form-item"),C=o("a-form"),S=o("a-modal");return d(),U("div",null,[l(u,{type:"primary",onClick:e.showModal},{default:a(()=>[l(r),c(" "+i(e.pageTitle),1)]),_:1},8,["onClick"]),l(S,{open:e.visible,"onUpdate:open":s[1]||(s[1]=E=>e.visible=E),title:e.pageTitle},{footer:a(()=>[l(u,{type:"primary",loading:e.loading,onClick:e.importItems},{default:a(()=>[c(i(e.$t("common.import")),1)]),_:1},8,["loading","onClick"]),l(u,{key:"back",onClick:e.handleCancel},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{gutter:16,class:"mb-10"},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,null,{default:a(()=>[M("ul",null,[M("li",null,[l(m,{href:e.sampleFileUrl,target:"_blank"},{default:a(()=>[c(i(e.$t("messages.click_here_to_download_sample_file")),1)]),_:1},8,["href"])])])]),_:1})]),_:1}),e.camposRequerido?(d(),b(h,{key:0,xs:24,sm:24,md:24,lg:24},{default:a(()=>[M("strong",null,i(e.camposRequerido)+" : Name - Internal Code - Price - Campaign",1)]),_:1})):D("",!0)]),_:1}),l(g,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(C,{layout:"vertical"},{default:a(()=>[l(k,{label:e.$t("common.file"),name:"file",help:e.rules.file?e.rules.file.message:null,validateStatus:e.rules.file?"error":null},{default:a(()=>[l(w,{accept:".xlsx,.csv","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=E=>e.fileList=E),name:"file","before-upload":e.beforeUpload,maxCount:1},{default:a(()=>[l(u,{loading:e.loading},{icon:a(()=>[l(f)]),default:a(()=>[c(" "+i(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","before-upload"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])])}const Va=Y(mu,[["render",cu]]),pu={props:["user","size"]},_u={key:0},fu={key:1};function gu(e,s,_,n,v,y){const r=o("a-avatar"),u=o("a-space");return d(),b(u,null,{default:a(()=>[l(r,{size:30,src:_.user.profile_image_url},null,8,["src"]),M("span",null,[c(i(_.user.name)+" ",1),_.user&&_.user.role&&_.user.role.name?(d(),U("br",_u)):D("",!0),_.user&&_.user.role&&_.user.role.display_name?(d(),U("small",fu,i(_.user&&_.user.role.display_name),1)):D("",!0)])]),_:1})}const xl=Y(pu,[["render",gu]]),hu={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Zl,AdminPageHeader:Ce,ImportUsers:Va,UserInfo:xl},setup(){const{url:e,addEditUrl:s,initData:_,columns:n,filterableColumns:v,hashableColumns:y}=Gl(),r=Fe(),{permsArray:u,statusColors:m,formatDateTime:p,user:h}=Z(),g=window.config.staff_member_sample_file;ie(()=>{f()});const f=()=>{r.tableUrl.value={url:e},r.table.filterableColumns=v,r.fetch({page:1}),r.crudUrl.value=s,r.langKey.value="user",r.initData.value={..._},r.formData.value={..._},r.hashableColumns.value=[...y]};return{user:h,columns:n,filterableColumns:v,permsArray:u,statusColors:m,formatDateTime:p,...r,sampleFileUrl:g,setUrlData:f}}},vu={class:"table-responsive"};function bu(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("user-info"),z=o("a-tag"),K=o("EditOutlined"),B=o("a-table"),R=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.users"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.users")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("staff_members_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("staff_member.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("staff_members_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=O=>e.table.searchColumn=O),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,O=>(d(),b(S,{key:O.key},{default:a(()=>[c(i(O.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=O=>e.table.searchString=O),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(R,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",vu,[l(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:O=>({disabled:!((n.permsArray.includes("users_delete")||n.permsArray.includes("admin"))&&O.xid!=n.user.xid),name:O.xid})},columns:n.columns,"row-key":O=>O.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:O,text:W,record:q})=>[O.dataIndex==="name"?(d(),b(V,{key:0,user:q},null,8,["user"])):D("",!0),O.dataIndex==="status"?(d(),b(z,{key:1,color:n.statusColors[W]},{default:a(()=>[c(i(e.$t(`common.${W}`)),1)]),_:2},1032,["color"])):D("",!0),O.dataIndex==="ucontact"?(d(),U(L,{key:2},[q.ucontact==1?(d(),b(z,{key:0,color:"success"},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1})):D("",!0),q.ucontact==0?(d(),b(z,{key:1,color:"error"},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})):D("",!0)],64)):D("",!0),O.dataIndex==="created_at"?(d(),U(L,{key:3},[c(i(n.formatDateTime(q.created_at)),1)],64)):D("",!0),O.dataIndex==="action"?(d(),U(L,{key:4},[n.permsArray.includes("users_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:N=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[l(K)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("users_delete")||n.permsArray.includes("admin"))&&q.xid!=n.user.xid?(d(),b(f,{key:1,type:"primary",danger:"",onClick:N=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const yu=Y(hu,[["render",bu]]),ku=()=>{const{t:e}=x(),s="salesmans?fields=id,xid,name,email,profile_image,profile_image_url,phone,address,status,created_at",_="salesmans",n={name:"",email:"",password:"12345678",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled"},v=[{title:e("salesman.id"),dataIndex:"id",key:"id"},{title:e("salesman.name"),dataIndex:"name",key:"name"},{title:e("salesman.email"),dataIndex:"email"},{title:e("salesman.created_at"),dataIndex:"created_at"},{title:e("salesman.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],y=[{key:"name",value:e("salesman.name")},{key:"email",value:e("salesman.email")},{key:"phone",value:e("salesman.phone")}];return{url:s,initData:n,columns:v,filterableColumns:y,addEditUrl:_}},Cu=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,Upload:ka,RoleAddButton:Xl},setup(e,{emit:s}){const{permsArray:_,appSetting:n}=Z(),{addEditRequestAdmin:v,loading:y,rules:r}=pe();return{loading:y,rules:r,onClose:()=>{r.value={},s("closed")},onSubmit:()=>{v({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{s("addEditSuccess",p.xid)}})},permsArray:_,appSetting:n,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function wu(e,s,_,n,v,y){const r=o("Upload"),u=o("a-form-item"),m=o("a-col"),p=o("a-input"),h=o("a-select-option"),g=o("a-select"),f=o("a-row"),w=o("a-textarea"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),E=o("a-drawer");return d(),b(E,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(S,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(S,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(k,{layout:"vertical"},{default:a(()=>[l(f,null,{default:a(()=>[l(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(u,{label:e.$t("salesman.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:a(()=>[l(r,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[0]||(s[0]=A=>{e.formData.profile_image=A.file,e.formData.profile_image_url=A.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:18,lg:18},{default:a(()=>[l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("salesman.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(p,{value:e.formData.name,"onUpdate:value":s[1]||(s[1]=A=>e.formData.name=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("salesman.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:a(()=>[l(g,{value:e.formData.status,"onUpdate:value":s[2]||(s[2]=A=>e.formData.status=A),placeholder:e.$t("common.select_default_text",[e.$t("salesman.status")]),allowClear:!0},{default:a(()=>[l(h,{value:"enabled"},{default:a(()=>[c("Enabled")]),_:1}),l(h,{value:"disabled"},{default:a(()=>[c("Disabled")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("salesman.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[l(p,{value:e.formData.email,"onUpdate:value":s[3]||(s[3]=A=>e.formData.email=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("salesman.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:a(()=>[l(p,{value:e.formData.phone,"onUpdate:value":s[4]||(s[4]=A=>e.formData.phone=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("salesman.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[l(w,{value:e.formData.address,"onUpdate:value":s[5]||(s[5]=A=>e.formData.address=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Su=Y(Cu,[["render",wu]]),$u={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Su,AdminPageHeader:Ce,ImportSalesman:Va},setup(){const{url:e,addEditUrl:s,initData:_,columns:n,filterableColumns:v}=ku(),y=Fe(),{permsArray:r,statusColors:u,formatDateTime:m}=Z(),p=window.config.staff_member_sample_file;ie(()=>{h()});const h=()=>{y.tableUrl.value={url:e},y.table.filterableColumns=v,y.fetch({page:1}),y.crudUrl.value=s,y.langKey.value="salesman",y.initData.value={..._},y.formData.value={..._}};return{columns:n,filterableColumns:v,permsArray:r,statusColors:u,formatDateTime:m,...y,sampleFileUrl:p,setUrlData:h}}},Au={class:"table-responsive"};function Du(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("a-tag"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.salesmans"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.salesmans")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("salesmans_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("salesman.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("salesmans_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(S,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",Au,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,text:O,record:W})=>[R.dataIndex==="status"?(d(),b(V,{key:0,color:n.statusColors[O]},{default:a(()=>[c(i(e.$t(`common.${O}`)),1)]),_:2},1032,["color"])):D("",!0),R.dataIndex==="created_at"?(d(),U(L,{key:1},[c(i(n.formatDateTime(W.created_at)),1)],64)):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:2},[n.permsArray.includes("salesmans_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:q=>e.editItem(W),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),n.permsArray.includes("salesmans_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:1,type:"primary",onClick:q=>e.showDeleteConfirm(W.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Tu=Y($u,[["render",Du]]),Eu=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/users",component:yu,name:"admin.users.index",meta:{requireAuth:!0,menuParent:"users",menuKey:"users",permission:"users_view"}},{path:"/admin/salesman",component:Tu,name:"admin.salesman.index",meta:{requireAuth:!0,menuParent:"salesmans",menuKey:"salesmans",permission:"salesmans_view"}}]}],Pt=()=>{const e="campaigns?fields=id,xid,name,image,image_url,reference_prefix,allow_reference_prefix,remaining_leads,total_leads,lead_distribution_method,campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url},email_template_id,x_email_template_id,emailTemplate{id,xid,name},form_id,x_form_id,form{id,xid,name,form_fields},plantilla_calidad_id,x_plantilla_calidad_id,plantilla_calidad{id,xid,nombre},detail_fields,last_action_by,x_last_action_by,lastActioner{id,xid,name},completed_by,x_completed_by,completedBy{id,xid,name},started_on,completed_on,upcoming_lead_action",s="campaigns",_=["form_id","email_template_id"],{t:n}=x(),v=I({campaign_status:"active"}),y={name:"",image:void 0,image_url:void 0,user_id:void 0,plantilla_calidad_id:void 0,form_id:void 0,email_template_id:void 0,allow_reference_prefix:0,reference_prefix:"",current_step:0,detail_fields:[],import_lead_fields:[],lead_distribution_method:"random"},r=_e(()=>v.value.campaign_status=="active"?[{title:n("campaign.id"),dataIndex:"id"},{title:n("product.image"),dataIndex:"image"},{title:n("campaign.name"),dataIndex:"name"},{title:n("campaign.progress"),dataIndex:"progress"},{title:n("campaign.members"),dataIndex:"members"},{title:n("campaign.started_on"),dataIndex:"started_on"},{title:n("common.action"),dataIndex:"action"}]:[{title:n("campaign.id"),dataIndex:"id"},{title:n("campaign.name"),dataIndex:"name"},{title:n("campaign.total_leads"),dataIndex:"total_leads"},{title:n("campaign.started_on"),dataIndex:"started_on"},{title:n("campaign.completed_on"),dataIndex:"completed_on"},{title:n("campaign.completed_by"),dataIndex:"completed_by"}]),u=I([{title:n("lead.reference_number"),dataIndex:"reference_number"},{title:n("lead.campaign_name"),dataIndex:"campaign_id"},{title:n("lead.name"),dataIndex:"name"},{title:n("lead.email"),dataIndex:"email"},{title:n("lead.total_notes"),dataIndex:"total_notes"},{title:n("lead.assign_to"),dataIndex:"assign_to"}]),m=[{key:"name",value:n("common.name")}];return{url:e,addEditUrl:s,initData:y,columns:r,filterableColumns:m,hashableColumns:_,extraFilters:v,leadColumn:u}},Uu=ne({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:Zl},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=Gl(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Ou={key:0};function Iu(e,s,_,n,v,y){const r=o("a-menu-item"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),h=o("AddEdit");return e.permsArray.includes("users_create")||e.permsArray.includes("admin")?(d(),U("div",Ou,[e.customType=="menu"?(d(),b(r,{onClick:e.showAdd,key:"staff_members"},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick"])):(d(),U(L,{key:1},[e.tooltip?(d(),b(p,{key:0,placement:"topLeft",title:e.$t("user.add"),"arrow-point-at-center":""},{default:a(()=>[l(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),l(h,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("staff_member.add"),successMessage:e.$t("staff_member.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const mt=Y(Uu,[["render",Iu]]),en=()=>{const e="forms?fields=id,xid,name,status,form_fields",s="forms",_=[],{t:n}=x(),v={name:"",form_fields:[],status:1},y=[{title:n("form.id"),dataIndex:"id"},{title:n("form.name"),dataIndex:"name"},{title:n("form.form_fields"),dataIndex:"form_fields"},{title:n("form.status"),dataIndex:"status"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"name",value:n("form.name")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,hashableColumns:_}},Pu={setup(e,{emit:s}){const{themeMode:_}=Z();return{themeMode:_}}};function Mu(e,s,_,n,v,y){const r=o("a-typography-title"),u=o("a-divider");return d(),U(L,null,[l(r,{level:5},{default:a(()=>[ke(e.$slots,"default")]),_:3}),l(u,{style:we({height:"2px",backgroundColor:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0",marginTop:"5px",marginBottom:"20px"})},null,8,["style"])],64)}const ct=Y(Pu,[["render",Mu]]),Fu=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,MinusCircleOutlined:Ea,LoadingOutlined:ze,SaveOutlined:$e,FormItemHeading:ct},setup(e,{emit:s}){const _=I({name:"",form_fields:[],status:1}),n=I([]),{addEditRequestAdmin:v,loading:y,rules:r}=pe(),u=f=>{let w=n.value.indexOf(f);w!==-1&&n.value.splice(w,1)},m=()=>{n.value.push({name:"",type:"text",required:0,id:Math.random().toString(36).slice(2)})},p=()=>{const f=Dt(n.value,w=>w.name!="");v({url:e.url,data:{..._.value,form_fields:f},successMessage:e.successMessage,success:w=>{s("addEditSuccess",w.xid)}})},h=()=>{r.value={},s("closed")},g=_e(()=>n.value.length==0?!1:Aa(n.value,{name:""}));return he(()=>e.visible,(f,w)=>{e.addEditType=="edit"&&f?(_.value={name:e.data.name,status:e.data.status,_method:"PUT"},n.value=e.data.form_fields):(_.value={name:"",status:1},n.value=[])}),{loading:y,rules:r,onClose:h,onSubmit:p,newFormData:_,formFields:n,removeFormField:u,addFormField:m,addFormButtonStatus:g,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Ru(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-radio-button"),g=o("a-radio-group"),f=o("FormItemHeading"),w=o("a-select-option"),k=o("a-select"),C=o("MinusCircleOutlined"),S=o("PlusOutlined"),E=o("a-button"),A=o("a-form"),$=o("SaveOutlined"),P=o("a-space"),T=o("a-drawer");return d(),b(T,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(P,null,{default:a(()=>[l(E,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l($)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(E,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(A,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("form.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.newFormData.name,"onUpdate:value":s[0]||(s[0]=F=>e.newFormData.name=F),placeholder:e.$t("common.placeholder_default_text",[e.$t("form.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("form.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null},{default:a(()=>[l(g,{value:e.newFormData.status,"onUpdate:value":s[1]||(s[1]=F=>e.newFormData.status=F),"button-style":"solid",size:"small"},{default:a(()=>[l(h,{value:1},{default:a(()=>[c(i(e.$t("common.active")),1)]),_:1}),l(h,{value:0},{default:a(()=>[c(i(e.$t("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,null,{default:a(()=>[c(i(e.$t("form.form_fields")),1)]),_:1}),e.formFields.length>0?(d(!0),U(L,{key:0},G(e.formFields,(F,V)=>(d(),b(p,{gutter:16,key:F.id},{default:a(()=>[l(m,{span:16},{default:a(()=>[l(u,{name:["form_fields",V,"name"]},{default:a(()=>[l(r,{value:F.name,"onUpdate:value":z=>F.name=z,placeholder:e.$t("form.field_name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),l(m,{span:6},{default:a(()=>[l(u,{name:["form_fields",V,"name"]},{default:a(()=>[l(k,{value:F.type,"onUpdate:value":z=>F.type=z,placeholder:e.$t("common.select_default_text",[e.$t("campaign.field_type")])},{default:a(()=>[l(w,{value:"text"},{default:a(()=>[c(i(e.$t("common.text")),1)]),_:1}),l(w,{value:"email"},{default:a(()=>[c(i(e.$t("common.email")),1)]),_:1}),l(w,{value:"phone"},{default:a(()=>[c(i(e.$t("common.phone")),1)]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),l(m,{span:2},{default:a(()=>[l(C,{onClick:z=>e.removeFormField(F)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):D("",!0),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,null,{default:a(()=>[l(E,{type:"dashed",block:"",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:a(()=>[l(S),c(" "+i(e.$t("form.add_form_field")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const an=Y(Fu,[["render",Ru]]),Lu=ne({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:an},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=en(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Bu={key:0};function qu(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("AddEdit");return e.permsArray.includes("forms_create")||e.permsArray.includes("admin")?(d(),U("div",Bu,[e.tooltip?(d(),b(m,{key:0,placement:"topLeft",title:e.$t("form.add"),"arrow-point-at-center":""},{default:a(()=>[l(u,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(u,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])),l(p,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("form.add"),successMessage:e.$t("form.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const Mt=Y(Lu,[["render",qu]]),tn=()=>{const e="email-templates?fields=id,xid,name,subject,body,status,sharable",s="email-templates",_=[],{t:n}=x(),v={name:"",subject:"",body:"",status:1,sharable:0},y=[{title:n("email_template.id"),dataIndex:"id"},{title:n("email_template.name"),dataIndex:"name"},{title:n("email_template.subject"),dataIndex:"subject"},{title:n("email_template.status"),dataIndex:"status"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"name",value:n("email_template.name")},{key:"subject",value:n("email_template.subject")},{key:"body",value:n("email_template.body")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,hashableColumns:_}};const Vu=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,InfoCircleOutlined:ua,QuillEditor:nt,FormAddButton:Mt},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y="forms/all",r=I(null),u=I([]),m=I(void 0),p=I({});ie(()=>{const S=axiosAdmin.get(y);Promise.all([S]).then(([E])=>{u.value=E.data.data})});const h=()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:S=>{s("addEditSuccess",S.xid)}})},g=S=>{const E=w.value.getSelection(!0);var A=E.length>0?`##${S}##`:` ##${S}## `;w.value.deleteText(E.index,E.length),w.value.insertText(E.index,A)},f=()=>{v.value={},s("closed")},w=_e(()=>r.value.getQuill()),k=()=>{axiosAdmin.get(y).then(S=>{u.value=S.data.data})},C=(S,E)=>{p.value=E.form};return he(()=>e.visible,(S,E)=>{S==!0&&r.value&&(e.addEditType=="edit"?r.value.setHTML(e.formData.body):r.value.setHTML("")),m.value=void 0,p.value={}}),{loading:n,rules:v,onClose:f,onSubmit:h,insertFormText:g,textEditor:r,allForms:u,selectedFormId:m,formAdded:k,formSelected:C,selectedForm:p,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Ku={style:{display:"flex"}};function zu(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("InfoCircleOutlined"),h=o("a-tooltip"),g=o("a-space"),f=o("a-radio-button"),w=o("a-radio-group"),k=o("a-row"),C=o("QuillEditor"),S=o("a-select-option"),E=o("a-select"),A=o("FormAddButton"),$=o("a-button"),P=o("a-form"),T=o("SaveOutlined"),F=o("a-drawer");return d(),b(F,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(g,null,{default:a(()=>[l($,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(T)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l($,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(P,{layout:"vertical"},{default:a(()=>[l(k,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:12,md:16,lg:16},{default:a(()=>[l(u,{label:e.$t("email_template.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=V=>e.formData.name=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[l(u,{name:"sharable",help:e.rules.sharable?e.rules.sharable.message:null,validateStatus:e.rules.sharable?"error":null},{label:a(()=>[l(g,null,{default:a(()=>[c(i(e.$t("email_template.sharable"))+" ",1),l(h,null,{title:a(()=>[c(i(e.$t("email_template.sharable_message")),1)]),default:a(()=>[l(p)]),_:1})]),_:1})]),default:a(()=>[l(w,{value:e.formData.sharable,"onUpdate:value":s[1]||(s[1]=V=>e.formData.sharable=V),"button-style":"solid",size:"small"},{default:a(()=>[l(f,{value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l(f,{value:0},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("email_template.subject"),name:"subject",help:e.rules.subject?e.rules.subject.message:null,validateStatus:e.rules.subject?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.subject,"onUpdate:value":s[2]||(s[2]=V=>e.formData.subject=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.subject")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("email_template.body"),name:"body",help:e.rules.body?e.rules.body.message:null,validateStatus:e.rules.body?"error":null},{default:a(()=>[l(C,{ref:"textEditor",content:e.formData.body,"onUpdate:content":s[3]||(s[3]=V=>e.formData.body=V),contentType:"html",placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.body")]),style:{height:"200px"}},null,8,["content","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(m,{span:24},{default:a(()=>[l(u,{label:e.$t("form.form"),name:"form_id"},{default:a(()=>[M("span",Ku,[l(E,{value:e.selectedFormId,"onUpdate:value":s[4]||(s[4]=V=>e.selectedFormId=V),placeholder:e.$t("common.select_default_text",[e.$t("form.form")]),allowClear:!0,optionFilterProp:"label","show-search":"",onChange:e.formSelected},{default:a(()=>[(d(!0),U(L,null,G(e.allForms,V=>(d(),b(S,{key:V.xid,value:V.xid,label:V.name,form:V},{default:a(()=>[c(i(V.name),1)]),_:2},1032,["value","label","form"]))),128))]),_:1},8,["value","placeholder","onChange"]),l(A,{onOnAddSuccess:e.formAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label"])]),_:1})]),_:1}),e.selectedForm&&e.selectedForm.form_fields&&e.selectedForm.form_fields.length>0?(d(),b(k,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[(d(!0),U(L,null,G(e.selectedForm.form_fields,V=>(d(),b(m,{xs:8,sm:8,md:6,lg:4,key:V.id},{default:a(()=>[l($,{onClick:z=>e.insertFormText(V.name),type:"link",style:{padding:"0px"}},{default:a(()=>[c(i(V.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):D("",!0),l(k,{gutter:16,class:"mt-10"},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("email_template.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null},{default:a(()=>[l(w,{value:e.formData.status,"onUpdate:value":s[5]||(s[5]=V=>e.formData.status=V),"button-style":"solid",size:"small"},{default:a(()=>[l(f,{value:1},{default:a(()=>[c(i(e.$t("common.active")),1)]),_:1}),l(f,{value:0},{default:a(()=>[c(i(e.$t("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const ln=Y(Vu,[["render",zu]]),Nu=ne({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:ln},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=tn(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),ju={key:0};function Hu(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("AddEdit");return e.permsArray.includes("email_templates_create")||e.permsArray.includes("admin")?(d(),U("div",ju,[e.tooltip?(d(),b(m,{key:0,placement:"topLeft",title:e.$t("email_template.add"),"arrow-point-at-center":""},{default:a(()=>[l(u,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(u,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])),l(p,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("email_template.add"),successMessage:e.$t("email_template.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const nn=Y(Nu,[["render",Hu]]),Wu=ne({props:{acceptFormat:{default:"image/*,.pdf",type:String},allFields:null},emits:["fileUploaded","leadColumnChanged"],components:{UploadOutlined:Tt,FileOutlined:Tl},setup(e,{emit:s}){const _=I([]),n=I(!1),{t:v}=x(),y=I(void 0),r=I([]),u=I([]),m=I([]),p=I([]),h=I({}),g=I([...e.allFields]),f=I("all"),w=[{title:v("campaign.csv_header_field"),dataIndex:"csv_header_field"},{title:v("campaign.csv_field_data"),dataIndex:"csv_field_data"},{title:v("campaign.column_status"),dataIndex:"column_status"}],k=$=>{const P=new FormData;P.append("file",$.file),P.append("folder",e.folder),n.value=!0;let T=new FileReader;T.readAsText($.file,"UTF-8"),T.onload=function(F){const V=jt.parse(F.target.result,{header:!0,skipEmptyLines:!0,transformHeader:function(B){return B.toLowerCase()==="agent"?null:B},complete:function(B){const R=B.meta.fields.filter(W=>W!==null),O=B.data.map(W=>{const q={};return R.forEach(N=>{q[N]=W[N]}),q});B.meta.fields=R,B.data=O}}),z=jt.parse(F.target.result,{preview:3,header:!0,skipEmptyLines:!0,transformHeader:function(B){return B.toLowerCase()==="agent"?null:B},complete:function(B){const R=B.meta.fields.filter(W=>W!==null),O=B.data.map(W=>{const q={};return R.forEach(N=>{q[N]=W[N]}),q});B.meta.fields=R,B.data=O}});u.value=z.data,r.value=V.data,p.value=V.meta.fields,y.value=$.file;var K={};Ee(p.value,(B,R)=>{const O=fa(e.allFields,B);K[B]=O?B:void 0}),h.value=K,S()},s("fileUploaded",$.file)},C=$=>{var P="";return Ee(u.value,(T,F)=>{P+=`${T[$]}<br />`}),P},S=()=>{var $=[];Ee(e.allFields,(P,T)=>{fa(h.value,P)||$.push(P)}),g.value=$,A(f.value),s("leadColumnChanged",r.value)},E=_e(()=>{var $=0;return Ee(h.value,(P,T)=>{P==null&&($=$+1)}),$}),A=$=>{if($=="matched"){var P=[];Ee(p.value,(T,F)=>{h.value[T]!=null&&P.push(T)}),m.value=P}else if($=="un_matched"){var P=[];Ee(p.value,(F,V)=>{h.value[F]==null&&P.push(F)}),m.value=P}else m.value=p.value};return he(()=>e.allFields,($,P)=>{S()}),{fileList:_,loading:n,customRequest:k,columns:w,currentUploadedFile:y,parsedFileData:r,parsedHeader:p,getPreviewData:C,formProperties:h,currentFormFields:g,reAssignCurrentFormFields:S,unMatchedColumnsCount:E,activeTabKey:f,tabChanged:A,tableRecords:m,size:Gn}}}),Yu={class:"ant-upload-drag-icon"},Gu=M("p",{class:"ant-upload-text"},"Click or drag file to this area to upload",-1),Ju=M("p",{class:"ant-upload-hint"},[c(" 1- Solo se admiten archivos "),M("strong",null,".csv"),c(),M("br"),c(" 2- Formato de fechas: "),M("strong",null,"año-mes-día hora:minutos:segundos")],-1),Qu=["innerHTML"];function Xu(e,s,_,n,v,y){const r=o("UploadOutlined"),u=o("a-upload-dragger"),m=o("a-col"),p=o("a-row"),h=o("a-badge"),g=o("a-space"),f=o("a-tab-pane"),w=o("a-tabs"),k=o("a-select-option"),C=o("a-select"),S=o("a-table");return e.parsedFileData.length==0?(d(),b(p,{key:0,gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{fileList:e.fileList,"onUpdate:fileList":s[0]||(s[0]=E=>e.fileList=E),name:"file",accept:e.acceptFormat,customRequest:e.customRequest,onDrop:e.customRequest},{default:a(()=>[M("p",Yu,[l(r)]),Gu,Ju]),_:1},8,["fileList","accept","customRequest","onDrop"])]),_:1})]),_:1})):(d(),b(p,{key:1,gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[1]||(s[1]=E=>e.activeTabKey=E),onChange:e.tabChanged},{default:a(()=>[l(f,{key:"all"},{tab:a(()=>[l(g,null,{default:a(()=>[l(h,{count:e.size(e.formProperties),"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"},overflowCount:2e3},null,8,["count"]),c(" "+i(e.$t("campaign.all_columns")),1)]),_:1})]),_:1}),l(f,{key:"matched"},{tab:a(()=>[l(g,null,{default:a(()=>[l(h,{count:e.size(e.formProperties)-e.unMatchedColumnsCount,"number-style":{backgroundColor:"#52c41a"},overflowCount:2e3},null,8,["count"]),c(" "+i(e.$t("campaign.matched_columns")),1)]),_:1})]),_:1}),l(f,{key:"un_matched"},{tab:a(()=>[l(g,null,{default:a(()=>[l(h,{count:e.unMatchedColumnsCount,overflowCount:2e3},null,8,["count"]),c(" "+i(e.$t("campaign.unmatched_columns")),1)]),_:1})]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),l(S,{columns:e.columns,"row-key":E=>E,"data-source":e.tableRecords,pagination:!1},{bodyCell:a(({column:E,record:A})=>[E.dataIndex==="csv_header_field"?(d(),U(L,{key:0},[c(i(A),1)],64)):D("",!0),E.dataIndex==="csv_field_data"?(d(),U("span",{key:1,innerHTML:e.getPreviewData(A)},null,8,Qu)):D("",!0),E.dataIndex==="column_status"?(d(),U(L,{key:2},[l(C,{value:e.formProperties[A],"onUpdate:value":$=>e.formProperties[A]=$,placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reAssignCurrentFormFields,open:e.formProperties[A]!=null?!1:void 0},{default:a(()=>[(d(!0),U(L,null,G(e.currentFormFields,$=>(d(),b(k,{key:$,title:A,value:$},{default:a(()=>[c(i($),1)]),_:2},1032,["title","value"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder","onChange","open"]),Xa(M("div",{class:"ant-form-item-explain-error",style:{}},i(e.$t("campaign.column_will_not_imported")),513),[[Za,e.formProperties[A]==null]])],64)):D("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1}))}const Ft=Y(Wu,[["render",Xu]]),Zu=ne({props:["permsArray","formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,FileTextOutlined:Ua,OrderedListOutlined:El,DoubleRightOutlined:ya,DoubleLeftOutlined:ot,MinusCircleOutlined:Ea,Upload:ka,ImportLeads:Ft,StaffMemberAddButton:mt,FormAddButton:Mt,EmailTemplateAddButton:nn},setup(e,{emit:s}){const{t:_}=x(),n=I(0),{addEditFileRequestAdmin:v,addEditRequestAdmin:y,loading:r,rules:u}=pe(),m="forms?fields=xid,name,form_fields&limit=10000",p="email-templates/all",h=I([]),g=I([]),f=I([]),w=I([]);I([]);const k=I([]),C="users?limit=10000",S="plantillas-calidad?filters=activo eq 1&limit=1000",E=I(void 0),A=I(void 0),$=I([]),P=I(!1),T=I({});ie(()=>{e.formData.etapa="nueva";const X=axiosAdmin.get(C),oe=axiosAdmin.get(S);Promise.all([X,oe]).then(([se,H])=>{g.value=se.data,f.value=H.data})});const F=_e({get(){return e.data.uc_campaigns?e.data.uc_campaigns.split(",").map(X=>X.trim()):[]},set(X){e.data.uc_campaigns=X.join(","),e.formData.uc_campaigns=X.join(",")}}),V=(X,oe)=>{if((T.value[X]||[]).includes(oe))return!1;for(const[H,ae]of Object.entries(T.value))if(H!==X&&ae.includes(oe))return!0;return!1},z=X=>{let oe=e.formData.detail_fields.indexOf(X);oe!==-1&&e.formData.detail_fields.splice(oe,1)},K=()=>{e.formData.detail_fields.push({field_name:"",field_value:"",field_type:"text",id:Math.random().toString(36).slice(2)})},B=()=>{n.value==0?e.formData.name==""?R():(u.value={},te(1)):te(n.value+1)},R=()=>{var X={...e.formData};(X.user_id==null||X.user_id!=null&&typeof X.user_id=="object"&&X.user_id.length==0)&&(X={...e.formData,user_id:void 0}),E.value!=null&&(X.file=E.value),X.import_lead_fields=A.value;let oe=X.import_lead_fields?{data:X.import_lead_fields,file:X.file.name,campaign_id:e.data.id,company_id:JSON.parse(localStorage.getItem("global_settings")||"{}").xid||"",myId:JSON.parse(localStorage.getItem("auth_user")||"{}").id,etapa:X.etapa?X.etapa:"nueva"}:!1;v({url:e.url,fieldTypes:{json:["detail_fields","user_id","import_lead_fields"],file:["file"]},data:X,successMessage:e.successMessage,success:se=>{s("addEditSuccess",se.xid)}}),oe&&y({url:"leadcsv/push",data:oe,successMessage:_("campaign.imported_leads"),success:se=>{}})},O=()=>{n.value=n.value-1,e.formData.current_step=n.value},W=()=>{u.value={},s("closed")},q=()=>{axiosAdmin.get(C).then(X=>{g.value=X.data})},N=()=>{axiosAdmin.get(m).then(X=>{h.value=X.data})},j=()=>{axiosAdmin.get(p).then(X=>{k.value=X.data.email_templates})},te=X=>{n.value=X,e.formData.current_step=X},le=_e(()=>e.formData.detail_fields&&e.formData.detail_fields.length==0?!1:Aa(e.formData.detail_fields,{field_name:""})||Aa(e.formData.detail_fields,{field_value:""})),ue=X=>{E.value=X},ee=X=>{A.value=X},ve=()=>{axiosAdmin.get("columns/leads_aux").then(X=>{const oe=X.message??X.data??X,se=Array.isArray(oe)?oe:Object.values(oe);$.value=se}).catch(X=>{console.error("Error cargando columnas",X),$.value=[]})};return he(()=>e.visible,(X,oe)=>{X&&e.addEditType=="edit"&&e.data&&e.data.campaign_users&&e.data.campaign_users.length>0?(e.formData.user_id=e.data.campaign_users.map(function(se){return se.x_user_id}),e.formData.plantilla_calidad_id=e.data.plantilla_calidad?e.data.plantilla_calidad.xid:null):(e.formData.user_id=void 0,e.formData.plantilla_calidad_id=null),ve(),e.formData.etapa="nueva",P.value=F.value.length!==0,te(0)}),{isDisabledCampaign:V,none_uc_campaigns:T,uc_campaignsArray:F,isChecked:P,currentStep:n,loading:r,rules:u,allStaffMembers:g,allCalidadTemplates:f,all_uc_campaigns:w,allForms:h,allEmailTemplates:k,onClose:W,onSubmit:B,staffMemberAdded:q,formAdded:N,emailTemplateAdded:j,goBack:O,submitForm:R,removeDetailField:z,addDetailField:K,addFieldsButtonStatus:le,leadFileUploaded:ue,leadColumnChanged:ee,selectedFormFields:$,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),xu={style:{display:"flex"}},em={style:{display:"flex"}},am={class:"mt-20"},tm={key:1,class:"text-center"};function lm(e,s,_,n,v,y){const r=o("FileTextOutlined"),u=o("a-step"),m=o("OrderedListOutlined"),p=o("a-steps"),h=o("a-divider"),g=o("Upload"),f=o("a-form-item"),w=o("a-col"),k=o("a-input"),C=o("a-row"),S=o("a-select-option"),E=o("a-select"),A=o("StaffMemberAddButton"),$=o("a-alert"),P=o("MinusCircleOutlined"),T=o("PlusOutlined"),F=o("a-button"),V=o("ImportLeads"),z=o("a-form"),K=o("DoubleLeftOutlined"),B=o("DoubleRightOutlined"),R=o("SaveOutlined"),O=o("a-space"),W=o("a-drawer");return d(),b(W,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(O,null,{default:a(()=>[e.currentStep!=0?(d(),b(F,{key:"submit",type:"primary",loading:e.loading,onClick:e.goBack},{default:a(()=>[l(K),c(" "+i(e.$t("campaign.previous_step")),1)]),_:1},8,["loading","onClick"])):D("",!0),e.currentStep!=2?(d(),b(F,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit,disabled:e.currentStep==1&&e.addFieldsButtonStatus},{default:a(()=>[c(i(e.$t("campaign.next_step"))+" ",1),l(B)]),_:1},8,["loading","onClick","disabled"])):D("",!0),e.currentStep==2?(d(),b(F,{key:"submit",type:"primary",loading:e.loading,onClick:e.submitForm},{icon:a(()=>[l(R)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"])):D("",!0),l(F,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(z,{layout:"vertical"},{default:a(()=>[l(p,{current:e.currentStep,type:"navigation"},{default:a(()=>[l(u,{title:e.$t("campaign.basic_settings"),description:e.$t("campaign.basic_settings_description")},{icon:a(()=>[l(r)]),_:1},8,["title","description"]),l(u,{title:e.$t("campaign.about_campaign"),description:e.$t("campaign.about_campaign_description")},{icon:a(()=>[l(m)]),_:1},8,["title","description"]),l(u,{title:e.$t("campaign.import_leads"),description:e.$t("campaign.import_leads_description")},null,8,["title","description"])]),_:1},8,["current"]),l(h),e.currentStep==0?(d(),U(L,{key:0},[l(C,{gutter:16,class:"mt-20"},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("product.image"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[l(g,{formData:e.formData,folder:"campaign",imageField:"image",onOnFileUploaded:s[0]||(s[0]=q=>{e.formData.image=q.file,e.formData.image_url=q.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("campaign.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(k,{value:e.formData.name,"onUpdate:value":s[1]||(s[1]=q=>e.formData.name=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("campaign.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(C,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("campaign.members"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:a(()=>[M("span",xu,[l(E,{value:e.formData.user_id,"onUpdate:value":s[2]||(s[2]=q=>e.formData.user_id=q),mode:"multiple",placeholder:e.$t("common.select_default_text",[e.$t("campaign.members")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.allStaffMembers,q=>(d(),b(S,{key:q.xid,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(A,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(C,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("menu.quality"),name:"plantilla_calidad_id",help:e.rules.plantilla_calidad_id?e.rules.plantilla_calidad_id.message:null,validateStatus:e.rules.plantilla_calidad_id?"error":null},{default:a(()=>[M("span",em,[l(E,{value:e.formData.plantilla_calidad_id,"onUpdate:value":s[3]||(s[3]=q=>e.formData.plantilla_calidad_id=q),placeholder:e.$t("common.select_default_text",[e.$t("common.template")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.allCalidadTemplates,q=>(d(),b(S,{key:q.xid,value:q.xid},{default:a(()=>[c(i(q.nombre)+" - ",1),M("small",null,i(q.descripcion),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})],64)):D("",!0),e.currentStep==1?(d(),U(L,{key:1},[!e.formData.detail_fields||e.formData.detail_fields&&e.formData.detail_fields.length==0?(d(),b($,{key:0,class:"mt-20",description:e.$t("campaign.add_detail_field_description"),type:"info","show-icon":""},null,8,["description"])):D("",!0),e.formData.detail_fields&&e.formData.detail_fields.length>0&&e.addFieldsButtonStatus?(d(),b($,{key:1,class:"mt-20",description:e.$t("campaign.add_detail_field_error"),type:"error","show-icon":""},null,8,["description"])):D("",!0),M("div",am,[(d(!0),U(L,null,G(e.formData.detail_fields,(q,N)=>(d(),b(C,{gutter:16,key:q.id},{default:a(()=>[l(w,{span:7},{default:a(()=>[l(f,{name:["detail_fields",N,"field_name"]},{default:a(()=>[l(k,{value:q.field_name,"onUpdate:value":j=>q.field_name=j,placeholder:e.$t("campaign.field_name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),l(w,{span:7},{default:a(()=>[l(f,{name:["detail_fields",N,"field_value"]},{default:a(()=>[l(k,{value:q.field_value,"onUpdate:value":j=>q.field_value=j,placeholder:e.$t("campaign.field_value")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),l(w,{span:7},{default:a(()=>[l(f,{name:["detail_fields",N,"field_type"]},{default:a(()=>[l(E,{value:q.field_type,"onUpdate:value":j=>q.field_type=j,placeholder:e.$t("common.select_default_text",[e.$t("campaign.field_type")]),allowClear:!0},{default:a(()=>[l(S,{value:"text"},{default:a(()=>[c(i(e.$t("common.text")),1)]),_:1}),l(S,{value:"link"},{default:a(()=>[c(i(e.$t("common.link")),1)]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),l(w,{span:3},{default:a(()=>[l(P,{onClick:j=>e.removeDetailField(q)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),l(C,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,null,{default:a(()=>[l(F,{type:"dashed",block:"",onClick:e.addDetailField,disabled:e.addFieldsButtonStatus},{default:a(()=>[l(T),c(" "+i(e.$t("campaign.add_detail_field")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})],64)):D("",!0),e.currentStep==2?(d(),U(L,{key:2},[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("bases.base")+" "+e.$t("bases.stage"),name:"stage",help:e.rules.stage?e.rules.stage.message:null,validateStatus:e.rules.stage?"error":null,class:"required"},{default:a(()=>[l(E,{value:e.formData.etapa,"onUpdate:value":s[4]||(s[4]=q=>e.formData.etapa=q),placeholder:e.$t("common.select_default_text",[e.$t("bases.base")+" "+e.$t("bases.stage")])},{default:a(()=>[l(S,{key:"nueva",value:"nueva"},{default:a(()=>[c(i(e.$t("bases.new")),1)]),_:1}),l(S,{key:"reproceso",value:"reproceso"},{default:a(()=>[c(i(e.$t("bases.reprocessing")),1)]),_:1}),l(S,{key:"na",value:"na"},{default:a(()=>[c(i(e.$t("bases.na")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.permsArray.includes("bases_view")||e.permsArray.includes("admin")?(d(),b(V,{key:0,acceptFormat:".csv",allFields:e.selectedFormFields,onFileUploaded:e.leadFileUploaded,onLeadColumnChanged:e.leadColumnChanged},null,8,["allFields","onFileUploaded","onLeadColumnChanged"])):(d(),U("h4",tm,i(e.$t("bases.not_permission")),1))],64)):D("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const on=Y(Zu,[["render",lm]]),_a=Le({data:[],pagination:{current:1,pageSize:10,total:0,showSizeChanger:!1},loading:!1,selectedRowKeys:[]}),nm=ne({props:["formData","permsArray","campaign","visible","successMessage"],components:{LoadingOutlined:ze,SaveOutlined:$e,FileTextOutlined:Ua,DoubleRightOutlined:ya,DoubleLeftOutlined:ot,CloudDownloadOutlined:Et,ImportLeads:Ft,StaffMemberAddButton:mt,ExclamationCircleOutlined:De,UserAddOutlined:Ul,UserDeleteOutlined:Jn},setup(e,{emit:s}){const _=I(0),{addEditRequestAdmin:n,loading:v,rules:y}=pe(),{t:r}=x(),u=I(void 0),m=I(void 0),p=I([]),{formatDateTime:h}=Z(),g=I(!1),f=[{title:r("campaign.name"),dataIndex:"campaign_id",key:"campaign_id"},{title:r("user.user"),dataIndex:"user_id",key:"user_id"},{title:r("lead.base_name"),dataIndex:"nombreBase",key:"nombreBase"},{title:r("campaign.records"),dataIndex:"cantidadRegistros",key:"cantidadRegistros"},{title:r("bases.stage"),dataIndex:"etapa",key:"etapa"},{title:r("campaign.created_at"),dataIndex:"created_at",key:"created_at"},{title:r("common.action"),dataIndex:"action"}];ie(()=>{e.formData.etapa="nueva",e.campaign&&w()});const w=async()=>{try{const K=await axiosAdmin.get(`bases/${e.campaign.xid}`);k(K)}catch(K){K.response?(console.error("Error 500 al obtener bases:",K.response.data),this.$message.error("Ocurrió un error interno al cargar las bases.")):(console.error("Error de red o de configuración:",K),this.$message.error("No se pudo conectar al servidor."))}},k=K=>{K.length>=1?(_a.data=K,_a.pagination.total=K.length,_a.selectedRowKeys=[]):(_a.data=[],_a.pagination.total=0,_a.selectedRowKeys=[])},C=K=>{_a.pagination.current=K.current,_a.pagination.pageSize=K.pageSize},S=()=>{_.value===0?_.value=1:_.value=0},E=()=>{var K={...e.formData};let B=K.import_lead_fields?{data:K.import_lead_fields,file:K.file.name,campaign_id:e.campaign?e.campaign.id:null,company_id:JSON.parse(localStorage.getItem("global_settings")||"{}").xid||"",myId:JSON.parse(localStorage.getItem("auth_user")||"{}").id,etapa:K.etapa?K.etapa:"nueva"}:!1;B&&n({url:"leadcsv/push",data:B,successMessage:r("messages.imported_successfully"),success:R=>{s("success"),$()}})},A=()=>{_.value>0&&(_.value=_.value-1,e.formData&&(e.formData.current_step=_.value))},$=()=>{y.value={},s("closed")},P=K=>{u.value=K,e.formData&&(e.formData.file=K)},T=K=>{m.value=K,e.formData&&(e.formData.import_lead_fields=K)},F=(K,B,R)=>{console.log("Table params",K,B,R)},V=()=>{axiosAdmin.get("columns/leads_aux").then(K=>{const B=K.message??K.data??K,R=Array.isArray(B)?B:Object.values(B);p.value=R}).catch(K=>{console.error("Error cargando columnas",K),p.value=[]})};return he(()=>e.visible,K=>{K?(e.addEditType=="edit"&&e.data&&e.data.campaign_users&&e.data.campaign_users.length>0?e.formData&&(e.formData.user_id=e.data.campaign_users.map(function(B){return B.x_user_id})):e.formData&&(e.formData.user_id=void 0),e.formData.etapa="nueva",w(),V(),_.value=0,e.formData&&(e.formData.current_step=0)):(u.value=void 0,m.value=void 0,e.formData&&(e.formData.file=void 0,e.formData.import_lead_fields=void 0))}),{showExportLeadsConfirm:(K,B,R)=>{Ne.confirm({title:r("common.export_leads")+"?",icon:l(De),content:r("campaign.export_leads"),centered:!0,okText:r("common.yes"),okType:"danger",cancelText:r("common.no"),onOk(){return axiosAdmin.post(`campaigns/export-leads/base/${K}/${B}/${R}`,{},{responseType:"blob"}).then(O=>{const W=window.URL.createObjectURL(O),q=document.createElement("a");q.href=W;let N=R===1?"Worked":"Not_Worked";q.setAttribute("download",`${B}_${N}.xlsx`),document.body.appendChild(q),q.click(),document.body.removeChild(q),window.URL.revokeObjectURL(W),notification.success({message:r("common.success"),description:r("campaign.exports"),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},formatDateTime:h,tableClienteSerch:_a,handleClientSerchTableChange:C,columns:f,currentStep:_,loading:v,rules:y,onClose:$,onSubmit:S,goBack:A,submitForm:E,handleTableChange:F,leadFileUploaded:P,leadColumnChanged:T,selectedFormFields:p,addFieldsButtonStatus:g,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),om={class:"table-responsive"},sm={key:1,class:"text-center"};function dm(e,s,_,n,v,y){const r=o("FileTextOutlined"),u=o("a-step"),m=o("a-steps"),p=o("a-divider"),h=o("UserAddOutlined"),g=o("CloudDownloadOutlined"),f=o("a-button"),w=o("a-tooltip"),k=o("UserDeleteOutlined"),C=o("a-table"),S=o("a-col"),E=o("a-row"),A=o("a-select-option"),$=o("a-select"),P=o("a-form-item"),T=o("ImportLeads"),F=o("a-form"),V=o("DoubleLeftOutlined"),z=o("DoubleRightOutlined"),K=o("SaveOutlined"),B=o("a-space"),R=o("a-drawer");return d(),b(R,{title:e.$t("bases.bases"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(B,null,{default:a(()=>[e.currentStep===1?(d(),b(f,{key:"previous",type:"primary",loading:e.loading,onClick:e.goBack},{default:a(()=>[l(V),c(" "+i(e.$t("campaign.previous_step")),1)]),_:1},8,["loading","onClick"])):D("",!0),e.currentStep===0?(d(),b(f,{key:"next",type:"primary",loading:e.loading,onClick:e.onSubmit},{default:a(()=>[c(i(e.$t("campaign.next_step"))+" ",1),l(z)]),_:1},8,["loading","onClick"])):D("",!0),e.currentStep===1?(d(),b(f,{key:"finalize",type:"primary",loading:e.loading,onClick:e.submitForm,disabled:e.addFieldsButtonStatus},{icon:a(()=>[l(K)]),default:a(()=>[c(" "+i(e.$t("common.add")),1)]),_:1},8,["loading","onClick","disabled"])):D("",!0),l(f,{key:"cancel",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(F,{layout:"vertical"},{default:a(()=>[l(m,{current:e.currentStep,type:"navigation"},{default:a(()=>[l(u,{title:e.$t("bases.bases_history"),description:e.$t("bases.bases_history")},{icon:a(()=>[l(r)]),_:1},8,["title","description"]),l(u,{title:e.$t("campaign.import_leads"),description:e.$t("campaign.import_leads_description")},null,8,["title","description"])]),_:1},8,["current"]),l(p),e.currentStep==0?(d(),b(E,{key:0},{default:a(()=>[l(S,{span:24},{default:a(()=>[M("div",om,[l(C,{"row-key":O=>O.id,columns:e.columns,"data-source":e.tableClienteSerch.data,pagination:e.tableClienteSerch.pagination,loading:e.tableClienteSerch.loading,onChange:e.handleClientSerchTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:O,record:W})=>[O.dataIndex==="campaign_id"?(d(),U(L,{key:0},[c(i(W.campaign&&W.campaign.name?W.campaign.name:""),1)],64)):D("",!0),O.dataIndex==="user_id"?(d(),U(L,{key:1},[c(i(W.user&&W.user.name?W.user.name:""),1)],64)):D("",!0),O.dataIndex==="etapa"?(d(),U(L,{key:2},[c(i(W.etapa==="nueva"?e.$t("bases.new"):W.etapa==="reproceso"?e.$t("bases.reprocessing"):W.etapa==="na"?e.$t("bases.na"):""),1)],64)):D("",!0),O.dataIndex==="created_at"?(d(),U(L,{key:3},[c(i(W.created_at&&W.created_at!=""?e.formatDateTime(W.created_at):"-"),1)],64)):D("",!0),O.dataIndex==="action"?(d(),U(L,{key:4},[l(w,{title:e.$t("common.export_leads_active")},{default:a(()=>[e.permsArray.includes("export_leads")||e.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:q=>e.showExportLeadsConfirm(W.x_campaign_id,W.nombreBase,1),style:{width:"60px","margin-right":"5px"}},{icon:a(()=>[l(h),l(g)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(w,{title:e.$t("common.export_leads_inactive")},{default:a(()=>[e.permsArray.includes("export_leads")||e.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:q=>e.showExportLeadsConfirm(W.x_campaign_id,W.nombreBase,0),style:{width:"60px"}},{icon:a(()=>[l(k),l(g)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"])],64)):D("",!0)]),_:1},8,["row-key","columns","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})):D("",!0),e.currentStep==1?(d(),U(L,{key:1},[l(S,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(P,{label:e.$t("bases.base")+" "+e.$t("bases.stage"),name:"stage",help:e.rules.stage?e.rules.stage.message:null,validateStatus:e.rules.stage?"error":null,class:"required"},{default:a(()=>[l($,{value:e.formData.etapa,"onUpdate:value":s[0]||(s[0]=O=>e.formData.etapa=O),placeholder:e.$t("common.select_default_text",[e.$t("bases.base")+" "+e.$t("bases.stage")]),allowClear:!0,"show-search":""},{default:a(()=>[l(A,{key:"nueva",value:"nueva"},{default:a(()=>[c(i(e.$t("bases.new")),1)]),_:1}),l(A,{key:"reproceso",value:"reproceso"},{default:a(()=>[c(i(e.$t("bases.reprocessing")),1)]),_:1}),l(A,{key:"na",value:"na"},{default:a(()=>[c(i(e.$t("bases.na")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.permsArray.includes("bases_view")||e.permsArray.includes("admin")?(d(),b(T,{key:0,acceptFormat:".csv",allFields:e.selectedFormFields,onFileUploaded:e.leadFileUploaded,onLeadColumnChanged:e.leadColumnChanged},null,8,["allFields","onFileUploaded","onLeadColumnChanged"])):(d(),U("h4",sm,i(e.$t("bases.not_permission")),1))],64)):D("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const im=Y(nm,[["render",dm]]);function yt(){return{users_id:[],title:"",message:"",url:""}}const Sa=Le({notificacion:yt()}),rm=ne({props:["formData","permsArray","campaign","visible","successMessage"],components:{LoadingOutlined:ze,SaveOutlined:$e,FileTextOutlined:Ua,DoubleRightOutlined:ya,DoubleLeftOutlined:ot,ImportLeads:Ft,StaffMemberAddButton:mt,SendOutlined:Ma},setup(e,{emit:s}){const{t:_}=x(),n="users?limit=10000",v=I([]),y=I(null),r={title:[{required:!0,message:_("common.title")}],message:[{required:!0,message:_("message_template.message")}],users_id:[{required:!0,message:_("common.addressed_to")}]};ie(()=>{Sa.notificacion=yt();const p=axiosAdmin.get(n);Promise.all([p]).then(([h,g])=>{v.value=h.data})});const u=async()=>{try{await y.value.validate(),await axiosAdmin.post("notifications/send-to-users",{user_ids:Sa.notificacion.users_id,title:Sa.notificacion.title,message:Sa.notificacion.message,url:Sa.notificacion.url}),Sa.notificacion=yt(),Ve.success({message:_("common.success"),description:_("common.created")}),s("closed")}catch(p){console.error(p)}},m=()=>{s("closed")};return he(()=>e.visible,p=>{}),{datos:Sa,onClose:m,submitForm:u,allStaffMembers:v,formRef:y,rules:r,drawerWidth:window.innerWidth<=991?"90%":"30%"}}}),um={style:{display:"flex"}};function mm(e,s,_,n,v,y){const r=o("a-image"),u=o("a-descriptions-item"),m=o("a-descriptions"),p=o("a-col"),h=o("a-row"),g=o("a-input"),f=o("a-form-item"),w=o("a-textarea"),k=o("a-select-option"),C=o("a-select"),S=o("SendOutlined"),E=o("a-button"),A=o("a-form"),$=o("a-drawer");return d(),b($,{title:e.$t("common.add_notification"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{default:a(()=>[l(A,{layout:"vertical",ref:"formRef",model:e.datos.notificacion,rules:e.rules},{default:a(()=>[l(h,null,{default:a(()=>[l(p,{span:24},{default:a(()=>[l(m,{title:`${e.$t("common.information")} ${e.$t("campaign.campaign")}`,column:1},{default:a(()=>[l(u,null,{default:a(()=>[l(r,{width:100,src:e.campaign.image_url},null,8,["src"])]),_:1}),l(u,{label:e.$t("campaign.name")},{default:a(()=>[c(i(e.campaign.name),1)]),_:1},8,["label"])]),_:1},8,["title"])]),_:1})]),_:1}),l(h,{gutter:16,class:"mt-20"},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("common.title"),name:"title",class:"required"},{default:a(()=>[l(g,{value:e.datos.notificacion.title,"onUpdate:value":s[0]||(s[0]=P=>e.datos.notificacion.title=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.title")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(h,{gutter:16,class:"mt-20"},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("message_template.message"),name:"message",class:"required"},{default:a(()=>[l(w,{value:e.datos.notificacion.message,"onUpdate:value":s[1]||(s[1]=P=>e.datos.notificacion.message=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_template.message")]),rows:4,maxlength:100},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(h,{gutter:16,class:"mt-20"},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("common.link"),name:"url"},{default:a(()=>[l(g,{value:e.datos.notificacion.url,"onUpdate:value":s[2]||(s[2]=P=>e.datos.notificacion.url=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.link")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(h,null,{default:a(()=>[l(p,{span:24},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("common.addressed_to"),name:"users_id",class:"required"},{default:a(()=>[M("span",um,[l(C,{value:e.datos.notificacion.users_id,"onUpdate:value":s[3]||(s[3]=P=>e.datos.notificacion.users_id=P),mode:"multiple",placeholder:e.$t("common.select_default_text",[e.$t("campaign.members")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.campaign.campaign_users,P=>(d(),b(k,{key:P.user.xid,value:P.user.id},{default:a(()=>[c(i(P.user.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:a(()=>[l(p,{span:24},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24,class:"text-center"},{default:a(()=>[l(E,{key:"submit",type:"primary",loading:e.loading,onClick:e.submitForm},{default:a(()=>[l(S),c(" "+i(e.$t("common.send")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","width","open","onClose"])}const cm=Y(rm,[["render",mm]]),pm=ne({props:{btnType:{default:"default"},btnClass:{default:""},tooltip:{default:!0},campaign:{default:{}}},emits:["success"],components:{SaveOutlined:$e},setup(e,{emit:s}){const{permsArray:_}=Z(),{addEditRequestAdmin:n,loading:v,rules:y}=pe(),r=I(!1),u=I({}),m=I([]),p=I([]),{t:h}=x();ie(()=>{g()});const g=()=>{var C=[];e.campaign&&e.campaign.form&&e.campaign.form.form_fields&&Ee(e.campaign.form.form_fields,S=>{C.push({id:Math.random().toString(36).slice(2),field_name:S.name,field_value:""})}),m.value=[],p.value=e.campaign.campaign_users,Ee(p.value,S=>{S.user&&m.value.push(S.user)}),u.value={campaign_id:e.campaign.xid,lead_data:C,assign_to:null}},f=()=>{r.value=!0},w=async()=>{n({url:"leads/create-lead",data:u.value,successMessage:h("lead.created"),success:C=>{s("success"),k()}})},k=()=>{g(),r.value=!1};return{permsArray:_,visible:r,formData:u,loading:v,rules:y,users:m,campaignUser:p,onSubmit:w,onClose:k,showAdd:f,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),_m={key:0},fm={style:{display:"flex"}};function gm(e,s,_,n,v,y){const r=o("a-button"),u=o("a-tooltip"),m=o("a-select-option"),p=o("a-select"),h=o("a-form-item"),g=o("a-col"),f=o("a-row"),w=o("a-input"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-space"),E=o("a-drawer");return e.permsArray.includes("leads_create")||e.permsArray.includes("admin")?(d(),U("div",_m,[l(u,{title:e.$t("lead.add")},{default:a(()=>[l(r,{type:e.btnType,class:Ol(e.btnClass),onClick:e.showAdd},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["type","class","onClick"])]),_:3},8,["title"]),l(E,{title:e.$t("lead.add"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(S,null,{default:a(()=>[l(r,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.create")),1)]),_:1},8,["loading","onClick"]),l(r,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(k,{layout:"vertical"},{default:a(()=>[l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.$t("lead.assign_to"),name:"assign_to",help:e.rules.assign_to?e.rules.assign_to.message:null,validateStatus:e.rules.assign_to?"error":null,class:"required"},{default:a(()=>[M("span",fm,[l(p,{value:e.formData.assign_to,"onUpdate:value":s[0]||(s[0]=A=>e.formData.assign_to=A),placeholder:e.$t("common.select_default_text",[e.$t("lead.assign_to")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.users,A=>(d(),b(m,{key:A.xid,value:A.xid},{default:a(()=>[c(i(A.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.$t("lead.document"),name:"cedula",help:e.rules.cedula?e.rules.cedula.message:null,validateStatus:e.rules.cedula?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.cedula,"onUpdate:value":s[1]||(s[1]=A=>e.formData.cedula=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.document")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:e.$t("lead.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:a(()=>[l(w,{value:e.formData.nombre,"onUpdate:value":s[2]||(s[2]=A=>e.formData.nombre=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:e.$t("lead.first_last_name"),name:"first_last_name",help:e.rules.first_last_name?e.rules.first_last_name.message:null,validateStatus:e.rules.first_last_name?"error":null},{default:a(()=>[l(w,{value:e.formData.apellido1,"onUpdate:value":s[3]||(s[3]=A=>e.formData.apellido1=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.first_last_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:e.$t("lead.second_last_name"),name:"second_last_name",help:e.rules.second_last_name?e.rules.second_last_name.message:null,validateStatus:e.rules.second_last_name?"error":null},{default:a(()=>[l(w,{value:e.formData.apellido2,"onUpdate:value":s[4]||(s[4]=A=>e.formData.apellido2=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.second_last_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:`${e.$t("lead.phone")} 1`,name:"phone",help:e.rules.tel1?e.rules.tel1.message:null,validateStatus:e.rules.tel1?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.tel1,"onUpdate:value":s[5]||(s[5]=A=>e.formData.tel1=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:`${e.$t("lead.phone")} 2`,name:"phone2"},{default:a(()=>[l(w,{value:e.formData.tel2,"onUpdate:value":s[6]||(s[6]=A=>e.formData.tel2=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:`${e.$t("lead.phone")} 3`,name:"phone3"},{default:a(()=>[l(w,{value:e.formData.tel3,"onUpdate:value":s[7]||(s[7]=A=>e.formData.tel3=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:`${e.$t("lead.phone")} 4`,name:"phone4"},{default:a(()=>[l(w,{value:e.formData.tel4,"onUpdate:value":s[8]||(s[8]=A=>e.formData.tel4=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:`${e.$t("lead.phone")} 5`,name:"phone5"},{default:a(()=>[l(w,{value:e.formData.tel5,"onUpdate:value":s[9]||(s[9]=A=>e.formData.tel5=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(g,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(h,{label:`${e.$t("lead.phone")} 6`,name:"phone6"},{default:a(()=>[l(w,{value:e.formData.tel6,"onUpdate:value":s[10]||(s[10]=A=>e.formData.tel6=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.$t("lead.email"),name:"email"},{default:a(()=>[l(w,{value:e.formData.email,"onUpdate:value":s[11]||(s[11]=A=>e.formData.email=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.email")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])])):D("",!0)}const sn=Y(pm,[["render",gm]]),hm=ne({props:["members"],setup(e,{emit:s}){return{}}});function vm(e,s,_,n,v,y){const r=o("a-avatar"),u=o("a-tooltip"),m=o("a-avatar-group");return d(),b(m,{"max-count":4,"max-style":{color:"#f56a00",backgroundColor:"#fde3cf"}},{default:a(()=>[(d(!0),U(L,null,G(e.members,p=>(d(),b(u,{key:p.x_user_id,title:p.user.name,placement:"top"},{default:a(()=>[l(r,{src:p.user.profile_image_url},null,8,["src"])]),_:2},1032,["title"]))),128))]),_:1})}const dn=Y(hm,[["render",vm]]),bm=ne({props:["campaign"],emits:["success"],components:{PlusOutlined:de,AddLead:sn},setup(e,{emit:s}){const{permsArray:_}=Z();return{leadAdded:()=>{s("success")},permsArray:_}}}),ym={key:1},km=M("br",null,null,-1);function Cm(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("AddLead"),m=o("a-progress"),p=o("a-typography-text"),h=o("a-typography-paragraph");return e.campaign.remaining_leads==0?(d(),U(L,{key:0},[e.permsArray.includes("leads_create")||e.permsArray.includes("admin")?(d(),b(u,{key:0,campaign:e.campaign,btnClass:"p-0",btnType:"link",onSuccess:e.leadAdded},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("lead.add")),1)]),_:1},8,["campaign","onSuccess"])):(d(),U("span",ym,"-"))],64)):(d(),U(L,{key:1},[l(m,{percent:parseInt((e.campaign.total_leads-e.campaign.remaining_leads)/e.campaign.total_leads*100),size:"small"},null,8,["percent"]),km,l(h,{class:"mt-5"},{default:a(()=>[c(i(e.$t("campaign.remaining_leads"))+": ",1),l(p,{strong:""},{default:a(()=>[c(i(e.campaign.total_leads-e.campaign.remaining_leads)+"/"+i(e.campaign.total_leads),1)]),_:1})]),_:1})],64))}const rn=Y(bm,[["render",Cm]]),wm=ne({props:["data","visible","pageTitle"],components:{PlusOutlined:de,MinusSquareOutlined:Il,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{leadColumn:y}=Pt(),r=Fe(),{t:u}=x(),m=I([]),p=I({campaign_id:void 0,select_lead_type:void 0,xid:void 0}),h=I([]),g=I(0),f=E=>{h.value=E,g.value=h.value.length},w=I({xid:void 0}),k=()=>{const E={...p.value,selectedRowKeys:h.value};_({url:"campaigns/recycle-campaign-leads",data:E,successMessage:u("campaign.recucle_campaign_add"),success:A=>{p.value={},h.value=[],g.value=0,s("close")}})},C=()=>{r.tableUrl.value={url:"leads?fields=id,xid,reference_number,lead_data,campaign_id,x_campaign_id,campaign{id,xid,name,status},notes_count,campaignUsers{id,xid,user_id,x_user_id},campaignUsers:user{id,xid,name},assign_to,x_assign_to,assignUsers{id,xid,name}",extraFilters:w},r.fetch({page:1})},S=()=>{v.value={},p.value={campaign_id:void 0,select_lead_type:void 0,xid:void 0},h.value=[],s("close")};return he(()=>e.visible,(E,A)=>{E&&(m.value=[],w.value.xid=e.data,C(),p.value.xid=e.data,axiosAdmin.post("campaigns/campaign-lists-except",{xid:e.data}).then($=>{m.value=$.data.campaigns}))}),{...r,rules:v,loading:n,onClose:S,onSubmit:k,campaigns:m,formData:p,setUrlData:C,leadColumn:y,onRowSelectChange:f,selectedRowKeys:h,selectedRowCount:g,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Sm={style:{display:"flex"}},$m={style:{display:"flex"}},Am={class:"table-responsive"},Dm={key:0},Tm={key:0};function Em(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("a-form-item"),p=o("a-col"),h=o("a-row"),g=o("a-form"),f=o("a-table"),w=o("SaveOutlined"),k=o("a-button"),C=o("a-drawer");return d(),b(C,{title:e.$t("campaign.recycling_campaigns"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(k,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.create")),1)]),_:1},8,["onClick","loading"]),l(k,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{layout:"vertical"},{default:a(()=>[l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("campaign.campaign"),name:"campaign_id",help:e.rules.campaign_id?e.rules.campaign_id.message:null,validateStatus:e.rules.campaign_id?"error":null,class:"required"},{default:a(()=>[M("span",Sm,[l(u,{value:e.formData.campaign_id,"onUpdate:value":s[0]||(s[0]=S=>e.formData.campaign_id=S),placeholder:e.$t("common.select_default_text",[e.$t("campaign.campaign")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.campaigns,S=>(d(),b(r,{key:S.xid,value:S.xid},{default:a(()=>[c(i(S.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("campaign.select_lead_type"),name:"select_lead_type",help:e.rules.select_lead_type?e.rules.select_lead_type.message:null,validateStatus:e.rules.select_lead_type?"error":null,class:"required"},{default:a(()=>[M("span",$m,[l(u,{value:e.formData.select_lead_type,"onUpdate:value":s[1]||(s[1]=S=>e.formData.select_lead_type=S),placeholder:e.$t("common.select_default_text",[e.$t("campaign.lead_type")]),allowClear:!0},{default:a(()=>[l(r,{value:"all_non_managed_leads"},{default:a(()=>[c(i(e.$t("campaign.all_non_managed_leads")),1)]),_:1}),l(r,{value:"select_non_managed_leads"},{default:a(()=>[c(i(e.$t("campaign.select_non_managed_leads")),1)]),_:1})]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[e.formData.select_lead_type=="select_non_managed_leads"?(d(),b(p,{key:0,xs:12,sm:12,md:12,lg:12},{default:a(()=>[l(m,{help:e.rules.select_all_leads?e.rules.select_all_leads.message:null,validateStatus:e.rules.select_all_leads?"error":null,class:"required"},{label:a(()=>[c(i(e.$t("campaign.select_all_leads"))+" : "+i(e.selectedRowCount),1)]),_:1},8,["help","validateStatus"])]),_:1})):D("",!0)]),_:1})]),_:1}),l(h,null,{default:a(()=>[e.formData.select_lead_type=="select_non_managed_leads"?(d(),b(p,{key:0,span:24},{default:a(()=>[M("div",Am,[l(f,{"row-selection":{selectedRowKeys:e.selectedRowKeys,preserveSelectedRowKeys:!0,onChange:e.onRowSelectChange,getCheckboxProps:S=>({disabled:!1,name:S.xid})},columns:e.leadColumn,"row-key":S=>S.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:S,record:E})=>[S.dataIndex==="reference_number"?(d(),U(L,{key:0},[c(i(E.reference_number!=""&&E.reference_number!=null?E.reference_number:"---"),1)],64)):D("",!0),S.dataIndex==="total_notes"?(d(),U(L,{key:1},[c(i(E.notes_count),1)],64)):D("",!0),S.dataIndex==="campaign_id"?(d(),U(L,{key:2},[c(i(E.campaign.name),1)],64)):D("",!0),S.dataIndex==="assign_to"?(d(),U(L,{key:3},[c(i(E.assign_users?E.assign_users.name:"-"),1)],64)):D("",!0),S.dataIndex==="name"?(d(!0),U(L,{key:4},G(E.lead_data,A=>(d(),U("div",{key:A.id},[A.field_name==="First Name"?(d(),U("div",Dm,i(A.field_value),1)):D("",!0)]))),128)):D("",!0),S.dataIndex==="email"?(d(!0),U(L,{key:5},G(E.lead_data,A=>(d(),U("div",{key:A.id},[A.field_name==="Email"?(d(),U("div",Tm,i(A.field_value),1)):D("",!0)]))),128)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})):D("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const Um=Y(wm,[["render",Em]]),Om={components:{PlusOutlined:de,EditOutlined:Oe,FileAddOutlined:Qn,NotificationOutlined:Xn,DeleteOutlined:Se,PlayCircleOutlined:oa,StopOutlined:Oa,ExportOutlined:Zn,ExclamationCircleOutlined:De,CloudDownloadOutlined:Et,SwapOutlined:xn,RecycleLead:Um,AddEdit:on,AddBase:im,AddNotification:cm,AdminPageHeader:Ce,AddLead:sn,CampaignMembers:dn,CampaignProgress:rn},setup(){const{permsArray:e,appSetting:s,formatDateTime:_}=Z(),{url:n,addEditUrl:v,initData:y,columns:r,filterableColumns:u,hashableColumns:m,extraFilters:p}=Pt(),h=Fe(),{t:g}=x(),f=I(!1),w=I(),k=q=>{f.value=!0,w.value=q.xid};ie(()=>{C(),h.crudUrl.value=v,h.langKey.value="campaign",h.initData.value={...y},h.formData.value={...y},h.hashableColumns.value=[...m]});const C=()=>{h.tableUrl.value={url:n,extraFilters:p},h.table.filterableColumns=u,h.fetch({page:1})},S=(q,N)=>{Ne.confirm({title:g("common.export_leads")+"?",icon:l(De),content:g("campaign.export_leads"),centered:!0,okText:g("common.yes"),okType:"danger",cancelText:g("common.no"),onOk(){return axiosAdmin.post(`campaigns/export-leads/${q}`,{},{responseType:"blob"}).then(j=>{const te=window.URL.createObjectURL(j),le=document.createElement("a");le.href=te,le.setAttribute("download",`${N}.xlsx`),document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL(te),Ve.success({message:g("common.success"),description:g("campaign.exports"),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},E=()=>{f.value=!1},A=I(!1),$=I(!1),P=I(null),T=I({}),F=I(""),V=I(""),z=I("");function K(q){P.value=q,T.value={...q},F.value=`${v}/${q.xid}/bases`,V.value=`${g("common.add")} ${g("bases.base")}`,z.value=g("bases.base_added_success"),A.value=!0}function B(q){P.value=q,z.value=g("common.created"),$.value=!0}function R(){A.value=!1}function O(){$.value=!1}function W(){$.value=!1}return{closeAddNotification:O,addBaseVisible:A,addNotificationVisible:$,selectedCampaign:P,baseFormData:T,baseUrl:F,basePageTitle:V,baseSuccessMsg:z,showAddBase:K,showAddNotification:B,closeAddBase:R,onBaseSuccess:W,permsArray:e,formatDateTime:_,appSetting:s,columns:r,...h,filterableColumns:u,extraFilters:p,setUrlData:C,closeCampaign:E,visible:f,campaignData:w,getAllNonCampaign:k,showExportLeadsConfirm:S}}},Im={class:"table-responsive"},Pm={key:0},Mm={key:1};function Fm(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("AddBase"),z=o("AddNotification"),K=o("PlayCircleOutlined"),B=o("a-tab-pane"),R=o("StopOutlined"),O=o("a-tabs"),W=o("a-image"),q=o("CampaignProgress"),N=o("CampaignMembers"),j=o("CloudDownloadOutlined"),te=o("a-tooltip"),le=o("AddLead"),ue=o("EditOutlined"),ee=o("FileAddOutlined"),ve=o("SwapOutlined"),X=o("NotificationOutlined"),oe=o("a-table"),se=o("RecycleLead"),H=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.campaigns"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.campaigns")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("campaigns_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("campaign.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("campaigns_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:24,lg:24,xl:12},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=ae=>e.table.searchColumn=ae),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,ae=>(d(),b(S,{key:ae.key},{default:a(()=>[c(i(ae.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=ae=>e.table.searchString=ae),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(H,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,permsArray:n.permsArray,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","permsArray","formData","data","pageTitle","successMessage"]),l(V,{addEditType:"add",formData:e.formData,permsArray:n.permsArray,visible:n.addBaseVisible,campaign:n.selectedCampaign,pageTitle:n.basePageTitle,successMessage:n.baseSuccessMsg,onAddEditSuccess:n.onBaseSuccess,onClosed:n.closeAddBase},null,8,["formData","permsArray","visible","campaign","pageTitle","successMessage","onAddEditSuccess","onClosed"]),l(z,{addEditType:"add",visible:n.addNotificationVisible,campaign:n.selectedCampaign,successMessage:n.baseSuccessMsg,onAddEditSuccess:e.onNotificationSuccess,onClosed:n.closeAddNotification},null,8,["visible","campaign","successMessage","onAddEditSuccess","onClosed"]),n.permsArray.includes("view_completed_campaigns")||n.permsArray.includes("admin")?(d(),b(P,{key:0},{default:a(()=>[l(C,{span:24},{default:a(()=>[l(O,{activeKey:n.extraFilters.campaign_status,"onUpdate:activeKey":s[2]||(s[2]=ae=>n.extraFilters.campaign_status=ae),onChange:n.setUrlData},{default:a(()=>[l(B,{key:"active"},{tab:a(()=>[M("span",null,[l(K),c(" "+i(e.$t("campaign.active_campaign")),1)])]),_:1}),l(B,{key:"completed"},{tab:a(()=>[M("span",null,[l(R),c(" "+i(e.$t("campaign.completed_campaign")),1)])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):D("",!0),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",Im,[l(oe,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:ae=>({disabled:!1,name:ae.xid})},columns:n.columns,"row-key":ae=>ae.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:ae,record:ce})=>[ae.dataIndex==="image"?(d(),b(W,{key:0,width:32,src:ce.image_url},null,8,["src"])):D("",!0),ae.dataIndex==="progress"?(d(),b(q,{key:1,campaign:ce,onSuccess:e.fetch},null,8,["campaign","onSuccess"])):D("",!0),ae.dataIndex==="form"?(d(),U(L,{key:2},[c(i(ce.x_form_id!=""&&ce.form&&ce.form.xid?ce.form.name:"-"),1)],64)):D("",!0),ae.dataIndex==="members"?(d(),b(N,{key:3,members:ce.campaign_users},null,8,["members"])):D("",!0),ae.dataIndex==="started_on"?(d(),U(L,{key:4},[c(i(ce.started_on&&ce.started_on!=""?n.formatDateTime(ce.started_on):"-"),1)],64)):D("",!0),ae.dataIndex==="completed_on"?(d(),U(L,{key:5},[c(i(ce.completed_on&&ce.completed_on!=""?n.formatDateTime(ce.completed_on):"-"),1)],64)):D("",!0),ae.dataIndex==="lead_distribution_method"?(d(),U(L,{key:6},[ce.lead_distribution_method==="random"?(d(),U("div",Pm,i(e.$t("campaign.random")),1)):(d(),U("div",Mm,i(e.$t("campaign.linear")),1))],64)):D("",!0),ae.dataIndex==="completed_by"?(d(),U(L,{key:7},[c(i(ce.x_completed_by&&ce.completed_by&&ce.completed_by.name?ce.completed_by.name:"-"),1)],64)):D("",!0),ae.dataIndex==="last_actioner"?(d(),U(L,{key:8},[c(i(ce.last_actioner&&ce.last_actioner.name?ce.last_actioner.name:"-"),1)],64)):D("",!0),ae.dataIndex==="action"?(d(),b(k,{key:9},{default:a(()=>[l(te,{title:e.$t("common.export_leads")},{default:a(()=>[n.permsArray.includes("export_leads")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:Ae=>n.showExportLeadsConfirm(ce.xid,ce.name)},{icon:a(()=>[l(j)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(le,{campaign:ce,btnType:"primary",onSuccess:n.setUrlData},{icon:a(()=>[l(g)]),_:2},1032,["campaign","onSuccess"]),l(te,{title:e.$t("common.edit")},{default:a(()=>[n.permsArray.includes("campaigns_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:Ae=>e.editItem(ce)},{icon:a(()=>[l(ue)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(te,{title:`${e.$t("common.add")} ${e.$t("bases.base")}`},{default:a(()=>[n.permsArray.includes("bases_view")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:Ae=>n.showAddBase(ce)},{icon:a(()=>[l(ee)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(te,{title:e.$t("campaign.recycling_campaigns")},{default:a(()=>[n.permsArray.includes("campaigns_recycle")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:Ae=>n.getAllNonCampaign(ce),style:{"margin-left":"4px"}},{icon:a(()=>[l(ve)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(te,{title:e.$t("common.add_notification")},{default:a(()=>[n.permsArray.includes("campaigns_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:Ae=>n.showAddNotification(ce)},{icon:a(()=>[l(X)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(te,{title:e.$t("common.delete")},{default:a(()=>[(n.permsArray.includes("campaigns_delete")||n.permsArray.includes("admin"))&&(!ce.children||ce.children.length==0)?(d(),b(f,{key:0,type:"primary",danger:"",onClick:Ae=>e.showDeleteConfirm(ce.xid)},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"])]),_:2},1024)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),l(se,{visible:n.visible,data:n.campaignData,onClose:n.closeCampaign},null,8,["visible","data","onClose"])]),_:1})],64)}const Rm=Y(Om,[["render",Fm]]),Lm=ne({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:on},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=Pt(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Bm={key:0};function qm(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("AddEdit");return e.permsArray.includes("campaigns_create")||e.permsArray.includes("admin")?(d(),U("div",Bm,[e.tooltip?(d(),b(m,{key:0,placement:"topLeft",title:e.$t("campaign.add"),"arrow-point-at-center":""},{default:a(()=>[l(u,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(u,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])),l(p,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("campaign.add"),successMessage:e.$t("campaign.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const Vm=Y(Lm,[["render",qm]]),Km={components:{AdminPageHeader:Ce,CampaignMembers:dn,CampaignProgress:rn,CampaignAddButton:Vm,PlusCircleOutlined:eo,StopOutlined:Oa,PlayCircleOutlined:oa,SyncOutlined:Ta},setup(){const{formatDateTime:e,permsArray:s}=Z(),{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y=I(void 0),{t:r}=x(),u="call-managers?fields=id,xid,name,image,image_url,reference_prefix,allow_reference_prefix,remaining_leads,total_leads,campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url},form_id,x_form_id,form{id,xid,name,form_fields},detail_fields,last_action_by,x_last_action_by,lastActioner{id,xid,name},completed_by,x_completed_by,completedBy{id,xid,name},started_on,completed_on,upcoming_lead_action,managed_data",m=na();ie(()=>{p()});const p=()=>{const k=axiosAdmin.get(u);Promise.all([k]).then(([C])=>{y.value=C.data})};return{permsArray:s,formatDateTime:e,allCampaigns:y,fetchCampaigns:p,campaignAdded:()=>{axiosAdmin.get(u).then(k=>{y.value=k.data})},stopCampaign:k=>{Ne.confirm({title:r("campaign.stop_campaign")+"?",icon:l(De),content:r("campaign.are_you_want_to_stop_campaign"),centered:!0,okText:r("common.yes"),okType:"danger",cancelText:r("common.no"),onOk(){_({url:"campaigns/stop",data:{x_campaign_id:k},successMessage:r("campaign.campaign_stopped_successfully"),success:C=>{p()}})},onCancel(){}})},getLeaActionColor:k=>k=="start_and_new_lead"?"#faad14":k=="resume"?"#52c41a":"",takeAction:k=>{Ne.confirm({title:r("common.are_you_sure")+"?",icon:l(De),content:r("campaign.are_you_want_to_create_new_lead"),centered:!0,okText:r("common.yes"),okType:"danger",cancelText:r("common.no"),onOk(){_({url:"campaigns/take-action",data:{x_campaign_id:k.xid},successMessage:r("campaign.new_lead_added"),success:C=>{m.push({name:"admin.formsUCB.Correspondencia",params:{id:C.x_lead_id}})}})},onCancel(){}})}}}},zm={class:"dashboard-page-content-container"},Nm={key:0},jm={class:"mb-2"},Hm={key:1};function Wm(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("a-typography-text"),f=o("CampaignAddButton"),w=o("a-empty"),k=o("a-col"),C=o("a-row"),S=o("CampaignMembers"),E=o("a-image"),A=o("a-card-meta"),$=o("PlayCircleOutlined"),P=o("PlusCircleOutlined"),T=o("SyncOutlined"),F=o("a-button"),V=o("StopOutlined"),z=o("a-card"),K=o("a-skeleton");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.call_manager"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.call_manager")),1)]),_:1})]),_:1})]),_:1}),M("div",zm,[n.allCampaigns!=null?(d(),U("div",Nm,[n.allCampaigns.length==0?(d(),b(C,{key:0,gutter:[15,15],class:"mt-30 mb-20"},{default:a(()=>[l(k,{span:24},{default:a(()=>[l(w,{"image-style":{height:"250px"}},{description:a(()=>[l(g,{type:"warning",strong:""},{default:a(()=>[c(i(e.$t("campaign.no_call_manager_data")),1)]),_:1})]),default:a(()=>[l(f,{btnType:"primary",onOnAddSuccess:n.campaignAdded,tooltip:!1},{default:a(()=>[c(i(e.$t("campaign.add")),1)]),_:1},8,["onOnAddSuccess"])]),_:1})]),_:1})]),_:1})):(d(),b(C,{key:1,gutter:[15,15],class:"mt-30 mb-20"},{default:a(()=>[(d(!0),U(L,null,G(n.allCampaigns,B=>(d(),b(k,{key:B.xid,xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[l(z,{title:B.name,hoverable:""},{actions:a(()=>[l(F,{type:"link",style:we({color:n.getLeaActionColor(B.upcoming_lead_action)}),onClick:R=>n.takeAction(B)},{icon:a(()=>[B.upcoming_lead_action=="start_and_new_lead"?(d(),b($,{key:0})):B.upcoming_lead_action=="new_lead"?(d(),b(P,{key:1})):B.upcoming_lead_action=="start"?(d(),b($,{key:2})):(d(),b(T,{key:3}))]),default:a(()=>[c(" "+i(e.$t(`campaign.${B.upcoming_lead_action}`)),1)]),_:2},1032,["style","onClick"]),n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(F,{key:0,type:"link",onClick:R=>n.stopCampaign(B.xid),danger:""},{icon:a(()=>[l(V)]),default:a(()=>[c(" "+i(e.$t("common.stop")),1)]),_:2},1032,["onClick"])):D("",!0)]),default:a(()=>[l(A,null,{description:a(()=>[l(C,{gutter:16,class:"mt-10",justify:"space-between",align:"middle"},{default:a(()=>[l(k,{span:12},{default:a(()=>[M("div",jm,i(e.$t("campaign.members")),1),l(S,{members:B.campaign_users},null,8,["members"])]),_:2},1024),l(k,{span:12,class:"text-center"},{default:a(()=>[l(E,{width:100,src:B.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024),l(C,{gutter:16,class:"mt-25"},{default:a(()=>[l(k,{span:8},{default:a(()=>[c(i(e.$t("campaign.managed_vs_total_leads")),1)]),_:1}),l(k,{span:16},{default:a(()=>[c(i(B.managed_data.started_leads)+"/"+i(B.managed_data.total_leads),1)]),_:2},1024)]),_:2},1024),l(C,{gutter:16,class:"mt-25"},{default:a(()=>[l(k,{span:8},{default:a(()=>[c(i(e.$t("campaign.not_having_notes")),1)]),_:1}),l(k,{span:16},{default:a(()=>[c(i(B.managed_data.not_having_notes),1)]),_:2},1024)]),_:2},1024),l(C,{gutter:16,class:"mt-25"},{default:a(()=>[l(k,{span:8},{default:a(()=>[c(i(e.$t("campaign.having_notes")),1)]),_:1}),l(k,{span:16},{default:a(()=>[c(i(B.managed_data.having_notes),1)]),_:2},1024)]),_:2},1024),l(C,{gutter:16,class:"mt-20"},{default:a(()=>[l(k,{span:8},{default:a(()=>[c(i(e.$t("campaign.last_actioner")),1)]),_:1}),l(k,{span:16},{default:a(()=>[c(i(B.last_actioner&&B.last_actioner.name?B.last_actioner.name:"-"),1)]),_:2},1024)]),_:2},1024),l(C,{gutter:16,class:"mt-25"},{default:a(()=>[l(k,{span:8},{default:a(()=>[c(i(e.$t("campaign.started_on")),1)]),_:1}),l(k,{span:16},{default:a(()=>[c(i(B.started_on!=null?n.formatDateTime(B.started_on):"-"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1}))])):(d(),U("div",Hm,[l(K,{active:""})]))])],64)}const Ym=Y(Km,[["render",Wm]]),Gm=ne({props:{dateTime:{default:void 0},disabled:{default:!1},isFutureDateDisabled:{default:!0}},emits:["dateTimeChanged"],setup(e,{emit:s}){const _=I(void 0),{disabledDate:n,formatDateTime:v,dayjs:y}=Z();return ie(()=>{e.dateTime&&(_.value=y(e.dateTime))}),{dateTimeValue:_,disabledDate:n,formatOrderDate:m=>m?v(m.format()):void 0,dateTimeChanged:m=>{const p=m?m.utc().format("YYYY-MM-DDTHH:mm:ssZ"):void 0;s("dateTimeChanged",p)}}}});function Jm(e,s,_,n,v,y){const r=o("a-date-picker");return d(),b(r,{value:e.dateTimeValue,"onUpdate:value":s[0]||(s[0]=u=>e.dateTimeValue=u),format:e.formatOrderDate,"disabled-date":e.isFutureDateDisabled?e.disabledDate:void 0,"show-time":"",placeholder:e.$t("common.date_time"),style:{width:"100%"},onChange:e.dateTimeChanged,disabled:e.disabled},null,8,["value","format","disabled-date","placeholder","onChange","disabled"])}const Rt=Y(Gm,[["render",Jm]]),Qm=ne({props:{bookingType:{default:null},xLeadId:{default:null},showDeleteIcon:{default:!0},showDeleteText:{default:!0}},emits:["success"],components:{DeleteOutlined:Se,ExclamationCircleOutlined:De},setup(e,{emit:s}){const{t:_}=x(),n=I(""),{addEditRequestAdmin:v,loading:y}=pe();return ie(()=>{n.value=e.bookingType=="salesman_bookings"?_("salesman_booking.delete_salesman_booking"):_("lead_follow_up.delete_follow_up")}),{pageTitle:n,loading:y,deleteModal:()=>{const u=e.bookingType=="salesman_bookings"?"salesman-bookings":"lead-follow-ups/delete",m=e.bookingType=="salesman_bookings"?"salesman_booking":"lead_follow_up";Ne.confirm({title:_("common.delete")+"?",icon:l(De),content:_(`${m}.delete_message`),centered:!0,okText:_("common.yes"),okType:"danger",cancelText:_("common.no"),onOk(){v({url:u,data:{x_lead_id:e.xLeadId,booking_type:e.bookingType},success:p=>{s("success"),Ve.success({message:_("common.success"),description:_(`${m}.deleted`),placement:"bottomRight"})}})},onCancel(){}})}}}});function Xm(e,s,_,n,v,y){const r=o("DeleteOutlined"),u=o("a-button"),m=o("a-tooltip");return d(),b(m,{title:e.pageTitle},{default:a(()=>[l(u,{style:{background:"#ff4d4f",borderColor:"#ff4d4f"},type:"primary",onClick:e.deleteModal,loading:e.loading},Fa({default:a(()=>[e.showDeleteText?(d(),U(L,{key:0},[c(i(e.$t("common.delete")),1)],64)):D("",!0)]),_:2},[e.showDeleteIcon?{name:"icon",fn:a(()=>[l(r)]),key:"0"}:void 0]),1032,["onClick","loading"])]),_:1},8,["title"])}const Lt=Y(Qm,[["render",Xm]]),Zm=ne({props:{leadId:{default:null},bookingType:{default:null},btnType:{default:"primary"},btnShape:{default:"rectangle"}},emits:["success"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,DeleteOutlined:Se,DateTimePicker:Rt,DeleteBooking:Lt},setup(e,{emit:s}){const{t:_}=x(),n=I("add"),v=I({lead_id:e.leadId,booking_type:e.bookingType,date_time:void 0,user_id:void 0,notes:""}),y=I(!1),r=I(""),u=I({}),m=I([]),p=e.bookingType=="salesman_bookings"?`leads/${e.leadId}?fields=id,xid,salesman_booking_id,x_salesman_booking_id,salesmanBooking{id,xid,log_type,user_id,x_user_id,date_time,notes},salesmanBooking:user{id,xid,name}`:`leads/${e.leadId}?fields=id,xid,lead_follow_up_id,x_lead_follow_up_id,leadFollowUp{id,xid,log_type,user_id,x_user_id,date_time,notes},leadFollowUp:user{id,xid,name}`,{addEditRequestAdmin:h,loading:g,rules:f}=pe(),{appSetting:w}=Z(),k=_e(()=>e.bookingType=="salesman_bookings"?"salesman_booking":"lead_follow_up");ie(()=>{r.value=e.bookingType=="salesman_bookings"?_("menu.salesman_bookings"):_("menu.lead_follow_up"),C()});const C=()=>{if(e.leadId){const $=axiosAdmin.get(p),P=axiosAdmin.get(`leads/campaign-members?lead_id=${e.leadId}&booking_type=${e.bookingType}`);Promise.all([$,P]).then(([T,F])=>{var V=T.data;e.bookingType=="salesman_bookings"&&V.salesman_booking&&V.salesman_booking.xid?(v.value={...v.value,date_time:V.salesman_booking.date_time,user_id:V.salesman_booking.x_user_id,notes:V.salesman_booking.notes},n.value="edit"):e.bookingType=="lead_follow_up"&&V.lead_follow_up&&V.lead_follow_up.xid?(v.value={...v.value,date_time:V.lead_follow_up.date_time,user_id:V.lead_follow_up.x_user_id,notes:V.lead_follow_up.notes},n.value="edit"):v.value={...v.value,date_time:void 0,user_id:void 0,notes:""},u.value=V,m.value=F.data.users})}},S=()=>{const $=n.value=="add"?"created":"updated";h({url:"leads/create-booking",data:v.value,successMessage:_(`${k.value}.${$}`),success:P=>{s("success",P.booking),A(),C()}})},E=()=>{y.value=!0},A=()=>{y.value=!1};return{loading:g,rules:f,onSubmit:S,appSetting:w,formData:v,addEditType:n,pageTitle:r,hideModal:A,showModal:E,visible:y,users:m,leadDetails:u,getInitData:C,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function xm(e,s,_,n,v,y){const r=o("a-button"),u=o("a-tooltip"),m=o("a-select-option"),p=o("a-select"),h=o("a-form-item"),g=o("a-col"),f=o("a-row"),w=o("DateTimePicker"),k=o("a-textarea"),C=o("a-form"),S=o("SaveOutlined"),E=o("DeleteBooking"),A=o("a-modal");return d(),U(L,null,[l(u,{title:e.pageTitle},{default:a(()=>[l(r,{type:e.btnType,shape:e.btnShape,size:"small",onClick:e.showModal},{default:a(()=>[ke(e.$slots,"default")]),_:3},8,["type","shape","onClick"])]),_:3},8,["title"]),l(A,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit,destroyOnClose:!0},{footer:a(()=>[l(r,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(S)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),e.leadDetails&&e.leadDetails.xid&&e.bookingType=="salesman_bookings"&&e.leadDetails.x_salesman_booking_id!=null||e.leadDetails&&e.leadDetails.xid&&e.bookingType=="lead_follow_up"&&e.leadDetails.x_lead_follow_up_id!=null?(d(),b(E,{key:0,bookingType:e.bookingType,onSuccess:s[3]||(s[3]=()=>{e.visible=!1,e.getInitData()}),xLeadId:e.leadDetails.xid},null,8,["bookingType","xLeadId"])):D("",!0),l(r,{key:"back",onClick:e.hideModal},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(C,{layout:"vertical"},{default:a(()=>[l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.bookingType=="salesman_bookings"?e.$t("salesman.salesman"):e.$t("user.staff_member"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:a(()=>[l(p,{value:e.formData.user_id,"onUpdate:value":s[0]||(s[0]=$=>e.formData.user_id=$),placeholder:e.$t("common.select_default_text",[e.bookingType=="salesman_bookings"?e.$t("salesman.salesman"):e.$t("user.staff_member")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(e.users,$=>(d(),b(m,{key:$.xid,value:$.xid,title:$.name},{default:a(()=>[c(i($.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.bookingType=="salesman_bookings"?e.$t("lead.booking_time"):e.$t("lead_follow_up.follow_up_time"),name:"date_time",help:e.rules.date_time?e.rules.date_time.message:null,validateStatus:e.rules.date_time?"error":null,class:"required"},{default:a(()=>[l(w,{dateTime:e.formData.date_time,isFutureDateDisabled:!1,onDateTimeChanged:s[1]||(s[1]=$=>e.formData.date_time=$)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"required"},{default:a(()=>[l(k,{value:e.formData.notes,"onUpdate:value":s[2]||(s[2]=$=>e.formData.notes=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const ec=Y(Zm,[["render",xm]]),ac=e=>{const{convertStringToKey:s,getCampaignUrl:_,user:n}=Z(),v="lead{id,xid,reference_number,cedula,nombre,apellido1,apellido2,fechaNacimiento,edad,nacionalidad,nombreBase,tel1,email,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name}",y="form-field-names/all",r=`lead-logs?fields=id,xid,log_type,time_taken,date_time,started_on,notes,phone,message,email,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,${v}`,u=I([]),m=["lead_id","campaign_id","user_id"],{t:p}=x(),h=I([]),g=I([]),f=I([]);return{url:r,columns:h,filterableColumns:[],hashableColumns:m,allFormFieldNames:u,allCampaigns:g,allUsers:f,getPrefetchData:()=>{const C=_(),S=axiosAdmin.get(C),E=axiosAdmin.get(y),A=axiosAdmin.get(`all-users?log_type=${e.logType}`);return Promise.all([E,S,A]).then(([$,P,T])=>{u.value=$.data.data,g.value=P.data,f.value=T.data.users;var F=[];if(e.showLeadDetails){var F=[{title:p("lead.id"),dataIndex:"id"},{title:p("lead.document"),dataIndex:"cedula"},{title:p("lead.campaign"),dataIndex:"campaign"}];e.showFormFields&&Ee($.data.data,B=>{F.push({title:B.field_name,dataIndex:s(B.field_name)})})}e.logType=="call_log"&&F.push({title:p("lead.call_duration"),dataIndex:"time_taken"});var V=p("lead.called_on"),z=p("lead.call_by");e.logType=="lead_follow_up"?V=p("lead.follow_up_time"):e.logType=="salesman_booking"?(V=p("lead.booking_time"),z=p("menu.salesman")):e.logType=="notes"&&(V=p("lead.added_on"),z=p("lead.added_by")),e.logType=="message"&&(F.push({title:p("lead_log.user_id"),dataIndex:"user_id"}),F.push({title:p("lead_log.phone"),dataIndex:"lead_phone_no"}),F.push({title:p("lead_log.message"),dataIndex:"message"})),e.logType=="notes"&&F.push({title:p("common.notes"),dataIndex:"notes"}),e.logType=="call_log"?F=[...F,{title:V,dataIndex:"date_time"},{title:z,dataIndex:"actioner"}]:e.logType=="email"?(F.push({title:p("lead_log.user_id"),dataIndex:"user_id"}),F.push({title:p("lead_log.email"),dataIndex:"lead_email"}),F.push({title:p("lead_log.message"),dataIndex:"message"}),F.push({title:p("lead_log.date_time"),dataIndex:"date_time"})):F.push({title:p("lead_log.date_time"),dataIndex:"date_time"}),h.value=F})}}},tc=ne({components:{DownloadOutlined:ga},props:["data","visible","pageTitle"],setup(e,{emit:s}){const{loading:_,rules:n}=pe();return{rules:n,loading:_,onClose:()=>{n.value={},s("close")}}}}),lc={key:0},nc=["innerHTML"],oc={key:1};function sc(e,s,_,n,v,y){const r=o("a-descriptions-item"),u=o("a-descriptions"),m=o("a-col"),p=o("a-row"),h=o("a-button"),g=o("a-modal");return d(),b(g,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(h,{key:"back",type:"primary",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{labelStyle:{fontWeight:"bold"},contentStyle:{marginBottom:"15px"},column:1,layout:"vertical",size:"small"},{default:a(()=>[l(r,null,{default:a(()=>[e.data&&e.data.message?(d(),U("div",lc,[M("div",{innerHTML:e.data.message},null,8,nc)])):(d(),U("span",oc,"-"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const dc=Y(tc,[["render",sc]]),ic={props:{pageName:{default:"index"},leadId:{default:void 0},showCampaignStatus:{default:!1},showTableSearch:{default:!0},showUserFilter:{default:!1},showDateFilter:{default:!0},showLeadDetails:{default:!0},showFormFields:{default:!0},showAction:{default:!0},logType:{default:"call_log"},scrollStyle:{default:{}}},components:{PlayCircleOutlined:oa,StopOutlined:Oa,DateRangePicker:qa,ViewMessageHistory:dc},setup(e,{emit:s}){const{permsArray:_,appSetting:n,formatDateTime:v,convertStringToKey:y,getCampaignUrl:r,user:u,formatTimeDuration:m}=Z(),p=sa(),h=rt(),{url:g,columns:f,filterableColumns:w,allFormFieldNames:k,hashableColumns:C,allCampaigns:S,allUsers:E,getPrefetchData:A}=ac(e),$=I(!1),P=I({}),T=I({campaign_id:void 0,page_name:e.pageName,campaign_status:"active",lead_id:e.leadId!=null?e.leadId:void 0,log_type:e.logType,dates:[]}),F=I({log_type:e.logType,user_id:void 0});ie(()=>{A().then(O=>{e.logType!="salesman_bookings"&&e.pageName!="lead_action"&&(F.value={...F.value}),h.hashable.value=[...C],K()})});const V=O=>{$.value=!0,P.value=O},z=()=>{$.value=!1},K=()=>{h.tableUrl.value={url:g,filters:F,extraFilters:T},h.table.filterableColumns=w,h.hashable.value=[...C],h.table.pagination={...h.table.pagination,current:1},h.fetch({page:1})},B=(O,W)=>{var q="-";return Ee(W,N=>{O.includes(N.field_name)&&(q=N.field_value)}),q},R=O=>{T.value={...T.value,campaign_id:void 0};const W=r(T.value.campaign_status),q=axiosAdmin.get(W);Promise.all([q]).then(([N])=>{S.value=N.data,K()})};return he(()=>e.leadId,O=>{O?(T.value.lead_id=O,K()):(h.table.data=[],h.table.pagination.current=1,s("update:leadId",null))},{immediate:!0}),{...h,...p,permsArray:_,appSetting:n,formatDateTime:v,formatTimeDuration:m,columns:f,filterableColumns:w,allFormFieldNames:k,convertStringToKey:y,findFieldValue:B,allCampaigns:S,allUsers:E,filters:F,extraFilters:T,setUrlData:K,showMessageHistory:V,closeMessage:z,campaignTypeChanged:R,visibleMessage:$,MessageData:P}}},rc={key:0,class:"table-responsive"},uc={key:1};function mc(e,s,_,n,v,y){const r=o("PlayCircleOutlined"),u=o("a-tab-pane"),m=o("StopOutlined"),p=o("a-tabs"),h=o("a-col"),g=o("a-row"),f=o("a-select-option"),w=o("a-select"),k=o("DateRangePicker"),C=o("a-button"),S=o("a-table"),E=o("view-lead-details"),A=o("ViewMessageHistory");return d(),U(L,null,[_.showCampaignStatus?(d(),b(g,{key:0},{default:a(()=>[l(h,{span:24},{default:a(()=>[l(p,{activeKey:n.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=$=>n.extraFilters.campaign_status=$),onChange:n.campaignTypeChanged},{default:a(()=>[l(u,{key:"active"},{tab:a(()=>[M("span",null,[l(r),c(" "+i(e.$t("campaign.active_campaign")),1)])]),_:1}),n.permsArray.includes("view_completed_campaigns")||n.permsArray.includes("admin")?(d(),b(u,{key:"completed"},{tab:a(()=>[M("span",null,[l(m),c(" "+i(e.$t("campaign.completed_campaign")),1)])]),_:1})):D("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):D("",!0),_.showTableSearch||_.showDateFilter||_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:1,gutter:[15,15],class:"mb-20"},{default:a(()=>[_.showTableSearch?(d(),b(h,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(w,{value:n.extraFilters.campaign_id,"onUpdate:value":s[1]||(s[1]=$=>n.extraFilters.campaign_id=$),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allCampaigns,$=>(d(),b(f,{key:$.xid,title:$.name,value:$.xid},{default:a(()=>[c(i($.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(h,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(w,{value:n.filters.user_id,"onUpdate:value":s[2]||(s[2]=$=>n.filters.user_id=$),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allUsers,$=>(d(),b(f,{key:$.xid,title:$.name,value:$.xid},{default:a(()=>[c(i($.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),_.showDateFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(h,{key:2,xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[l(k,{onDateTimeChanged:s[3]||(s[3]=$=>{n.extraFilters.dates=$,n.setUrlData()})})]),_:1})):D("",!0)]),_:1})):D("",!0),l(g,{class:"mt-20"},{default:a(()=>[l(h,{span:24},{default:a(()=>[n.columns&&n.columns.length>0?(d(),U("div",rc,[l(S,{columns:n.columns,"row-key":$=>$.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,scroll:_.scrollStyle},{bodyCell:a(({column:$,record:P})=>[(d(!0),U(L,null,G(n.allFormFieldNames,T=>(d(),U(L,{key:T.xid},[$.dataIndex===n.convertStringToKey(T.field_name)?(d(),U(L,{key:0},[c(i(n.findFieldValue(T.similar_field_names,P.lead.lead_data)),1)],64)):D("",!0)],64))),128)),$.dataIndex==="user_id"?(d(),U(L,{key:0},[c(i(P&&P.user.name?P.user.name:"-"),1)],64)):D("",!0),$.dataIndex==="lead_phone_no"?(d(),U(L,{key:1},[c(i(P&&P.phone?P.phone:"-"),1)],64)):D("",!0),$.dataIndex==="lead_email"?(d(),U(L,{key:2},[c(i(P&&P.email?P.email:"-"),1)],64)):D("",!0),$.dataIndex==="message"&&P.log_type==="message"?(d(),b(C,{key:3,type:"link",class:"p-0",onClick:T=>n.showMessageHistory(P)},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:2},1032,["onClick"])):D("",!0),$.dataIndex==="message"&&P.log_type==="email"?(d(),b(C,{key:4,type:"link",class:"p-0",onClick:T=>n.showMessageHistory(P)},{default:a(()=>[c(i(e.$t("common.view")),1)]),_:2},1032,["onClick"])):D("",!0),$.dataIndex==="lead_id"?(d(),U(L,{key:5},[c(i(P.lead.id),1)],64)):D("",!0),$.dataIndex==="time_taken"?(d(),U(L,{key:6},[c(i(n.formatTimeDuration(P.time_taken)),1)],64)):D("",!0),$.dataIndex==="date_time"?(d(),U(L,{key:7},[c(i(n.formatDateTime(P.date_time)),1)],64)):D("",!0),$.dataIndex==="cedula"?(d(),U(L,{key:8},[_.showLeadDetails?(d(),b(C,{key:0,type:"link",class:"p-0",onClick:T=>e.showViewDrawer(P.lead)},{default:a(()=>[c(i(P.lead.cedula!=""&&P.lead.cedula!=null?P.lead.cedula:"---"),1)]),_:2},1032,["onClick"])):(d(),U("span",uc,i(P.lead.reference_number),1))],64)):D("",!0),$.dataIndex==="campaign"?(d(),U(L,{key:9},[c(i(P.lead&&P.lead.campaign&&P.lead.campaign.name?P.lead.campaign.name:"-"),1)],64)):D("",!0),$.dataIndex==="actioner"?(d(),U(L,{key:10},[c(i(P.user&&P.user.name?P.user.name:"-"),1)],64)):D("",!0),$.dataIndex=="action"?ke(e.$slots,"action",{key:11,record:P}):D("",!0)]),_:3},8,["columns","row-key","data-source","pagination","loading","onChange","scroll"])])):D("",!0)]),_:3})]),_:3}),l(E,{visible:e.isViewDrawerVisible,tipo:"lead_log",lead:e.viewDrawerData,onClose:e.hideViewDrawer,onFeatch:s[4]||(s[4]=()=>{})},null,8,["visible","lead","onClose"]),l(A,{visible:n.visibleMessage,data:n.MessageData,onClose:n.closeMessage,pageTitle:e.$t("lead_log.message")},null,8,["visible","data","onClose","pageTitle"])],64)}const Bt=Y(ic,[["render",mc]]);const cc={props:{leadId:{default:void 0},refresh:{default:void 0}},emits:["dataFetched"],components:{FileDoneOutlined:ao,FileTextOutlined:Ua,PhoneOutlined:st,ShoppingCartOutlined:Ra,ScheduleOutlined:lt,MailOutlined:dt},setup(e,{emit:s}){const{formatDateTime:_,themeMode:n}=Z(),v=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,user{id,xid,name},created_by_id,x_created_by_id,creator{id,xid,name},lead_id,x_lead_id,lead{id,xid,reference_number,lead_data,campaign_id,x_campaign_id},lead:campaign{id,xid,name}&log_type=all&page_name=lead_action&lead_id=${e.leadId}&order=id desc`,y=I([]),r=I(1),u=I(0),m=I(10);ie(()=>{p(1)});const p=h=>{const g=(h-1)*m.value;var f=`${v}&offset=${g}&limit=${m.value}`;axiosAdmin.get(f).then(w=>{y.value=w.data,u.value=w.meta.paging.total,s("dataFetched")})};return he(r,(h,g)=>{p(h)}),he(()=>e.refresh,(h,g)=>{h==!0&&(p(1),s("dataFetched"))}),{themeMode:n,allLeadLogs:y,formatDateTime:_,totalRecords:u,currentPage:r,perPageRecords:m}}},pc={class:"right-timeline-div"},_c={key:0},fc={key:1},gc={key:2},hc={key:3},vc={key:4};function bc(e,s,_,n,v,y){const r=o("FileDoneOutlined"),u=o("MailOutlined"),m=o("FileTextOutlined"),p=o("ScheduleOutlined"),h=o("ShoppingCartOutlined"),g=o("a-timeline-item"),f=o("a-timeline"),w=o("perfect-scrollbar"),k=o("a-pagination");return d(),U(L,null,[M("div",pc,[l(w,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l(f,null,{default:a(()=>[(d(!0),U(L,null,G(n.allLeadLogs,C=>(d(),b(g,{key:C.xid},{dot:a(()=>[C.log_type=="call_log"?(d(),b(r,{key:0})):D("",!0),C.log_type=="email"?(d(),b(u,{key:1})):C.log_type=="notes"?(d(),b(m,{key:2})):C.log_type=="lead_follow_up"?(d(),b(p,{key:3})):C.log_type=="salesman_bookings"?(d(),b(h,{key:4})):D("",!0)]),default:a(()=>[C.log_type=="call_log"?(d(),U("span",_c,i(e.$t("lead.call_log_timeline_message",[C.user.name,n.formatDateTime(C.date_time)])),1)):C.log_type=="email"?(d(),U("span",fc,i(e.$t("lead.email_timeline_message",[C.user.name,n.formatDateTime(C.date_time)])),1)):C.log_type=="notes"?(d(),U("span",gc,i(e.$t("lead.notes_timeline_message",[C.user.name,n.formatDateTime(C.date_time)])),1)):C.log_type=="lead_follow_up"?(d(),U("span",hc,i(e.$t("lead_follow_up.follow_up_timeline_message",[C.creator.name,C.user.name,n.formatDateTime(C.date_time)])),1)):C.log_type=="salesman_bookings"?(d(),U("span",vc,i(e.$t("salesman_booking.salesman_bookings_timeline_message",[C.creator.name,C.user.name,n.formatDateTime(C.date_time)])),1)):D("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),M("div",{style:we({position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:n.themeMode=="dark"?"#141414":"#fff",zIndex:1,textAlign:"center"})},[l(k,{current:n.currentPage,"onUpdate:current":s[0]||(s[0]=C=>n.currentPage=C),simple:"",total:n.totalRecords},null,8,["current","total"])],4)],64)}const yc=Y(cc,[["render",bc]]),kc=e=>{const{getCampaignUrl:s,user:_}=Z(),v="lead-logs?fields=id,xid,log_type,time_taken,next_contact,date_time,user_id,x_user_id,notes,phone,message,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,notes_file,notes_file_url,lead{id,xid,cedula,nombre,apellido1,apellido2,fechaNacimiento,edad,nacionalidad,nombreBase,tel1,email,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by,assign_to},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name},campaign_id,notes_typification_id_1,x_notes_typification_id_1,notes_typification_id_2,x_notes_typification_id_2,notes_typification_id_3,x_notes_typification_id_3,notes_typification_id_4,x_notes_typification_id_4,notes_typification_name_1,notes_typification_name_2,notes_typification_name_3,notes_typification_name_4,isSale{idVenta,idNota,idLead,user_id,telVenta,estadoVenta,tarjeta,aplicaBeneficiarios,cantidadBeneficiarios,beneficiarios,aplicaBeneficiariosAsist,cantidadBeneficiariosAsist,beneficiariosAsist,montoTotal,calidad},isSale:productos{x_id_producto,idProducto,cantidadProducto,precio},isSale:user{id,xid,name}}&limit=300",y=I([]),r="lead-logs",u=["lead_id","campaign_id","user_id","notes_typification_id_1","notes_typification_id_2","notes_typification_id_3","notes_typification_id_4"],m="products?fields=id,xid,name,coverage,price,campaign_id,x_campaign_id,product_type,tax_rate,tax_label,image,image_url,internal_code,category_id,x_category_id,categories{id,xid,name},campaigns{id,xid,name}&limit=1000",{t:p}=x(),h={notes:"",notes_file:void 0,notes_file_url:void 0,log_type:"notes",notes_typification_id_1:void 0,notes_typification_id_2:void 0,notes_typification_id_3:void 0,notes_typification_id_4:void 0,is_sale:void 0,phone:"",message:"",next_contact:""},g=[{title:p("lead.id"),dataIndex:"id"},{title:p("lead.document"),dataIndex:"cedula"},{title:p("lead.campaign"),dataIndex:"campaign"},{title:p("common.notes"),dataIndex:"notes",width:e.showLeadDetails&&e.showFormFields?"35%":"40%"},{title:p("common.action"),dataIndex:"action"}],f=I([]),w=I([]),k=I([]);return{url:v,addEditUrl:r,initData:h,columns:g,filterableColumns:[],hashableColumns:u,allFormFieldNames:y,allCampaigns:f,allProductos:k,allUsers:w,getPrefetchData:()=>{const E=s(),A=axiosAdmin.get(E),$=axiosAdmin.get(`all-users?log_type=${e.logType}`),P=axiosAdmin.get(m);return Promise.all([A,$,P]).then(([T,F,V])=>{f.value=T.data,w.value=F.data.users,k.value=V.data})}}};function ja(){return{idLead:null,cedula:"",nombre:"",email:"",agente:"",user_id:null,nombreBase:"",tarjeta:"",productos:[],estadoVenta:"Efectiva",telVenta:null,aplicaBeneficiarios:!1,cantidadBeneficiarios:0,beneficiarios:[],aplicaBeneficiariosAsist:!1,cantidadBeneficiariosAsist:0,beneficiariosAsist:[],montoTotal:0}}function un(){return{idProducto:null,internal_code:null,name:null,coverage:null,price:0,cantidadProducto:0}}const be=Le({venta:ja()}),Pe=Le({producto:un()}),Cc=ne({props:["soloVer","formData","leadInfo","allProductos","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,ShoppingCartOutlined:Ra,DeleteOutlined:Se,MinusCircleOutlined:Ea,InfoCircleOutlined:ua,LoadingOutlined:ze,SaveOutlined:$e,UploadFile:ut},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{permsArray:y,formatAmountCurrency:r}=Z(),{locale:u,t:m}=x(),p=I(e.soloVer);var h=JSON.parse(localStorage.getItem("auth_user")||"{}").id;const g=I([]),f="notes-typifications?limit=10000",w=I([]),k=I([]),C=I([]),S=I([]),E=I(!0),A=I(0),$=I(0),P=_e(()=>u.value==="en"?St:$t);he(u,Q=>{ia.locale(Q)});const T=[{title:m("lead.internal_code"),dataIndex:"internal_code",className:"font-bold"},{title:m("product.name"),dataIndex:"name"},{title:m("product.coverage"),dataIndex:"coverage"},{title:m("product.price"),dataIndex:"price"},{title:m("dashboard.quantity"),dataIndex:"product_quantity"},{title:m("common.action"),dataIndex:"action",fixed:"right"}],F=Le({data:[],pagination:{current:1,pageSize:3,total:0,showSizeChanger:!1},loading:!1,selectedRowKeys:[]}),V=Q=>{F.pagination.current=Q.current,F.pagination.pageSize=Q.pageSize},z=()=>{const Q=Pe.producto;if(!Q.idProducto){Xe.info(m("lead.not_found"));return}const me={xid:Q.idProducto,internal_code:Q.internal_code,name:Q.name,coverage:Q.coverage,price:Q.price,product_quantity:Q.cantidadProducto};F.data=[...F.data,me],F.pagination.total=F.data.length;const Te=parseFloat(be.venta.montoTotal)||0,We=parseFloat(Q.price)*parseFloat(Q.cantidadProducto);be.venta.montoTotal=Number((Te+We).toFixed(2)),Object.assign(Pe.producto,un())};function K(Q){const me=F.data.find(Te=>Te.xid===Q);me&&(be.venta.montoTotal-=me.price*me.product_quantity),F.data=F.data.filter(Te=>Te.xid!==Q),F.pagination.total=F.data.length}ie(()=>{window.addEventListener("resize",re),axiosAdmin.get(f).then(Q=>{g.value=Q.data,B()})});function B(){w.value=[],g.value.forEach(Q=>{Q.x_parent_id==null&&Q.status===1&&w.value.push(Q)})}function R(Q){k.value=[],C.value=[],S.value=[],g.value.forEach(me=>{me.x_parent_id===Q&&me.status===1&&k.value.push(me)}),q(Q)}function O(Q){C.value=[],S.value=[],g.value.forEach(me=>{me.x_parent_id===Q&&me.status===1&&C.value.push(me)}),q(Q)}function W(Q){S.value=[],g.value.forEach(me=>{me.x_parent_id===Q&&me.status===1&&S.value.push(me)}),q(Q)}const q=Q=>{if(e.addEditType==="add")if(Q){let me=g.value.find(Te=>Te.xid===Q);me&&(j.value=me.schedule,N.value=me.sale)}else j.value=!1,N.value=!1},N=I(!1),j=I(!1),te=I(!1),le=I(!1),ue=_e(()=>Pe.producto.internal_code?e.allProductos.filter(Q=>Q.internal_code===Pe.producto.internal_code):e.allProductos),ee=_e(()=>Pe.producto.name?e.allProductos.filter(Q=>Q.name===Pe.producto.name):e.allProductos),ve=_e(()=>{let Q=e.allProductos;return Pe.producto.internal_code&&(Q=Q.filter(me=>me.internal_code===Pe.producto.internal_code)),Pe.producto.name&&(Q=Q.filter(me=>me.name===Pe.producto.name)),Q}),X=_e(()=>ve.value.filter(Q=>Q.coverage===Pe.producto.coverage)),oe=_e(()=>[...new Set(ee.value.map(Q=>Q.internal_code))]),se=_e(()=>[...new Set(ue.value.map(Q=>Q.name))]),H=_e(()=>[...new Set(ve.value.map(Q=>Q.coverage))]),ae=_e(()=>ve.value.find(Q=>Q.coverage===Pe.producto.coverage)||{});he(()=>Pe.producto.internal_code,Q=>{E.value||(Q&&!se.value.includes(Pe.producto.name)&&(Pe.producto.name=null),Pe.producto.coverage=null,Pe.producto.price=0)}),he(()=>Pe.producto.name,Q=>{E.value||(Q&&!oe.value.includes(Pe.producto.internal_code)&&(Pe.producto.internal_code=null),Pe.producto.coverage=null)}),he(()=>Pe.producto.coverage,Q=>{if(E.value)return;const me=ae.value.price||0;Pe.producto.price=me,Pe.producto.cantidadProducto=Q?e.addEditType==="edit"?Pe.producto.cantidadProducto:1:0}),he(()=>Pe.producto.price,Q=>{E.value||(Q?Pe.producto.cantidadProducto=1:Pe.producto.cantidadProducto=0)},{immediate:!0}),he(X,Q=>{if(!E.value&&Q.length>=1){const me=Q[0];Pe.producto.idProducto=me.xid,Pe.producto.price=me.price}},{immediate:!0}),he(()=>e.visible,async Q=>{var me,Te,We;if(be.venta=ja(),q(null),N.value=!1,B(),k.value=[],C.value=[],S.value=[],Q&&e.addEditType==="edit")if(E.value=!0,e.formData.notes_typification_id_1!=null&&(R(e.formData.notes_typification_id_1),q(e.formData.notes_typification_id_1)),e.formData.notes_typification_id_2!=null&&(O(e.formData.notes_typification_id_2),q(e.formData.notes_typification_id_2)),e.formData.notes_typification_id_3!=null&&(W(e.formData.notes_typification_id_3),q(e.formData.notes_typification_id_3)),be.venta=(N.value=!!e.formData.is_sale)?{...e.formData.is_sale}:ja(),F.data=be.venta.productos.map(Ye=>{const Ge=e.allProductos.find(ge=>ge.xid===Ye.x_id_producto);return{xid:Ye.x_id_producto,internal_code:(Ge==null?void 0:Ge.internal_code)??"",name:(Ge==null?void 0:Ge.name)??"",coverage:(Ge==null?void 0:Ge.coverage)??"",price:(Ye==null?void 0:Ye.precio)??0,product_quantity:(Ye==null?void 0:Ye.cantidadProducto)??0}}),e.formData.is_sale&&(e.formData.is_sale.aplicaBeneficiarios||e.formData.is_sale.aplicaBeneficiariosAsist)){te.value=!!e.formData.is_sale.aplicaBeneficiarios,le.value=!!e.formData.is_sale.aplicaBeneficiariosAsist;let Ye=e.formData.is_sale.beneficiarios||"[]",Ge=e.formData.is_sale.beneficiariosAsist||"[]",ge,He;try{ge=JSON.parse(Ye),He=JSON.parse(Ge)}catch{ge=[],He=[]}be.venta.beneficiarios=ge,be.venta.beneficiariosAsist=He,A.value=be.venta.beneficiarios.reduce((ea,Ka)=>ea+Number(Ka.porcentaje||0),0),$.value=be.venta.beneficiariosAsist.reduce((ea,Ka)=>ea+Number(Ka.porcentaje||0),0)}else A.value=0,$.value=0,te.value=!1,le.value=!1,be.venta.beneficiarios=[],be.venta.beneficiariosAsist=[];else A.value,$.value=0,F.data=[],F.pagination.total=0,F.pagination.current=1;Object.assign(be.venta,e.addEditType==="add"?ja():{},{idLead:e.leadInfo?e.leadInfo.id:e.data.lead.id,cedula:e.leadInfo?e.leadInfo.cedula:e.data.lead.cedula,nombre:e.leadInfo?`${e.leadInfo.nombre} ${e.leadInfo.apellido1} ${e.leadInfo.apellido2}`:`${e.data.lead.nombre} ${e.data.lead.apellido1} ${e.data.lead.apellido2}`,email:e.leadInfo?e.leadInfo.email:e.data.lead.email,agente:e.addEditType==="edit"?((me=e.data.user)==null?void 0:me.name)??"":e.leadInfo.assign_to&&e.leadInfo.assign_to.name?e.leadInfo.assign_to.name:"",user_id:e.leadInfo?e.leadInfo.assign_to&&e.leadInfo.assign_to.id?e.leadInfo.assign_to.id:h:be.venta.user_id,nombreBase:e.leadInfo?e.leadInfo.nombreBase:e.data.lead.nombreBase,tarjeta:e.addEditType==="edit"?((Te=e.formData.is_sale)==null?void 0:Te.tarjeta)??"":e.leadInfo.tarjeta,telVenta:e.addEditType==="edit"?((We=e.formData.is_sale)==null?void 0:We.telVenta)??null:null}),await at(),E.value=!1});const ce=I(),Ae=Le({telVenta:[{required:!0,message:m("lead.phone")}],tarjeta:[{required:!0,message:m("lead.card")}],beneficiarios:[]});he(()=>be.venta.cantidadBeneficiarios,Q=>{if(!E.value)for(be.venta.beneficiarios.splice(Q),be.venta.cantidadBeneficiarios===0&&(te.value=!1);be.venta.beneficiarios.length<Q;)be.venta.beneficiarios.push({nombre:"",porcentaje:0})},{immediate:!0}),he(()=>be.venta.cantidadBeneficiariosAsist,Q=>{if(!E.value)for(be.venta.beneficiariosAsist.splice(Q),be.venta.cantidadBeneficiariosAsist===0&&(le.value=!1);be.venta.beneficiariosAsist.length<Q;)be.venta.beneficiariosAsist.push({nombre:"",porcentaje:0})},{immediate:!0});const Be=()=>{be.venta.cantidadBeneficiarios++},Ie=Q=>{A.value=Math.max(0,A.value-(Number(be.venta.beneficiarios[Q].porcentaje)||0)),be.venta.beneficiarios.splice(Q,1),be.venta.cantidadBeneficiarios=be.venta.beneficiarios.length,e.addEditType==="edit"||e.formData.is_sale?fe(Q):be.venta.cantidadBeneficiarios===0&&(te.value=!1)},Je=()=>{be.venta.cantidadBeneficiariosAsist++},xe=Q=>{$.value=Math.max(0,$.value-(Number(be.venta.beneficiariosAsist[Q].porcentaje)||0)),be.venta.beneficiariosAsist.splice(Q,1),be.venta.cantidadBeneficiariosAsist=be.venta.beneficiariosAsist.length,e.addEditType==="edit"||e.formData.is_sale?Re(Q):be.venta.cantidadBeneficiariosAsist===0&&(le.value=!1)},fe=Q=>{const me=JSON.parse(e.formData.is_sale.beneficiarios||"[]");me.splice(Q,1),e.formData.is_sale.beneficiarios=JSON.stringify(me)},Re=Q=>{const me=JSON.parse(e.formData.is_sale.beneficiariosAsist||"[]");me.splice(Q,1),e.formData.is_sale.beneficiariosAsist=JSON.stringify(me)},Ze=()=>{be.venta=ja()},Ca=async()=>{var Q;try{if(e.formData.isSale=N.value?1:0,e.formData.campaign_id=e.leadInfo.campaign.id,(Q=e.formData).lead_id||(Q.lead_id=e.leadInfo.xid),N.value){if(await ce.value.validate(),N.value&&F.data.length===0){Xe.info(m("common.minimum_product"));return}_({url:e.url,data:e.formData,successMessage:null,success:me=>{be.venta.idNota=me.xid,be.venta.accion=e.addEditType,be.venta.aplicaBeneficiarios=te.value,be.venta.beneficiarios=te?JSON.stringify(be.venta.beneficiarios):{},be.venta.aplicaBeneficiariosAsist=le.value,be.venta.beneficiariosAsist=le?JSON.stringify(be.venta.beneficiariosAsist):{},be.venta.productos=JSON.stringify(F.data),F.data=[],_({url:"ventas/save",data:be.venta,successMessage:e.successMessage,success:()=>{}}),s("onAddEditSuccess"),s("addEditSuccess",me.xid),Ze()}})}else _({url:e.url,data:e.formData,successMessage:e.successMessage,success:me=>{s("addEditSuccess",me.xid),Ze()}})}catch(me){console.log("Errores de validación:",me)}},ma=()=>{Ze(),v.value={},s("closed")},wa=(Q,me)=>{const Te=be.venta.beneficiarios.reduce((Ye,Ge,ge)=>ge!==Q?Ye+Number(Ge.porcentaje||0):Ye,0),We=100-Te;me>We?(be.venta.beneficiarios[Q].porcentaje=We,A.value=100):A.value=Te+me},ca=(Q,me)=>{const Te=be.venta.beneficiariosAsist.reduce((Ye,Ge,ge)=>ge!==Q?Ye+Number(Ge.porcentaje||0):Ye,0),We=100-Te;me>We?(be.venta.beneficiariosAsist[Q].porcentaje=We,$.value=100):$.value=Te+me},J=I(window.innerWidth),re=()=>{J.value=window.innerWidth};it(()=>window.removeEventListener("resize",re));const qe=_e(()=>J.value<=991?"90%":N.value?"86%":"50%");return{antdLocale:P,getAccion:q,handleTableChange:V,drawerWidth:qe,removeProducto:K,datosProducto:Pe,addProducto:z,table:F,columns:T,validarSumaMaxima:wa,validarSumaMaximaAsist:ca,suma:A,sumaAsist:$,soloVer:p,datos:be,isSale:N,schedule:j,esBeneficiario:te,esBeneficiarioAsist:le,loading:n,rules:v,internalCodeOptions:oe,productNameOptions:se,coverageOptions:H,matchingProducts:X,formatAmountCurrency:r,notesTypifications:g,parentTypificationData:w,childrenTypificationData:k,childrenChildData:C,lastChildrenChildData:S,getChildTypification:R,getChildrenChildTypification:O,getLastChildrenChildTypification:W,formRef:ce,validationRules:Ae,addUser:Be,addUserAsis:Je,removeUser:Ie,removeUserAsis:xe,onSubmit:Ca,onClose:ma,permsArray:y}}}),wc={class:"label-bold",style:{display:"flex","align-items":"center",gap:"12px"}},Sc={class:"side-panel",style:{display:"flex","align-items":"flex-start",gap:"12px"}},$c={class:"d-flex"},Ac={class:"d-flex"},Dc={class:"d-flex"},Tc={class:"table-responsive"},Ec={class:"text-center"},Uc={class:"text-center",style:{padding:"1%"}};function Oc(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("a-form-item"),p=o("a-col"),h=o("a-textarea"),g=o("a-date-picker"),f=o("a-config-provider"),w=o("UploadFile"),k=o("a-checkbox"),C=o("a-row"),S=o("a-input"),E=o("a-input-number"),A=o("ShoppingCartOutlined"),$=o("a-button"),P=o("DeleteOutlined"),T=o("a-tooltip"),F=o("a-table"),V=o("MinusCircleOutlined"),z=o("a-space"),K=o("InfoCircleOutlined"),B=o("PlusOutlined"),R=o("a-form"),O=o("SaveOutlined"),W=o("a-drawer");return d(),b(W,{width:e.drawerWidth,open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[M("div",Uc,[e.addEditType=="add"&&(e.permsArray.includes("admin")||e.permsArray.includes("forms_view"))?(d(),b($,{style:{"margin-right":"5px"},key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{default:a(()=>[l(O),c(" "+i(e.$t("common.create")),1)]),_:1},8,["loading","onClick"])):D("",!0),e.addEditType=="edit"&&(e.permsArray.includes("admin")||e.permsArray.includes("notes_edit"))?(d(),b($,{style:{"margin-right":"5px"},key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{default:a(()=>[l(O),c(" "+i(e.$t("common.update")),1)]),_:1},8,["loading","onClick"])):D("",!0),l($,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])])]),default:a(()=>[l(R,{layout:"vertical",ref:"formRef",model:e.datos.venta,rules:e.isSale?e.validationRules:null},{default:a(()=>[l(C,{gutter:[16,16]},{default:a(()=>[l(p,{xs:24,sm:24,md:e.isSale?5:24,lg:e.isSale?5:24},{default:a(()=>[l(C,{gutter:[16,16]},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"required label-bold",label:e.$t("lead_notes.notes_typification_1"),name:"notes_typification_id_1",help:e.rules.notes_typification_id_1?e.rules.notes_typification_id_1.message:null,validateStatus:e.rules.notes_typification_id_1?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_1,"onUpdate:value":s[0]||(s[0]=q=>e.formData.notes_typification_id_1=q),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_1")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[1]||(s[1]=()=>{e.formData.notes_typification_id_2=void 0,e.formData.notes_typification_id_3=void 0,e.formData.notes_typification_id_4=void 0,e.getChildTypification(e.formData.notes_typification_id_1)})},{default:a(()=>[(d(!0),U(L,null,G(e.parentTypificationData,q=>(d(),b(r,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.childrenTypificationData.length>0?(d(),b(p,{key:0,class:"required label-bold",xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead_notes.notes_typification_2"),name:"notes_typification_id_2",help:e.rules.notes_typification_id_2?e.rules.notes_typification_id_2.message:null,validateStatus:e.rules.notes_typification_id_2?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_2,"onUpdate:value":s[2]||(s[2]=q=>e.formData.notes_typification_id_2=q),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_2")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[3]||(s[3]=()=>{e.formData.notes_typification_id_3=void 0,e.formData.notes_typification_id_4=void 0,e.getChildrenChildTypification(e.formData.notes_typification_id_2)})},{default:a(()=>[(d(!0),U(L,null,G(e.childrenTypificationData,q=>(d(),b(r,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),e.childrenChildData.length>0?(d(),b(p,{key:1,class:"required label-bold",xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead_notes.notes_typification_3"),name:"notes_typification_id_3",help:e.rules.notes_typification_id_3?e.rules.notes_typification_id_3.message:null,validateStatus:e.rules.notes_typification_id_3?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_3,"onUpdate:value":s[4]||(s[4]=q=>e.formData.notes_typification_id_3=q),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_3")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[5]||(s[5]=()=>{e.formData.notes_typification_id_4=void 0,e.getLastChildrenChildTypification(e.formData.notes_typification_id_3)})},{default:a(()=>[(d(!0),U(L,null,G(e.childrenChildData,q=>(d(),b(r,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),e.lastChildrenChildData.length>0?(d(),b(p,{key:2,class:"required label-bold",xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead_notes.notes_typification_4"),name:"notes_typification_id_4",help:e.rules.notes_typification_id_4?e.rules.notes_typification_id_4.message:null,validateStatus:e.rules.notes_typification_id_4?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_4,"onUpdate:value":s[6]||(s[6]=q=>e.formData.notes_typification_id_4=q),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_4")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[7]||(s[7]=q=>e.getAccion(e.formData.notes_typification_id_4))},{default:a(()=>[(d(!0),U(L,null,G(e.lastChildrenChildData,q=>(d(),b(r,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"label-bold"},{default:a(()=>[l(h,{value:e.formData.notes,"onUpdate:value":s[8]||(s[8]=q=>e.formData.notes=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4,maxlength:2e3},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("common.next_contact"),name:"next_contact",help:e.rules.next_contact?e.rules.next_contact.message:null,validateStatus:e.rules.next_contact?"error":null,class:"label-bold"},{default:a(()=>[l(f,{locale:e.antdLocale},{default:a(()=>[l(g,{disabled:!e.schedule,value:e.formData.next_contact,"onUpdate:value":s[9]||(s[9]=q=>e.formData.next_contact=q),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["disabled","value"])]),_:1},8,["locale"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead_notes.notes_file")},{default:a(()=>[M("div",wc,[l(w,{acceptFormat:"image/*,.pdf",formData:e.formData,folder:"leadNotes",uploadField:"notes_file",onOnFileUploaded:s[10]||(s[10]=q=>{e.formData.notes_file=q.file,e.formData.notes_file_url=q.file_url})},null,8,["acceptFormat","formData"]),l(k,{disabled:e.addEditType=="edit",checked:e.isSale},{default:a(()=>[M("strong",null,i(e.$t("lead_notes.sale")),1)]),_:1},8,["disabled","checked"])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["md","lg"]),e.isSale?(d(),b(p,{key:0,xs:24,sm:24,md:19,lg:19},{default:a(()=>[M("div",Sc,[l(p,{xs:16,sm:16,md:e.esBeneficiario||e.esBeneficiarioAsist?6:8,lg:e.esBeneficiario||e.esBeneficiarioAsist?6:8},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.id")},{default:a(()=>[l(S,{value:e.datos.venta.idLead},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.document")},{default:a(()=>[l(S,{value:e.datos.venta.cedula},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.name")},{default:a(()=>[l(S,{value:e.datos.venta.nombre},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.email")},{default:a(()=>[l(S,{value:e.datos.venta.email},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.agent")},{default:a(()=>[l(S,{value:e.datos.venta.agente},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e.leadInfo?(d(),b(m,{key:0,class:"label-bold",name:"telVenta",label:e.$t("lead.phone")},{default:a(()=>[l(u,{value:e.datos.venta.telVenta,"onUpdate:value":s[11]||(s[11]=q=>e.datos.venta.telVenta=q),placeholder:e.$t("common.select_default_text",[e.$t("lead.phone")]),style:{width:"100%"}},{default:a(()=>[(d(!0),U(L,null,G([e.leadInfo.tel1,e.leadInfo.tel2,e.leadInfo.tel3,e.leadInfo.tel4,e.leadInfo.tel5,e.leadInfo.tel6].filter(q=>q),q=>(d(),b(r,{key:q,value:q},{default:a(()=>[c(i(q),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])):(d(),b(m,{key:1,class:"label-bold",name:"telVenta",label:e.$t("lead.phone")},{default:a(()=>[l(m,null,{default:a(()=>[l(S,{value:e.datos.venta.telVenta},null,8,["value"])]),_:1})]),_:1},8,["label"]))]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",name:"tarjeta",label:e.$t("lead.card")},{default:a(()=>[l(S,{value:e.datos.venta.tarjeta,"onUpdate:value":s[12]||(s[12]=q=>e.datos.venta.tarjeta=q)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["md","lg"]),l(p,{xs:16,sm:16,style:{"border-left":"1px solid #f0f0f0"},md:e.esBeneficiario||e.esBeneficiarioAsist?11:16,lg:e.esBeneficiario||e.esBeneficiarioAsist?11:16},{default:a(()=>[M("div",$c,[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"internal_code",label:e.$t("lead.internal_code")},{default:a(()=>[l(u,{value:e.datosProducto.producto.internal_code,"onUpdate:value":s[13]||(s[13]=q=>e.datosProducto.producto.internal_code=q),placeholder:e.$t("common.select_default_text",[e.$t("lead.internal_code")]),style:{width:"100%"},"show-search":"","option-filter-prop":"title",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.internalCodeOptions,q=>(d(),b(r,{title:q,key:q,value:q},{default:a(()=>[c(i(q),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"producto",label:e.$t("lead.product")},{default:a(()=>[l(u,{value:e.datosProducto.producto.name,"onUpdate:value":s[14]||(s[14]=q=>e.datosProducto.producto.name=q),placeholder:e.$t("common.select_default_text",[e.$t("lead.product")]),style:{width:"100%"},"show-search":"","option-filter-prop":"title",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.productNameOptions,q=>(d(),b(r,{title:q,key:q,value:q},{default:a(()=>[c(i(q),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),M("div",Ac,[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"coverage",label:e.$t("lead.coverage")},{default:a(()=>[l(u,{value:e.datosProducto.producto.coverage,"onUpdate:value":s[15]||(s[15]=q=>e.datosProducto.producto.coverage=q),placeholder:e.$t("common.select_default_text",[e.$t("lead.coverage")]),style:{width:"100%"},disabled:!e.datosProducto.producto.internal_code||!e.datosProducto.producto.name,"show-search":"","option-filter-prop":"title",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.coverageOptions,q=>(d(),b(r,{title:q,key:q,value:q},{default:a(()=>[c(i(q),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"product_quantity",label:e.$t("lead.product_quantity")},{default:a(()=>[l(E,{min:1,value:e.datosProducto.producto.cantidadProducto,"onUpdate:value":s[16]||(s[16]=q=>e.datosProducto.producto.cantidadProducto=q),disabled:!e.datosProducto.producto.price,style:{width:"100%"}},null,8,["value","disabled"])]),_:1},8,["label"])]),_:1})]),M("div",Dc,[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"precio",label:e.$t("lead.price")},{default:a(()=>[e.matchingProducts.length>1?(d(),b(u,{key:0,value:e.datosProducto.producto.price,"onUpdate:value":s[17]||(s[17]=q=>e.datosProducto.producto.price=q),placeholder:e.$t("common.select_default_text",[e.$t("lead.price")]),style:{width:"100%"},"show-search":"","option-filter-prop":"title",allowClear:""},{default:a(()=>[(d(!0),U(L,null,G(e.matchingProducts,q=>(d(),b(r,{key:q.xid,value:q.price,title:e.formatAmountCurrency(q.price)},{default:a(()=>[c(i(e.formatAmountCurrency(q.price)),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])):e.matchingProducts.length===1?(d(),b(E,{key:1,value:e.formatAmountCurrency(e.datosProducto.producto.price),disabled:"",style:{width:"100%"}},null,8,["value"])):(d(),b(E,{key:2,value:e.formatAmountCurrency(e.datosProducto.producto.price),disabled:"",style:{width:"100%"}},null,8,["value"]))]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("common.action")},{default:a(()=>[l($,{disabled:!e.datosProducto.producto.price,type:"primary",block:"",onClick:e.addProducto},{default:a(()=>[l(A),c(" "+i(e.$t("common.add"))+" "+i(e.$t("common.product")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["label"])]),_:1})]),M("div",Tc,[l(F,{columns:e.columns,"data-source":e.table.data,pagination:e.table.pagination,onChange:e.handleTableChange,scroll:e.scrollStyle,size:"small"},{bodyCell:a(({column:q,record:N})=>[q.dataIndex==="price"?(d(),U(L,{key:0},[c(i(e.formatAmountCurrency(N.price)),1)],64)):D("",!0),q.dataIndex==="action"?(d(),b(T,{key:1,title:e.$t("common.delete")},{default:a(()=>[l($,{type:"primary",danger:"",onClick:j=>e.removeProducto(N.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(P)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):D("",!0)]),footer:a(()=>[M("div",Ec,[M("strong",null,i(e.$t("lead.total_amount"))+" : "+i(e.formatAmountCurrency(e.datos.venta.montoTotal)),1)])]),_:1},8,["columns","data-source","pagination","onChange","scroll"])]),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(C,{gutter:"12",style:{width:"100%"}},{default:a(()=>[l(p,{span:12},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.beneficiaries")},{default:a(()=>[l(k,{checked:e.esBeneficiario,"onUpdate:checked":s[18]||(s[18]=q=>e.esBeneficiario=q)},null,8,["checked"])]),_:1},8,["label"])]),_:1}),l(p,{span:12,style:{"text-align":"right"}},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.number_beneficiaries")},{default:a(()=>[l(E,{style:{width:"120px"},disabled:e.esBeneficiario===!1,min:0,max:5,value:e.datos.venta.cantidadBeneficiarios,"onUpdate:value":s[19]||(s[19]=q=>e.datos.venta.cantidadBeneficiarios=q)},null,8,["disabled","value"])]),_:1},8,["label"])]),_:1})]),_:1}),l(C,{gutter:"12",style:{width:"100%"}},{default:a(()=>[l(p,{span:12},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.beneficiaries_asist")},{default:a(()=>[l(k,{checked:e.esBeneficiarioAsist,"onUpdate:checked":s[20]||(s[20]=q=>e.esBeneficiarioAsist=q)},null,8,["checked"])]),_:1},8,["label"])]),_:1}),l(p,{span:12,style:{"text-align":"right"}},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.number_beneficiaries")},{default:a(()=>[l(E,{style:{width:"120px"},disabled:e.esBeneficiarioAsist===!1,min:0,max:5,value:e.datos.venta.cantidadBeneficiariosAsist,"onUpdate:value":s[21]||(s[21]=q=>e.datos.venta.cantidadBeneficiariosAsist=q)},null,8,["disabled","value"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["md","lg"]),e.esBeneficiario||e.esBeneficiarioAsist?(d(),b(p,{key:0,style:{"border-left":"1px solid #f0f0f0"},xs:16,sm:16,md:7,lg:7},{default:a(()=>[e.esBeneficiario?(d(),b(m,{key:0,class:"label-bold",style:{"justify-content":"center"},label:e.$t("lead.beneficiary_information")},{default:a(()=>[(d(!0),U(L,null,G(e.datos.venta.beneficiarios,(q,N)=>(d(),b(z,{key:N,style:{display:"flex","align-items":"center"}},{default:a(()=>[l(m,{name:["beneficiarios",N,"nombre"],rules:[{required:!0,message:e.$t("lead.name")}]},{default:a(()=>[l(S,{value:q.nombre,"onUpdate:value":j=>q.nombre=j,placeholder:e.$t("lead.name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,{name:["beneficiarios",N,"porcentaje"],rules:[{required:!0,type:"number",message:e.$t("uphone_calls.number")}]},{default:a(()=>[l(E,{onChange:j=>e.validarSumaMaxima(N,j),value:q.porcentaje,"onUpdate:value":j=>q.porcentaje=j,min:0,max:100,precision:0,step:1,placeholder:e.$t("lead.percentage")},null,8,["onChange","value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,null,{default:a(()=>[l(V,{onClick:j=>e.removeUser(N)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(m,{class:"text-center"},{default:a(()=>[M("h4",{style:we({color:e.suma>100?"red":"inherit",fontWeight:"bold"})},[l(T,{style:we({color:e.suma>100?"red":"inherit"}),title:e.$t("message_template.maximum_percentage_exceded")},{default:a(()=>[l(K)]),_:1},8,["style","title"]),c(" "+i(e.$t("common.total"))+": "+i(e.suma),1)],4)]),_:1}),l(m,null,{default:a(()=>[l($,{disabled:e.datos.venta.cantidadBeneficiarios===5||e.suma>=100,type:"dashed",block:"",onClick:e.addUser},{default:a(()=>[l(B),c(" "+i(e.$t("common.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["label"])):D("",!0),e.esBeneficiarioAsist?(d(),b(m,{key:1,class:"label-bold",style:{"justify-content":"center","border-top":"1px solid #f0f0f0"},label:e.$t("lead.beneficiary_asist_information")},{default:a(()=>[(d(!0),U(L,null,G(e.datos.venta.beneficiariosAsist,(q,N)=>(d(),b(z,{key:N,style:{display:"flex","align-items":"center"}},{default:a(()=>[l(m,{name:["beneficiariosAsist",N,"nombre"],rules:[{required:!0,message:e.$t("lead.name")}]},{default:a(()=>[l(S,{value:q.nombre,"onUpdate:value":j=>q.nombre=j,placeholder:e.$t("lead.name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,{name:["beneficiariosAsist",N,"porcentaje"],rules:[{required:!0,type:"number",message:e.$t("uphone_calls.number")}]},{default:a(()=>[l(E,{onChange:j=>e.validarSumaMaximaAsist(N,j),value:q.porcentaje,"onUpdate:value":j=>q.porcentaje=j,min:0,max:100,precision:0,step:1,placeholder:e.$t("lead.percentage")},null,8,["onChange","value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,null,{default:a(()=>[l(V,{onClick:j=>e.removeUserAsis(N)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(m,{class:"text-center"},{default:a(()=>[M("h4",{style:we({color:e.sumaAsist>100?"red":"inherit",fontWeight:"bold"})},[l(T,{style:we({color:e.sumaAsist>100?"red":"inherit"}),title:e.$t("message_template.maximum_percentage_exceded")},{default:a(()=>[l(K)]),_:1},8,["style","title"]),c(" "+i(e.$t("common.total"))+": "+i(e.sumaAsist),1)],4)]),_:1}),l(m,null,{default:a(()=>[l($,{disabled:e.datos.venta.cantidadBeneficiariosAsist===5||e.sumaAsist>=100,type:"dashed",block:"",onClick:e.addUserAsis},{default:a(()=>[l(B),c(" "+i(e.$t("common.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["label"])):D("",!0)]),_:1})):D("",!0)])]),_:1})):D("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["width","open","title","onOk"])}const Ic=Y(Cc,[["render",Oc]]),Pc=ne({props:{dateRange:{type:Array,default:()=>[]}},emits:["dateTimeChanged"],setup(e,{emit:s}){const{locale:_}=x(),n=_e(()=>_.value==="en"?St:$t);he(_,k=>{r.locale(k)});const v=I([]),{appSetting:y,dayjs:r,permsArray:u}=Z(),m=r().tz(y.value.timezone).startOf("month").startOf("day"),p=r().tz(y.value.timezone).endOf("day"),h=_e(()=>u.value.includes("admin")||u.value.includes("leads_view_all")),g=_e(()=>h.value?!1:[!0,!1]),f=k=>h.value?!1:k<m||k>p;return ie(()=>{let k=m,C=p;e.dateRange.length===2&&(k=h.value?r(e.dateRange[0]):m,C=r(e.dateRange[1])),v.value=[k,C],s("dateTimeChanged",[k.tz(y.value.timezone).startOf("day").utc().format("YYYY-MM-DD HH:mm:ss"),C.tz(y.value.timezone).endOf("day").utc().format("YYYY-MM-DD HH:mm:ss")])}),{antdLocale:n,appSetting:y,dateRangeValue:v,rangeDisabled:g,disabledDate:f,dateTimeChanged:k=>{const C=h.value&&(k!=null&&k[0])?k[0]:m,S=k!=null&&k[1]?k[1]:p;v.value=[C,S],s("dateTimeChanged",[C.tz(y.value.timezone).startOf("day").utc().format("YYYY-MM-DD HH:mm:ss"),S.tz(y.value.timezone).endOf("day").utc().format("YYYY-MM-DD HH:mm:ss")])}}}});function Mc(e,s,_,n,v,y){const r=o("a-range-picker"),u=o("a-config-provider");return d(),b(u,{locale:e.antdLocale},{default:a(()=>[l(r,{value:e.dateRangeValue,"onUpdate:value":s[0]||(s[0]=m=>e.dateRangeValue=m),format:e.appSetting.date_format,placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],disabled:e.rangeDisabled,disabledDate:e.disabledDate,style:{width:"100%"},onChange:e.dateTimeChanged},null,8,["value","format","placeholder","disabled","disabledDate","onChange"])]),_:1},8,["locale"])}const Fc=Y(Pc,[["render",Mc]]),Rc={props:{pageName:{default:"index"},leadId:{default:void 0},managing:{default:void 0},leadInfo:{default:void 0},logType:{default:"notes"},scrollStyle:{default:{}},showCampaignStatus:{default:!1},showTableSearch:{default:!1},showUserFilter:{default:!1},showDateFilter:{default:!0},showAddButton:{default:!1},showActionButton:{default:!0},showFormFields:{default:!1},showLeadDetails:{default:!1}},emits:["success"],components:{PlusOutlined:de,EditOutlined:Oe,EyeOutlined:aa,DeleteOutlined:Se,PlayCircleOutlined:oa,StopOutlined:Oa,DownloadOutlined:ga,AddEdit:Ic,DateRangePicker:Fc},setup(e,{emit:s}){const{permsArray:_,appSetting:n,user:v,formatDateTime:y,convertStringToKey:r,getCampaignUrl:u}=Z(),{url:m,addEditUrl:p,initData:h,columns:g,filterableColumns:f,hashableColumns:w,allCampaigns:k,allUsers:C,getPrefetchData:S,allProductos:E}=kc(e),A=Fe(),$=I({}),P=sa(),T=I({page_name:e.pageName,log_type:e.logType,campaign_id:void 0,campaign_status:"active",lead_id:e.leadId,leadInfo:e.leadInfo,dates:[]}),F=I({log_type:e.logType,user_id:void 0});ie(()=>{S().then(R=>{e.logType!="salesman_bookings"&&e.pageName!="lead_action"&&(F.value={...F.value}),$.value=e.leadInfo,A.crudUrl.value=p,A.langKey.value="notes",A.initData.value={...h,lead_id:e.leadId},A.formData.value={...h,lead_id:e.leadId},A.hashableColumns.value=[...w],A.hashable.value=[...w],V()})});const V=()=>{A.hashableColumns.value=[...w],A.tableUrl.value={url:m,filters:F,extraFilters:T},A.table.filterableColumns=f,A.table.pagination={...A.table.pagination,current:1},A.fetch({page:1}),s("updateNotesCount")},z=(R,O)=>{var W="-";return Ee(O,q=>{R.includes(q.field_name)&&(W=q.field_value)}),W},K=R=>{A.addEditSuccess(R),s("success")},B=R=>{T.value={...T.value,campaign_id:void 0};const O=u(T.value.campaign_status),W=axiosAdmin.get(O);Promise.all([W]).then(([q])=>{k.value=q.data,V()})};return he(()=>e.leadId,R=>{R?($.value=e.leadInfo,T.value.lead_id=R,A.formData.value={...h,lead_id:e.leadId},S(),V()):($.value={},A.table.data=[],A.table.pagination.current=1,s("update:leadId",null))},{immediate:!0}),{permsArray:_,appSetting:n,columns:g,...A,...P,filterableColumns:f,user:v,formatDateTime:y,findFieldValue:z,convertStringToKey:r,onAddEditSuccess:K,allCampaigns:k,allProductos:E,allUsers:C,filters:F,extraFilters:T,setUrlData:V,campaignTypeChanged:B}}},Lc={class:"table-responsive lead-notes-table"},Bc={key:1},qc={style:{"text-align":"justify"}},Vc={key:0};function Kc(e,s,_,n,v,y){const r=o("AddEdit"),u=o("PlayCircleOutlined"),m=o("a-tab-pane"),p=o("StopOutlined"),h=o("a-tabs"),g=o("a-col"),f=o("a-row"),w=o("PlusOutlined"),k=o("a-button"),C=o("a-select-option"),S=o("a-select"),E=o("DateRangePicker"),A=o("a-avatar"),$=o("a-typography-paragraph"),P=o("a-comment"),T=o("DownloadOutlined"),F=o("a-tag"),V=o("a-typography-link"),z=o("EditOutlined"),K=o("EyeOutlined"),B=o("DeleteOutlined"),R=o("a-space"),O=o("a-table"),W=o("view-lead-details");return d(),U(L,null,[l(r,{soloVer:!0,addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.onAddEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,leadInfo:_.leadInfo,allProductos:n.allProductos,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","leadInfo","allProductos","data","pageTitle","successMessage"]),_.showCampaignStatus?(d(),b(f,{key:0},{default:a(()=>[l(g,{span:24},{default:a(()=>[l(h,{activeKey:n.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=q=>n.extraFilters.campaign_status=q),onChange:n.campaignTypeChanged},{default:a(()=>[l(m,{key:"active"},{tab:a(()=>[M("span",null,[l(u),c(" "+i(e.$t("campaign.active_campaign")),1)])]),_:1}),n.permsArray.includes("view_completed_campaigns")||n.permsArray.includes("admin")?(d(),b(m,{key:"completed"},{tab:a(()=>[M("span",null,[l(p),c(" "+i(e.$t("campaign.completed_campaign")),1)])]),_:1})):D("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):D("",!0),_.showAddButton||_.showTableSearch||_.showDateFilter||_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(f,{key:1,gutter:[15,15],class:"mb-20"},{default:a(()=>[_.showAddButton?(d(),b(g,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(k,{disabled:_.managing===!1,type:"primary",onClick:e.addItem,block:""},{default:a(()=>[l(w),c(" "+i(e.$t("notes.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})):D("",!0),_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(S,{value:n.filters.user_id,"onUpdate:value":s[1]||(s[1]=q=>n.filters.user_id=q),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allUsers,q=>(d(),b(C,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),_.showDateFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:2,xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[l(E,{onDateTimeChanged:s[2]||(s[2]=q=>{n.extraFilters.dates=q,n.setUrlData()})})]),_:1})):D("",!0)]),_:1})):D("",!0),l(f,{class:"mt-20"},{default:a(()=>[l(g,{span:24},{default:a(()=>[M("div",Lc,[l(O,{columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,onChange:e.handleTableChange,scroll:_.scrollStyle},{bodyCell:a(({column:q,record:N})=>[q.dataIndex==="cedula"?(d(),U(L,{key:0},[_.showLeadDetails?(d(),b(k,{key:0,type:"link",class:"p-0",onClick:j=>e.showViewDrawer(N.lead)},{default:a(()=>[c(i(N.lead&&N.lead.cedula!=""&&N.lead.cedula!=null?N.lead.cedula:"---"),1)]),_:2},1032,["onClick"])):(d(),U("span",Bc,i(N.lead.cedula),1))],64)):D("",!0),q.dataIndex==="campaign"?(d(),U(L,{key:1},[c(i(N.lead&&N.lead.campaign&&N.lead.campaign.name?N.lead.campaign.name:"-"),1)],64)):D("",!0),q.dataIndex==="notes"?(d(),b(P,{key:2},{author:a(()=>[c(i(N.user.name),1)]),avatar:a(()=>[l(A,{src:N.user.profile_image_url,alt:N.user.name},null,8,["src","alt"])]),content:a(()=>[M("p",qc,[l($,{ellipsis:{rows:2,expandable:!0,symbol:e.$t("common.more")},content:[N.notes_typification_name_1,N.notes_typification_name_2,N.notes_typification_name_3,N.notes_typification_name_4].filter(Boolean).join(" - ")},null,8,["ellipsis","content"]),M("strong",null,[N.next_contact?(d(),U("small",Vc,i(`${e.$t("common.next_contact")} : ${n.formatDateTime(N.next_contact)}`),1)):D("",!0)])])]),datetime:a(()=>[c(i(n.formatDateTime(N.date_time)),1)]),_:2},1024)):D("",!0),q.dataIndex==="notes_file"?(d(),b(V,{key:3,href:N.notes_file_url,target:"_blank"},{default:a(()=>[l(F,{color:"success"},{icon:a(()=>[l(T)]),default:a(()=>[c(" "+i(e.$t("common.download")),1)]),_:1})]),_:2},1032,["href"])):D("",!0),q.dataIndex==="action"?(d(),b(R,{key:4},{default:a(()=>[N&&N.notes_file_url?(d(),b(V,{key:0,href:N.notes_file_url,target:"_blank"},{default:a(()=>[l(k,{type:"primary"},{icon:a(()=>[l(T)]),_:1})]),_:2},1032,["href"])):D("",!0),l(k,{type:"primary",onClick:j=>e.editItem(N)},{icon:a(()=>[(n.permsArray.includes("admin")||n.permsArray.includes("notes_edit"))&&!e.soloVer?(d(),b(z,{key:0})):(d(),b(K,{key:1}))]),_:2},1032,["onClick"]),n.permsArray.includes("admin")||n.permsArray.includes("notes_delete")?(d(),b(k,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(N.xid)},{icon:a(()=>[l(B)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)):D("",!0)]),_:1},8,["columns","row-key","data-source","pagination","onChange","scroll"])])]),_:1})]),_:1}),l(W,{visible:e.isViewDrawerVisible,soloVer:!0,tipo:"no",lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const mn=Y(Rc,[["render",Kc]]),zc={props:["visible","leadId"],emits:["close","onSkipDelete","onSkip"],components:{InfoCircleOutlined:ua,DeleteOutlined:Se,LogoutOutlined:to,CloseOutlined:lo},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,closeModal:()=>{s("close")},skipAndDelete:()=>{_({url:"campaigns/skip-delete-lead",data:{lead_id:e.leadId},success:m=>{s("onSkipDelete",m.lead),Ve.success({message:t("common.success"),description:t("lead.skip_delete_success_message"),placement:"bottomRight"})}})},onSkip:()=>{s("onSkip")}}}},Nc={style:{color:"#7676e3"}};function jc(e,s,_,n,v,y){const r=o("InfoCircleOutlined"),u=o("LogoutOutlined"),m=o("a-button"),p=o("a-popconfirm"),h=o("a-col"),g=o("DeleteOutlined"),f=o("a-row"),w=o("CloseOutlined"),k=o("a-result"),C=o("a-modal");return d(),b(C,{open:_.visible,maskClosable:!1,closable:!1,footer:null,centered:""},{default:a(()=>[l(k,null,{title:a(()=>[M("span",Nc,i(e.$t("lead.skip_or_delete")),1)]),subTitle:a(()=>[c(i(e.$t("lead.skip_delete_message")),1)]),icon:a(()=>[l(r)]),extra:a(()=>[l(f,{gutter:[10,10]},{default:a(()=>[l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{title:e.$t("lead.come_back_confirm_message"),okText:e.$t("common.yes"),cancelText:e.$t("common.no"),onConfirm:n.onSkip},{default:a(()=>[l(m,{type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},block:""},{default:a(()=>[l(u),c(" "+i(e.$t("lead.combe_back_later")),1)]),_:1})]),_:1},8,["title","okText","cancelText","onConfirm"])]),_:1}),l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{title:e.$t("lead.skip_delete_message"),okText:e.$t("common.yes"),cancelText:e.$t("common.no"),onConfirm:n.skipAndDelete},{default:a(()=>[l(m,{type:"primary",style:{backgroundColor:"#ff4d4f",border:"#ff4d4f"},loading:n.loading,block:""},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.$t("lead.skip_and_delete")),1)]),_:1},8,["loading"])]),_:1},8,["title","okText","cancelText","onConfirm"])]),_:1})]),_:1}),l(f,{class:"mt-10"},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{onClick:n.closeModal,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},block:""},{default:a(()=>[l(w),c(" "+i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}const Hc=Y(zc,[["render",jc]]),cn=()=>{const e="email-providers?fields=id,xid,name,auth_token,subdomain",s="email-providers",_=[],{t:n}=x(),v={name:"",auth_token:"",subdomain:""},y=[{title:n("email_provider.name"),dataIndex:"name"},{title:n("email_provider.auth_token"),dataIndex:"auth_token"},{title:n("email_provider.subdomain"),dataIndex:"subdomain"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"name",value:n("email_provider.name")},{key:"auth_token",value:n("email_provider.auth_token")},{key:"subdomain",value:n("email_provider.subdomain")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,hashableColumns:_}},Wc=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,MinusCircleOutlined:Ea,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Yc(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-form"),g=o("SaveOutlined"),f=o("a-button"),w=o("a-space"),k=o("a-modal");return d(),b(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(w,null,{default:a(()=>[l(f,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(f,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(h,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("email_provider.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_provider.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("email_provider.auth_token"),name:"auth_token",help:e.rules.auth_token?e.rules.auth_token.message:null,validateStatus:e.rules.auth_token?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.auth_token,"onUpdate:value":s[1]||(s[1]=C=>e.formData.auth_token=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_provider.auth_token")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("email_provider.subdomain"),name:"subdomain",help:e.rules.subdomain?e.rules.subdomain.message:null,validateStatus:e.rules.subdomain?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.subdomain,"onUpdate:value":s[2]||(s[2]=C=>e.formData.subdomain=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_provider.subdomain")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const pn=Y(Wc,[["render",Yc]]),Gc=ne({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:pn},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=cn(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Jc={key:0};function Qc(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("AddEdit");return e.permsArray.includes("email_providers_create")||e.permsArray.includes("admin")?(d(),U("div",Jc,[e.tooltip?(d(),b(m,{key:0,placement:"topLeft",title:e.$t("email_provider.add"),"arrow-point-at-center":""},{default:a(()=>[l(u,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(u,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])),l(p,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("email_provider.add"),successMessage:e.$t("email_provider.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const Xc=Y(Gc,[["render",Qc]]),Zc=ne({props:{lead:{default:{}},leadFormData:{default:{}},email:{default:null},campaigns:{default:[]}},emits:["success"],components:{SendOutlined:Ma,MailOutlined:dt,EmailTemplateAddButton:nn,EmailProviderAddButton:Xc,QuillEditor:nt,DateTimePicker:Rt},setup(e,{emit:s}){const{t:_}=x(),{addEditRequestAdmin:n,loading:v,rules:y}=pe(),r=I(!1),u=I({lead_id:e.lead.xid,email_template_id:void 0,email:e.email,subject:"",message:"",email_provider_id:void 0,campaign:void 0,date_time:void 0,is_schedule:!1}),m="email-templates/all",p=I([]),h=I([]),g="email-providers?limit=10000",f=I(null);ie(()=>{const F=axiosAdmin.get(m),V=axiosAdmin.get(g);Promise.all([F,V]).then(([z,K])=>{p.value=z.data.email_templates,h.value=K.data,C(),S()})});const w=_e(()=>f.value.getQuill()),k=F=>{const V=w.value.getSelection(!0);var z=ba(e.leadFormData.lead_data,["field_name",F]);if(z!=null&&z.field_value!=null&&z.field_value!="")var K=V.length>0?`${z.field_value}`:`${z.field_value}`;else var K=V.length>0?`##${insertedTextField}##`:`##${insertedTextField}##`;w.value.deleteText(V.index,V.length),w.value.insertText(V.index,K)},C=()=>{e.lead&&e.lead.campaign&&e.lead.campaign.email_template&&e.lead.campaign.email_template.xid&&(u.value={...u.value,email_template_id:e.lead.campaign.email_template.xid})},S=()=>{const F=ba(p.value,["xid",u.value.email_template_id]);if(F&&F.body){var V=F.body;Ee(e.leadFormData.lead_data,(z,K)=>{z.field_value!=null&&z.field_value!=""&&(V=Pl(V,`##${z.field_name}##`,z.field_value))}),u.value={...u.value,message:V,subject:F.subject},f.value!=null&&f.value.setHTML(V)}},E=()=>{axiosAdmin.get(m).then(F=>{p.value=F.data.email_templates})},A=()=>{axiosAdmin.get(g).then(F=>{h.value=F.data})},$=()=>{u.value={...u.value,email:e.email},S(),r.value=!0},P=()=>{n({url:"leads/send-email",data:u.value,success:F=>{F&&F.success?(r.value=!1,Ve.success({message:_("common.success"),description:_("email_template.mail_send_successfully"),placement:"bottomRight"}),s("success"),u.value={email_provider_id:void 0,campaign:void 0,date_time:void 0}):Ve.error({message:_("common.error"),description:_("email_template.mail_send_error_message"),placement:"bottomRight"})}})},T=()=>{r.value=!1,v.value=!1,y.value={},C()};return he(()=>r.value,F=>{F&&(u.value.lead_id=e.lead.xid)}),{loading:v,visible:r,rules:y,formData:u,emailProviders:h,sendEmail:$,onSubmit:P,hideModal:T,textEditor:f,allEmailTemplates:p,emailTemplateAdded:E,emailTemplateChanged:S,insertFormText:k,emailProviderAdded:A,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),xc={style:{display:"flex"}},ep={style:{display:"flex"}},ap={style:{display:"flex"}};function tp(e,s,_,n,v,y){const r=o("MailOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("a-select-option"),h=o("a-select"),g=o("EmailProviderAddButton"),f=o("a-form-item"),w=o("a-col"),k=o("a-row"),C=o("EmailTemplateAddButton"),S=o("a-input"),E=o("QuillEditor"),A=o("a-checkbox"),$=o("DateTimePicker"),P=o("a-form"),T=o("SendOutlined"),F=o("a-space"),V=o("a-drawer");return d(),U(L,null,[l(m,{title:e.$t("lead.send_email")},{default:a(()=>[l(u,{type:"primary",onClick:e.sendEmail},{icon:a(()=>[l(r)]),_:1},8,["onClick"])]),_:1},8,["title"]),l(V,{title:e.$t("lead.send_email"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.hideModal},{footer:a(()=>[l(F,null,{default:a(()=>[l(u,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(T)]),default:a(()=>[c(" "+i(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),l(u,{key:"back",onClick:e.hideModal},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(P,{layout:"vertical"},{default:a(()=>[l(k,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(f,{label:e.$t("email_template.email_provider"),name:"email_provider_id",help:e.rules.email_provider_id?e.rules.email_provider_id.message:null,validateStatus:e.rules.email_provider_id?"error":null,class:"required"},{default:a(()=>[M("span",xc,[l(h,{value:e.formData.email_provider_id,"onUpdate:value":s[0]||(s[0]=z=>e.formData.email_provider_id=z),placeholder:e.$t("common.select_default_text",[e.$t("email_template.email_provider")])},{default:a(()=>[(d(!0),U(L,null,G(e.emailProviders,z=>(d(),b(p,{key:z.xid,value:z.xid},{default:a(()=>[c(i(z.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(g,{onOnAddSuccess:e.emailProviderAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(w,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(f,{label:e.$t("lead.campaign"),name:"campaign",help:e.rules.campaign?e.rules.campaign.message:null,validateStatus:e.rules.campaign?"error":null,class:"required"},{default:a(()=>[M("span",ep,[l(h,{value:e.formData.campaign,"onUpdate:value":s[1]||(s[1]=z=>e.formData.campaign=z),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.campaigns,z=>(d(),b(p,{value:z},{default:a(()=>[c(i(z),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("campaign.email_template"),name:"email_template_id",help:e.rules.email_template_id?e.rules.email_template_id.message:null,validateStatus:e.rules.email_template_id?"error":null,class:"required"},{default:a(()=>[M("span",ap,[l(h,{value:e.formData.email_template_id,"onUpdate:value":s[2]||(s[2]=z=>e.formData.email_template_id=z),placeholder:e.$t("common.select_default_text",[e.$t("campaign.email_template")]),onChange:e.emailTemplateChanged},{default:a(()=>[(d(!0),U(L,null,G(e.allEmailTemplates,z=>(d(),b(p,{key:z.xid,value:z.xid},{default:a(()=>[c(i(z.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"]),l(C,{onOnAddSuccess:e.emailTemplateAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("common.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[l(S,{value:e.formData.email,"onUpdate:value":s[3]||(s[3]=z=>e.formData.email=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("email_template.subject"),name:"subject",help:e.rules.subject?e.rules.subject.message:null,validateStatus:e.rules.subject?"error":null,class:"required"},{default:a(()=>[l(S,{value:e.formData.subject,"onUpdate:value":s[4]||(s[4]=z=>e.formData.subject=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.subject")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("email_template.message"),name:"message",help:e.rules.message?e.rules.message.message:null,validateStatus:e.rules.message?"error":null,class:"required"},{default:a(()=>[l(E,{ref:"textEditor",content:e.formData.message,"onUpdate:content":s[5]||(s[5]=z=>e.formData.message=z),contentType:"html",placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.message")]),style:{height:"200px"}},null,8,["content","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.lead&&e.lead.campaign&&e.lead.campaign.form&&e.lead.campaign.form.form_fields&&e.lead.campaign.form.form_fields.length>0?(d(),b(k,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[(d(!0),U(L,null,G(e.lead.campaign.form.form_fields,z=>(d(),b(w,{xs:8,sm:8,md:6,lg:4,key:z.id},{default:a(()=>[l(u,{onClick:K=>e.insertFormText(z.name),type:"link",style:{padding:"0px"}},{default:a(()=>[c(i(z.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):D("",!0),l(k,{gutter:16},{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,null,{default:a(()=>[l(A,{style:{width:"75%"},checked:e.formData.is_schedule,"onUpdate:checked":s[6]||(s[6]=z=>e.formData.is_schedule=z)},{default:a(()=>[c(i(e.$t("email_template.is_schedule")),1)]),_:1},8,["checked"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:16},{default:a(()=>[e.formData.is_schedule?(d(),b(w,{key:0,xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("email_template.date_time"),name:"date_time",help:e.rules.date_time?e.rules.date_time.message:null,validateStatus:e.rules.date_time?"error":null,class:"required"},{default:a(()=>[l($,{dateTime:e.formData.date_time,onDateTimeChanged:s[7]||(s[7]=z=>e.formData.date_time=z),isFutureDateDisabled:!1},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const lp=Y(Zc,[["render",tp]]),_n=()=>{const e="message-templates?fields=id,xid,name,subject,message,status,sharable,code,message_provider_id,x_message_provider_id,messageProvider{id,xid,name}",s="message-templates",_=["message_provider_id"],{t:n}=x(),v={name:"",subject:"",message:"",status:1,sharable:0,code:"",message_provider_id:void 0},y=[{title:n("message_template.id"),dataIndex:"id"},{title:n("message_template.message_provider"),dataIndex:"message_provider"},{title:n("message_template.name"),dataIndex:"name"},{title:n("message_template.message"),dataIndex:"message"},{title:n("message_template.code"),dataIndex:"code"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"name",value:n("message_template.name")},{key:"subject",value:n("message_template.subject")},{key:"message",value:n("message_template.message")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,hashableColumns:_}},fn=()=>{const e="message-providers?fields=id,xid,name,source,auth_token,campaign,subdomain",s="message-providers",_=[],{t:n}=x(),v={name:"",source:"",auth_token:"",campaign:"",subdomain:""},y=[{title:n("message_provider.name"),dataIndex:"name"},{title:n("message_provider.source"),dataIndex:"source"},{title:n("message_provider.campaign"),dataIndex:"campaign"},{title:n("message_provider.subdomain"),dataIndex:"subdomain"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"source",value:n("message_provider.source")},{key:"auth_token",value:n("message_provider.auth_token")},{key:"campaign",value:n("message_provider.campaign")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,hashableColumns:_}},np=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,MinusCircleOutlined:Ea,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function op(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-form"),g=o("SaveOutlined"),f=o("a-button"),w=o("a-space"),k=o("a-modal");return d(),b(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(w,null,{default:a(()=>[l(f,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(f,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(h,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("message_provider.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_provider.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("message_provider.auth_token"),name:"auth_token",help:e.rules.auth_token?e.rules.auth_token.message:null,validateStatus:e.rules.auth_token?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.auth_token,"onUpdate:value":s[1]||(s[1]=C=>e.formData.auth_token=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_provider.auth_token")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("message_provider.source"),name:"source",help:e.rules.source?e.rules.source.message:null,validateStatus:e.rules.source?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.source,"onUpdate:value":s[2]||(s[2]=C=>e.formData.source=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_provider.source")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("message_provider.subdomain"),name:"subdomain",help:e.rules.subdomain?e.rules.subdomain.message:null,validateStatus:e.rules.subdomain?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.subdomain,"onUpdate:value":s[3]||(s[3]=C=>e.formData.subdomain=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_provider.subdomain")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("message_provider.campaign"),name:"campaign",help:e.rules.campaign?e.rules.campaign.message:null,validateStatus:e.rules.campaign?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.campaign,"onUpdate:value":s[4]||(s[4]=C=>e.formData.campaign=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_provider.campaign")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const gn=Y(np,[["render",op]]),sp=ne({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:gn},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=fn(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),dp={key:0};function ip(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("AddEdit");return e.permsArray.includes("message_providers_create")||e.permsArray.includes("admin")?(d(),U("div",dp,[e.tooltip?(d(),b(m,{key:0,placement:"topLeft",title:e.$t("message_provider.add"),"arrow-point-at-center":""},{default:a(()=>[l(u,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(u,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])),l(p,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("message_provider.add"),successMessage:e.$t("message_provider.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const rp=Y(sp,[["render",ip]]),up=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,InfoCircleOutlined:ua,QuillEditor:nt,FormAddButton:Mt,MessageProviderAddButton:rp},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y="forms/all",r=I(null),u=I([]),m=I(void 0),p=I({}),h=I([]),g="message-providers?limit=10000";ie(()=>{const $=axiosAdmin.get(y),P=axiosAdmin.get(g);Promise.all([$,P]).then(([T,F])=>{u.value=T.data.data,h.value=F.data})});const f=()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:$=>{s("addEditSuccess",$.xid)}})},w=$=>{const P=C.value.getSelection(!0);var T=P.length>0?`##${$}##`:` ##${$}## `;C.value.deleteText(P.index,P.length),C.value.insertText(P.index,T)},k=()=>{v.value={},s("closed")},C=_e(()=>r.value.getQuill()),S=()=>{axiosAdmin.get(y).then($=>{u.value=$.data.data})},E=()=>{axiosAdmin.get(g).then($=>{h.value=$.data})},A=($,P)=>{p.value=P.form};return he(()=>e.visible,($,P)=>{$==!0&&r.value&&(e.addEditType=="edit"?r.value.setHTML(e.formData.message):r.value.setHTML("")),m.value=void 0,p.value={}}),{loading:n,rules:v,onClose:k,onSubmit:f,insertFormText:w,textEditor:r,allForms:u,selectedFormId:m,formAdded:S,formSelected:A,selectedForm:p,messageProviders:h,messageProviderAdded:E,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),mp={style:{display:"flex"}};function cp(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("MessageProviderAddButton"),p=o("a-form-item"),h=o("a-col"),g=o("a-input"),f=o("a-textarea"),w=o("a-row"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),E=o("a-space"),A=o("a-modal");return d(),b(A,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(E,null,{default:a(()=>[l(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(S,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(k,{layout:"vertical"},{default:a(()=>[l(w,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{label:e.$t("lead_notes.message_provider"),name:"message_provider_id",help:e.rules.message_provider_id?e.rules.message_provider_id.message:null,validateStatus:e.rules.message_provider_id?"error":null,allowClear:!0,class:"required"},{default:a(()=>[M("span",mp,[l(u,{value:e.formData.message_provider_id,"onUpdate:value":s[0]||(s[0]=$=>e.formData.message_provider_id=$),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.message_provider")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.messageProviders,$=>(d(),b(r,{key:$.xid,title:$.name,value:$.xid},{default:a(()=>[c(i($.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),l(m,{onOnAddSuccess:e.messageProviderAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{label:e.$t("message_template.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(g,{value:e.formData.name,"onUpdate:value":s[1]||(s[1]=$=>e.formData.name=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_template.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{label:e.$t("message_template.code"),name:"code",help:e.rules.code?e.rules.code.message:null,validateStatus:e.rules.code?"error":null,class:"required"},{default:a(()=>[l(f,{value:e.formData.code,"onUpdate:value":s[2]||(s[2]=$=>e.formData.code=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_template.code")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(w,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{label:e.$t("message_template.message"),name:"message",help:e.rules.message?e.rules.message.message:null,validateStatus:e.rules.message?"error":null,class:"required"},{default:a(()=>[l(f,{value:e.formData.message,"onUpdate:value":s[3]||(s[3]=$=>e.formData.message=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_template.message")]),"auto-size":{minRows:5,maxRows:8}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const hn=Y(up,[["render",cp]]),pp=ne({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:hn},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=_n(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),_p={key:0};function fp(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("AddEdit");return e.permsArray.includes("message_templates_create")||e.permsArray.includes("admin")?(d(),U("div",_p,[e.tooltip?(d(),b(m,{key:0,placement:"topLeft",title:e.$t("message_template.add"),"arrow-point-at-center":""},{default:a(()=>[l(u,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(u,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(r)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])),l(p,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("message_template.add"),successMessage:e.$t("message_template.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const gp=Y(pp,[["render",fp]]),hp=ne({props:{lead:{default:{}},leadFormData:{default:{}},phone:{default:null}},emits:["success"],components:{SendOutlined:Ma,CommentOutlined:Ml,EmailTemplateAddButton:gp,QuillEditor:nt,DateTimePicker:Rt},setup(e,{emit:s}){const{t:_}=x(),{countryCodes:n,extractCountryCodeAndNumber:v}=Z(),{addEditRequestAdmin:y,loading:r,rules:u}=pe(),m=I(!1),p=I({lead_id:e.lead.xid,message_template_id:void 0,provider_id:void 0,message:"",code:"",country_code:void 0,date_time:void 0,is_schedule:!1}),h="message-templates/all?fields=id,xid,name,message_provider_id,x_message_provider_id,code",g=I([]),f=I([]),w="message-providers/all",k=I(null),C=I([]),S=I([]),E=I(""),A=I(""),$=I(""),P=_e(()=>`${p.value.country_code}${p.value.phone}`);ie(()=>{const le=axiosAdmin.get(h),ue=axiosAdmin.get(w);Promise.all([le,ue]).then(([ee,ve])=>{g.value=ee.data.message_templates,f.value=ve.data.providers,B(),W(),T()})});const T=le=>{p.value.message_template_id=void 0,S.value=void 0,C.value=[],Ee(g.value,ue=>{ue.x_message_provider_id==le&&C.value.push(ue)})};function F(le){const ue=/\{\{(\d+)\}\}/g,ee=[];let ve;for(;(ve=ue.exec(le))!==null;)ee.push(ve[1]);return ee}const V=_e(()=>F(p.value.message)),z=_e(()=>k.value.getQuill()),K=le=>{const ue=z.value.getSelection(!0);var ee=ba(e.leadFormData.lead_data,["field_name",le]);if(ee!=null&&ee.field_value!=null&&ee.field_value!="")var ve=ue.length>0?`${ee.field_value}`:`${ee.field_value}`;else var ve=ue.length>0?`##${insertedTextField}##`:`##${insertedTextField}##`;z.value.deleteText(ue.index,ue.length),z.value.insertText(ue.index,ve)},B=()=>{e.lead&&e.lead.campaign&&e.lead.campaign.message_template&&e.lead.campaign.message_template.xid&&(p.value={...p.value,provider_id:e.lead.campaign.message_template.xid})},R=(le,ue)=>no(ue,(ee,ve)=>ee.replace(ve.target,ve.name),le),O=()=>{E.value=R(A.value,S.value)},W=()=>{const le=ba(g.value,["xid",p.value.message_template_id]);if(le&&le.message){A.value=le.message,$.value=le.code;const ee=F(le.message);S.value=[],Ee(ee,ve=>{S.value.push({target:`{{${ve}}}`,name:""})}),O()}if(le&&le.message){var ue=le.message;Ee(e.leadFormData.lead_data,(ee,ve)=>{ee.field_value!=null&&ee.field_value!=""&&(ue=Pl(ue,`##${ee.field_name}##`,ee.field_value))}),p.value={...p.value,message:ue},k.value!=null&&k.value.setHTML(ue)}},q=()=>{axiosAdmin.get(h).then(le=>{g.value=le.data.message_templates})},N=()=>{const{remainingNumber:le,countryCode:ue}=v(e.phone);p.value={...p.value,message_template_id:void 0,provider_id:void 0,message:"",phone:le,country_code:ue,is_schedule:!1,date_time:void 0},W(),m.value=!0},j=()=>{var le={...p.value,message:E.value,code:R($.value,S.value),full_number:P.value};y({url:"leads/send-message",data:le,success:ue=>{ue&&ue.success?(m.value=!1,Ve.success({message:_("common.success"),description:_("message_template.message_send_successfully"),placement:"bottomRight"}),s("success")):Ve.error({message:_("common.error"),description:_("message_template.message_send_error_message"),placement:"bottomRight"})}})},te=()=>{m.value=!1,r.value=!1,u.value={},B()};return he(()=>p.value.provider_id,le=>{le&&(T(le),S.value)}),{loading:r,visible:m,rules:u,formData:p,sendMessage:N,onSubmit:j,hideModal:te,textEditor:k,allMessageTemplates:g,messageTemplateAdded:q,messageTemplateChanged:W,insertFormText:K,drawerWidth:window.innerWidth<=991?"90%":"45%",getMessageTemplate:T,allProviders:f,messageTemplate:C,extractDynamicVariables:F,dynamicVariables:V,createSabValues:S,messageString:E,replaceMessageString:O,countryCodes:n,fullPhoneNumber:P}}}),vp={style:{display:"flex"}},bp={style:{display:"flex"}},yp={key:0},kp={key:0},Cp=M("br",null,null,-1);function wp(e,s,_,n,v,y){const r=o("CommentOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("a-select-option"),h=o("a-select"),g=o("a-input"),f=o("a-input-group"),w=o("a-form-item"),k=o("a-col"),C=o("a-row"),S=o("a-checkbox"),E=o("DateTimePicker"),A=o("a-form"),$=o("SendOutlined"),P=o("a-space"),T=o("a-modal");return d(),U(L,null,[l(m,{title:e.$t("lead.send_message")},{default:a(()=>[l(u,{type:"primary",onClick:e.sendMessage,danger:""},{icon:a(()=>[l(r)]),_:1},8,["onClick"])]),_:1},8,["title"]),l(T,{open:e.visible,closable:!1,centered:!0,title:`${e.$t("lead.send_message")} (${e.fullPhoneNumber})`,onOk:e.hideModal},{footer:a(()=>[l(P,null,{default:a(()=>[l(u,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l($)]),default:a(()=>[c(" "+i(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),l(u,{key:"back",onClick:e.hideModal},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(A,{layout:"vertical"},{default:a(()=>[l(C,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("lead.phone_number"),name:"phone_number",help:e.rules.phone_number?e.rules.phone_number.message:null,validateStatus:e.rules.phone_number?"error":null,class:"required"},{default:a(()=>[l(f,{compact:""},{default:a(()=>[l(h,{style:{width:"25%"},value:e.formData.country_code,"onUpdate:value":s[0]||(s[0]=F=>e.formData.country_code=F),placeholder:e.$t("common.select_default_text",[e.$t("lead.country_code")]),optionFilterProp:"value","show-search":"",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.countryCodes,F=>(d(),b(p,{key:F.code,value:F.code},{default:a(()=>[c(i(F.code),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(g,{style:{width:"75%"},value:e.formData.phone,"onUpdate:value":s[1]||(s[1]=F=>e.formData.phone=F),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.phone_number")])},null,8,["value","placeholder"])]),_:1})]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(C,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("campaign.message_provider"),name:"provider_id",help:e.rules.provider_id?e.rules.provider_id.message:null,validateStatus:e.rules.provider_id?"error":null,class:"required"},{default:a(()=>[M("span",vp,[l(h,{value:e.formData.provider_id,"onUpdate:value":s[2]||(s[2]=F=>e.formData.provider_id=F),placeholder:e.$t("common.select_default_text",[e.$t("campaign.message_provider")]),onChange:s[3]||(s[3]=F=>e.getMessageTemplate(e.formData.provider_id))},{default:a(()=>[(d(!0),U(L,null,G(e.allProviders,F=>(d(),b(p,{key:F.xid,value:F.xid},{default:a(()=>[c(i(F.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(C,{gutter:16},{default:a(()=>[e.formData.provider_id?(d(),b(k,{key:0,xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("campaign.message_template"),name:"message_template_id",help:e.rules.message_template_id?e.rules.message_template_id.message:null,validateStatus:e.rules.message_template_id?"error":null,class:"required"},{default:a(()=>[M("span",bp,[l(h,{value:e.formData.message_template_id,"onUpdate:value":s[4]||(s[4]=F=>e.formData.message_template_id=F),placeholder:e.$t("common.select_default_text",[e.$t("campaign.message_template")]),onChange:e.messageTemplateChanged},{default:a(()=>[(d(!0),U(L,null,G(e.messageTemplate,F=>(d(),b(p,{key:F.xid,value:F.xid},{default:a(()=>[c(i(F.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1}),e.dynamicVariables.length>0?(d(),U("div",yp,[e.createSabValues?(d(),U("strong",kp,i(e.$t("message_template.variables")),1)):D("",!0),(d(!0),U(L,null,G(e.createSabValues,(F,V)=>(d(),U("div",{key:F.id},[l(C,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[M("li",null,[l(g,{disabled:"",value:F.target,"onUpdate:value":z=>F.target=z,placeholder:"Enter value for {{ variable }}",style:{"margin-bottom":"16px"}},null,8,["value","onUpdate:value"]),Cp])]),_:2},1024),l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(g,{value:F.name,"onUpdate:value":z=>F.name=z,placeholder:e.$t("message_template.enter_subvalues"),onChange:e.replaceMessageString},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1024)]),_:2},1024)]))),128))])):D("",!0),l(C,{gutter:16},{default:a(()=>[e.formData.message_template_id?(d(),b(k,{key:0,xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("message_template.message"),name:"message",help:e.rules.message?e.rules.message.message:null,validateStatus:e.rules.message?"error":null},{default:a(()=>[c(i(e.messageString),1)]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1}),l(C,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,null,{default:a(()=>[l(S,{style:{width:"75%"},checked:e.formData.is_schedule,"onUpdate:checked":s[5]||(s[5]=F=>e.formData.is_schedule=F)},{default:a(()=>[c(i(e.$t("campaign.is_schedule")),1)]),_:1},8,["checked"])]),_:1})]),_:1})]),_:1}),l(C,{gutter:16},{default:a(()=>[e.formData.is_schedule?(d(),b(k,{key:0,xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("campaign.date_time"),name:"date_time",help:e.rules.date_time?e.rules.date_time.message:null,validateStatus:e.rules.date_time?"error":null,class:"required"},{default:a(()=>[l(E,{dateTime:e.formData.date_time,onDateTimeChanged:s[6]||(s[6]=F=>e.formData.date_time=F),isFutureDateDisabled:!1},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const Sp=Y(hp,[["render",wp]]);const $p=ne({props:{leadId:{default:""}},setup(e,{emit:s}){const{rightSidebarValue:_,user:n,themeMode:v}=Z(),y=I(!0),r=I(null),{t:u}=x(),m=Ke(),p=na(),{addEditRequestAdmin:h}=pe(),g=C=>{switch(C.data.params&&axiosAdmin.post("uphone-calls/save",{...C.data.params,lead_id:e.leadId}).then(S=>{m.commit("auth/updateUphoneCallReloadString",Math.random()*20)}),C.data.action){case"gettingCall":f(C);break;case"makeCall":w(C);break}};function f(C){let S=C.data.params.number,E=C.data.params.campaign;axiosAdmin.post("campaigns/find-campaigns-homologate",{campaign:E}).then(A=>{const $=A.data&&A.data.length>0&&A.data[0]!==void 0?typeof A.data[0]=="string"?JSON.parse(A.data[0]):Array.isArray(A.data[0])?A.data[0]:[A.data[0]]:[];$.length===1?(E=$[0].name,axiosAdmin.post("leads/find-by-phone-campaign",{phone:S,campaign:E}).then(P=>{var T,F;(T=P.data)!=null&&T.x_lead_id?P.data.x_lead_id.length===1?p.push({name:"admin.formsUCB.CRM",params:{id:P.data.x_lead_id[0]}}):console.warn("Mas de un lead con el numero telefonico asignado - INBOUN CALL"):(F=P.data)!=null&&F.x_campaign_id&&h({url:"campaigns/take-action",data:{x_campaign_id:P.data.x_campaign_id},successMessage:u("campaign.new_lead_added"),success:V=>{p.push({name:"admin.formsUCB.CRM",params:{id:V.x_lead_id}})}})}).catch(P=>{console.error("Error en find-by-phone-campaign:",P)})):$.length>1?console.warn("Campana de uContact homologada con mas de una campana de LeadPro. - INBOUND CALL"):console.warn("Campaña de uContact no homologada con Campaña de LeadPro")}).catch(A=>{console.error("Error en find-campaigns-homologate:",A)})}function w(C){let S=C.data.params.number,E=C.data.params.campaign;axiosAdmin.post("campaigns/find-campaigns-homologate",{campaign:E}).then(A=>{const $=A.data&&A.data.length>0&&A.data[0]!==void 0?typeof A.data[0]=="string"?JSON.parse(A.data[0]):Array.isArray(A.data[0])?A.data[0]:[A.data[0]]:[];$.length===1?(E=$[0].name,axiosAdmin.post("leads/find-by-phone-campaign",{phone:S,campaign:E}).then(P=>{var T,F;(T=P.data)!=null&&T.x_lead_id?p.push({name:"admin.formsUCB.CRM",params:{id:P.data.x_lead_id}}):(F=P.data)!=null&&F.x_campaign_id&&h({url:"campaigns/take-action",data:{x_campaign_id:P.data.x_campaign_id},successMessage:u("campaign.new_lead_added"),success:V=>{p.push({name:"admin.formsUCB.CRM",params:{id:V.x_lead_id}})}})}).catch(P=>{console.error("Error en find-by-phone-campaign:",P)})):$.length>1?console.warn("Campana de uContact homologada con mas de una campana de LeadPro. - OUTBOUND CALL"):console.warn("Campaña de uContact no homologada con Campaña de LeadPro")}).catch(A=>{console.error("Error en find-campaigns-homologate:",A)})}return ie(()=>{window.addEventListener("message",g)}),it(()=>{window.removeEventListener("message",g)}),{rightSidebarValue:_,loading:y,onIframeLoad:()=>{document.getElementById("ucontact"),y.value=!1},iframe:r,themeMode:v}}});function Ap(e,s,_,n,v,y){return d(),U("div",{class:"right-sidebar",style:we({borderLeft:e.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},null,4)}const Dp=Y($p,[["render",Ap]]),Tp=ne({props:{lead:{default:{}},campaigns:{default:[]},phone:{default:null}},emits:["success"],components:{SendOutlined:Ma,MobileOutlined:tt},setup(e,{emit:s}){const{rightSidebarValue:_,countryCodes:n,extractCountryCodeAndNumber:v}=Z(),y=Ke();x();const{addEditRequestAdmin:r,loading:u,rules:m}=pe(),p=I(!1),h=_e(()=>`${f.value.country_code}${f.value.phone}`),g=_e(()=>e.campaigns.filter(S=>S.endsWith("->"))),f=I({campaign:void 0,phone:e.phone,country_code:void 0}),w=()=>{const{remainingNumber:S,countryCode:E}=v(e.phone);f.value={...f.value,campaign:void 0,phone:S,country_code:E},p.value=!0,_.value||y.commit("auth/updateRightSidebarValue",!_.value)},k=()=>{r({url:"leads/make-call-request",data:f.value,success:S=>{var E=document.getElementsByTagName("iframe")[0].contentWindow;const A={action:"makecall",params:{number:h.value,campaign:f.value.campaign}};E.postMessage(A,"*"),C()}})},C=()=>{p.value=!1,u.value=!1,m.value={}};return{loading:u,visible:p,rules:m,formData:f,sendCallNumber:w,onSubmit:k,hideModal:C,countryCodes:n,fullPhoneNumber:h,allOutboundCampaigns:g,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Ep={style:{display:"flex"}};function Up(e,s,_,n,v,y){const r=o("MobileOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("a-select-option"),h=o("a-select"),g=o("a-input"),f=o("a-input-group"),w=o("a-form-item"),k=o("a-col"),C=o("a-row"),S=o("a-form"),E=o("a-space"),A=o("a-modal");return d(),U(L,null,[l(m,{title:e.$t("lead.make_call")},{default:a(()=>[l(u,{type:"primary",onClick:e.sendCallNumber},{icon:a(()=>[l(r)]),_:1},8,["onClick"])]),_:1},8,["title"]),l(A,{open:e.visible,closable:!1,centered:!0,title:`${e.$t("lead.make_call")} (${e.fullPhoneNumber})`,onOk:e.hideModal},{footer:a(()=>[l(E,null,{default:a(()=>[l(u,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.call")),1)]),_:1},8,["loading","onClick"]),l(u,{key:"back",onClick:e.hideModal},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(S,{layout:"vertical"},{default:a(()=>[l(C,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("lead.phone_number"),name:"phone_number",help:e.rules.phone_number?e.rules.phone_number.message:null,validateStatus:e.rules.phone_number?"error":null,class:"required"},{default:a(()=>[l(f,{compact:""},{default:a(()=>[l(h,{style:{width:"25%"},value:e.formData.country_code,"onUpdate:value":s[0]||(s[0]=$=>e.formData.country_code=$),placeholder:e.$t("common.select_default_text",[e.$t("lead.country_code")]),optionFilterProp:"value","show-search":"",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.countryCodes,$=>(d(),b(p,{key:$.code,value:$.code},{default:a(()=>[c(i($.code),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(g,{style:{width:"75%"},value:e.formData.phone,"onUpdate:value":s[1]||(s[1]=$=>e.formData.phone=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.phone_number")])},null,8,["value","placeholder"])]),_:1})]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(C,{gutter:16,class:"mt-17"},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("lead.campaign"),name:"campaign",help:e.rules.campaign?e.rules.campaign.message:null,validateStatus:e.rules.campaign?"error":null,class:"required"},{default:a(()=>[M("span",Ep,[l(h,{value:e.formData.campaign,"onUpdate:value":s[2]||(s[2]=$=>e.formData.campaign=$),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.allOutboundCampaigns,$=>(d(),b(p,{value:$},{default:a(()=>[c(i($),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const Op=Y(Tp,[["render",Up]]),Ip=ne({props:{lead:{default:{}},campaigns:{default:[]},phone:{default:null}},emits:["success"],components:{SendOutlined:Ma,SearchOutlined:Ut},setup(e,{emit:s}){const{rightSidebarValue:_,countryCodes:n,extractCountryCodeAndNumber:v}=Z(),y=Ke();x();const{addEditRequestAdmin:r,loading:u,rules:m}=pe(),p=I(!1),h=_e(()=>`${f.value.country_code}${f.value.phone}`),g=_e(()=>e.campaigns.filter(S=>S.endsWith("->"))),f=I({campaign:void 0,phone:e.phone,country_code:void 0}),w=()=>{const{remainingNumber:S,countryCode:E}=v(e.phone);f.value={...f.value,campaign:void 0,phone:S,country_code:E},p.value=!0,_.value||y.commit("auth/updateRightSidebarValue",!_.value)},k=()=>{r({url:"leads/make-call-request",data:f.value,success:S=>{var E=document.getElementsByTagName("iframe")[0].contentWindow;const A={action:"makecall",params:{number:h.value,campaign:f.value.campaign}};E.postMessage(A,"*"),C()}})},C=()=>{p.value=!1,u.value=!1,m.value={}};return{loading:u,visible:p,rules:m,formData:f,sendCallNumber:w,onSubmit:k,hideModal:C,countryCodes:n,fullPhoneNumber:h,allOutboundCampaigns:g,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Pp={style:{display:"flex"}};function Mp(e,s,_,n,v,y){const r=o("SearchOutlined"),u=o("a-button"),m=o("a-tooltip"),p=o("a-select-option"),h=o("a-select"),g=o("a-input"),f=o("a-input-group"),w=o("a-form-item"),k=o("a-col"),C=o("a-row"),S=o("a-form"),E=o("a-space"),A=o("a-modal");return d(),U(L,null,[l(m,{title:e.$t("lead.search_lead")},{default:a(()=>[l(u,{type:"primary",onClick:e.sendCallNumber},{icon:a(()=>[l(r)]),_:1},8,["onClick"])]),_:1},8,["title"]),l(A,{open:e.visible,closable:!1,centered:!0,title:`${e.$t("lead.make_call")} (${e.fullPhoneNumber})`,onOk:e.hideModal},{footer:a(()=>[l(E,null,{default:a(()=>[l(u,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.call")),1)]),_:1},8,["loading","onClick"]),l(u,{key:"back",onClick:e.hideModal},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(S,{layout:"vertical"},{default:a(()=>[l(C,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("lead.phone_number"),name:"phone_number",help:e.rules.phone_number?e.rules.phone_number.message:null,validateStatus:e.rules.phone_number?"error":null,class:"required"},{default:a(()=>[l(f,{compact:""},{default:a(()=>[l(h,{style:{width:"25%"},value:e.formData.country_code,"onUpdate:value":s[0]||(s[0]=$=>e.formData.country_code=$),placeholder:e.$t("common.select_default_text",[e.$t("lead.country_code")]),optionFilterProp:"value","show-search":"",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.countryCodes,$=>(d(),b(p,{key:$.code,value:$.code},{default:a(()=>[c(i($.code),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(g,{style:{width:"75%"},value:e.formData.phone,"onUpdate:value":s[1]||(s[1]=$=>e.formData.phone=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.phone_number")])},null,8,["value","placeholder"])]),_:1})]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(C,{gutter:16,class:"mt-17"},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{label:e.$t("lead.campaign"),name:"campaign",help:e.rules.campaign?e.rules.campaign.message:null,validateStatus:e.rules.campaign?"error":null,class:"required"},{default:a(()=>[M("span",Pp,[l(h,{value:e.formData.campaign,"onUpdate:value":s[2]||(s[2]=$=>e.formData.campaign=$),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.allOutboundCampaigns,$=>(d(),b(p,{value:$},{default:a(()=>[c(i($),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const Fp=Y(Ip,[["render",Mp]]),Rp=()=>{const{t:e}=x();return{columns:[{title:e("lead.document"),dataIndex:"cedula",key:"cedula"},{title:e("lead.name"),dataIndex:"nombre",key:"nombre"},{title:e("lead.phone"),dataIndex:"tel1",key:"tel1"},{title:e("lead.email"),dataIndex:"email",key:"email"},{title:e("lead.agent"),dataIndex:"assign_to",key:"assign_to"}]}};""+document.location.host;localStorage.getItem("auth_token");var hl=I(""),gt=I("");const ht=I([]),vl=I([]),Lp=I([]),Bp=I([]),bl=I([]),qp=()=>{const e=async()=>{_();try{return(await axiosAdmin.get("call-managers")).data}catch(y){console.error("Error fetching user campaigns:",y)}},s=async()=>{try{return(await axiosAdmin.get("lead-status?fields=id,xid,name,color,type")).data}catch(y){console.error("Error fetching leads status:",y)}},_=async()=>{hl.value=JSON.parse(localStorage.getItem("auth_user")||"{}").name,gt.value=JSON.parse(localStorage.getItem("auth_user")||"{}").id};return{myAgent:hl,myId:gt,fetchLeadStatus:s,fetchUserCampaigns:e,fetchLocalidades:async()=>{try{const y=await axiosAdmin.get("localidades?fields=provincia,canton,distrito&limit=1000");ht.value=y.data,vl.value=Array.from(new Set(ht.value.map(r=>r.provincia)))}catch(y){console.error("Error fetching localidades:",y)}},fetchAgenteCampanas:async()=>{try{axiosAdmin.get(`campaigns/${gt.value}/users`).then(y=>{bl.value=y})}catch(y){console.error("Error fetching agente campanas:",y)}},locations:ht,provinceOptions:vl,cantonOptions:Lp,districtOptions:Bp,agenteCampanas:bl}};function vn(){return{id:null,xid:null,campaign:{id:null,name:"",status:"",xid:""},lead_status:{id:null,xid:null,name:"",type:""},cedula:"",nombre:"",apellido1:"",apellido2:"",estado_civil:{id:null,name:"",type:"",xid:null},hijos:0,fechaNacimiento:"",edad:0,nacionalidad:"",tel1:"",tel2:"",tel3:"",tel4:"",tel5:"",tel6:"",email:"",provincia:null,canton:null,distrito:null,time_taken:0,nombreBase:"",tarjeta:"",assign_to:{id:null,name:"",xid:""},isNew:!0,toManage:!1,managing:!1,call_log:{}}}const Qe=Le({client:vn()});Le({tab:{value:"1"}});Le({data:[],loading:!1,selectedRowKeys:[]});Le({data:[],pagination:{current:1,pageSize:5,total:0,showSizeChanger:!1},loading:!1,selectedRowKeys:[]});const da=Le({data:[],pagination:{current:1,pageSize:10,total:0,showSizeChanger:!1},loading:!1,selectedRowKeys:[]}),ha=Le({clientSerch:{campana:null,leadStatus:null,document:"",name:"",email:"",phone:""}});var yl=I("lead_details");const Vp=()=>{const{t:e}=x(),{permsArray:s}=Z(),_=oo(0,!1),{myAgent:n,myId:v,fetchUserCampaigns:y,fetchLeadStatus:r,fetchLocalidades:u,fetchAgenteCampanas:m,agenteCampanas:p,locations:h,provinceOptions:g,cantonOptions:f,districtOptions:w}=qp(),k=(K,B,R)=>{switch(K){case"info":Ve.info({message:e(`common.${B}`),description:e(`lead.${R}`)});break;case"success":Ve.success({message:e(`common.${B}`),description:e(`lead.${R}`)});break;case"warning":Ve.warning({message:e(`common.${B}`),description:e(`lead.${R}`)});break;case"error":Ve.error({message:e(`common.${B}`),description:e(`lead.${R}`)});break}},C=K=>K!=null&&K.trim()!=="",S=K=>K!=null,E=async()=>{V();const{document:K,name:B,email:R,phone:O,campana:W,leadStatus:q}=ha.clientSerch,N=[];if(C(K)&&N.push(`cedula eq "${K.trim()}"`),C(B)&&N.push(`(nombre lk "${B.trim()}" or apellido1 lk "${B.trim()}" or apellido2 lk "${B.trim()}")`),C(R)&&N.push(`email eq "${R.trim()}"`),C(O)&&N.push(`(tel1 lk "${O.trim()}" or tel2 lk "${O.trim()}" or tel3 lk "${O.trim()}" or tel4 lk "${O.trim()}" or tel5 lk "${O.trim()}" or tel6 lk "${O.trim()}")`),S(W)&&N.push(`campaign_id eq "${W}"`),S(q)&&N.push(`lead_status_id eq "${q}"`),!s.value.includes("admin")){s.value.includes("leads_view_all")||N.push(`assign_to eq "${v.value}"`);const ue=p.value.map(ee=>`campaign_id eq "${ee}"`).join(" or ");N.push(`(${ue})`)}const j=N.join(" and "),te=["id","xid","cedula","nombre","apellido1","apellido2","email","tel1","tel2","tel3","tel4","tel5","tel6","provincia","canton","distrito","hijos","fechaNacimiento","edad","nacionalidad","nombreBase","tarjeta","estadoCivil_id","campaign_id","lead_status_id","assign_to","time_taken","campaign{id,xid,name,status,detail_fields,remaining_leads,total_leads,started_on,completed_on}","estadoCivil{id,xid,name,type}","leadStatus{id,xid,name,type}","assignTo{id,xid,name}"].join(","),le=`leads?fields=${encodeURIComponent(te)}&started[]=${encodeURIComponent("started")}&started[]=${encodeURIComponent("not_started")}&filters=${encodeURIComponent(j)}&limit=1000`;try{const{data:ue}=await axiosAdmin.get(le);A(ue)}catch(ue){console.error("Error al buscar leads con expansiones:",ue)}},A=K=>{K.length>=1?(da.data=K,da.pagination.total=K.length,da.selectedRowKeys=[]):(da.data=[],da.pagination.total=0,da.selectedRowKeys=[],k("info","information","not_found"))},$=K=>{da.pagination.current=K.current,da.pagination.pageSize=K.pageSize},P=()=>{ha.clientSerch.campana=null,ha.clientSerch.leadStatus=null,ha.clientSerch.document="",ha.clientSerch.name="",ha.clientSerch.email="",ha.clientSerch.phone="",da.data=[],da.pagination.total=0,da.selectedRowKeys=[],V()},T=K=>{Object.keys(Qe.client).forEach(B=>{K[B]!==void 0&&(Qe.client[B]=K[B])}),Qe.client.isNew=!1,Qe.client.toManage=!0,_.reset(Qe.client.time_taken,!1)};function F(){const K=Qe.client.fechaNacimiento;if(!K)return null;const B=ia(),R=ia(K);let O=B.year()-R.year();(B.month()<R.month()||B.month()===R.month()&&B.date()<R.date())&&O--,Qe.client.edad=O}const V=()=>{Object.assign(Qe.client,vn()),_.reset(Qe.client.time_taken,!1)},z=async()=>{Qe.client.toManage=!1,Qe.client.managing=!0,_.reset(Qe.client.time_taken,!0),yl.value="lead_details"};return he(()=>Qe.client.provincia,K=>{K?f.value=Array.from(new Set(h.value.filter(B=>B.provincia===K).map(B=>B.canton))):(Qe.client.canton=null,Qe.client.distrito=null,f.value=[],w.value=[]),w.value=[]},{immediate:!0}),he(()=>Qe.client.canton,K=>{K?w.value=h.value.filter(B=>B.provincia===Qe.client.provincia&&B.canton===K).map(B=>B.distrito):(w.value=[],Qe.client.distrito=null)},{immediate:!0}),{timer:_,tableClienteSerch:da,crmState:Qe,crmSerch:ha,serchInformationClient:E,fetchUserCampaigns:y,fetchLeadStatus:r,onClientSelected:T,calcularEdad:F,fetchLocalidades:u,fetchAgenteCampanas:m,clearClientSelection:V,provinceOptions:g,cantonOptions:f,districtOptions:w,activeKey:yl,clientToManage:z,clearSerchInformation:P,handleClientSerchTableChange:$}};const Kp={components:{SaveOutlined:$e,DoubleRightOutlined:ya,ArrowRightOutlined:so,ArrowLeftOutlined:io,ScheduleOutlined:lt,FileTextOutlined:Ua,PhoneOutlined:st,ShoppingCartOutlined:Ra,ExclamationCircleOutlined:De,CheckOutlined:Ga,DeliveredProcedureOutlined:ro,MailOutlined:dt,MobileOutlined:tt,StepBackwardOutlined:uo,ClockCircleOutlined:At,SearchOutlined:Ut,StepForwardOutlined:mo,MessageOutlined:co,IeOutlined:Fl,BookingModal:ec,LeadLogTable:Bt,LeadNotesTable:mn,LogTimeline:yc,SkipLeadModal:Hc,SendMail:lp,SendMessage:Sp,Sidebar:Dp,SendCall:Op,SearchLead:Fp,PlusOutlined:de},setup(){const{columns:e}=Rp(),{formatDateTime:s,rightSidebarValue:_,themeMode:n,permsArray:v}=Z(),{addEditRequestAdmin:y,loading:r,rules:u}=pe(),m=et(),p=na(),h=Ke(),g=I({}),f=I({}),w=I("lead_details"),k=I({}),{t:C}=x(),S=I(""),E=I({}),A=I(0),$=I(!0),P=I(!1),T=I(!1),F=I(!1),V=I(!1),z=I(!1),K=I([]),B=I([]),R=I(void 0),O=I(void 0),W=I(void 0),{timer:q,crmSerch:N,crmState:j,tableClienteSerch:te,serchInformationClient:le,clearSerchInformation:ue,fetchUserCampaigns:ee,fetchLeadStatus:ve,fetchLeadMaritalStatus:X,onClientSelected:oe,calcularEdad:se,fetchLocalidades:H,fetchAgenteCampanas:ae,clearClientSelection:ce,provinceOptions:Ae,cantonOptions:Be,districtOptions:Ie,activeKey:Je,clientToManage:xe,handleClientSerchTableChange:fe}=Vp(),Re=()=>{Je.value="lead_notes"};function Ze(){xe(),ca(j.client.xid)}const Ca=_e({get(){const ge=j.client.lead_status;return(ge==null?void 0:ge.id)!=null?ge.id:null},set(ge){if(!j.client.lead_status){j.client.lead_status={id:ge};return}ge&&typeof ge=="object"?j.client.lead_status=ge:j.client.lead_status.id=ge}}),ma=_e({get(){const ge=j.client.estado_civil;return(ge==null?void 0:ge.id)!=null?ge.id:null},set(ge){if(!j.client.estado_civil){j.client.estado_civil={id:ge};return}ge&&typeof ge=="object"?j.client.estado_civil=ge:j.client.estado_civil.id=ge}});ie(async()=>{B.value=await ee()||[],K.value=await ve()||[],H(),ae(),m.params.id&&ca(m.params.id)}),it(()=>{Je.value="lead_details",j.client.managing&&qe("save"),ue()});const wa=()=>{h.commit("auth/updateRightSidebarValue",!_.value)},ca=ge=>{const He=ge;if(He){const Ka=`leads/${He}?fields=id,xid,cedula,nombre,apellido1,apellido2,email,tel1,tel2,tel3,tel4,tel5,tel6,provincia,canton,distrito,hijos,fechaNacimiento,tarjeta,nombreBase,edad,nacionalidad,started,time_taken,last_action_by,x_last_action_by,lastActioner{id,xid,name},campaign_id,x_campaign_id,campaign{id,xid,name,last_action_by,x_last_action_by,completed_by,x_completed_by,started_on,completed_on,upcoming_lead_action},campaign:lastActioner{id,xid,name},campaign:completedBy{id,xid,name},leadFollowUp{id,xid,log_type,user_id,x_user_id,date_time,notes},leadFollowUp:user{id,xid,name},leadStatus{id,xid,name,type},estadoCivil{id,xid,name,type},'assignTo{id,xid,name}'`;g.value={},f.value={},Je.value="lead_details",w.value="lead_details",k.value={},E.value={},S.value="",R.value=void 0,A.value=0,$.value=!0;const Mn=axiosAdmin.get(Ka),Fn=axiosAdmin.get(`leads/create-call-log/${He}`);Promise.all([Mn,Fn]).then(([Rn,zt])=>{A.value=zt.data.lead_number,m.params.id&&(oe(Rn.data),xe()),j.client.call_log=zt.data.call_log,$.value=!1,P.value=!1})}},J=()=>{var ge=q.minutes.value*60,He=q.hours.value*60*60,ea=q.days.value*24*60*60;return q.seconds.value+ge+He+ea},re=()=>{V.value=!0,Ne.confirm({title:C("common.are_you_sure")+"?",icon:l(De),content:C("lead.are_you_want_go_to_save_exit"),centered:!0,okText:C("common.yes"),okType:"danger",cancelText:C("common.no"),onOk(){qe("save_exit")},onCancel(){V.value=!1}})},qe=(ge="auto")=>{ge=="save"?F.value=!0:ge=="save_exit"&&(V.value=!0),y({url:"campaigns/update-actioned-lead",data:{...j.client,call_log_id:j.client.call_log.xid,call_time:J(),x_lead_id:j.client.xid},success:He=>{T.value=!0,F.value=!1,ge=="save_exit"?(V.value=!1,p.push({name:"admin.leads.index"})):(j.client.managing=!1,q.reset(j.client.time_taken,!1))}})},Q=ge=>{var He="";ge=="next"?He=C("lead.are_you_want_go_to_next_lead"):ge=="previous"&&(He=C("lead.are_you_want_go_to_previous_lead")),Ne.confirm({title:C("common.are_you_sure")+"?",icon:l(De),content:He,centered:!0,okText:C("common.yes"),okType:"danger",cancelText:C("common.no"),onOk(){Te(ge)},onCancel(){}})},me=()=>{z.value=!1,Te("skip-next")},Te=ge=>{var He=ge=="skip-next"?"next":ge;y({url:"campaigns/take-lead-action",data:{...k.value,reference_number:S.value,call_log_id:f.value.xid,call_time:J(),action_type:He,x_lead_id:m.params.id},success:ea=>{ea&&ea.lead&&ea.lead.xid?(Ve.success({message:C("common.success"),description:C(`lead.you_are_on_${He}_lead`),placement:"bottomRight"}),p.push({name:"admin.call_manager.take_action",params:{id:ea.lead.xid}})):Ne.confirm({title:C("lead.no_lead_exists")+"?",icon:l(De),content:C("lead.no_lead_exist_message"),centered:!0,okText:C("campaign.save_exit"),okType:"danger",cancelText:C("common.continue"),onOk(){qe("save_exit")},onCancel(){qe("save")}})}})},We=ge=>{z.value=!1,ge&&ge.xid?p.push({name:"admin.call_manager.take_action",params:{id:ge.xid}}):p.push({name:"admin.call_manager.index"})},Ye=ge=>{var He="text";if(g.value.campaign&&g.value.campaign.form&&g.value.campaign.form.form_fields&&g.value.campaign.form.form_fields.length>0){var ea=ba(g.value.campaign.form.form_fields,{name:ge});ea&&ea.type&&(He=ea.type)}return He},Ge=()=>{z.value=!0};return he(q.seconds,(ge,He)=>{const ea=q.seconds.value+q.minutes.value*60+q.hours.value*3600+q.days.value*86400;j.client.time_taken=ea,q.seconds.value%5}),he(m,(ge,He)=>{ge.params.id!=null&&ca()}),he(T,(ge,He)=>{ge&&setTimeout(()=>T.value=!1,3e3)}),he(()=>j.client.xid,ge=>{ge?(P.value=!0,$.value=!1):(P.value=!1,$.value=!0)}),{columns:e,timer:q,crmSerch:N,crmState:j,tableClienteSerch:te,serchInformationClient:le,clearSerchInformation:ue,allAgentCamps:B,onClientSelected:oe,calcularEdad:se,clearClientSelection:ce,provinceOptions:Ae,cantonOptions:Be,districtOptions:Ie,clientToManage:xe,leadStatusModel:Ca,maritalStatusModel:ma,addNote:Re,handleClientToManage:Ze,handleClientSerchTableChange:fe,permsArray:v,themeMode:n,activeLeftPanelKey:w,leadDetails:g,activeKey:Je,leadFormData:k,referenceNumber:S,leadFollowUp:E,loading:r,rules:u,formatDateTime:s,timer:q,leadNumber:A,newPageLoad:$,takeLeadAction:Q,refreshTimeLine:P,saveAndExit:re,saveLead:qe,saveExitLoading:V,saveLoading:F,autoSaved:T,skipLead:Ge,showSkipModal:z,skipDeleteSuccess:We,skipSuccess:me,getLeadDataFieldType:Ye,allLeadStatus:K,leadStatusId:R,openRightSidebar:wa,rightSidebarValue:_,route:m,uPhoneCampaignsLists:O,uPhoneEmailCampaignsLists:W,fetchInitData:ca}}},zp={class:"callmanager-left-sidebar"},Np=["href"],jp={style:{width:"50%"}},Hp={style:{width:"50%"}},Wp={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},Yp={class:"table-responsive"};function Gp(e,s,_,n,v,y){const r=o("ClockCircleOutlined"),u=o("a-typography-title"),m=o("a-col"),p=o("a-row"),h=o("a-divider"),g=o("a-card"),f=o("a-typography-text"),w=o("a-collapse-panel"),k=o("a-skeleton"),C=o("LogTimeline"),S=o("a-collapse"),E=o("perfect-scrollbar"),A=o("FileTextOutlined"),$=o("a-input"),P=o("a-input-group"),T=o("a-form-item"),F=o("a-select-option"),V=o("a-select"),z=o("a-input-number"),K=o("a-date-picker"),B=o("a-form"),R=o("SaveOutlined"),O=o("a-button"),W=o("DeliveredProcedureOutlined"),q=o("PlusOutlined"),N=o("a-space"),j=o("CheckOutlined"),te=o("a-tab-pane"),le=o("SearchOutlined"),ue=o("a-table"),ee=o("PhoneOutlined"),ve=o("LeadLogTable"),X=o("LeadNotesTable"),oe=o("a-tabs"),se=o("a-layout");return d(),b(se,{style:we(n.themeMode=="dark"?{background:"#141414",height:"100vh"}:{height:"100vh"})},{default:a(()=>[l(p,null,{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:6,xl:6,class:"bg-setting-sidebar",style:we(n.themeMode=="dark"?{background:"#141414 !important"}:{background:"#fff !important"})},{default:a(()=>[M("div",zp,[l(g,{bordered:!1,bodyStyle:{paddingBottom:"0px"}},{default:a(()=>[l(p,null,{default:a(()=>[l(m,{span:24,class:"text-center"},{default:a(()=>[l(u,{level:2},{default:a(()=>[l(r),c(" "+i(n.timer.hours.value<10?`0${n.timer.hours.value}`:n.timer.hours)+":"+i(n.timer.minutes.value<10?`0${n.timer.minutes.value}`:n.timer.minutes)+":"+i(n.timer.seconds.value<10?`0${n.timer.seconds.value}`:n.timer.seconds),1)]),_:1})]),_:1})]),_:1}),l(h)]),_:1}),l(E,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l(S,{activeKey:n.activeLeftPanelKey,"onUpdate:activeKey":s[1]||(s[1]=H=>n.activeLeftPanelKey=H),bordered:!1},{default:a(()=>[l(w,{key:"campaign_details",style:we({background:n.themeMode=="dark"?"#141414":"#fff"})},{header:a(()=>[l(u,{level:5},{default:a(()=>[c(i(e.$t("campaign.campaign_details")+" : "+n.crmState.client.campaign.name),1)]),_:1})]),default:a(()=>[(d(!0),U(L,null,G(n.crmState.client.campaign.detail_fields,(H,ae)=>(d(),b(p,{key:H.id,gutter:16,class:Ol({"mt-25":ae>0})},{default:a(()=>[l(m,{span:24},{default:a(()=>[l(f,{strong:""},{default:a(()=>[c(i(H.field_name),1)]),_:2},1024)]),_:2},1024),l(m,{span:24,class:"mt-5"},{default:a(()=>[H.field_type!="link"?(d(),b(f,{key:0},{default:a(()=>[c(i(H.field_value),1)]),_:2},1024)):(d(),b(f,{key:1},{default:a(()=>[M("a",{href:H.field_value,target:"_blank",rel:"noopener noreferrer"},i(H.field_value),9,Np)]),_:2},1024))]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1},8,["style"]),l(g,{bordered:!0,class:"callmanager-right-sidebar",bodyStyle:{padding:"15px"}},{title:a(()=>[l(u,{level:5,type:"success",strong:""},{default:a(()=>[c(i(e.$t("lead.lead_history")),1)]),_:1})]),default:a(()=>[n.newPageLoad?(d(),b(k,{key:0,active:""})):(d(),b(C,{key:n.crmState.client.xid,leadId:n.crmState.client.xid,refresh:n.refreshTimeLine,onDataFetched:s[0]||(s[0]=()=>n.refreshTimeLine=!1)},null,8,["leadId","refresh"]))]),_:1})]),_:1},8,["activeKey"])]),_:1})])]),_:1},8,["style"]),l(m,{xs:24,sm:24,md:24,lg:18,xl:18},{default:a(()=>[l(g,{class:"callmanager-middle-sidebar"},{default:a(()=>[l(oe,{activeKey:n.activeKey,"onUpdate:activeKey":s[30]||(s[30]=H=>n.activeKey=H)},{default:a(()=>[l(te,{key:"lead_details"},{tab:a(()=>[M("span",null,[l(A),c(" "+i(e.$t("lead.mfisico")),1)])]),default:a(()=>[l(E,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l(B,{layout:"vertical",class:"mt-10"},{default:a(()=>[l(p,{gutter:10},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.document"),name:"cedula",help:n.rules.cedula?n.rules.cedula.message:null,validateStatus:n.rules.cedula?"error":"",class:"required"},{default:a(()=>[l(P,{compact:""},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.cedula,"onUpdate:value":s[2]||(s[2]=H=>n.crmState.client.cedula=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.document")])},null,8,["disabled","value","placeholder"])]),_:1})]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.lead_status"),name:"lead_status",help:n.rules.lead_status?n.rules.lead_status.message:null,validateStatus:n.rules.lead_status?"error":null},{default:a(()=>[l(V,{value:n.leadStatusModel,"onUpdate:value":s[3]||(s[3]=H=>n.leadStatusModel=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_status")])},{default:a(()=>[(d(!0),U(L,null,G(n.allLeadStatus.filter(H=>H.type==="lead_status"),H=>(d(),b(F,{key:H.id,value:H.id,title:H.name},{default:a(()=>[c(i(H.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.nombre,"onUpdate:value":s[4]||(s[4]=H=>n.crmState.client.nombre=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.name")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.first_last_name"),name:"first_last_name",help:n.rules.first_last_name?n.rules.first_last_name.message:null,validateStatus:n.rules.first_last_name?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.apellido1,"onUpdate:value":s[5]||(s[5]=H=>n.crmState.client.apellido1=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.first_last_name")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.second_last_name"),name:"second_last_name",help:n.rules.second_last_name?n.rules.second_last_name.message:null,validateStatus:n.rules.second_last_name?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.apellido2,"onUpdate:value":s[6]||(s[6]=H=>n.crmState.client.apellido2=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.second_last_name")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.marital_status"),name:"marital_status",help:n.rules.marital_status?n.rules.marital_status.message:null,validateStatus:n.rules.marital_status?"error":null},{default:a(()=>[l(V,{value:n.maritalStatusModel,"onUpdate:value":s[7]||(s[7]=H=>n.maritalStatusModel=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.marital_status")])},{default:a(()=>[(d(!0),U(L,null,G(n.allLeadStatus.filter(H=>H.type==="marital_status"),H=>(d(),b(F,{key:H.xid,value:H.id,title:H.name},{default:a(()=>[c(i(H.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.children"),name:"children",help:n.rules.children?n.rules.children.message:null,validateStatus:n.rules.children?"error":null},{default:a(()=>[l(z,{value:n.crmState.client.hijos,"onUpdate:value":s[8]||(s[8]=H=>n.crmState.client.hijos=H),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12,style:{display:"flex",gap:"16px"}},{default:a(()=>[M("div",jp,[l(T,{label:e.$t("lead.date_birth"),name:"date_birth",help:n.rules.date_birth?n.rules.date_birth.message:null,validateStatus:n.rules.date_birth?"error":null},{default:a(()=>[l(K,{format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:n.calcularEdad,value:n.crmState.client.fechaNacimiento,"onUpdate:value":s[9]||(s[9]=H=>n.crmState.client.fechaNacimiento=H),style:{width:"100%"}},null,8,["onChange","value"])]),_:1},8,["label","help","validateStatus"])]),M("div",Hp,[l(T,{label:e.$t("lead.age"),name:"age",help:n.rules.age?n.rules.age.message:null,validateStatus:n.rules.age?"error":null,style:{"margin-left":"auto"}},{default:a(()=>[l(z,{value:n.crmState.client.edad,"onUpdate:value":s[10]||(s[10]=H=>n.crmState.client.edad=H),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label","help","validateStatus"])])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.nationality"),name:"nationality",help:n.rules.nationality?n.rules.nationality.message:null,validateStatus:n.rules.nationality?"error":null},{default:a(()=>[l($,{value:n.crmState.client.nacionalidad,"onUpdate:value":s[11]||(s[11]=H=>n.crmState.client.nacionalidad=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.nationality")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:`${e.$t("lead.phone")} 1`,name:"tel1",help:n.rules.phone1?n.rules.phone1.message:null,validateStatus:n.rules.phone1?"error":null,class:"required"},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.tel1,"onUpdate:value":s[12]||(s[12]=H=>n.crmState.client.tel1=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:`${e.$t("lead.phone")} 2`,name:"phone2",help:n.rules.phone2?n.rules.phone2.message:null,validateStatus:n.rules.phone2?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.tel2,"onUpdate:value":s[13]||(s[13]=H=>n.crmState.client.tel2=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:`${e.$t("lead.phone")} 3`,name:"phone3",help:n.rules.phone3?n.rules.phone3.message:null,validateStatus:n.rules.phone3?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.tel3,"onUpdate:value":s[14]||(s[14]=H=>n.crmState.client.tel3=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:`${e.$t("lead.phone")} 4`,name:"phone4",help:n.rules.phone4?n.rules.phone4.message:null,validateStatus:n.rules.phone4?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.tel4,"onUpdate:value":s[15]||(s[15]=H=>n.crmState.client.tel4=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:`${e.$t("lead.phone")} 5`,name:"phone5",help:n.rules.phone5?n.rules.phone5.message:null,validateStatus:n.rules.phone5?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.tel5,"onUpdate:value":s[16]||(s[16]=H=>n.crmState.client.tel5=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:`${e.$t("lead.phone")} 6`,name:"phone6",help:n.rules.phone6?n.rules.phone6.message:null,validateStatus:n.rules.phone6?"error":null},{default:a(()=>[l($,{disabled:!n.permsArray.includes("admin"),value:n.crmState.client.tel6,"onUpdate:value":s[17]||(s[17]=H=>n.crmState.client.tel6=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["disabled","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(T,{label:e.$t("lead.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null},{default:a(()=>[l($,{value:n.crmState.client.email,"onUpdate:value":s[18]||(s[18]=H=>n.crmState.client.email=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xxl:24,xl:24,xs:24,style:{display:"flex"}},{default:a(()=>[l(m,{xxl:8,xs:8,sm:8,md:8,lg:8},{default:a(()=>[l(T,{label:e.$t("lead.province")},{default:a(()=>[l(V,{value:n.crmState.client.provincia,"onUpdate:value":s[19]||(s[19]=H=>n.crmState.client.provincia=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.province")])},{default:a(()=>[(d(!0),U(L,null,G(n.provinceOptions,H=>(d(),b(F,{key:H,value:H,title:H},{default:a(()=>[c(i(H),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(m,{xxl:8,xs:8,sm:8,md:8,lg:8},{default:a(()=>[l(T,{label:e.$t("lead.canton")},{default:a(()=>[l(V,{value:n.crmState.client.canton,"onUpdate:value":s[20]||(s[20]=H=>n.crmState.client.canton=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.canton")]),disabled:!n.crmState.client.provincia},{default:a(()=>[(d(!0),U(L,null,G(n.cantonOptions,H=>(d(),b(F,{key:H,value:H,title:H},{default:a(()=>[c(i(H),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),l(m,{xxl:8,xs:8,sm:8,md:8,lg:8},{default:a(()=>[l(T,{label:e.$t("lead.district")},{default:a(()=>[l(V,{value:n.crmState.client.distrito,"onUpdate:value":s[21]||(s[21]=H=>n.crmState.client.distrito=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.district")]),disabled:!n.crmState.client.canton||!n.crmState.client.provincia},{default:a(()=>[(d(!0),U(L,null,G(n.districtOptions,H=>(d(),b(F,{key:H,value:H,title:H},{default:a(()=>[c(i(H),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),M("div",{style:we({textAlign:"center",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px",background:n.themeMode=="dark"?"#141414":"#fff",zIndex:1})},[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:20,lg:20},{default:a(()=>[l(N,null,{default:a(()=>[l(O,{type:"primary",loading:n.saveLoading,onClick:s[22]||(s[22]=H=>n.saveLead("save")),disabled:n.crmState.client.managing===!1},{icon:a(()=>[l(R)]),default:a(()=>[c(" "+i(e.$t("common.save")),1)]),_:1},8,["loading","disabled"]),l(O,{type:"primary",loading:n.saveExitLoading,onClick:n.saveAndExit,disabled:n.crmState.client.managing===!1},{icon:a(()=>[l(W)]),default:a(()=>[c(" "+i(e.$t("campaign.save_exit")),1)]),_:1},8,["loading","onClick","disabled"]),l(O,{type:"primary",onClick:n.addNote,disabled:n.crmState.client.managing===!1},{icon:a(()=>[l(q)]),default:a(()=>[c(" "+i(e.$t("notes.add")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[n.autoSaved?(d(),b(O,{key:0,type:"text",style:{background:"transparent",borderColor:"transparent"}},{default:a(()=>[l(f,{type:"secondary"},{default:a(()=>[l(j),c(" "+i(e.$t("lead.auto_save")),1)]),_:1})]),_:1})):D("",!0)]),_:1})]),_:1})],4)]),_:1}),l(te,{key:"search_lead"},{tab:a(()=>[M("span",null,[l(le),c(" "+i(e.$t("menu.search_lead")),1)])]),default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:10,lg:10},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(T,{label:e.$t("lead.document"),name:"txtInfoClient_document",help:n.rules.document?n.rules.document.message:null,validateStatus:n.rules.document?"error":null},{default:a(()=>[l($,{value:n.crmSerch.clientSerch.document,"onUpdate:value":s[23]||(s[23]=H=>n.crmSerch.clientSerch.document=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.document")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(T,{label:e.$t("lead.name"),name:"txtInfoClient_name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null},{default:a(()=>[l($,{value:n.crmSerch.clientSerch.name,"onUpdate:value":s[24]||(s[24]=H=>n.crmSerch.clientSerch.name=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(T,{label:e.$t("lead.proyect"),name:"proyect",help:n.rules.proyect?n.rules.proyect.message:null,validateStatus:n.rules.proyect?"error":null},{default:a(()=>[l(V,{value:n.crmSerch.clientSerch.campana,"onUpdate:value":s[25]||(s[25]=H=>n.crmSerch.clientSerch.campana=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.proyect")])},{default:a(()=>[(d(!0),U(L,null,G(n.allAgentCamps,H=>(d(),b(F,{key:H.xid,value:H.id,title:H.name},{default:a(()=>[c(i(H.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:10,lg:10},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(T,{label:e.$t("lead.email"),name:"txtInfoClient_email",help:n.rules.mail?n.rules.mail.message:null,validateStatus:n.rules.mail?"error":null},{default:a(()=>[l($,{value:n.crmSerch.clientSerch.email,"onUpdate:value":s[26]||(s[26]=H=>n.crmSerch.clientSerch.email=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(T,{label:e.$t("lead.phone"),name:"txtInfoClient_phone"},{default:a(()=>[l($,{style:{flex:"1","margin-right":"8px"},value:n.crmSerch.clientSerch.phone,"onUpdate:value":s[27]||(s[27]=H=>n.crmSerch.clientSerch.phone=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.phone")])},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(T,{label:e.$t("lead.lead_status"),name:"lead_status",help:n.rules.lead_status?n.rules.lead_status.message:null,validateStatus:n.rules.lead_status?"error":null},{default:a(()=>[l(V,{value:n.crmSerch.clientSerch.leadStatus,"onUpdate:value":s[28]||(s[28]=H=>n.crmSerch.clientSerch.leadStatus=H),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_status")])},{default:a(()=>[(d(!0),U(L,null,G(n.allLeadStatus.filter(H=>H.type==="lead_status"),H=>(d(),b(F,{key:H.xid,value:H.id,title:H.name},{default:a(()=>[c(i(H.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[M("div",Wp,[l(O,{onClick:n.serchInformationClient,disabled:n.crmState.client.managing===!0,type:"primary",style:{"min-width":"130px"}},{default:a(()=>[c(i(e.$t("common.search")),1)]),_:1},8,["onClick","disabled"]),l(O,{onClick:n.clearSerchInformation,disabled:n.crmState.client.managing===!0,type:"primary",style:{"margin-top":"10px","min-width":"130px"}},{default:a(()=>[c(i(e.$t("common.clear")),1)]),_:1},8,["onClick","disabled"]),l(O,{onClick:n.handleClientToManage,disabled:n.crmState.client.toManage===!1,type:"primary",style:{"margin-top":"10px","min-width":"130px"}},{default:a(()=>[c(i(e.$t("common.management")),1)]),_:1},8,["onClick","disabled"])])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24,class:"mt-10"},{default:a(()=>[l(m,{span:24},{default:a(()=>[M("div",Yp,[l(ue,{"row-key":H=>H.id,"row-selection":{selectedRowKeys:n.tableClienteSerch.selectedRowKeys,onSelect:H=>{n.tableClienteSerch.selectedRowKeys.includes(H.id)?(n.tableClienteSerch.selectedRowKeys=[],n.clearClientSelection()):(n.tableClienteSerch.selectedRowKeys=[H.id],n.onClientSelected(H))},hideSelectAll:!0,getCheckboxProps:H=>({disabled:!1,name:String(H.id)})},columns:n.columns,"data-source":n.tableClienteSerch.data,pagination:n.tableClienteSerch.pagination,loading:n.tableClienteSerch.loading,onChange:n.handleClientSerchTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:H,record:ae})=>[H.dataIndex==="assign_to"?(d(),U(L,{key:0},[c(i(ae.assign_to&&ae.assign_to.name?ae.assign_to.name:""),1)],64)):D("",!0)]),_:1},8,["row-key","row-selection","columns","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(te,{key:"call_logs",disabled:n.crmState.client.toManage===!1},{tab:a(()=>[M("span",null,[l(ee),c(" "+i(e.$t("menu.call_logs")),1)])]),default:a(()=>[l(ve,{key:"lead_logs",pageName:"lead_action",logType:"call_log",leadId:n.crmState.client.xid,showTableSearch:!1,showLeadDetails:!1,showAction:!1,scrollStyle:{y:"calc(100vh - 320px)"}},null,8,["leadId","scrollStyle"])]),_:1},8,["disabled"]),l(te,{key:"lead_notes",disabled:n.crmState.client.toManage===!1},{tab:a(()=>[M("span",null,[l(A),c(" "+i(e.$t("menu.correspondence")),1)])]),default:a(()=>[l(X,{pageName:"lead_action",leadId:n.crmState.client.xid,leadInfo:n.crmState.client,managing:n.crmState.client.managing,scrollStyle:{y:"calc(100vh - 320px)"},onSuccess:s[29]||(s[29]=()=>n.refreshTimeLine=!0),showAddButton:!(n.leadDetails&&n.leadDetails.campaign&&n.leadDetails.campaign.status=="completed")},null,8,["leadId","leadInfo","managing","scrollStyle","showAddButton"])]),_:1},8,["disabled"])]),_:1},8,["activeKey"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])}const Jp=Y(Kp,[["render",Gp],["__scopeId","data-v-3987568f"]]),Qp=[{path:"/admin/formsUCB/Correspondencia/:id?",component:Jp,name:"admin.formsUCB.Correspondencia",props:!0,meta:{requireAuth:!0,menuParent:"formsUCB",menuKey:"Correspondencia",permission:"formsUCB_view"}},{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/call-manager",component:Ym,name:"admin.call_manager.index",meta:{requireAuth:!0,menuParent:"call_manager",menuKey:"call_manager"}},{path:"/admin/campaigns",component:Rm,name:"admin.campaigns.index",meta:{requireAuth:!0,menuParent:"campaigns",menuKey:"campaigns",permission:"campaigns_view"}}]}],bn=()=>{const e="expense-categories",{t:s}=x(),_={name:"",description:""},n=[{title:s("expense_category.id"),dataIndex:"id"},{title:s("expense_category.name"),dataIndex:"name"},{title:s("expense_category.description"),dataIndex:"description"},{title:s("common.action"),dataIndex:"action"}],v=[{key:"name",value:s("common.name")}];return{addEditUrl:e,initData:_,columns:n,filterableColumns:v}},Xp=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Zp(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-textarea"),g=o("a-form"),f=o("SaveOutlined"),w=o("a-button"),k=o("a-modal");return d(),b(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(w,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(f)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(w,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("expense_category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("expense_category.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[l(h,{value:e.formData.description,"onUpdate:value":s[1]||(s[1]=C=>e.formData.description=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const yn=Y(Xp,[["render",Zp]]),xp={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:yn,AdminPageHeader:Ce},setup(){const{addEditUrl:e,initData:s,columns:_,filterableColumns:n}=bn(),v=Fe(),{permsArray:y}=Z();return ie(()=>{v.tableUrl.value={url:"expense-categories?fields=id,xid,name,description"},v.table.filterableColumns=n,v.fetch({page:1}),v.crudUrl.value=e,v.langKey.value="expense_category",v.initData.value={...s},v.formData.value={...s}}),{columns:_,...v,filterableColumns:n,permsArray:y}}},e_={class:"table-responsive"};function a_(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("EditOutlined"),z=o("a-table"),K=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.expense_categories"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.expense_manager")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.expense_categories")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("expense_categories_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("expense_category.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("expense_categories_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=B=>e.table.searchColumn=B),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,B=>(d(),b(S,{key:B.key},{default:a(()=>[c(i(B.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=B=>e.table.searchString=B),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",e_,[l(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:B=>({disabled:!1,name:B.xid})},columns:n.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:B,record:R})=>[B.dataIndex==="action"?(d(),U(L,{key:0},[n.permsArray.includes("expense_categories_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:O=>e.editItem(R),style:{"margin-left":"4px"}},{icon:a(()=>[l(V)]),_:2},1032,["onClick"])):D("",!0),n.permsArray.includes("expense_categories_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:1,type:"primary",onClick:O=>e.showDeleteConfirm(R.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const t_=Y(xp,[["render",a_]]),l_=ne({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:yn},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=bn(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),n_={key:0};function o_(e,s,_,n,v,y){const r=o("a-menu-item"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),h=o("AddEdit");return e.permsArray.includes("expense_categories_create")||e.permsArray.includes("admin")?(d(),U("div",n_,[e.customType=="menu"?(d(),b(r,{onClick:e.showAdd,key:"expense_categories"},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick"])):(d(),U(L,{key:1},[e.tooltip?(d(),b(p,{key:0,placement:"topLeft",title:e.$t("expense_category.add"),"arrow-point-at-center":""},{default:a(()=>[l(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),l(h,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("expense_category.add"),successMessage:e.$t("expense_category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const s_=Y(l_,[["render",o_]]);const d_=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,UserInfo:xl,ExpenseCategoryAddButton:s_,StaffAddButton:mt,UploadFile:ut},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y=I({}),{appSetting:r,disabledDate:u,permsArray:m}=Z(),p=I({}),h="expense-categories?limit=10000",g="users?limit=10000";ie(()=>{const S=axiosAdmin.get(h),E=axiosAdmin.get(g);Promise.all([S,E]).then(([A,$])=>{p.value=A.data,y.value=$.data})});const f=()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:S=>{s("addEditSuccess",S.xid)}})},w=()=>{v.value={},s("closed")},k=()=>{axiosAdmin.get(h).then(S=>{p.value=S.data})},C=()=>{axiosAdmin.get(g).then(S=>{y.value=S.data})};return{loading:n,rules:v,onClose:w,onSubmit:f,disabledDate:u,permsArray:m,expenseCategories:p,staffMembers:y,drawerWidth:window.innerWidth<=991?"90%":"45%",appSetting:r,expenseCategoryAdded:k,staffMemberAdded:C}}}),i_={style:{display:"flex"}},r_={style:{display:"flex"}};function u_(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("ExpenseCategoryAddButton"),p=o("a-form-item"),h=o("a-col"),g=o("StaffAddButton"),f=o("a-row"),w=o("a-date-picker"),k=o("a-input-number"),C=o("UploadFile"),S=o("a-textarea"),E=o("a-form"),A=o("a-button"),$=o("a-drawer");return d(),b($,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(A,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{default:a(()=>[c(i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(A,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(E,{layout:"vertical"},{default:a(()=>[l(f,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:a(()=>[l(p,{label:e.$t("expense.expense_category"),name:"expense_category_id",help:e.rules.expense_category_id?e.rules.expense_category_id.message:null,validateStatus:e.rules.expense_category_id?"error":null,class:"required"},{default:a(()=>[M("span",i_,[l(u,{value:e.formData.expense_category_id,"onUpdate:value":s[0]||(s[0]=P=>e.formData.expense_category_id=P),placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(e.expenseCategories,P=>(d(),b(r,{key:P.xid,value:P.xid,label:P.name},{default:a(()=>[c(i(P.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),l(m,{onOnAddSuccess:e.expenseCategoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.permsArray.includes("admin")?(d(),b(h,{key:0,xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:a(()=>[l(p,{label:e.$t("expense.created_by_user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null},{default:a(()=>[M("span",r_,[l(u,{value:e.formData.user_id,"onUpdate:value":s[1]||(s[1]=P=>e.formData.user_id=P),placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(e.staffMembers,P=>(d(),b(r,{key:P.xid,value:P.xid,label:P.name},{default:a(()=>[c(i(P.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),l(g,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"])):D("",!0)]),_:1}),l(f,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("expense.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.date,"onUpdate:value":s[2]||(s[2]=P=>e.formData.date=P),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD","disabled-date":e.disabledDate,style:{width:"100%"}},null,8,["value","format","disabled-date"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("expense.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[l(k,{value:e.formData.amount,"onUpdate:value":s[3]||(s[3]=P=>e.formData.amount=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.amount")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[c(i(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{label:e.$t("expense.bill"),name:"bill",help:e.rules.bill?e.rules.bill.message:null,validateStatus:e.rules.bill?"error":null},{default:a(()=>[l(C,{acceptFormat:"image/*,.pdf",formData:e.formData,folder:"expenses",uploadField:"bill",onOnFileUploaded:s[4]||(s[4]=P=>{e.formData.bill=P.file,e.formData.bill_url=P.file_url})},null,8,["acceptFormat","formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,{label:e.$t("expense.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[l(S,{value:e.formData.notes,"onUpdate:value":s[5]||(s[5]=P=>e.formData.notes=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const m_=Y(d_,[["render",u_]]),c_=()=>{const{t:e}=x(),s="expenses",_=I("expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date"),n=["user_id","expense_category_id"],v=Le({expenseCategories:[],staffMembers:[]}),y={expense_category_id:void 0,amount:"",bill:void 0,bill_url:void 0,date:void 0,user_id:void 0,notes:""},r=[{title:e("expense.id"),dataIndex:"id"},{title:e("expense.expense_category"),dataIndex:"expense_category_id"},{title:e("expense.amount"),dataIndex:"amount"},{title:e("expense.date"),dataIndex:"date"},{title:e("expense.created_by_user"),dataIndex:"user_id"},{title:e("common.action"),dataIndex:"action"}],u=Le({expense_category_id:void 0,user_id:void 0});return{url:_,addEditUrl:s,initData:y,columns:r,filters:u,hashableColumns:n,preFetchData:v,getPreFetchData:()=>{const p=axiosAdmin.get("expense-categories?limit=10000"),h=axiosAdmin.get("users?limit=10000");Promise.all([p,h]).then(([g,f])=>{v.expenseCategories=g.data,v.staffMembers=f.data})}}},p_={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:m_,AdminPageHeader:Ce},setup(){const{url:e,addEditUrl:s,initData:_,columns:n,filters:v,preFetchData:y,getPreFetchData:r,hashableColumns:u,filterableColumns:m}=c_(),p=Fe(),{appSetting:h,permsArray:g,formatDate:f,formatAmountCurrency:w}=Z();ie(()=>{r(),p.crudUrl.value=s,p.langKey.value="expense",p.initData.value={..._},p.formData.value={..._},p.hashableColumns.value=[...u],k()});const k=()=>{p.tableUrl.value={url:e,filters:v},p.fetch({page:1})};return{columns:n,appSetting:h,formatDate:f,...p,filterableColumns:m,filters:v,preFetchData:y,reFetchDatatable:k,permsArray:g,formatAmountCurrency:w}}},__={class:"table-responsive"};function f_(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("EditOutlined"),z=o("a-table"),K=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.expenses"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.expense_manager")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.expenses")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("expenses_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("expense.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("expenses_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l(E,{value:n.filters.expense_category_id,"onUpdate:value":s[0]||(s[0]=B=>n.filters.expense_category_id=B),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:n.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(d(!0),U(L,null,G(n.preFetchData.expenseCategories,B=>(d(),b(S,{key:B.xid,value:B.xid,label:B.name},{default:a(()=>[c(i(B.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l(E,{value:n.filters.user_id,"onUpdate:value":s[1]||(s[1]=B=>n.filters.user_id=B),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:n.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(d(!0),U(L,null,G(n.preFetchData.staffMembers,B=>(d(),b(S,{key:B.xid,value:B.xid,label:B.name},{default:a(()=>[c(i(B.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[2]||(s[2]=B=>e.table.searchColumn=B),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,B=>(d(),b(S,{key:B.key},{default:a(()=>[c(i(B.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[3]||(s[3]=B=>e.table.searchString=B),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",__,[l(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:B=>({disabled:!1,name:B.xid})},columns:n.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:B,text:R,record:O})=>[B.dataIndex==="expense_category_id"?(d(),U(L,{key:0},[c(i(O.expense_category.name),1)],64)):D("",!0),B.dataIndex==="user_id"?(d(),U(L,{key:1},[c(i(O.user.name),1)],64)):D("",!0),B.dataIndex==="amount"?(d(),U(L,{key:2},[c(i(n.formatAmountCurrency(R)),1)],64)):D("",!0),B.dataIndex==="date"?(d(),U(L,{key:3},[c(i(n.formatDate(O.date)),1)],64)):D("",!0),B.dataIndex==="action"?(d(),U(L,{key:4},[n.permsArray.includes("expenses_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(V)]),_:2},1032,["onClick"])):D("",!0),n.permsArray.includes("expenses_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const g_=Y(p_,[["render",f_]]),h_=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/expense-categories",component:t_,name:"admin.expense_categories.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expense_categories",permission:"expense_categories_view"}},{path:"/admin/expenses",component:g_,name:"admin.expenses.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expenses",permission:"expenses_view"}}]}],v_=()=>{const e="products?fields=id,xid,name,coverage,description,nombreBase,price,campaign_id,x_campaign_id,product_type,tax_rate,tax_label,image,image_url,internal_code,category_id,x_category_id,categories{id,xid,name},campaigns{id,xid,name}",s="products",{t:_}=x(),n=["category_id","campaign_id"],v=I([]),{getCampaignUrl:y}=Z(),r=()=>{const h=y(),g=axiosAdmin.get(h);return Promise.all([g]).then(([f])=>{v.value=f.data})},u={name:"",coverage:"",description:"",nombreBase:"",price:"",product_type:"product",tax_rate:0,tax_label:"",image:void 0,image_url:void 0,internal_code:"",category_id:void 0,campaign_id:void 0},m=[{title:_("product.id"),dataIndex:"id"},{title:_("product.image"),dataIndex:"image"},{title:_("product.category"),dataIndex:"category_id"},{title:_("product.campaign"),dataIndex:"campaign_id"},{title:_("product.product_type"),dataIndex:"product_type"},{title:_("bases.base"),dataIndex:"nombreBase"},{title:_("product.internal_code"),dataIndex:"internal_code"},{title:_("product.name"),dataIndex:"name"},{title:_("product.coverage"),dataIndex:"coverage"},{title:_("product.price"),dataIndex:"price"},{title:_("common.action"),dataIndex:"action"}],p=[{key:"name",value:_("common.name")},{key:"coverage",value:_("product.coverage")},{key:"internal_code",value:_("product.internal_code")},{key:"nombreBase",value:_("bases.base")}];return{getPrefetchData:r,allCampaigns:v,url:e,addEditUrl:s,initData:u,columns:m,filterableColumns:p,hashableColumns:n}},kn=()=>{const e="categories",{t:s}=x(),_={name:""},n=[{title:s("category.id"),dataIndex:"id"},{title:s("category.name"),dataIndex:"name"},{title:s("common.action"),dataIndex:"action"}],v=[{key:"name",value:s("common.name")}];return{addEditUrl:e,initData:_,columns:n,filterableColumns:v}},b_=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function y_(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-form"),g=o("SaveOutlined"),f=o("a-button"),w=o("a-modal");return d(),b(w,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(f,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(f,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(h,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=k=>e.formData.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Cn=Y(b_,[["render",y_]]),k_=ne({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:Cn},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=kn(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),C_={key:0};function w_(e,s,_,n,v,y){const r=o("a-menu-item"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),h=o("AddEdit");return e.permsArray.includes("categories_create")||e.permsArray.includes("admin")?(d(),U("div",C_,[e.customType=="menu"?(d(),b(r,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick"])):(d(),U(L,{key:1},[e.tooltip?(d(),b(p,{key:0,placement:"topLeft",title:e.$t("category.add"),"arrow-point-at-center":""},{default:a(()=>[l(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),l(h,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("category.add"),successMessage:e.$t("category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const S_=Y(k_,[["render",w_]]),$_=ne({props:["formData","campaigns","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,Upload:ka,CategoryAddButton:S_},setup(e,{emit:s}){const{appSetting:_}=Z(),n=I([]),v="categories?limit=10000",{addEditRequestAdmin:y,loading:r,rules:u}=pe();ie(()=>{m()});const m=()=>{const f=axiosAdmin.get(v);Promise.all([f]).then(([w])=>{n.value=w.data})},p=()=>{axiosAdmin.get(v).then(f=>{n.value=f.data,s("categoryReload")})},h=()=>{y({url:e.url,data:e.formData,successMessage:e.successMessage,success:f=>{s("addEditSuccess",f.xid)}})},g=()=>{u.value={},s("closed")};return he(()=>e.visible,(f,w)=>{e.addEditType=="edit"&&m()}),{appSetting:_,loading:r,rules:u,onClose:g,onSubmit:h,categories:n,categoryAdded:p,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),A_={style:{display:"flex"}};function D_(e,s,_,n,v,y){const r=o("Upload"),u=o("a-form-item"),m=o("a-col"),p=o("a-select-option"),h=o("a-select"),g=o("a-row"),f=o("a-input"),w=o("a-input-number"),k=o("CategoryAddButton"),C=o("a-textarea"),S=o("a-form"),E=o("SaveOutlined"),A=o("a-button"),$=o("a-space"),P=o("a-drawer");return d(),b(P,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l($,null,{default:a(()=>[l(A,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(E)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(A,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(S,{layout:"vertical"},{default:a(()=>[l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(u,{label:e.$t("product.image"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[l(r,{formData:e.formData,folder:"product",imageField:"image",onOnFileUploaded:s[0]||(s[0]=T=>{e.formData.image=T.file,e.formData.image_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:18,lg:18},{default:a(()=>[l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.product_type"),name:"product_type",help:e.rules.product_type?e.rules.product_type.message:null,validateStatus:e.rules.product_type?"error":null,class:"required"},{default:a(()=>[l(h,{value:e.formData.product_type,"onUpdate:value":s[1]||(s[1]=T=>e.formData.product_type=T),placeholder:e.$t("common.select_default_text",[e.$t("product.product_type")]),allowClear:!0,"show-search":""},{default:a(()=>[l(p,{key:"products",value:"product"},{default:a(()=>[c(i(e.$t("common.product")),1)]),_:1}),l(p,{key:"service",value:"service"},{default:a(()=>[c(i(e.$t("common.service")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.campaign"),name:"campaign_id",help:e.rules.campaign_id?e.rules.campaign_id.message:null,validateStatus:e.rules.campaign_id?"error":null,class:"required"},{default:a(()=>[l(h,{value:e.formData.campaign_id,"onUpdate:value":s[2]||(s[2]=T=>e.formData.campaign_id=T),placeholder:e.$t("common.select_default_text",[e.$t("product.campaign")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(e.campaigns,T=>(d(),b(p,{key:T.xid,value:T.xid,label:T.name},{default:a(()=>[c(i(T.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(f,{value:e.formData.name,"onUpdate:value":s[3]||(s[3]=T=>e.formData.name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.price"),name:"price",help:e.rules.price?e.rules.price.message:null,validateStatus:e.rules.price?"error":null,class:"required"},{default:a(()=>[l(w,{value:e.formData.price,"onUpdate:value":s[4]||(s[4]=T=>e.formData.price=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[c(i(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("product.coverage"),name:"coverage",help:e.rules.coverage?e.rules.coverage.message:null,validateStatus:e.rules.coverage?"error":null,class:"required"},{default:a(()=>[l(f,{value:e.formData.coverage,"onUpdate:value":s[5]||(s[5]=T=>e.formData.coverage=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.coverage")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.tax_label"),name:"tax_label",help:e.rules.tax_label?e.rules.tax_label.message:null,validateStatus:e.rules.tax_label?"error":null},{default:a(()=>[l(f,{value:e.formData.tax_label,"onUpdate:value":s[6]||(s[6]=T=>e.formData.tax_label=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.tax_label")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.tax_rate"),name:"tax_rate",help:e.rules.tax_rate?e.rules.tax_rate.message:null,validateStatus:e.rules.tax_rate?"error":null},{default:a(()=>[l(w,{value:e.formData.tax_rate,"onUpdate:value":s[7]||(s[7]=T=>e.formData.tax_rate=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.tax_rate")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.internal_code"),name:"internal_code",help:e.rules.internal_code?e.rules.internal_code.message:null,validateStatus:e.rules.internal_code?"error":null,class:"required"},{default:a(()=>[l(f,{value:e.formData.internal_code,"onUpdate:value":s[8]||(s[8]=T=>e.formData.internal_code=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.internal_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("product.category"),name:"category_id",help:e.rules.category_id?e.rules.category_id.message:null,validateStatus:e.rules.category_id?"error":null,class:"required"},{default:a(()=>[M("span",A_,[l(h,{value:e.formData.category_id,"onUpdate:value":s[9]||(s[9]=T=>e.formData.category_id=T),placeholder:e.$t("common.select_default_text",[e.$t("product.category")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(e.categories,T=>(d(),b(p,{key:T.xid,value:T.xid,label:T.name},{default:a(()=>[c(i(T.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),l(k,{onOnAddSuccess:e.categoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("product.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[l(C,{value:e.formData.description,"onUpdate:value":s[10]||(s[10]=T=>e.formData.description=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.description")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const T_=Y($_,[["render",D_]]),E_={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:T_,AdminPageHeader:Ce,ImportProducts:Va},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:_}=Z(),{url:n,addEditUrl:v,initData:y,columns:r,filterableColumns:u,hashableColumns:m,getPrefetchData:p,allCampaigns:h}=v_();x();const g=Fe(),f=window.config.product_sample_file,w=I([]),k=I({category_id:void 0,campaign_id:void 0});ie(()=>{C(),p()});const C=()=>{const S=axiosAdmin.get("categories?limit=10000");Promise.all([S]).then(([E])=>{w.value=E.data}),g.tableUrl.value={url:n,filters:k},g.table.filterableColumns=u,g.fetch({page:1}),g.crudUrl.value=v,g.langKey.value="product",g.initData.value={...y},g.formData.value={...y},g.hashableColumns.value=[...m]};return{permsArray:e,appSetting:s,formatAmountCurrency:_,columns:r,...g,filterableColumns:u,setUrlData:C,filters:k,allCampaigns:h,categories:w,sampleFileUrl:f}}},U_={class:"table-responsive"};function O_(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("ImportProducts"),k=o("DeleteOutlined"),C=o("a-space"),S=o("a-col"),E=o("a-select-option"),A=o("a-select"),$=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),F=o("admin-page-filters"),V=o("AddEdit"),z=o("a-image"),K=o("EditOutlined"),B=o("a-table"),R=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.products"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.products")),1)]),_:1})]),_:1})]),_:1}),l(F,null,{default:a(()=>[l(T,{gutter:[16,16]},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(C,null,{default:a(()=>[n.permsArray.includes("products_create")||n.permsArray.includes("admin")?(d(),U(L,{key:0},[l(f,{type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("product.add")),1)]),_:1},8,["onClick"]),l(w,{pageTitle:e.$t("product.import_products"),camposRequerido:e.$t("bases.required_fields"),sampleFileUrl:n.sampleFileUrl,importUrl:"products/import",onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","camposRequerido","sampleFileUrl","onOnUploadSuccess"])],64)):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("products_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(k)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(S,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(T,{gutter:[16,16],justify:"end"},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l(P,{compact:""},{default:a(()=>[l(A,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=O=>e.table.searchColumn=O),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,O=>(d(),b(E,{key:O.key},{default:a(()=>[c(i(O.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l($,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=O=>e.table.searchString=O),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1}),l(S,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[l(A,{value:n.filters.category_id,"onUpdate:value":s[2]||(s[2]=O=>n.filters.category_id=O),placeholder:e.$t("common.select_default_text",[e.$t("product.category")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.categories,O=>(d(),b(E,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(S,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[l(A,{value:n.filters.campaign_id,"onUpdate:value":s[3]||(s[3]=O=>n.filters.campaign_id=O),placeholder:e.$t("common.select_default_text",[e.$t("product.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allCampaigns,O=>(d(),b(E,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(R,null,{default:a(()=>[l(V,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,campaigns:n.allCampaigns,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage,onCategoryReload:n.setUrlData},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","campaigns","data","pageTitle","successMessage","onCategoryReload"]),l(T,null,{default:a(()=>[l(S,{span:24},{default:a(()=>[M("div",U_,[l(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:O=>({disabled:!1,name:O.xid})},columns:n.columns,"row-key":O=>O.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:O,record:W})=>{var q,N;return[O.dataIndex==="image"?(d(),b(z,{key:0,width:32,src:W.image_url},null,8,["src"])):D("",!0),O.dataIndex==="category_id"?(d(),U(L,{key:1},[c(i((q=W.categories)==null?void 0:q.name),1)],64)):D("",!0),O.dataIndex==="campaign_id"?(d(),U(L,{key:2},[c(i((N=W.campaigns)==null?void 0:N.name),1)],64)):D("",!0),O.dataIndex==="product_type"?(d(),U(L,{key:3},[c(i(W.product_type=="product"?e.$t("common.product"):e.$t("common.service")),1)],64)):D("",!0),O.dataIndex==="price"?(d(),U(L,{key:4},[c(i(n.formatAmountCurrency(W.price)),1)],64)):D("",!0),O.dataIndex==="action"?(d(),U(L,{key:5},[n.permsArray.includes("products_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:j=>e.editItem(W),style:{"margin-left":"4px"}},{icon:a(()=>[l(K)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("products_delete")||n.permsArray.includes("admin"))&&(!W.children||W.children.length==0)?(d(),b(f,{key:1,type:"primary",danger:"",onClick:j=>e.showDeleteConfirm(W.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(k)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]}),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const I_=Y(E_,[["render",O_]]),P_=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/product",component:I_,name:"admin.products.index",meta:{requireAuth:!0,menuParent:"product",menuKey:e=>"products"}}]}],M_=ne({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n}=pe(),{t:v}=x();return{changeStatus:r=>{const u={xid:e.xid,status:r?1:0};_({url:"email-templates/update-status",data:u,successMessage:v("email_template.status_update"),success:m=>{s("success")}})},loading:n}}});function F_(e,s,_,n,v,y){const r=o("a-switch");return d(),b(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const R_=Y(M_,[["render",F_]]),L_={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:ln,AdminPageHeader:Ce,UpdateStatus:R_},setup(){const{permsArray:e,appSetting:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r}=tn(),u=Fe();return ie(()=>{u.tableUrl.value={url:_},u.table.filterableColumns=r,u.fetch({page:1}),u.crudUrl.value=n,u.langKey.value="email_template",u.initData.value={...v},u.formData.value={...v}}),{permsArray:e,appSetting:s,columns:y,...u,filterableColumns:r}}},B_={class:"table-responsive"};function q_(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("UpdateStatus"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.email_templates"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.email_templates")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("email_templates_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("email_template.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("email_templates_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(S,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",B_,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="status"?(d(),b(V,{key:0,status:O.status,xid:O.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:1},[n.permsArray.includes("email_templates_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("email_templates_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(f,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const V_=Y(L_,[["render",q_]]),K_=ne({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n}=pe(),{t:v}=x();return{changeStatus:r=>{const u={xid:e.xid,status:r?1:0};_({url:"message-templates/update-status",data:u,successMessage:v("message_template.status_update"),success:m=>{s("success")}})},loading:n}}});function z_(e,s,_,n,v,y){const r=o("a-switch");return d(),b(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const N_=Y(K_,[["render",z_]]),j_={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:hn,AdminPageHeader:Ce,UpdateStatus:N_},setup(){const{permsArray:e,appSetting:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r,hashableColumns:u}=_n(),m=Fe();return ie(()=>{m.tableUrl.value={url:_},m.table.filterableColumns=r,m.fetch({page:1}),m.crudUrl.value=n,m.langKey.value="message_template",m.initData.value={...v},m.formData.value={...v},m.hashableColumns.value=[...u]}),{permsArray:e,appSetting:s,columns:y,...m,filterableColumns:r,hashableColumns:u}}},H_={class:"table-responsive"};function W_(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("UpdateStatus"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.message_templates"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.message_templates")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("message_templates_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("message_template.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("message_templates_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(S,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",H_,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="message_provider"?(d(),U(L,{key:0},[c(i(O.message_provider?O.message_provider.name:"-"),1)],64)):D("",!0),R.dataIndex==="code"?(d(),U(L,{key:1},[c(i(O.code?O.code:"-"),1)],64)):D("",!0),R.dataIndex==="status"?(d(),b(V,{key:2,status:O.status,xid:O.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:3},[n.permsArray.includes("message_templates_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("message_templates_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(f,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Y_=Y(j_,[["render",W_]]),G_=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/email-templates",component:V_,name:"admin.email_templates.index",meta:{requireAuth:!0,menuParent:"messaging",menuKey:"email_templates",permission:"email_templates_view"}},{path:"/admin/message-template",component:Y_,name:"admin.message_templates.index",meta:{requireAuth:!0,menuParent:"messaging",menuKey:"message_templates",permission:"message_templates_view"}}]}],J_=ne({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n}=pe(),{t:v}=x();return{changeStatus:r=>{const u={xid:e.xid,status:r?1:0};_({url:"forms/update-status",data:u,successMessage:v("form.status_update"),success:m=>{s("success")}})},loading:n}}});function Q_(e,s,_,n,v,y){const r=o("a-switch");return d(),b(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const X_=Y(J_,[["render",Q_]]),Z_={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:an,AdminPageHeader:Ce,UpdateStatus:X_},setup(){const{permsArray:e,appSetting:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r}=en(),u=Fe();return ie(()=>{u.tableUrl.value={url:_},u.table.filterableColumns=r,u.fetch({page:1}),u.crudUrl.value=n,u.langKey.value="form",u.initData.value={...v},u.formData.value={...v}}),{permsArray:e,appSetting:s,columns:y,...u,filterableColumns:r}}},x_={class:"table-responsive"},ef={key:0};function af(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("UpdateStatus"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.forms"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.forms")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("forms_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("form.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("forms_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(S,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",x_,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="form_fields"?(d(),U("ul",ef,[(d(!0),U(L,null,G(O.form_fields,W=>(d(),U("li",{key:W.id},i(W.name),1))),128))])):D("",!0),R.dataIndex==="status"?(d(),b(V,{key:1,status:O.status,xid:O.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:2},[n.permsArray.includes("forms_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("forms_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(f,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const tf=Y(Z_,[["render",af]]),lf=()=>{const e="form-field-names?fields=id,xid,field_name,similar_field_names,visible",s="form-field-names",_=[],{t:n}=x(),v={field_name:"",similar_field_names:[],visible:1},y=[{title:n("form_field_name.id"),dataIndex:"id"},{title:n("form_field_name.field_name"),dataIndex:"field_name"},{title:n("form_field_name.similar_field_names"),dataIndex:"similar_field_names"},{title:n("form_field_name.visible"),dataIndex:"visible"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"field_name",value:n("form_field_name.field_name")},{key:"similar_field_names",value:n("form_field_name.similar_field_names")},{key:"deletable",value:n("form_field_name.deletable")},{key:"visible",value:n("form_field_name.visible")}];return{url:e,addEditUrl:s,initData:v,columns:y,filterableColumns:r,hashableColumns:_}},nf=ne({props:["data","addText"],emits:["onEntry"],components:{PlusOutlined:de},setup(e,{emit:s}){const _=I(),n=Le({tags:e.data,inputVisible:!1,inputValue:""}),v=u=>{const m=n.tags.filter(p=>p!==u);n.tags=m,s("onEntry",m)},y=()=>{n.inputVisible=!0,at(()=>{_.value.focus()})},r=()=>{const u=n.inputValue;let m=n.tags;u&&m.indexOf(u)===-1&&(m=[...m,u]),Object.assign(n,{tags:m,inputVisible:!1,inputValue:""}),s("onEntry",m)};return he(()=>e.data,(u,m)=>{n.tags=u}),{...Rl(n),handleClose:v,showInput:y,handleInputConfirm:r,inputRef:_}}}),of={style:{marginBottom:"20px"}};function sf(e,s,_,n,v,y){const r=o("a-tag"),u=o("a-tooltip"),m=o("a-input"),p=o("plus-outlined");return d(),U("div",of,[(d(!0),U(L,null,G(e.tags,h=>(d(),U(L,{key:h},[h.length>20?(d(),b(u,{key:0,title:h},{default:a(()=>[l(r,{closable:"",onClose:g=>e.handleClose(h),style:{marginBottom:"20px"}},{default:a(()=>[c(i(`${h.slice(0,20)}...`),1)]),_:2},1032,["onClose"])]),_:2},1032,["title"])):(d(),b(r,{key:1,closable:"",onClose:g=>e.handleClose(h),style:{marginBottom:"20px"}},{default:a(()=>[c(i(h),1)]),_:2},1032,["onClose"]))],64))),128)),e.inputVisible?(d(),b(m,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":s[0]||(s[0]=h=>e.inputValue=h),type:"text",size:"small",style:{width:"100px"},onBlur:e.handleInputConfirm,onKeyup:po(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(d(),b(r,{key:1,style:{background:"#fff","border-style":"dashed"},onClick:e.showInput},{default:a(()=>[l(p),c(" "+i(e.addText),1)]),_:1},8,["onClick"]))])}const df=Y(nf,[["render",sf]]),rf=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,DynamicFields:df},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function uf(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-typography-title"),g=o("DynamicFields"),f=o("a-radio-button"),w=o("a-radio-group"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),E=o("a-modal");return d(),b(E,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(S,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(k,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("form_field_name.field_name"),name:"field_name",help:e.rules.field_name?e.rules.field_name.message:null,validateStatus:e.rules.field_name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.field_name,"onUpdate:value":s[0]||(s[0]=A=>e.formData.field_name=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("form_field_name.field_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{level:5,style:{marginBottom:"10px"}},{default:a(()=>[c(i(e.$t("form_field_name.similar_field_names")),1)]),_:1}),e.formData.similar_field_names?(d(),b(g,{key:0,data:e.formData.similar_field_names,addText:e.$t("form_field_name.add_field"),onOnEntry:s[1]||(s[1]=A=>e.formData.similar_field_names=A)},null,8,["data","addText"])):D("",!0)]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("form_field_name.visible"),name:"visible",help:e.rules.visible?e.rules.visible.message:null,validatevisible:e.rules.visible?"error":null},{default:a(()=>[l(w,{value:e.formData.visible,"onUpdate:value":s[2]||(s[2]=A=>e.formData.visible=A),"button-style":"solid",size:"small"},{default:a(()=>[l(f,{value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l(f,{value:0},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validatevisible"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const mf=Y(rf,[["render",uf]]),cf=ne({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n}=pe(),{t:v}=x();return{changeStatus:r=>{const u={xid:e.xid,status:r?1:0};_({url:"form-field-names/update-status",data:u,successMessage:v("form_field_name.status_update"),success:m=>{s("success")}})},loading:n}}});function pf(e,s,_,n,v,y){const r=o("a-switch");return d(),b(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const _f=Y(cf,[["render",pf]]),ff={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:mf,AdminPageHeader:Ce,UpdateStatus:_f},setup(){const{permsArray:e,appSetting:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r}=lf(),u=Fe();return ie(()=>{u.tableUrl.value={url:_},u.table.filterableColumns=r,u.fetch({page:1}),u.crudUrl.value=n,u.langKey.value="form_field_name",u.initData.value={...v},u.formData.value={...v}}),{permsArray:e,appSetting:s,columns:y,...u,filterableColumns:r}}},gf={class:"table-responsive"},hf={key:0};function vf(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("UpdateStatus"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.form_field_names"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.form_field_names")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("form_field_names_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("form_field_name.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("form_field_names_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(S,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",gf,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="similar_field_names"?(d(),U("ul",hf,[(d(!0),U(L,null,G(O.similar_field_names,W=>(d(),U("li",{key:W},i(W),1))),128))])):D("",!0),R.dataIndex==="visible"?(d(),b(V,{key:1,status:O.visible,xid:O.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:2},[n.permsArray.includes("form_field_names_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("form_field_names_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(f,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const bf=Y(ff,[["render",vf]]),yf=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/forms",component:tf,name:"admin.forms.index",meta:{requireAuth:!0,menuParent:"forms",menuKey:"forms",permission:"forms_view"}},{path:"/admin/form-field-names",component:bf,name:"admin.form_field_names.index",meta:{requireAuth:!0,menuParent:"form_field_names",menuKey:"form_field_names",permission:"form_field_names_view"}}]}],kf={key:1},wn={__name:"index",setup(e){const s=et();_e(()=>s.meta.menuKey||"Formularios");const _=_e(()=>s.meta.formPath?_o(()=>s.meta.formPath()):null);return(n,v)=>{const y=o("a-page-header"),r=o("router-link"),u=o("a-breadcrumb-item"),m=o("a-breadcrumb"),p=o("admin-page-table-content");return d(),U(L,null,[l(Ce,null,{header:a(()=>[l(y,{title:n.$t("menu.formsUCB"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(m,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(u,null,{default:a(()=>[l(r,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(n.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(u,null,{default:a(()=>[c(i(n.$t("menu.forms")),1)]),_:1}),l(u,null,{default:a(()=>[c(i(n.$t(`${xa(s).meta.menuKey}`)),1)]),_:1})]),_:1})]),_:1}),l(p,null,{default:a(()=>[xa(_)?(d(),b(Sl(xa(_)),{key:0})):(d(),U("p",kf,i(n.$t("crm.form_not_found")),1))]),_:1})],64)}}},kl=Object.assign({"../views/formsUCB/Web/WebForms/Correspondencia/index.vue":()=>la(()=>import("./index-5e541c52.js"),["assets/index-5e541c52.js","assets/vendor-43bf694e.js"])}),Cf=Object.keys(kl).map(e=>{const s=e.split("/"),_=s[s.length-2];return{path:`/admin/formsUCB/${_}/:id?`,name:`admin.formsUCB.${_}`,component:wn,props:_==="CRM",meta:{requireAuth:!0,menuParent:"formsUCB",menuKey:_,permission:"formsUCB",formPath:kl[e]}}}),wf={path:"/admin/formsUCB",component:wn,name:"admin.formsUCB.index",meta:{requireAuth:!0,menuParent:"formsUCB",menuKey:"formsUCB",permission:"formsUCB_view"}},Sf=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[wf,...Cf]}],qt=()=>{const{convertStringToKey:e,getCampaignUrl:s,getCampaignStatsUrl:_}=Z(),n="leads?fields=id,xid,cedula,nombre,tel1,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},notes_count,campaignUsers{id,xid,user_id,x_user_id},campaignUsers:user{id,xid,name},assign_to,x_assign_to,assignUsers{id,xid,name},leadStatus{id,xid,name,color,type}",v="leads",y=["campaign_id","lead_status_id"],{t:r}=x(),u=I([]),m=I([]),p="form-field-names/all",h=I({}),g=I([]),f=I("self"),w=I("active"),k={reference_number:""},C=I([]),S=[{key:"cedula",value:r("lead.cedula")},{key:"nombre",value:r("lead.name")},{key:"tel1",value:r("lead.phone")}],E=I([{title:r("uphone_calls.number"),dataIndex:"number"},{title:r("uphone_calls.direction"),dataIndex:"direction"},{title:r("uphone_calls.duration"),dataIndex:"duration"},{title:r("uphone_calls.guid"),dataIndex:"guid"},{title:r("uphone_calls.date"),dataIndex:"date"}]),A=[{key:"direction",value:r("uphone_calls.direction")},{key:"duration",value:r("uphone_calls.duration")},{key:"guid",value:r("uphone_calls.guid")},{key:"number",value:r("uphone_calls.number")}];return ie(()=>{const $=s(w.value,f.value),P=_(),T=axiosAdmin.get(p),F=axiosAdmin.get($),V=axiosAdmin.get(P),z=axiosAdmin.get("campaigns/user-campaigns");Promise.all([T,F,V,z]).then(([K,B,R,O])=>{u.value=K.data.data,m.value=B.data,h.value=R.data,g.value=O.data.user_campaigns;var W=[{title:r("lead.document"),dataIndex:"cedula"},{title:r("lead.name"),dataIndex:"nombre"},{title:r("lead.phone"),dataIndex:"tel1"},{title:r("lead.campaign"),dataIndex:"campaign"}];Ee(K.data.data,q=>{W.push({title:q.field_name,dataIndex:e(q.field_name)})}),W.push({title:r("lead.total_notes"),dataIndex:"notes_count"}),W.push({title:r("lead.assign_to"),dataIndex:"assign_to"}),W.push({title:r("lead.lead_status"),dataIndex:"lead_status"}),W.push({title:r("common.action"),dataIndex:"action"}),C.value=W})}),{url:n,addEditUrl:v,initData:k,columns:C,filterableColumns:S,hashableColumns:y,allFormFieldNames:u,convertStringToKey:e,allCampaigns:m,campaignStats:h,userCampaigns:g,uphoneColumn:E,activeCampaignType:w,viewType:f,uphoneFilterableColumns:A}},$f=ne({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n}=pe(),{t:v}=x();return{changeStatus:r=>{const u={xid:e.xid,status:r?1:0};_({url:"leads/update-status",data:u,successMessage:v("lead.status_update"),success:m=>{s("success")}})},loading:n}}});function Af(e,s,_,n,v,y){const r=o("a-switch");return d(),b(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const Df=Y($f,[["render",Af]]),Tf=ne({props:["data","visible","pageTitle"],setup(e,{emit:s}){const{loading:_,rules:n}=pe();x();const{uphoneColumn:v,uphoneFilterableColumns:y}=qt(),r=()=>{n.value={},s("close")},u=Fe(),m=I([]),p=I({lead_id:""}),h=()=>{u.tableUrl.value={url:"uphone-calls?fields=id,xid,campaign,client_id,date,direction,duration,guid,discriptions,number,response_data,campaign_id,x_campaign_id,campaigns{id,xid,name},lead_id,x_lead_id,leadData{id,xid}",extraFilters:p},u.table.filterableColumns=y,u.fetch({page:1})};return he(()=>e.visible,g=>{p.value.lead_id=e.data.xid,h()}),{...u,rules:n,loading:_,onClose:r,uphoneColumn:v,uphoneData:m,setUrlData:h,uphoneFilterableColumns:y}}}),Ef={class:"table-responsive"};function Uf(e,s,_,n,v,y){const r=o("a-col"),u=o("a-select-option"),m=o("a-select"),p=o("a-input-search"),h=o("a-input-group"),g=o("a-row"),f=o("admin-page-filters"),w=o("a-table"),k=o("a-button"),C=o("a-drawer");return d(),b(C,{title:e.pageTitle,width:1200,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1},{footer:a(()=>[l(k,{key:"back",type:"primary",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(f,null,{default:a(()=>[l(g,{gutter:[16,16]},{default:a(()=>[l(r,{xs:24,sm:24,md:12,lg:10,xl:10}),l(r,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(g,{gutter:[16,16],justify:"end"},{default:a(()=>[l(r,{xs:24,sm:24,md:14,lg:16,xl:16},{default:a(()=>[l(h,{compact:""},{default:a(()=>[l(m,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=S=>e.table.searchColumn=S),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(e.uphoneFilterableColumns,S=>(d(),b(u,{key:S.key},{default:a(()=>[c(i(S.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=S=>e.table.searchString=S),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(r,{span:24},{default:a(()=>[M("div",Ef,[l(w,{columns:e.uphoneColumn,"row-key":S=>S.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:S,record:E})=>[S.dataIndex==="lead_id"?(d(),U(L,{key:0},[c(i(E.lead_data.id),1)],64)):D("",!0),S.dataIndex==="campaign_id"?(d(),U(L,{key:1},[c(i(E.campaigns.name),1)],64)):D("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1},8,["title","open"])}const Sn=Y(Tf,[["render",Uf]]),Of=ne({props:["data","visible","pageTitle"],setup(e,{emit:s}){const{formatDateTime:_}=Z(),{addEditRequestAdmin:n,loading:v,rules:y}=pe(),r=I([]),u=I({assign_to:void 0,lead_id:void 0}),m=I([]),{t:p}=x(),h=()=>{n({url:"assign-users",data:u.value,successMessage:p("lead.user_assign_success"),success:w=>{w&&w.campaignUser=="success",s("close"),s("setAssignUser")}})},g=()=>{y.value={},s("close")},f=()=>{s("setAssignUser")};return he(()=>e.visible,w=>{w&&(m.value=[],r.value=e.data.campaign_users||[],Ee(r.value,k=>{k.user&&m.value.push(k.user)}),u.value.assign_to=e.data.x_assign_to?e.data.x_assign_to:void 0,u.value.lead_id=e.data.xid)}),{rules:y,loading:v,formatDateTime:_,onClose:g,onSubmit:h,assignUser:f,users:m,formData:u}}}),If={style:{display:"flex"}};function Pf(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("a-form-item"),p=o("a-col"),h=o("a-row"),g=o("a-form"),f=o("a-button"),w=o("a-modal");return d(),b(w,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(f,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{default:a(()=>[c(i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(f,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{layout:"vertical"},{default:a(()=>[l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead.campaign_user"),name:"assign_to",help:e.rules.assign_to?e.rules.assign_to.message:null,validateStatus:e.rules.assign_to?"error":null,class:"required"},{default:a(()=>[M("span",If,[l(u,{value:e.formData.assign_to,"onUpdate:value":s[0]||(s[0]=k=>e.formData.assign_to=k),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign_user")])},{default:a(()=>[(d(!0),U(L,null,G(e.users,k=>(d(),b(r,{key:k.xid,value:k.xid},{default:a(()=>[c(i(k.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Mf=Y(Of,[["render",Pf]]),Ff=ne({props:["data","keys","visible","pageTitle"],setup(e,{emit:s}){const{formatDateTime:_}=Z(),{addEditRequestAdmin:n,loading:v,rules:y}=pe(),r=I([]),u=I({assign_to:void 0,lead_ids:[]}),m=I([]),{t:p}=x(),h=()=>{n({url:"assign-multiple-users",data:u.value,successMessage:p("lead.user_assign_success"),success:w=>{w&&w.success=="success",s("close"),s("setMultiUser")}})},g=()=>{y.value={},s("close")},f=()=>{s("setMultiUser")};return he(()=>e.visible,w=>{w&&(m.value=[],Ee(e.data,k=>{e.keys.includes(k.xid)&&(r.value=k.campaign_users)}),Ee(r.value,k=>{k.user&&m.value.push(k.user)}),u.value.assign_to=e.data.x_assign_to?e.data.x_assign_to:void 0,u.value.lead_ids=e.keys)}),{rules:y,loading:v,formatDateTime:_,onClose:g,onSubmit:h,users:m,formData:u,assignMultiUser:f}}}),Rf={style:{display:"flex"}};function Lf(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("a-form-item"),p=o("a-col"),h=o("a-row"),g=o("a-form"),f=o("a-button"),w=o("a-modal");return d(),b(w,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(f,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{default:a(()=>[c(i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(f,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{layout:"vertical"},{default:a(()=>[l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead.campaign_user"),name:"assign_to",help:e.rules.assign_to?e.rules.assign_to.message:null,validateStatus:e.rules.assign_to?"error":null,class:"required"},{default:a(()=>[M("span",Rf,[l(u,{value:e.formData.assign_to,"onUpdate:value":s[0]||(s[0]=k=>e.formData.assign_to=k),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign_user")])},{default:a(()=>[(d(!0),U(L,null,G(e.users,k=>(d(),b(r,{key:k.xid,value:k.xid},{default:a(()=>[c(i(k.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Bf=Y(Ff,[["render",Lf]]);const qf={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,UserAddOutlined:Ul,SearchOutlined:Ut,LineChartOutlined:fo,EyeOutlined:aa,PlayCircleOutlined:oa,DownOutlined:Pa,AreaChartOutlined:go,HistoryOutlined:Ll,ExclamationCircleOutlined:De,StopOutlined:Oa,CopyrightCircleOutlined:Al,ApartmentOutlined:Bl,MobileOutlined:tt,ClockCircleOutlined:At,UsergroupAddOutlined:ho,OrderedListOutlined:El,ViewLeadUphone:Sn,AdminPageHeader:Ce,UpdateStatus:Df,StateWidget:Yl,AssignUsers:Mf,AssignMultipleUser:Bf},setup(){const{permsArray:e,appSetting:s,convertStringToKey:_,formatTimeDuration:n,getCampaignUrl:v,getCampaignStatsUrl:y,user:r,formFolders:u}=Z(),m=sa(),p=na(),{url:h,addEditUrl:g,initData:f,columns:w,hashableColumns:k,filterableColumns:C,allFormFieldNames:S,allCampaigns:E,campaignStats:A,userCampaigns:$,activeCampaignType:P,viewType:T}=qt(),F=Fe(),V=I({campaign_id:void 0,lead_status_id:void 0}),z=I([]),K=I({lead_field_name:void 0,lead_field_value:"",started:"started",campaign_status:"active",assign_to:void 0}),B=I(void 0),{t:R}=x(),O={marginLeft:"0px",marginRight:"0px"},W=I([]),q=I(!1),N=I({}),j=I(!1),te=I({}),le=I([]),ue=I([]),ee="users?limit=10000",ve=I(!1),X=I({}),oe=I([]),se=J=>{q.value=!0,N.value=J},H=J=>{j.value=!0,te.value=J},ae=J=>{ve.value=!0,X.value=J};ie(()=>{axiosAdmin.get("lead-status?fields=id,xid,name,color,type").then(re=>{W.value=re.data});const J=axiosAdmin.get(ee);Promise.all([J]).then(([re])=>{le.value=[...re.data],ue.value=re.data}),Ie(),F.crudUrl.value=g,F.langKey.value="lead",F.initData.value={...f},F.formData.value={...f},F.hashableColumns.value=[...k]});const ce=()=>{q.value=!1},Ae=()=>{j.value=!1},Be=()=>{ve.value=!1},Ie=()=>{F.tableUrl.value={url:h,filters:V,extraFilters:K},F.table.filterableColumns=C,F.table.pagination={...F.table.pagination,current:1},F.fetch({page:1})},Je=(J,re)=>{let qe="";return Ee(re,Q=>{J.includes(Q.field_name)&&(qe=Q.field_value)}),qe},xe=J=>{Ne.confirm({title:R("common.are_you_sure")+"?",icon:l(De),content:R("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:R("common.yes"),okType:"danger",cancelText:R("common.no"),onOk(){p.push({name:"admin.formsUCB.Correspondencia",params:{id:J.xid}})},onCancel(){}})},fe=(J,re)=>{J!=null&&re&&re.campaign&&re.campaign.campaign_users?ue.value=vo(re.campaign.campaign_users,"user"):ue.value=le.value,z.value=re&&re.campaign&&re.campaign.form&&re.campaign.form.form_fields?re.campaign.form.form_fields:[],K.value={...K.value,lead_field_name:void 0,lead_field_value:"",started:"started"},B.value=void 0,Re()},Re=()=>{ma().then(J=>{A.value=J.data,Ie()})},Ze=(J,re)=>{K.value={...K.value,lead_field_name:re&&re.formField&&re.formField.name?re.formField.name:void 0,lead_field_value:""},Ie()},Ca=J=>{V.value={...V.value,campaign_id:void 0,lead_status_id:void 0},K.value={...K.value,lead_field_name:void 0,lead_field_value:"",started:"started"};const re=v(K.value.campaign_status,T.value),qe=axiosAdmin.get(re),Q=ma();Promise.all([qe,Q]).then(([me,Te])=>{E.value=me.data,A.value=Te.data,Ie()})},ma=()=>{const J=y(K.value.campaign_status,V.value.campaign_id,K.value.assign_to);return axiosAdmin.get(J)};return{permsArray:e,appSetting:s,columns:w,allFormFieldNames:S,...F,...m,filterableColumns:C,convertStringToKey:_,visibleUserOption:j,closeUserOption:Ae,assignUserOption:H,filters:V,extraFilters:K,setUrlData:Ie,findFieldValue:Je,allCampaigns:E,campaignFormFields:z,searchFieldName:B,goAndResumeLead:xe,assignUserData:te,activeCampaignType:P,widgetBodyStyle:O,campaignChanged:fe,searchFieldChanged:Ze,campaignTypeChanged:Ca,campaignStats:A,formatTimeDuration:n,isLeadActionValid:J=>e.value.includes("leads_view_all")||e.value.includes("admin")?!0:!!ba($.value,{x_campaign_id:J}),viewType:T,viewTypeChanged:()=>{const J=v(K.value.campaign_status,T.value),re=axiosAdmin.get(J);Promise.all([re]).then(([qe,Q])=>{E.value=qe.data,Ie()})},campaignUsers:ue,allLeadStatus:W,viewLeadUphoneData:se,visibleLeadUphone:q,viewLeadUphone:N,closed:ce,closeMultipleUser:Be,addMultipleUsers:ae,visibleMultipleUser:ve,multipleUserData:X,addUserSelect:oe,refetchAllData:Re,user:r}}},Vf={class:"left-lead-campaigns"},Kf={style:{display:"flex","justify-content":"flex-end"}},zf={key:0,class:"table-responsive"},Nf={key:1};function jf(e,s,_,n,v,y){const r=o("a-typography-text"),u=o("a-switch"),m=o("a-space"),p=o("a-page-header"),h=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),w=o("AdminPageHeader"),k=o("PlayCircleOutlined"),C=o("a-tab-pane"),S=o("StopOutlined"),E=o("a-tabs"),A=o("a-col"),$=o("a-row"),P=o("a-select-option"),T=o("a-select"),F=o("a-form-item"),V=o("a-form"),z=o("CopyrightCircleOutlined"),K=o("StateWidget"),B=o("LineChartOutlined"),R=o("ApartmentOutlined"),O=o("MobileOutlined"),W=o("OrderedListOutlined"),q=o("ClockCircleOutlined"),N=o("perfect-scrollbar"),j=o("UsergroupAddOutlined"),te=o("a-button"),le=o("AreaChartOutlined"),ue=o("HistoryOutlined"),ee=o("a-input-search"),ve=o("a-input"),X=o("a-tag"),oe=o("a-tooltip"),se=o("DeleteOutlined"),H=o("UserAddOutlined"),ae=o("a-table"),ce=o("a-card"),Ae=o("admin-page-table-content"),Be=o("view-lead-details"),Ie=o("ViewLeadUphone"),Je=o("AssignUsers"),xe=o("AssignMultipleUser");return d(),U(L,null,[l(w,null,{header:a(()=>[l(p,{title:e.$t("menu.leads"),class:"p-0"},Fa({_:2},[n.permsArray.includes("campaigns_view_all")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[l(m,null,{default:a(()=>[l(r,{strong:""},{default:a(()=>[c(i(e.$t("campaign.view_all_campaigns")),1)]),_:1}),l(u,{checked:n.viewType,"onUpdate:checked":s[0]||(s[0]=fe=>n.viewType=fe),onChange:n.viewTypeChanged,unCheckedValue:"self",checkedValue:"all",size:"small"},null,8,["checked","onChange"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:a(()=>[l(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(g,null,{default:a(()=>[l(h,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(g,null,{default:a(()=>[c(i(e.$t("menu.leads_calls")),1)]),_:1}),l(g,null,{default:a(()=>[c(i(e.$t("menu.leads")),1)]),_:1})]),_:1})]),_:1}),l(Ae,null,{default:a(()=>[l(ce,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l($,null,{default:a(()=>[l(A,{span:24},{default:a(()=>[l(E,{activeKey:n.extraFilters.campaign_status,"onUpdate:activeKey":s[1]||(s[1]=fe=>n.extraFilters.campaign_status=fe),onChange:n.campaignTypeChanged},{default:a(()=>[l(C,{key:"active"},{tab:a(()=>[M("span",null,[l(k),c(" "+i(e.$t("campaign.active_campaign")),1)])]),_:1}),n.permsArray.includes("view_completed_campaigns")||n.permsArray.includes("admin")?(d(),b(C,{key:"completed"},{tab:a(()=>[M("span",null,[l(S),c(" "+i(e.$t("campaign.completed_campaign")),1)])]),_:1})):D("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),l($,{gutter:[24,24]},{default:a(()=>[l(A,{xs:24,sm:24,md:6,lg:6,xl:6,style:{"border-right":"1px solid #f0f0f0"}},{default:a(()=>[M("div",Vf,[l(N,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l($,null,{default:a(()=>[l(A,{span:24},{default:a(()=>[l(V,{layout:"vertical"},{default:a(()=>[l(F,{label:e.$t("lead.campaign"),name:"campaign"},{default:a(()=>[l(T,{value:n.filters.campaign_id,"onUpdate:value":s[2]||(s[2]=fe=>n.filters.campaign_id=fe),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.campaignChanged},{default:a(()=>[(d(!0),U(L,null,G(n.allCampaigns,fe=>(d(),b(P,{key:fe.xid,title:fe.name,value:fe.xid,campaign:fe},{default:a(()=>[c(i(fe.name),1)]),_:2},1032,["title","value","campaign"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),n.campaignStats?(d(),b($,{key:0},{default:a(()=>[l(A,{span:24},{default:a(()=>[l(K,{bodyStyle:n.widgetBodyStyle},{image:a(()=>[l(z,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[M("h2",null,i(n.campaignStats.total_active_campaign),1),M("p",null,i(e.$t("campaign.active_campaign")),1)]),_:1},8,["bodyStyle"])]),_:1}),l(A,{span:24},{default:a(()=>[l(K,{bgColor:"#ffa39e",bodyStyle:n.widgetBodyStyle},{image:a(()=>[l(B,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[M("h2",null,i(n.campaignStats.total_completed_campaign),1),M("p",null,i(e.$t("campaign.completed_campaign")),1)]),_:1},8,["bodyStyle"])]),_:1}),l(A,{span:24},{default:a(()=>[l(K,{bgColor:"#d46b08",bodyStyle:n.widgetBodyStyle},{image:a(()=>[l(R,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[M("h2",null,i(n.campaignStats.total_leads),1),M("p",null,i(e.$t("campaign.total_leads")),1)]),_:1},8,["bodyStyle"])]),_:1}),l(A,{span:24},{default:a(()=>[l(K,{bgColor:"#389e0d",bodyStyle:n.widgetBodyStyle},{image:a(()=>[l(O,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[M("h2",null,i(n.campaignStats.call_made),1),M("p",null,i(e.$t("campaign.managed_leads")),1)]),_:1},8,["bodyStyle"])]),_:1}),l(A,{span:24},{default:a(()=>[l(K,{bgColor:"#656592",bodyStyle:n.widgetBodyStyle},{image:a(()=>[l(W,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[M("h2",null,i(n.campaignStats.call_not_made),1),M("p",null,i(e.$t("campaign.not_managed_leads")),1)]),_:1},8,["bodyStyle"])]),_:1}),l(A,{span:24},{default:a(()=>[l(K,{bgColor:"#08979c",bodyStyle:n.widgetBodyStyle},{image:a(()=>[l(q,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[M("h2",null,i(n.formatTimeDuration(n.campaignStats.total_duration)),1),M("p",null,i(e.$t("campaign.total_duration")),1)]),_:1},8,["bodyStyle"])]),_:1})]),_:1})):D("",!0)]),_:1})])]),_:1}),l(A,{xs:24,sm:24,md:18,lg:18,xl:18},{default:a(()=>[M("div",Kf,[e.table.selectedRowKeys.length>0&&n.filters.campaign_id&&n.extraFilters.started=="not_started"&&(n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin"))?(d(),b(te,{key:0,type:"primary",onClick:s[3]||(s[3]=fe=>n.addMultipleUsers(e.table.data))},{icon:a(()=>[l(j)]),default:a(()=>[c(" "+i(e.$t("lead.assign_to")),1)]),_:1})):D("",!0)]),l($,null,{default:a(()=>[l(A,{span:24},{default:a(()=>[l(E,{activeKey:n.extraFilters.started,"onUpdate:activeKey":s[4]||(s[4]=fe=>n.extraFilters.started=fe),onChange:n.setUrlData},{default:a(()=>[l(C,{key:"started"},{tab:a(()=>[M("span",null,[l(le),c(" "+i(e.$t("lead.started")),1)])]),_:1}),l(C,{key:"not_started"},{tab:a(()=>[M("span",null,[l(ue),c(" "+i(e.$t("lead.not_started")),1)])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(A,{xs:24,sm:24,md:4,lg:4,xl:4},{default:a(()=>[l(ee,{style:{width:"100%"},value:e.table.searchString,"onUpdate:value":s[5]||(s[5]=fe=>e.table.searchString=fe),placeholder:e.$t("common.select_default_text",[e.$t("common.information")]),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","placeholder","onChange","onSearch","loading"])]),_:1}),n.extraFilters.started=="started"?(d(),b(A,{key:0,xs:24,sm:24,md:5,lg:5,xl:5},{default:a(()=>[l(T,{value:n.filters.lead_status_id,"onUpdate:value":s[6]||(s[6]=fe=>n.filters.lead_status_id=fe),placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_status")]),allowClear:!0,style:{width:"100%"},onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allLeadStatus.filter(fe=>fe.type==="lead_status"),fe=>(d(),b(P,{key:fe.xid,value:fe.xid},{default:a(()=>[c(i(fe.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),l(A,{xs:24,sm:24,md:5,lg:5,xl:5},{default:a(()=>[n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(T,{key:0,value:n.extraFilters.assign_to,"onUpdate:value":s[7]||(s[7]=fe=>n.extraFilters.assign_to=fe),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("lead.assign_to")]),allowClear:!0,onChange:s[8]||(s[8]=fe=>n.refetchAllData())},{default:a(()=>[(d(!0),U(L,null,G(n.campaignUsers,fe=>(d(),b(P,{key:fe.xid,title:fe.name,label:fe.name},{default:a(()=>[c(i(fe.name),1)]),_:2},1032,["title","label"]))),128))]),_:1},8,["value","placeholder"])):D("",!0)]),_:1}),n.campaignFormFields.length!=0?(d(),U(L,{key:1},[l(A,{xs:24,sm:24,md:5,lg:5,xl:5},{default:a(()=>[l(T,{value:n.searchFieldName,"onUpdate:value":s[9]||(s[9]=fe=>n.searchFieldName=fe),placeholder:e.$t("common.select_default_text",[e.$t("lead.search_by")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.searchFieldChanged,disabled:n.campaignFormFields.length==0},{default:a(()=>[(d(!0),U(L,null,G(n.campaignFormFields,fe=>(d(),b(P,{key:fe.id,title:fe.name,value:fe.id,formField:fe},{default:a(()=>[c(i(fe.name),1)]),_:2},1032,["title","value","formField"]))),128))]),_:1},8,["value","placeholder","onChange","disabled"])]),_:1}),l(A,{xs:24,sm:24,md:5,lg:5,xl:5},{default:a(()=>[l(ve,{value:n.extraFilters.lead_field_value,"onUpdate:value":s[10]||(s[10]=fe=>n.extraFilters.lead_field_value=fe),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.search_value")]),onKeyup:n.setUrlData,disabled:n.searchFieldName==null},null,8,["value","placeholder","onKeyup","disabled"])]),_:1})],64)):D("",!0)]),_:1}),l($,{class:"mt-20"},{default:a(()=>[l(A,{span:24},{default:a(()=>[n.columns&&n.columns.length>0?(d(),U("div",zf,[l(ae,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:fe=>({disabled:!1,name:fe.xid})},columns:n.columns,"row-key":fe=>fe.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:fe,record:Re})=>[fe.dataIndex==="reference_number"?(d(),b(te,{key:0,type:"link",class:"p-0",onClick:Ze=>e.showViewDrawer(Re)},{default:a(()=>[c(i(Re.reference_number!=""&&Re.reference_number!=null?Re.reference_number:"---"),1)]),_:2},1032,["onClick"])):D("",!0),fe.dataIndex==="campaign"?(d(),U(L,{key:1},[c(i(Re.campaign.name),1)],64)):D("",!0),fe.dataIndex==="assign_to"?(d(),U(L,{key:2},[c(i(Re.assign_users?Re.assign_users.name:"-"),1)],64)):D("",!0),fe.dataIndex==="lead_status"&&Re.lead_status?(d(),b(X,{key:3,color:Re.lead_status.color},{default:a(()=>[c(i(Re.lead_status.name),1)]),_:2},1032,["color"])):D("",!0),(d(!0),U(L,null,G(n.allFormFieldNames,Ze=>(d(),U(L,{key:Ze.xid},[fe.dataIndex===n.convertStringToKey(Ze.field_name)?(d(),U(L,{key:0},[c(i(n.findFieldValue(Ze.similar_field_names,Re.lead_data)),1)],64)):D("",!0)],64))),128)),fe.dataIndex==="action"?(d(),U(L,{key:4},[n.isLeadActionValid(Re.campaign.xid)?(d(),b(m,{key:0},{default:a(()=>[n.extraFilters.started=="not_started"&&(n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin"))?(d(),b(oe,{key:0,title:e.$t("lead.assign_users")},{default:a(()=>[l(te,{type:"primary",onClick:Ze=>n.assignUserOption(Re)},{icon:a(()=>[l(j)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):D("",!0),Re.campaign&&Re.x_assign_to==n.user.xid&&Re.campaign.status!="completed"?(d(),b(oe,{key:1,title:e.$t("lead.go_resume_call")},{default:a(()=>[l(te,{type:"primary",onClick:Ze=>n.goAndResumeLead(Re)},{icon:a(()=>[l(k)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):D("",!0),(n.permsArray.includes("leads_delete")||n.permsArray.includes("admin"))&&!Re.started?(d(),b(oe,{key:2,title:e.$t("lead.delete_lead")},{default:a(()=>[l(te,{type:"primary",onClick:Ze=>e.showDeleteConfirm(Re.xid)},{icon:a(()=>[l(se)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):D("",!0),Re.x_assign_to?D("",!0):(d(),b(oe,{key:3,title:e.$t("lead.assign_to")},{default:a(()=>[l(te,{type:"primary",onClick:Ze=>n.assignUserOption(Re)},{icon:a(()=>[l(H)]),_:2},1032,["onClick"])]),_:2},1032,["title"]))]),_:2},1024)):(d(),U("span",Nf,"-"))],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Be,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer,onSetNotesCount:n.setUrlData},null,8,["visible","lead","onClose","onSetNotesCount"]),l(Ie,{visible:n.visibleLeadUphone,data:n.viewLeadUphone,onClose:n.closed,pageTitle:e.$t("lead.lead_uphone_details")},null,8,["visible","data","onClose","pageTitle"]),l(Je,{visible:n.visibleUserOption,onClose:n.closeUserOption,data:n.assignUserData,pageTitle:e.$t("lead.assign_users"),onSetAssignUser:n.setUrlData},null,8,["visible","onClose","data","pageTitle","onSetAssignUser"]),l(xe,{visible:n.visibleMultipleUser,data:n.multipleUserData,keys:e.table.selectedRowKeys,onClose:n.closeMultipleUser,onSetMultiUser:s[11]||(s[11]=fe=>n.setUrlData()),pageTitle:e.$t("lead.assign_users")},null,8,["visible","data","keys","onClose","pageTitle"])],64)}const Hf=Y(qf,[["render",jf]]),Wf={components:{EyeOutlined:aa,PlayCircleOutlined:oa,DownOutlined:Pa,AdminPageHeader:Ce,CallLogTable:Bt},setup(){return{}}};function Yf(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("CallLogTable"),f=o("a-card"),w=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.call_logs"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.leads_calls")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.call_logs")),1)]),_:1})]),_:1})]),_:1}),l(w,null,{default:a(()=>[l(f,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(g,{showAction:!1,showCampaignStatus:!0})]),_:1})]),_:1})],64)}const Gf=Y(Wf,[["render",Yf]]),Jf={components:{EyeOutlined:aa,PlayCircleOutlined:oa,DownOutlined:Pa,AdminPageHeader:Ce,LeadNotesTable:mn},setup(){return{...sa()}}};function Qf(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("LeadNotesTable"),f=o("a-card"),w=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.lead_notes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.leads_calls")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.lead_notes")),1)]),_:1})]),_:1})]),_:1}),l(w,null,{default:a(()=>[l(f,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(g,{logType:"notes",showFormFields:!0,showCampaignStatus:!0,showTableSearch:!0,showLeadDetails:!0,showAddButton:!1,showActionButton:!1})]),_:1})]),_:1})],64)}const Xf=Y(Jf,[["render",Qf]]),Zf=e=>{const{convertStringToKey:s,getCampaignUrl:_,user:n}=Z(),v="lead{id,xid,reference_number,cedula,nombre,apellido1,apellido2,fechaNacimiento,edad,nacionalidad,nombreBase,tel1,email,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name}",y="form-field-names/all",r=`lead-logs?fields=id,xid,log_type,time_taken,next_contact,date_time,user_id,x_user_id,notes,phone,message,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,notes_file,notes_file_url,${v},campaign_id,notes_typification_id_1,x_notes_typification_id_1,notes_typification_id_2,x_notes_typification_id_2,notes_typification_id_3,x_notes_typification_id_3,notes_typification_id_4,x_notes_typification_id_4,notes_typification_name_1,notes_typification_name_2,notes_typification_name_3,notes_typification_name_4,isSale{idVenta,idNota,idLead,user_id,telVenta,estadoVenta,tarjeta,aplicaBeneficiarios,cantidadBeneficiarios,beneficiarios,aplicaBeneficiariosAsist,cantidadBeneficiariosAsist,beneficiariosAsist,montoTotal,calidad},isSale:productos{x_id_producto,idProducto,cantidadProducto,precio},isSale:user{id,xid,name}`,u=I([]),m="lead-logs",p=["lead_id","campaign_id","user_id","notes_typification_id_1","notes_typification_id_2","notes_typification_id_3","notes_typification_id_4"],h="products?fields=id,xid,name,coverage,price,campaign_id,x_campaign_id,product_type,tax_rate,tax_label,image,image_url,internal_code,category_id,x_category_id,categories{id,xid,name},campaigns{id,xid,name}",{t:g}=x(),f={notes:"",notes_file:void 0,notes_file_url:void 0,log_type:"notes",notes_typification_id_1:void 0,notes_typification_id_2:void 0,notes_typification_id_3:void 0,notes_typification_id_4:void 0,is_sale:void 0,phone:"",message:""},w=I([]),k=I([]),C=I([]),S=I([]);return{url:r,addEditUrl:m,initData:f,columns:w,filterableColumns:[],hashableColumns:p,allFormFieldNames:u,allCampaigns:k,allProductos:S,allUsers:C,getPrefetchData:()=>{const $=_(),P=axiosAdmin.get($),T=axiosAdmin.get(y),F=axiosAdmin.get(`all-users?log_type=${e.logType}`),V=axiosAdmin.get(h);return Promise.all([T,P,F,V]).then(([z,K,B,R])=>{u.value=z.data.data,k.value=K.data,C.value=B.data.users,S.value=R.data;var O=[];if(e.showLeadDetails){var O=[{title:`${g("lead.id")} ${g("lead_notes.sale")}`,dataIndex:"is_sale.idVenta"},{title:g("uphone_calls.client_id"),dataIndex:"id"},{title:g("lead.document"),dataIndex:"cedula"},{title:g("lead.campaign"),dataIndex:"campaign"}];e.showFormFields&&Ee(z.data.data,q=>{O.push({title:q.field_name,dataIndex:s(q.field_name)})})}O.push({title:g("common.notes"),dataIndex:"notes",width:(e.showLeadDetails&&e.showFormFields,"40%")}),e.showActionButton&&O.push({title:g("common.action"),dataIndex:"action"}),w.value=O})}}};function Ha(){return{idLead:null,cedula:"",nombre:"",email:"",agente:"",user_id:null,nombreBase:"",tarjeta:"",productos:[],estadoVenta:"Efectiva",telVenta:null,aplicaBeneficiarios:!1,cantidadBeneficiarios:0,beneficiarios:[],aplicaBeneficiariosAsist:!1,cantidadBeneficiariosAsist:0,beneficiariosAsist:[],montoTotal:0}}function $n(){return{idProducto:null,internal_code:null,name:null,coverage:null,price:0,cantidadProducto:0}}const ye=Le({venta:Ha()}),Me=Le({producto:$n()}),xf=ne({props:["soloVer","formData","leadInfo","allProductos","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,ShoppingCartOutlined:Ra,DeleteOutlined:Se,MinusCircleOutlined:Ea,InfoCircleOutlined:ua,LoadingOutlined:ze,SaveOutlined:$e,UploadFile:ut},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{permsArray:y,formatAmountCurrency:r}=Z(),{t:u}=x(),m=I(e.soloVer);var p=JSON.parse(localStorage.getItem("auth_user")||"{}").id;const h=I([]),g="notes-typifications?limit=10000",f=I([]),w=I([]),k=I([]),C=I([]),S=I(!0),E=I(0),A=I(0),$=I([]),P=[{title:u("lead.internal_code"),dataIndex:"internal_code",className:"font-bold"},{title:u("product.name"),dataIndex:"name"},{title:u("product.coverage"),dataIndex:"coverage"},{title:u("product.price"),dataIndex:"price"},{title:u("dashboard.quantity"),dataIndex:"product_quantity"},{title:u("common.action"),dataIndex:"action",fixed:"right"}],T=Le({data:[],pagination:{current:1,pageSize:3,total:0,showSizeChanger:!1},loading:!1,selectedRowKeys:[]}),F=J=>{T.pagination.current=J.current,T.pagination.pageSize=J.pageSize},V=()=>{const J=Me.producto;if(!J.idProducto){Xe.info(u("lead.not_found"));return}const re={xid:J.idProducto,internal_code:J.internal_code,name:J.name,coverage:J.coverage,price:J.price,product_quantity:J.cantidadProducto};T.data=[...T.data,re],T.pagination.total=T.data.length;const qe=parseFloat(ye.venta.montoTotal)||0,Q=parseFloat(J.price)*parseFloat(J.cantidadProducto);ye.venta.montoTotal=Number((qe+Q).toFixed(2)),Object.assign(Me.producto,$n())};function z(J){const re=T.data.find(qe=>qe.xid===J);re&&(ye.venta.montoTotal-=re.price*re.product_quantity),T.data=T.data.filter(qe=>qe.xid!==J),T.pagination.total=T.data.length}ie(()=>{axiosAdmin.get(g).then(J=>{h.value=J.data,K()})});function K(){f.value=[],h.value.forEach(J=>{J.x_parent_id==null&&f.value.push(J)})}function B(J){w.value=[],k.value=[],C.value=[],h.value.forEach(re=>{re.x_parent_id===J&&w.value.push(re)})}function R(J){k.value=[],C.value=[],h.value.forEach(re=>{re.x_parent_id===J&&k.value.push(re)})}function O(J){C.value=[],h.value.forEach(re=>{re.x_parent_id===J&&C.value.push(re)})}const W=I(!1),q=I(!1),N=I(!1),j=_e(()=>Me.producto.internal_code?e.allProductos.filter(J=>J.internal_code===Me.producto.internal_code):e.allProductos),te=_e(()=>Me.producto.name?e.allProductos.filter(J=>J.name===Me.producto.name):e.allProductos),le=_e(()=>{let J=e.allProductos;return Me.producto.internal_code&&(J=J.filter(re=>re.internal_code===Me.producto.internal_code)),Me.producto.name&&(J=J.filter(re=>re.name===Me.producto.name)),J}),ue=_e(()=>le.value.filter(J=>J.coverage===Me.producto.coverage)),ee=_e(()=>[...new Set(te.value.map(J=>J.internal_code))]),ve=_e(()=>[...new Set(j.value.map(J=>J.name))]),X=_e(()=>[...new Set(le.value.map(J=>J.coverage))]),oe=_e(()=>le.value.find(J=>J.coverage===Me.producto.coverage)||{});he(()=>Me.producto.internal_code,J=>{S.value||(J&&!ve.value.includes(Me.producto.name)&&(Me.producto.name=null),Me.producto.coverage=null,Me.producto.price=0)}),he(()=>Me.producto.name,J=>{S.value||(J&&!ee.value.includes(Me.producto.internal_code)&&(Me.producto.internal_code=null),Me.producto.coverage=null)}),he(()=>Me.producto.coverage,J=>{if(S.value)return;const re=oe.value.price||0;Me.producto.price=re,Me.producto.cantidadProducto=J?e.addEditType==="edit"?Me.producto.cantidadProducto:1:0}),he(()=>Me.producto.price,J=>{S.value||(J?Me.producto.cantidadProducto=1:Me.producto.cantidadProducto=0)},{immediate:!0}),he(ue,J=>{if(!S.value&&J.length>=1){const re=J[0];Me.producto.idProducto=re.xid,Me.producto.price=re.price}},{immediate:!0}),he(()=>e.visible,async J=>{var re,qe,Q;if(ye.venta=Ha(),W.value=!1,K(),w.value=[],k.value=[],C.value=[],J&&e.addEditType==="edit")if(S.value=!0,e.formData.notes_typification_id_1!=null&&B(e.formData.notes_typification_id_1),e.formData.notes_typification_id_2!=null&&R(e.formData.notes_typification_id_2),e.formData.notes_typification_id_3!=null&&O(e.formData.notes_typification_id_3),axiosAdmin.get(`campaigns/${e.data.lead.campaign.xid}/users`).then(me=>{$.value=me}),ye.venta=(W.value=!!e.formData.is_sale)?{...e.formData.is_sale}:Ha(),T.data=ye.venta.productos.map(me=>{const Te=e.allProductos.find(We=>We.xid===me.x_id_producto);return{xid:me.x_id_producto,internal_code:(Te==null?void 0:Te.internal_code)??"",name:(Te==null?void 0:Te.name)??"",coverage:(Te==null?void 0:Te.coverage)??"",price:(me==null?void 0:me.precio)??0,product_quantity:(me==null?void 0:me.cantidadProducto)??0}}),e.formData.is_sale&&(e.formData.is_sale.aplicaBeneficiarios||e.formData.is_sale.aplicaBeneficiariosAsist)){q.value=!!e.formData.is_sale.aplicaBeneficiarios,N.value=!!e.formData.is_sale.aplicaBeneficiariosAsist;let me=e.formData.is_sale.beneficiarios||"[]",Te=e.formData.is_sale.beneficiariosAsist||"[]",We,Ye;try{We=JSON.parse(me),Ye=JSON.parse(Te)}catch{We=[],Ye=[]}ye.venta.beneficiarios=We,ye.venta.beneficiariosAsist=Ye,E.value=ye.venta.beneficiarios.reduce((Ge,ge)=>Ge+Number(ge.porcentaje||0),0),A.value=ye.venta.beneficiariosAsist.reduce((Ge,ge)=>Ge+Number(ge.porcentaje||0),0)}else E.value=0,A.value=0,q.value=!1,N.value=!1,ye.venta.beneficiarios=[],ye.venta.beneficiariosAsist=[];else E.value=0,A.value=0;Object.assign(ye.venta,e.addEditType==="add"?Ha():{},{idLead:e.leadInfo?e.leadInfo.id:e.data.lead.id,cedula:e.leadInfo?e.leadInfo.cedula:e.data.lead.cedula,nombre:e.leadInfo?`${e.leadInfo.nombre} ${e.leadInfo.apellido1} ${e.leadInfo.apellido2}`:`${e.data.lead.nombre} ${e.data.lead.apellido1} ${e.data.lead.apellido2}`,email:e.leadInfo?e.leadInfo.email:e.data.lead.email,agente:e.addEditType==="edit"?((re=e.data.user)==null?void 0:re.name)??"":e.leadInfo.assign_to&&e.leadInfo.assign_to.name?e.leadInfo.assign_to.name:"",user_id:e.leadInfo?e.leadInfo.assign_to&&e.leadInfo.assign_to.id?e.leadInfo.assign_to.id:p:ye.venta.user_id,nombreBase:e.leadInfo?e.leadInfo.nombreBase:e.data.lead.nombreBase,tarjeta:e.addEditType==="edit"?((qe=e.formData.is_sale)==null?void 0:qe.tarjeta)??"":e.leadInfo.tarjeta,telVenta:e.addEditType==="edit"?((Q=e.formData.is_sale)==null?void 0:Q.telVenta)??null:null}),await at(),S.value=!1});const se=I(),H=Le({telVenta:[{required:!0,message:u("lead.phone")}],tarjeta:[{required:!0,message:u("lead.card")}],beneficiarios:[]});he(()=>ye.venta.cantidadBeneficiarios,J=>{if(!S.value)for(ye.venta.beneficiarios.splice(J),ye.venta.cantidadBeneficiarios===0&&(q.value=!1);ye.venta.beneficiarios.length<J;)ye.venta.beneficiarios.push({nombre:"",porcentaje:0})},{immediate:!0}),he(()=>ye.venta.cantidadBeneficiariosAsist,J=>{if(!S.value)for(ye.venta.beneficiariosAsist.splice(J),ye.venta.cantidadBeneficiariosAsist===0&&(N.value=!1);ye.venta.beneficiariosAsist.length<J;)ye.venta.beneficiariosAsist.push({nombre:"",porcentaje:0})},{immediate:!0});const ae=()=>{ye.venta.cantidadBeneficiarios++},ce=J=>{E.value=Math.max(0,E.value-(Number(ye.venta.beneficiarios[J].porcentaje)||0)),ye.venta.beneficiarios.splice(J,1),ye.venta.cantidadBeneficiarios=ye.venta.beneficiarios.length,e.addEditType==="edit"||e.formData.is_sale?Ie(J):ye.venta.cantidadBeneficiarios===0&&(q.value=!1)},Ae=()=>{ye.venta.cantidadBeneficiariosAsist++},Be=J=>{A.value=Math.max(0,A.value-(Number(ye.venta.beneficiariosAsist[J].porcentaje)||0)),ye.venta.beneficiariosAsist.splice(J,1),ye.venta.cantidadBeneficiariosAsist=ye.venta.beneficiariosAsist.length,e.addEditType==="edit"||e.formData.is_sale?Je(J):ye.venta.cantidadBeneficiariosAsist===0&&(N.value=!1)},Ie=J=>{const re=JSON.parse(e.formData.is_sale.beneficiarios||"[]");re.splice(J,1),e.formData.is_sale.beneficiarios=JSON.stringify(re)},Je=J=>{const re=JSON.parse(e.formData.is_sale.beneficiariosAsist||"[]");re.splice(J,1),e.formData.is_sale.beneficiariosAsist=JSON.stringify(re)},xe=()=>{ye.venta=Ha()},fe=async()=>{var J;try{if(e.formData.isSale=W.value?1:0,e.formData.campaign_id=e.data.lead.campaign.id,(J=e.formData).lead_id||(J.lead_id=e.leadInfo.xid),W.value){if(await se.value.validate(),W.value&&T.data.length===0){Xe.info(u("common.minimum_product"));return}_({url:e.url,data:e.formData,successMessage:null,success:re=>{ye.venta.idNota=re.xid,ye.venta.accion=e.addEditType,ye.venta.aplicaBeneficiarios=q.value,ye.venta.beneficiarios=q?JSON.stringify(ye.venta.beneficiarios):{},ye.venta.aplicaBeneficiariosAsist=N.value,ye.venta.beneficiariosAsist=N?JSON.stringify(ye.venta.beneficiariosAsist):{},ye.venta.productos=JSON.stringify(T.data),T.data=[],_({url:"ventas/save",data:ye.venta,successMessage:e.successMessage,success:()=>{}}),s("onAddEditSuccess"),s("addEditSuccess",re.xid),xe()}})}else _({url:e.url,data:e.formData,successMessage:e.successMessage,success:re=>{s("onAddEditSuccess"),s("addEditSuccess",re.xid),xe()}})}catch(re){console.log("Errores de validación:",re)}},Re=()=>{xe(),v.value={},s("closed")},Ze=(J,re)=>{const qe=ye.venta.beneficiarios.reduce((me,Te,We)=>We!==J?me+Number(Te.porcentaje||0):me,0),Q=100-qe;re>Q?(ye.venta.beneficiarios[J].porcentaje=Q,E.value=100):E.value=qe+re},Ca=(J,re)=>{const qe=ye.venta.beneficiariosAsist.reduce((me,Te,We)=>We!==J?me+Number(Te.porcentaje||0):me,0),Q=100-qe;re>Q?(ye.venta.beneficiariosAsist[J].porcentaje=Q,A.value=100):A.value=qe+re},ma=I(window.innerWidth),wa=()=>{ma.value=window.innerWidth};ie(()=>window.addEventListener("resize",wa)),it(()=>window.removeEventListener("resize",wa));const ca=_e(()=>ma.value<=991?"90%":W.value?"86%":"50%");return{agenteCampana:$,drawerWidth:ca,removeProducto:z,datosProducto:Me,addProducto:V,table:T,columns:P,validarSumaMaxima:Ze,validarSumaMaximaAsist:Ca,suma:E,sumaAsist:A,soloVer:m,datos:ye,isSale:W,esBeneficiario:q,esBeneficiarioAsist:N,loading:n,rules:v,internalCodeOptions:ee,productNameOptions:ve,coverageOptions:X,matchingProducts:ue,formatAmountCurrency:r,notesTypifications:h,parentTypificationData:f,childrenTypificationData:w,childrenChildData:k,lastChildrenChildData:C,getChildTypification:B,getChildrenChildTypification:R,getLastChildrenChildTypification:O,formRef:se,validationRules:H,addUser:ae,addUserAsis:Ae,removeUser:ce,removeUserAsis:Be,onSubmit:fe,onClose:Re,permsArray:y,handleTableChange:F}}}),eg={class:"label-bold",style:{display:"flex","align-items":"center",gap:"12px"}},ag={class:"side-panel",style:{display:"flex","align-items":"flex-start",gap:"12px"}},tg={class:"d-flex"},lg={class:"d-flex"},ng={class:"d-flex"},og={class:"table-responsive"},sg={class:"text-center"},dg={class:"text-center",style:{padding:"1%"}};function ig(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("a-form-item"),p=o("a-col"),h=o("a-textarea"),g=o("UploadFile"),f=o("a-checkbox"),w=o("a-row"),k=o("a-input"),C=o("a-input-number"),S=o("ShoppingCartOutlined"),E=o("a-button"),A=o("DeleteOutlined"),$=o("a-tooltip"),P=o("a-table"),T=o("MinusCircleOutlined"),F=o("a-space"),V=o("InfoCircleOutlined"),z=o("PlusOutlined"),K=o("a-form"),B=o("SaveOutlined"),R=o("a-drawer");return d(),b(R,{width:e.drawerWidth,open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[M("div",dg,[(e.permsArray.includes("admin")||e.permsArray.includes("sales_edit"))&&!e.soloVer?(d(),b(E,{style:{"margin-right":"5px"},key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{default:a(()=>[l(B),c(" "+i(e.$t("common.update")),1)]),_:1},8,["loading","onClick"])):D("",!0),l(E,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])])]),default:a(()=>[l(K,{layout:"vertical",ref:"formRef",model:e.datos.venta,rules:e.isSale?e.validationRules:null},{default:a(()=>[l(w,{gutter:[16,16]},{default:a(()=>[l(p,{xs:24,sm:24,md:e.isSale?5:24,lg:e.isSale?5:24},{default:a(()=>[l(w,{gutter:[16,16]},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"required label-bold",label:e.$t("lead_notes.notes_typification_1"),name:"notes_typification_id_1",help:e.rules.notes_typification_id_1?e.rules.notes_typification_id_1.message:null,validateStatus:e.rules.notes_typification_id_1?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_1,"onUpdate:value":s[0]||(s[0]=O=>e.formData.notes_typification_id_1=O),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_1")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[1]||(s[1]=()=>{e.formData.notes_typification_id_2=void 0,e.formData.notes_typification_id_3=void 0,e.formData.notes_typification_id_4=void 0,e.getChildTypification(e.formData.notes_typification_id_1)})},{default:a(()=>[(d(!0),U(L,null,G(e.parentTypificationData,O=>(d(),b(r,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.childrenTypificationData.length>0?(d(),b(p,{key:0,class:"required label-bold",xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead_notes.notes_typification_2"),name:"notes_typification_id_2",help:e.rules.notes_typification_id_2?e.rules.notes_typification_id_2.message:null,validateStatus:e.rules.notes_typification_id_2?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_2,"onUpdate:value":s[2]||(s[2]=O=>e.formData.notes_typification_id_2=O),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_2")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[3]||(s[3]=()=>{e.formData.notes_typification_id_3=void 0,e.formData.notes_typification_id_4=void 0,e.getChildrenChildTypification(e.formData.notes_typification_id_2)})},{default:a(()=>[(d(!0),U(L,null,G(e.childrenTypificationData,O=>(d(),b(r,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),e.childrenChildData.length>0?(d(),b(p,{key:1,class:"required label-bold",xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead_notes.notes_typification_3"),name:"notes_typification_id_3",help:e.rules.notes_typification_id_3?e.rules.notes_typification_id_3.message:null,validateStatus:e.rules.notes_typification_id_3?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_3,"onUpdate:value":s[4]||(s[4]=O=>e.formData.notes_typification_id_3=O),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_3")]),optionFilterProp:"title","show-search":"",allowClear:!0,onChange:s[5]||(s[5]=()=>{e.formData.notes_typification_id_4=void 0,e.getLastChildrenChildTypification(e.formData.notes_typification_id_3)})},{default:a(()=>[(d(!0),U(L,null,G(e.childrenChildData,O=>(d(),b(r,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),e.lastChildrenChildData.length>0?(d(),b(p,{key:2,class:"required label-bold",xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead_notes.notes_typification_4"),name:"notes_typification_id_4",help:e.rules.notes_typification_id_4?e.rules.notes_typification_id_4.message:null,validateStatus:e.rules.notes_typification_id_4?"error":null},{default:a(()=>[l(u,{value:e.formData.notes_typification_id_4,"onUpdate:value":s[6]||(s[6]=O=>e.formData.notes_typification_id_4=O),placeholder:e.$t("common.select_default_text",[e.$t("lead_notes.notes_typification_4")]),optionFilterProp:"title","show-search":"",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.lastChildrenChildData,O=>(d(),b(r,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"label-bold"},{default:a(()=>[l(h,{value:e.formData.notes,"onUpdate:value":s[7]||(s[7]=O=>e.formData.notes=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4,maxlength:2e3},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead_notes.notes_file")},{default:a(()=>[M("div",eg,[l(g,{acceptFormat:"image/*,.pdf",formData:e.formData,folder:"leadNotes",uploadField:"notes_file",onOnFileUploaded:s[8]||(s[8]=O=>{e.formData.notes_file=O.file,e.formData.notes_file_url=O.file_url})},null,8,["acceptFormat","formData"]),l(f,{disabled:e.addEditType=="edit",checked:e.isSale,"onUpdate:checked":s[9]||(s[9]=O=>e.isSale=O)},{default:a(()=>[M("strong",null,i(e.$t("lead_notes.sale")),1)]),_:1},8,["disabled","checked"])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["md","lg"]),e.isSale?(d(),b(p,{key:0,xs:24,sm:24,md:19,lg:19},{default:a(()=>[M("div",ag,[l(p,{xs:16,sm:16,md:e.esBeneficiario||e.esBeneficiarioAsist?6:8,lg:e.esBeneficiario||e.esBeneficiarioAsist?6:8},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.id")},{default:a(()=>[l(k,{value:e.datos.venta.idLead},null,8,["value"])]),_:1},8,["label"]),l(m,{label:e.$t("common.status")},{default:a(()=>[l(u,{value:e.datos.venta.estadoVenta,"onUpdate:value":s[10]||(s[10]=O=>e.datos.venta.estadoVenta=O),placeholder:e.$t("common.select_default_text",[e.$t("common.status")]),allowClear:!0,"show-search":""},{default:a(()=>[l(r,{key:"Efectiva",value:"Efectiva"},{default:a(()=>[c(i(e.$t("lead_notes.effective")),1)]),_:1}),l(r,{key:"Cancelada",value:"Cancelada"},{default:a(()=>[c(i(e.$t("lead_notes.canceled")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.document")},{default:a(()=>[l(k,{value:e.datos.venta.cedula},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.name")},{default:a(()=>[l(k,{value:e.datos.venta.nombre},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.email")},{default:a(()=>[l(k,{value:e.datos.venta.email},null,8,["value"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{label:e.$t("lead.agent")},{default:a(()=>[e.soloVer?(d(),b(k,{key:0,value:e.datos.venta.agente},null,8,["value"])):(d(),b(u,{key:1,value:e.datos.venta.user_id,"onUpdate:value":s[11]||(s[11]=O=>e.datos.venta.user_id=O),"show-search":"","option-filter-prop":"title",allowClear:!0,placeholder:e.$t("common.select_default_text",[e.$t("lead.agent")]),style:{width:"100%"}},{default:a(()=>[(d(!0),U(L,null,G(e.agenteCampana,O=>(d(),b(r,{title:O.name,key:O,value:O.id},{default:a(()=>[c(i(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]))]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e.leadInfo?(d(),b(m,{key:0,class:"label-bold",name:"telVenta",label:e.$t("lead.phone")},{default:a(()=>[l(u,{value:e.datos.venta.telVenta,"onUpdate:value":s[12]||(s[12]=O=>e.datos.venta.telVenta=O),placeholder:e.$t("common.select_default_text",[e.$t("lead.phone")]),style:{width:"100%"}},{default:a(()=>[(d(!0),U(L,null,G([e.leadInfo.tel1,e.leadInfo.tel2,e.leadInfo.tel3,e.leadInfo.tel4,e.leadInfo.tel5,e.leadInfo.tel6].filter(O=>O),O=>(d(),b(r,{key:O,value:O},{default:a(()=>[c(i(O),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])):(d(),b(m,{key:1,class:"label-bold",name:"telVenta",label:e.$t("lead.phone")},{default:a(()=>[l(m,null,{default:a(()=>[l(k,{value:e.datos.venta.telVenta},null,8,["value"])]),_:1})]),_:1},8,["label"]))]),_:1}),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,{class:"label-bold",name:"tarjeta",label:e.$t("lead.card")},{default:a(()=>[l(k,{value:e.datos.venta.tarjeta,"onUpdate:value":s[13]||(s[13]=O=>e.datos.venta.tarjeta=O)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["md","lg"]),l(p,{xs:16,sm:16,style:{"border-left":"1px solid #f0f0f0"},md:e.esBeneficiario||e.esBeneficiarioAsist?11:16,lg:e.esBeneficiario||e.esBeneficiarioAsist?11:16},{default:a(()=>[M("div",tg,[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"internal_code",label:e.$t("lead.internal_code")},{default:a(()=>[l(u,{value:e.datosProducto.producto.internal_code,"onUpdate:value":s[14]||(s[14]=O=>e.datosProducto.producto.internal_code=O),placeholder:e.$t("common.select_default_text",[e.$t("lead.internal_code")]),style:{width:"100%"},"show-search":"","option-filter-prop":"title",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.internalCodeOptions,O=>(d(),b(r,{title:O,key:O,value:O},{default:a(()=>[c(i(O),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"producto",label:e.$t("lead.product")},{default:a(()=>[l(u,{value:e.datosProducto.producto.name,"onUpdate:value":s[15]||(s[15]=O=>e.datosProducto.producto.name=O),placeholder:e.$t("common.select_default_text",[e.$t("lead.product")]),style:{width:"100%"},"show-search":"","option-filter-prop":"title",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.productNameOptions,O=>(d(),b(r,{title:O,key:O,value:O},{default:a(()=>[c(i(O),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),M("div",lg,[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"coverage",label:e.$t("lead.coverage")},{default:a(()=>[l(u,{value:e.datosProducto.producto.coverage,"onUpdate:value":s[16]||(s[16]=O=>e.datosProducto.producto.coverage=O),placeholder:e.$t("common.select_default_text",[e.$t("lead.coverage")]),style:{width:"100%"},disabled:!e.datosProducto.producto.internal_code||!e.datosProducto.producto.name,"show-search":"","option-filter-prop":"title",allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(e.coverageOptions,O=>(d(),b(r,{title:O,key:O,value:O},{default:a(()=>[c(i(O),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"product_quantity",label:e.$t("lead.product_quantity")},{default:a(()=>[l(C,{min:1,value:e.datosProducto.producto.cantidadProducto,"onUpdate:value":s[17]||(s[17]=O=>e.datosProducto.producto.cantidadProducto=O),disabled:!e.datosProducto.producto.price,style:{width:"100%"}},null,8,["value","disabled"])]),_:1},8,["label"])]),_:1})]),M("div",ng,[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",name:"precio",label:e.$t("lead.price")},{default:a(()=>[e.matchingProducts.length>1?(d(),b(u,{key:0,value:e.datosProducto.producto.price,"onUpdate:value":s[18]||(s[18]=O=>e.datosProducto.producto.price=O),placeholder:e.$t("common.select_default_text",[e.$t("lead.price")]),style:{width:"100%"},"show-search":"","option-filter-prop":"title",allowClear:""},{default:a(()=>[(d(!0),U(L,null,G(e.matchingProducts,O=>(d(),b(r,{key:O.xid,value:O.price,title:e.formatAmountCurrency(O.price)},{default:a(()=>[c(i(e.formatAmountCurrency(O.price)),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])):e.matchingProducts.length===1?(d(),b(C,{key:1,value:e.formatAmountCurrency(e.datosProducto.producto.price),disabled:"",style:{width:"100%"}},null,8,["value"])):(d(),b(C,{key:2,value:e.formatAmountCurrency(e.datosProducto.producto.price),disabled:"",style:{width:"100%"}},null,8,["value"]))]),_:1},8,["label"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("common.action")},{default:a(()=>[l(E,{disabled:!e.datosProducto.producto.price,type:"primary",block:"",onClick:e.addProducto},{default:a(()=>[l(S),c(" "+i(e.$t("common.add"))+" "+i(e.$t("common.product")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["label"])]),_:1})]),M("div",og,[l(P,{columns:e.columns,"data-source":e.table.data,pagination:e.table.pagination,onChange:e.handleTableChange,scroll:e.scrollStyle,size:"small"},{bodyCell:a(({column:O,record:W})=>[O.dataIndex==="price"?(d(),U(L,{key:0},[c(i(e.formatAmountCurrency(W.price)),1)],64)):D("",!0),O.dataIndex==="action"?(d(),b($,{key:1,title:e.$t("common.delete")},{default:a(()=>[l(E,{type:"primary",danger:"",onClick:q=>e.removeProducto(W.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(A)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):D("",!0)]),footer:a(()=>[M("div",sg,[M("strong",null,i(e.$t("lead.total_amount"))+" : "+i(e.formatAmountCurrency(e.datos.venta.montoTotal)),1)])]),_:1},8,["columns","data-source","pagination","onChange","scroll"])]),l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(w,{gutter:"12",style:{width:"100%"}},{default:a(()=>[l(p,{span:12},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.beneficiaries")},{default:a(()=>[l(f,{checked:e.esBeneficiario,"onUpdate:checked":s[19]||(s[19]=O=>e.esBeneficiario=O)},null,8,["checked"])]),_:1},8,["label"])]),_:1}),l(p,{span:12,style:{"text-align":"right"}},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.number_beneficiaries")},{default:a(()=>[l(C,{style:{width:"120px"},disabled:e.esBeneficiario===!1,min:0,max:5,value:e.datos.venta.cantidadBeneficiarios,"onUpdate:value":s[20]||(s[20]=O=>e.datos.venta.cantidadBeneficiarios=O)},null,8,["disabled","value"])]),_:1},8,["label"])]),_:1})]),_:1}),l(w,{gutter:"12",style:{width:"100%"}},{default:a(()=>[l(p,{span:12},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.beneficiaries_asist")},{default:a(()=>[l(f,{checked:e.esBeneficiarioAsist,"onUpdate:checked":s[21]||(s[21]=O=>e.esBeneficiarioAsist=O)},null,8,["checked"])]),_:1},8,["label"])]),_:1}),l(p,{span:12,style:{"text-align":"right"}},{default:a(()=>[l(m,{class:"label-bold",label:e.$t("lead.number_beneficiaries")},{default:a(()=>[l(C,{style:{width:"120px"},disabled:e.esBeneficiarioAsist===!1,min:0,max:5,value:e.datos.venta.cantidadBeneficiariosAsist,"onUpdate:value":s[22]||(s[22]=O=>e.datos.venta.cantidadBeneficiariosAsist=O)},null,8,["disabled","value"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["md","lg"]),e.esBeneficiario||e.esBeneficiarioAsist?(d(),b(p,{key:0,style:{"border-left":"1px solid #f0f0f0"},xs:16,sm:16,md:7,lg:7},{default:a(()=>[e.esBeneficiario?(d(),b(m,{key:0,class:"label-bold",style:{"justify-content":"center"},label:e.$t("lead.beneficiary_information")},{default:a(()=>[(d(!0),U(L,null,G(e.datos.venta.beneficiarios,(O,W)=>(d(),b(F,{key:W,style:{display:"flex","align-items":"center"}},{default:a(()=>[l(m,{name:["beneficiarios",W,"nombre"],rules:[{required:!0,message:e.$t("lead.name")}]},{default:a(()=>[l(k,{value:O.nombre,"onUpdate:value":q=>O.nombre=q,placeholder:e.$t("lead.name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,{name:["beneficiarios",W,"porcentaje"],rules:[{required:!0,type:"number",message:e.$t("uphone_calls.number")}]},{default:a(()=>[l(C,{onChange:q=>e.validarSumaMaxima(W,q),value:O.porcentaje,"onUpdate:value":q=>O.porcentaje=q,min:0,max:100,precision:0,step:1,placeholder:e.$t("lead.percentage")},null,8,["onChange","value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,null,{default:a(()=>[l(T,{onClick:q=>e.removeUser(W)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(m,{class:"text-center"},{default:a(()=>[M("h4",{style:we({color:e.suma>100?"red":"inherit",fontWeight:"bold"})},[l($,{style:we({color:e.suma>100?"red":"inherit"}),title:e.$t("message_template.maximum_percentage_exceded")},{default:a(()=>[l(V)]),_:1},8,["style","title"]),c(" "+i(e.$t("common.total"))+": "+i(e.suma),1)],4)]),_:1}),l(m,null,{default:a(()=>[l(E,{disabled:e.datos.venta.cantidadBeneficiarios===5||e.suma>=100,type:"dashed",block:"",onClick:e.addUser},{default:a(()=>[l(z),c(" "+i(e.$t("common.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["label"])):D("",!0),e.esBeneficiarioAsist?(d(),b(m,{key:1,class:"label-bold",style:{"justify-content":"center","border-top":"1px solid #f0f0f0"},label:e.$t("lead.beneficiary_asist_information")},{default:a(()=>[(d(!0),U(L,null,G(e.datos.venta.beneficiariosAsist,(O,W)=>(d(),b(F,{key:W,style:{display:"flex","align-items":"center"}},{default:a(()=>[l(m,{name:["beneficiariosAsist",W,"nombre"],rules:[{required:!0,message:e.$t("lead.name")}]},{default:a(()=>[l(k,{value:O.nombre,"onUpdate:value":q=>O.nombre=q,placeholder:e.$t("lead.name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,{name:["beneficiariosAsist",W,"porcentaje"],rules:[{required:!0,type:"number",message:e.$t("uphone_calls.number")}]},{default:a(()=>[l(C,{onChange:q=>e.validarSumaMaximaAsist(W,q),value:O.porcentaje,"onUpdate:value":q=>O.porcentaje=q,min:0,max:100,precision:0,step:1,placeholder:e.$t("lead.percentage")},null,8,["onChange","value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"]),l(m,null,{default:a(()=>[l(T,{onClick:q=>e.removeUserAsis(W)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(m,{class:"text-center"},{default:a(()=>[M("h4",{style:we({color:e.sumaAsist>100?"red":"inherit",fontWeight:"bold"})},[l($,{style:we({color:e.sumaAsist>100?"red":"inherit"}),title:e.$t("message_template.maximum_percentage_exceded")},{default:a(()=>[l(V)]),_:1},8,["style","title"]),c(" "+i(e.$t("common.total"))+": "+i(e.sumaAsist),1)],4)]),_:1}),l(m,null,{default:a(()=>[l(E,{disabled:e.datos.venta.cantidadBeneficiariosAsist===5||e.sumaAsist>=100,type:"dashed",block:"",onClick:e.addUserAsis},{default:a(()=>[l(z),c(" "+i(e.$t("common.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["label"])):D("",!0)]),_:1})):D("",!0)])]),_:1})):D("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["width","open","title","onOk"])}const rg=Y(xf,[["render",ig]]),ug={props:{pageName:{default:"index"},soloVer:{type:Boolean,default:!0},leadId:{default:void 0},idNota:{default:void 0},soloUna:{default:!1},managing:{default:void 0},leadInfo:{default:void 0},logType:{default:"notes"},scrollStyle:{default:{}},showCampaignStatus:{default:!1},showTableSearch:{default:!1},showUserFilter:{default:!1},showDateFilter:{default:!0},showAddButton:{default:!1},showActionButton:{default:!0},showFormFields:{default:!1},showLeadDetails:{default:!1}},emits:["success"],components:{PlusOutlined:de,EditOutlined:Oe,EyeOutlined:aa,DeleteOutlined:Se,PlayCircleOutlined:oa,StopOutlined:Oa,DownloadOutlined:ga,AddEdit:rg,DateRangePicker:qa},setup(e,{emit:s}){const{permsArray:_,appSetting:n,user:v,formatDateTime:y,convertStringToKey:r,getCampaignUrl:u}=Z(),{url:m,addEditUrl:p,initData:h,columns:g,filterableColumns:f,allFormFieldNames:w,hashableColumns:k,allCampaigns:C,allUsers:S,getPrefetchData:E,allProductos:A}=Zf(e),$=Fe(),P=I({}),T=sa(),F=I({page_name:e.pageName,log_type:e.logType,campaign_id:void 0,campaign_status:"active",lead_id:e.leadId,leadInfo:e.leadInfo,dates:[]}),V=I({log_type:e.logType,...e.soloVer?{}:{isSale:1},user_id:void 0});ie(()=>{E().then(O=>{P.value=e.leadInfo,$.crudUrl.value=p,$.langKey.value="notes",$.initData.value={...h,lead_id:e.leadId},$.formData.value={...h,lead_id:e.leadId},$.hashableColumns.value=[...k],$.hashable.value=[...k],z()})});const z=()=>{$.hashableColumns.value=[...k],$.tableUrl.value={url:m,filters:V,extraFilters:F},$.table.filterableColumns=f,$.table.pagination={...$.table.pagination,current:1},$.fetch({page:1}),s("updateNotesCount")},K=(O,W)=>{var q="-";return Ee(W,N=>{O.includes(N.field_name)&&(q=N.field_value)}),q},B=O=>{$.addEditSuccess(O),s("success")},R=O=>{F.value={...F.value,campaign_id:void 0};const W=u(F.value.campaign_status),q=axiosAdmin.get(W);Promise.all([q]).then(([N])=>{C.value=N.data,z()})};return he(()=>e.idNota,O=>{e.soloUna?V.value["lead_logs.id"]=O:V.value["lead_logs.id"]=void 0},{immediate:!0}),he(()=>e.leadId,O=>{O?(P.value=e.leadInfo,F.value.lead_id=O,F.value.id=e.idNota,$.formData.value={...h,lead_id:e.leadId},E(),z()):(P.value={},$.table.data=[],$.table.pagination.current=1,s("update:leadId",null))},{immediate:!0}),{permsArray:_,appSetting:n,columns:g,...$,...T,filterableColumns:f,user:v,formatDateTime:y,allFormFieldNames:w,findFieldValue:K,convertStringToKey:r,onAddEditSuccess:B,allCampaigns:C,allProductos:A,allUsers:S,filters:V,extraFilters:F,setUrlData:z,campaignTypeChanged:R}}},mg={class:"table-responsive lead-notes-table"},cg={key:1},pg={style:{"text-align":"justify"}},_g={key:0};function fg(e,s,_,n,v,y){const r=o("AddEdit"),u=o("PlayCircleOutlined"),m=o("a-tab-pane"),p=o("StopOutlined"),h=o("a-tabs"),g=o("a-col"),f=o("a-row"),w=o("PlusOutlined"),k=o("a-button"),C=o("a-select-option"),S=o("a-select"),E=o("DateRangePicker"),A=o("a-avatar"),$=o("a-typography-paragraph"),P=o("a-comment"),T=o("DownloadOutlined"),F=o("a-tag"),V=o("a-typography-link"),z=o("EditOutlined"),K=o("EyeOutlined"),B=o("DeleteOutlined"),R=o("a-space"),O=o("a-table"),W=o("view-lead-details");return d(),U(L,null,[l(r,{soloVer:_.soloVer,addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.onAddEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,leadInfo:_.leadInfo,allProductos:n.allProductos,data:e.viewData,pageTitle:_.soloVer?e.$t("common.details")+" "+e.$t("lead_notes.sale"):e.$t("common.edit")+" "+e.$t("lead_notes.sale"),successMessage:e.successMessage},null,8,["soloVer","addEditType","visible","url","onAddEditSuccess","onClosed","formData","leadInfo","allProductos","data","pageTitle","successMessage"]),_.showCampaignStatus?(d(),b(f,{key:0},{default:a(()=>[l(g,{span:24},{default:a(()=>[l(h,{activeKey:n.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=q=>n.extraFilters.campaign_status=q),onChange:n.campaignTypeChanged},{default:a(()=>[l(m,{key:"active"},{tab:a(()=>[M("span",null,[l(u),c(" "+i(e.$t("campaign.active_campaign")),1)])]),_:1}),n.permsArray.includes("view_completed_campaigns")||n.permsArray.includes("admin")?(d(),b(m,{key:"completed"},{tab:a(()=>[M("span",null,[l(p),c(" "+i(e.$t("campaign.completed_campaign")),1)])]),_:1})):D("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):D("",!0),_.showAddButton||_.showTableSearch||_.showDateFilter||_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(f,{key:1,gutter:[15,15],class:"mb-20"},{default:a(()=>[_.showAddButton?(d(),b(g,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(k,{type:"primary",disabled:_.managing===!1,onClick:e.addItem,block:""},{default:a(()=>[l(w),c(" "+i(e.$t("notes.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})):D("",!0),_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(S,{value:n.filters.user_id,"onUpdate:value":s[1]||(s[1]=q=>n.filters.user_id=q),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allUsers,q=>(d(),b(C,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[c(i(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),_.showDateFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:2,xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[l(E,{onDateTimeChanged:s[2]||(s[2]=q=>{n.extraFilters.dates=q,n.setUrlData()})})]),_:1})):D("",!0)]),_:1})):D("",!0),l(f,{class:"mt-20"},{default:a(()=>[l(g,{span:24},{default:a(()=>[M("div",mg,[l(O,{columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,onChange:e.handleTableChange,scroll:_.scrollStyle},{bodyCell:a(({column:q,record:N})=>[q.dataIndex==="is_sale.idVenta"?(d(),U(L,{key:0},[c(i(N.is_sale&&N.is_sale.idVenta?N.is_sale.idVenta:"-"),1)],64)):D("",!0),q.dataIndex==="id"?(d(),U(L,{key:1},[c(i(N.lead&&N.lead.id!=""&&N.lead.id!=null?N.lead.id:"---"),1)],64)):D("",!0),q.dataIndex==="cedula"?(d(),U(L,{key:2},[_.showLeadDetails?(d(),b(k,{key:0,type:"link",class:"p-0",onClick:j=>e.showViewDrawer({...N.lead,idNota:N.id})},{default:a(()=>[c(i(N.lead&&N.lead.cedula!=""&&N.lead.cedula!=null?N.lead.cedula:"---"),1)]),_:2},1032,["onClick"])):(d(),U("span",cg,i(N.lead.cedula),1))],64)):D("",!0),q.dataIndex==="campaign"?(d(),U(L,{key:3},[c(i(N.lead&&N.lead.campaign&&N.lead.campaign.name?N.lead.campaign.name:"-"),1)],64)):D("",!0),q.dataIndex==="notes"?(d(),b(P,{key:4},{author:a(()=>[c(i(N.is_sale.user.name),1)]),avatar:a(()=>[l(A,{src:N.is_sale.user.profile_image_url,alt:N.is_sale.user.name},null,8,["src","alt"])]),content:a(()=>[M("p",pg,[l($,{ellipsis:{rows:2,expandable:!0,symbol:e.$t("common.more")},content:[N.notes_typification_name_1,N.notes_typification_name_2,N.notes_typification_name_3,N.notes_typification_name_4].filter(Boolean).join(" - ")},null,8,["ellipsis","content"])]),M("strong",null,[N.next_contact?(d(),U("small",_g,i(`${e.$t("common.next_contact")} : ${n.formatDateTime(N.next_contact)}`),1)):D("",!0)])]),datetime:a(()=>[c(i(n.formatDateTime(N.date_time)),1)]),_:2},1024)):D("",!0),q.dataIndex==="notes_file"?(d(),b(V,{key:5,href:N.notes_file_url,target:"_blank"},{default:a(()=>[l(F,{color:"success"},{icon:a(()=>[l(T)]),default:a(()=>[c(" "+i(e.$t("common.download")),1)]),_:1})]),_:2},1032,["href"])):D("",!0),q.dataIndex==="action"?(d(),b(R,{key:6},{default:a(()=>[N&&N.notes_file_url?(d(),b(V,{key:0,href:N.notes_file_url,target:"_blank"},{default:a(()=>[l(k,{type:"primary"},{icon:a(()=>[l(T)]),_:1})]),_:2},1032,["href"])):D("",!0),l(k,{type:"primary",onClick:j=>e.editItem(N)},{icon:a(()=>[(n.permsArray.includes("admin")||n.permsArray.includes("sales_edit"))&&!_.soloVer?(d(),b(z,{key:0})):(d(),b(K,{key:1}))]),_:2},1032,["onClick"]),n.permsArray.includes("admin")||n.permsArray.includes("sales_delete")?(d(),b(k,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(N.xid)},{icon:a(()=>[l(B)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)):D("",!0)]),_:1},8,["columns","row-key","data-source","pagination","onChange","scroll"])])]),_:1})]),_:1}),l(W,{visible:e.isViewDrawerVisible,soloVer:_.soloVer,tipo:"lead_note",lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","soloVer","lead","onClose"])],64)}const An=Y(ug,[["render",fg]]),gg={components:{EyeOutlined:aa,PlayCircleOutlined:oa,DownOutlined:Pa,AdminPageHeader:Ce,LeadNotesTable:An},setup(){return{...sa()}}};function hg(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("LeadNotesTable"),f=o("a-card"),w=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.sales"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.sales")),1)]),_:1})]),_:1})]),_:1}),l(w,null,{default:a(()=>[l(f,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(g,{soloVer:!1,logType:"notes",showFormFields:!0,showCampaignStatus:!0,showTableSearch:!0,showLeadDetails:!0,showAddButton:!1,showActionButton:!1})]),_:1})]),_:1})],64)}const vg=Y(gg,[["render",hg]]),bg=e=>{const{convertStringToKey:s,getCampaignUrl:_,user:n}=Z(),y="lead-logs?fields=id,xid,log_type,time_taken,next_contact,date_time,user_id,x_user_id,notes,phone,message,lead_id,x_lead_id,notes_file,notes_file_url,lead{id,xid,reference_number,cedula,nombre,apellido1,apellido2,fechaNacimiento,edad,nacionalidad,nombreBase,tel1,email,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status,plantilla_calidad_id},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name},campaign_id,notes_typification_id_1,x_notes_typification_id_1,notes_typification_id_2,x_notes_typification_id_2,notes_typification_id_3,x_notes_typification_id_3,notes_typification_id_4,x_notes_typification_id_4,notes_typification_name_1,notes_typification_name_2,notes_typification_name_3,notes_typification_name_4,isSale{idVenta,idNota,idLead,telVenta,estadoVenta,tarjeta,aplicaBeneficiarios,cantidadBeneficiarios,beneficiarios,aplicaBeneficiariosAsist,cantidadBeneficiariosAsist,beneficiariosAsist,montoTotal,calidad},isSale:productos{x_id_producto,idProducto,cantidadProducto,precio},isSale:user{id,xid,name,profile_image,profile_image_url}",r=I([]),u=I([]),m=I([]),p="lead-logs",h=["lead_id","campaign_id","user_id","notes_typification_id_1","notes_typification_id_2","notes_typification_id_3","notes_typification_id_4"],g="products?fields=id,xid,name,coverage,price,campaign_id,x_campaign_id,product_type,tax_rate,tax_label,image,image_url,internal_code,category_id,x_category_id,categories{id,xid,name},campaigns{id,xid,name}",f="plantillas-calidad?fields=id,xid,nombre,descripcion,activo,variables{id,xid,tipo,nombre,descripcion,nota_maxima}&filters=activo eq 1&order=id asc&limit=1000",w="acciones-calidad?fields=id,xid,nombre,descripcion,tipo&limit=5000",k="motivos-calidad?fields=id,xid,motivo&limit=5000",{t:C}=x(),S={notes:"",notes_file:void 0,notes_file_url:void 0,log_type:"notes",notes_typification_id_1:void 0,notes_typification_id_2:void 0,notes_typification_id_3:void 0,notes_typification_id_4:void 0,is_sale:void 0,phone:"",message:""},E=I([]),A=I([]),$=I([]),P=I([]),T=[{key:"leads.id",value:C("uphone_calls.client_id")},{key:"leads.cedula",value:C("lead.document")},{key:"leads.nombre",value:C("lead.name")},{key:"leads.apellido1",value:C("lead.first_last_name")},{key:"leads.apellido2",value:C("lead.second_last_name")},{key:"leads.tel1",value:`${C("lead.phone")} 1`},{key:"leads.tel2",value:`${C("lead.phone")} 2`},{key:"leads.tel3",value:`${C("lead.phone")} 3`},{key:"leads.tel4",value:`${C("lead.phone")} 4`},{key:"leads.tel5",value:`${C("lead.phone")} 5`},{key:"leads.tel6",value:`${C("lead.phone")} 6`},{key:"campaigns.name",value:C("campaign.campaign")}];return{url:y,addEditUrl:p,initData:S,columns:E,filterableColumns:T,hashableColumns:h,allCalidadTemplates:r,allAccionesCalidad:u,allMotivosCalidad:m,allCampaigns:A,allProductos:P,allUsers:$,getPrefetchData:()=>{const V=_(),z=axiosAdmin.get(V),K=axiosAdmin.get(f),B=axiosAdmin.get(w),R=axiosAdmin.get(k),O=axiosAdmin.get("all-users"),W=axiosAdmin.get(g);return Promise.all([z,K,B,R,O,W]).then(([q,N,j,te,le,ue])=>{A.value=q.data,r.value=N.data,u.value=j.data,m.value=te.data,$.value=le.data.users,P.value=ue.data;var ee=[];if(e.showLeadDetails){var ee=[{title:`${C("lead.id")} ${C("lead_notes.sale")}`,dataIndex:"is_sale.idVenta"},{title:C("uphone_calls.client_id"),dataIndex:"id"},{title:C("lead.document"),dataIndex:"cedula"},{title:C("lead.name"),dataIndex:"nombre"},{title:C("lead.campaign"),dataIndex:"campaign"},{title:C("common.status"),dataIndex:"is_sale.estadoVenta"},{title:C("menu.quality"),dataIndex:"is_sale.calidad"}];e.showFormFields&&Ee(N.data.data,X=>{ee.push({title:X.field_name,dataIndex:s(X.field_name)})})}ee.push({title:C("common.notes"),dataIndex:"notes",width:e.showLeadDetails&&e.showFormFields?"30%":"40%"}),e.showActionButton&&ee.push({title:C("common.action"),dataIndex:"action"}),E.value=ee})}}};function Dn(){return{idVenta:null,plantilla_id:null,variables:[],fecha_calidad:void 0,duracion:null,minuto_precio:null,cierre_venta:null,cerrado_por:null,accion_calidad_id:null,oportunidades:[],comentarios_oportunidades:"",comentarios:null,numero_poliza:"N/A",evaluacion_id:null,estado:null,fecha_estado:null,nota_estado:null,numero_certificado:"",motivo_cancelacion_id:null,cancelado_por_supervision:!1,reasignado_a:null,estadoVenta:null,accion:"add"}}const Ue=Le({calidad:Dn()}),yg=ne({props:["formData","allCalidadTemplates","allAccionesCalidad","allMotivosCalidad","allProductos","data","visible","pageTitle","successMessage"],emits:["close"],components:{UnorderedListOutlined:ql,PhoneOutlined:st,FileTextOutlined:Ua,SaveOutlined:$e,DeleteOutlined:Se,QuestionCircleOutlined:bo},setup(e,{emit:s}){const{formatTimeDuration:_,formatDateTime:n,formatAmountCurrency:v}=Z(),y=Fe(),{t:r}=x(),{addEditRequestAdmin:u}=pe(),m=I(r("lead.lead_details")),p=I("info_venta"),h=I([]),g=I([]),f=I([]),w=I(100),k=[],C=100,S=I(),E=I([]),A=I(!1),$=I(!1),P=Le({data:[],pagination:{current:1,pageSize:3,total:0,showSizeChanger:!1},loading:!1,selectedRowKeys:[]}),T=Le({estadoVenta:[{required:!0,message:r("common.status")}],accion_calidad_id:[{required:!0,message:r("common.action")}],duracion:[{required:!0,message:r("lead.call_duration")}],minuto_precio:[{required:!0,message:r("message_template.minute")}],cierre_venta:[{required:!0,message:r("common.closing_sale")}],estado:[{required:!0,message:r("common.status")}],numero_certificado:[{required:()=>Ue.estado==="RELLAMADA_CERTIFICADA",message:r("common.call_certificate"),trigger:"blur"}],motivo_cancelacion_id:[{required:()=>Ue.estado==="CANCELADA_CALIDAD",message:r("message_template.reason"),trigger:"blur"}],cerrado_por:[{required:()=>Ue.cierre_venta===!0,message:r("common.closed_by"),trigger:"blur"}],reasignado_a:[{required:()=>Ue.estado==="REASIGNADA",message:r("lead.agent"),trigger:"blur"}]}),F=[{title:r("lead.internal_code"),dataIndex:"internal_code",className:"font-bold"},{title:r("product.name"),dataIndex:"name"},{title:r("product.coverage"),dataIndex:"coverage"},{title:r("product.price"),dataIndex:"price"},{title:r("dashboard.quantity"),dataIndex:"product_quantity"}],V=[{title:r("lead_status.type"),dataIndex:"tipo",key:"tipo"},{title:r("common.name"),dataIndex:"nombre",key:"nombre"},{title:r("common.description"),dataIndex:"descripcion",key:"descripcion"},{title:r("message_template.maximum_grade"),dataIndex:"nota_maxima",key:"nota_maxima"},{title:r("message_template.not_made"),dataIndex:"acciones",key:"acciones"}],z=[{value:"CERTIFICADA",label:r("common.certified")},{value:"RELLAMADA_CERTIFICADA",label:r("common.certified_recall")},{value:"RELLAMADA",label:r("common.recall")},{value:"CANCELADA_CALIDAD",label:r("common.cancelled_quality")},{value:"CANCELADA_SUPERVISION",label:r("common.cancelled_supervision")},{value:"REASIGNADA",label:r("common.reassigned")}],K=async()=>{A.value=!0;try{await S.value.validate(),Ue.calidad.nota_estado=w.value,u({url:"calidad/save",data:Ue.calidad,successMessage:r("common.created"),success:ee=>{A.value=!1,s("addEditDelete")}})}catch(ee){A.value=!1,console.log("Errores de validación:",ee.errorFields)}},B=async()=>{A.value=!0;try{(await axiosAdmin.get(`delete-calidad/{${e.data.is_sale.idVenta}}`)).success&&(A.value=!1,Ve.success({message:r("common.success"),description:r("common.deleted")}),s("addEditDelete"))}catch(ee){A.value=!1,console.error("Error:",ee)}};I({lead_id:""});const R=()=>{s("closed")},O=()=>{s("setNotesCount")};he(()=>e.visible,async ee=>{var ve;if(ee){if(p.value="info_venta",e.data.is_sale.aplicaBeneficiarios||e.data.is_sale.aplicaBeneficiariosAsist){let X=e.data.is_sale.beneficiarios||"[]",oe=e.data.is_sale.beneficiariosAsist||"[]",se,H;try{se=JSON.parse(X),H=JSON.parse(oe)}catch{se=[],H=[]}h.value=se,g.value=H}else h.value=[],g.value=[];if(e.data.is_sale.calidad){Ue.calidad.accion="edit";try{const X=await axiosAdmin.get(`evaluaciones-calidad/{${e.data.is_sale.idVenta}}`);await W(X),await q(Ue.calidad.variables,X.evaluacion_calidad.xPlantillaId)}catch(X){console.error("Error:",X)}}else $.value=!1,Ue.calidad=Dn(),await q(null,null),Ue.calidad.variables=(((ve=f.value)==null?void 0:ve.variables)??[]).map(X=>({...X,marcada:!1}));Ue.calidad.idVenta=e.data.is_sale.idVenta,Ue.calidad.plantilla_id=f.value.id,Ue.calidad.estadoVenta=e.data.is_sale.estadoVenta,P.data=e.data.is_sale.productos.map(X=>{const oe=e.allProductos.find(se=>se.xid===X.x_id_producto);return{xid:X.x_id_producto,internal_code:(oe==null?void 0:oe.internal_code)??"",name:(oe==null?void 0:oe.name)??"",coverage:(oe==null?void 0:oe.coverage)??"",price:(X==null?void 0:X.precio)??0,product_quantity:(X==null?void 0:X.cantidadProducto)??0}}),P.pagination.total=P.data.length,axiosAdmin.get(`campaigns/${e.data.lead.campaign.xid}/users`).then(X=>{E.value=X})}});const W=async ee=>{Ue.calidad.fecha_calidad=ee.evaluacion_calidad.fecha_calidad,Ue.calidad.variables=ee.evaluacion_calidad.variables,Ue.calidad.duracion=ee.evaluacion_calidad.duracion,Ue.calidad.minuto_precio=ee.evaluacion_calidad.minuto_precio,Ue.calidad.cierre_venta=ee.evaluacion_calidad.cierre_venta,Ue.calidad.cerrado_por=ee.evaluacion_calidad.xCerradoPor,Ue.calidad.accion_calidad_id=ee.evaluacion_calidad.xAccionCalidadId,Ue.calidad.oportunidades=ee.evaluacion_calidad.oportunidades,Ue.calidad.comentarios_oportunidades=ee.evaluacion_calidad.comentarios_oportunidades,Ue.calidad.comentarios=ee.evaluacion_calidad.comentarios,Ue.calidad.numero_poliza=ee.evaluacion_calidad.numero_poliza,Ue.calidad.estado=ee.estado_calidad_venta.estado,Ue.calidad.fecha_estado=ee.estado_calidad_venta.fecha_estado,Ue.calidad.nota_estado=ee.estado_calidad_venta.nota_estado,Ue.calidad.numero_certificado=ee.estado_calidad_venta.numero_certificado,Ue.calidad.motivo_cancelacion_id=ee.estado_calidad_venta.xMotivoCancelacionId,Ue.calidad.cancelado_por_supervision=ee.estado_calidad_venta.cancelado_por_supervision,Ue.calidad.reasignado_a=ee.estado_calidad_venta.reasignado_a,k.splice(0,k.length),ee.evaluacion_calidad.variables.filter(X=>X.marcada).forEach(X=>{k.push({id:X.id,tipo:X.tipo,nota_maxima:X.nota_maxima})}),w.value=ee.estado_calidad_venta.nota_estado;const ve=Date.now()-new Date(Ue.calidad.fecha_calidad).getTime();$.value=ve>3*24*60*60*1e3},q=async(ee,ve)=>{var se,H;const X=ve||((H=(se=e.data.lead)==null?void 0:se.campaign)==null?void 0:H.x_plantilla_calidad_id),oe=e.allCalidadTemplates.find(ae=>ae.xid===X);X&&oe?f.value={...oe,variables:oe.variables?oe.variables.map(ae=>({...ae,marcada:!1})):[]}:f.value=void 0,ee?f.value.variables=ee.map(ae=>({...ae})):w.value=100},N=()=>{if(k.some(ve=>ve.tipo==="critica"))return 0;const ee=k.filter(ve=>ve.tipo!=="critica").reduce((ve,X)=>ve+X.nota_maxima,0);return Math.max(0,C-ee)},j=ee=>{const ve=k.findIndex(oe=>oe.id===ee.id),X=Ue.calidad.variables.find(oe=>oe.id===ee.id);ve===-1?(k.push({id:ee.id,tipo:ee.tipo,nota_maxima:ee.nota_maxima}),X&&(X.marcada=!0)):(k.splice(ve,1),X&&(X.marcada=!1)),w.value=N()},te=yo.useBreakpoint(),le=_e(()=>te.value.xs||te.value<950?"vertical":"horizontal");return{isQualityDateExpired:$,loading:A,agenteCampana:E,handleTableChange:ee=>{P.pagination.current=ee.current,P.pagination.pageSize=ee.pageSize},tableProducts:P,datos:Ue,formRef:S,rules:T,submitQuality:K,onDelete:B,cierreVentaOptions:z,descLayout:le,calificacion:w,selectVariable:j,columns:V,columnsProduct:F,plantillaCalidad:f,...y,drawerTitle:m,beneficiarios:h,beneficiariosAsist:g,formatTimeDuration:_,activeTabKey:p,setNotesUrl:O,onClose:R,formatDateTime:n,formatAmountCurrency:v,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),kg={class:"row"},Cg={class:"table-responsive"},wg={class:"text-center"},Sg={key:0},$g={key:0},Ag={key:1,class:"table-responsive"},Dg={class:"w-full text-right"};function Tg(e,s,_,n,v,y){const r=o("a-descriptions-item"),u=o("a-descriptions"),m=o("UnorderedListOutlined"),p=o("a-table"),h=o("a-checkbox"),g=o("a-form-item"),f=o("a-col"),w=o("a-input"),k=o("a-input-number"),C=o("a-space"),S=o("row"),E=o("a-tab-pane"),A=o("a-typography-text"),$=o("a-tag"),P=o("a-select-option"),T=o("a-select"),F=o("a-row"),V=o("a-textarea"),z=o("SaveOutlined"),K=o("a-button"),B=o("DeleteOutlined"),R=o("question-circle-outlined"),O=o("a-popconfirm"),W=o("a-form"),q=o("a-tabs"),N=o("a-drawer");return d(),b(N,{title:e.$t("menu.quality"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose,destroyOnClose:!0},{default:a(()=>[l(u,{class:"label-bold",layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3},title:e.$t("common.basic_details")},{default:a(()=>[l(r,{class:"label-bold",strong:"",label:e.$t("uphone_calls.client_id")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.id&&e.data.lead.id?e.data.lead.id:"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.document")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.cedula?e.data.lead.cedula:"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.name")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.nombre&&e.data.lead.nombre?e.data.lead.nombre:"-")+" "+i(e.data.lead&&e.data.lead.apellido1&&e.data.lead.apellido1?e.data.lead.apellido1:"-")+" "+i(e.data.lead&&e.data.lead.apellido2&&e.data.lead.apellido2?e.data.lead.apellido2:"-"),1)]),_:1},8,["label"])]),_:1},8,["layout","title"]),l(u,{layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3}},{default:a(()=>[l(r,{class:"label-bold",label:e.$t("lead.date_birth")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.fechaNacimiento&&e.data.lead.fechaNacimiento?e.formatDateTime(e.data.lead.fechaNacimiento):"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.age")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.edad&&e.data.lead.edad?e.data.lead.edad:"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.base_name")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.nombreBase&&e.data.lead.nombreBase?e.data.lead.nombreBase:"-"),1)]),_:1},8,["label"])]),_:1},8,["layout"]),l(u,{layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3}},{default:a(()=>[l(r,{class:"label-bold",label:e.$t("lead.nationality")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.nacionalidad&&e.data.lead.nacionalidad?e.data.lead.nacionalidad:"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.email")},{default:a(()=>[c(i(e.data.lead&&e.data.lead.email&&e.data.lead.email?e.data.lead.email:"-"),1)]),_:1},8,["label"])]),_:1},8,["layout"]),l(q,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[14]||(s[14]=j=>e.activeTabKey=j),class:"mt-20"},{default:a(()=>[l(E,{key:"info_venta"},{tab:a(()=>[M("span",null,[l(m),c(" "+i(e.$t("common.information"))+" "+i(e.$t("lead_notes.sale")),1)])]),default:a(()=>[l(u,{layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3}},{default:a(()=>[l(r,{class:"label-bold",label:e.$t("lead.id")+" "+e.$t("lead_notes.sale")},{default:a(()=>[c(i(e.data.is_sale&&e.data.is_sale.idVenta?e.data.is_sale.idVenta:"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead_notes.date_time")},{default:a(()=>[c(i(e.data.date_time?e.formatDateTime(e.data.date_time):"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead_log.user_id")},{default:a(()=>[c(i(e.data.is_sale.user&&e.data.is_sale.user.name?e.data.is_sale.user.name:"-"),1)]),_:1},8,["label"])]),_:1},8,["layout"]),l(u,{layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3}},{default:a(()=>[l(r,{class:"label-bold",span:1,label:e.$t("lead.card")},{default:a(()=>[c(i(e.data.is_sale&&e.data.is_sale.tarjeta?e.data.is_sale.tarjeta:"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.total_amount")},{default:a(()=>[c(i(e.data.is_sale&&e.data.is_sale.montoTotal?e.formatAmountCurrency(e.data.is_sale.montoTotal):"-"),1)]),_:1},8,["label"]),l(r,{class:"label-bold",label:e.$t("lead.phone")},{default:a(()=>[c(i(e.data.is_sale&&e.data.is_sale.telVenta?e.data.is_sale.telVenta:"-"),1)]),_:1},8,["label"])]),_:1},8,["layout"]),M("div",kg,[M("div",Cg,[l(p,{columns:e.columnsProduct,"data-source":e.tableProducts.data,pagination:e.tableProducts.pagination,onChange:e.handleTableChange,"row-key":j=>j.price,size:"small"},{bodyCell:a(({column:j,record:te})=>[j.dataIndex==="price"?(d(),U(L,{key:0},[c(i(e.formatAmountCurrency(te.price)),1)],64)):D("",!0)]),footer:a(()=>[M("div",wg,[M("strong",null,i(e.$t("lead.total_amount"))+" : "+i(e.formatAmountCurrency(e.data.is_sale.montoTotal)),1)])]),_:1},8,["columns","data-source","pagination","onChange","row-key"])])]),l(u,{layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3}},{default:a(()=>[e.data.is_sale&&e.data.is_sale.aplicaBeneficiarios===1?(d(),b(f,{key:0,span:e.data.is_sale.aplicaBeneficiarios&&!e.data.is_sale.aplicaBeneficiariosAsist?3:2},{default:a(()=>[l(g,{label:e.$t("lead.beneficiaries")},{default:a(()=>[l(h,{checked:e.data.is_sale&&e.data.is_sale.aplicaBeneficiarios==1},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["span"])):D("",!0),e.data.is_sale&&e.data.is_sale.aplicaBeneficiariosAsist===1?(d(),b(f,{key:1,span:e.data.is_sale.aplicaBeneficiariosAsist&&!e.data.is_sale.aplicaBeneficiarios?3:1},{default:a(()=>[l(g,{label:e.$t("lead.beneficiaries_asist")},{default:a(()=>[l(h,{checked:e.data.is_sale&&e.data.is_sale.aplicaBeneficiariosAsist==1},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["span"])):D("",!0)]),_:1},8,["layout"]),l(S,{class:"d-flex"},{default:a(()=>[e.data.is_sale&&e.data.is_sale.aplicaBeneficiarios===1?(d(),b(f,{key:0,style:{"margin-right":"1%"},xs:12,sm:12,md:12,lg:12},{default:a(()=>[l(g,{class:"label-bold",label:e.$t("lead.beneficiary_information"),labelCol:{span:24},wrapperCol:{span:24}},{default:a(()=>[l(C,{direction:"vertical",style:{width:"100%"}},{default:a(()=>[(d(!0),U(L,null,G(e.beneficiarios,(j,te)=>(d(),U("div",{key:te,style:{display:"flex",gap:"1rem"}},[l(g,{name:["beneficiarios",te,"nombre"],noStyle:""},{default:a(()=>[l(w,{value:j.nombre,placeholder:e.$t("lead.name"),style:{flex:"1"}},null,8,["value","placeholder"])]),_:2},1032,["name"]),l(g,{name:["beneficiarios",te,"porcentaje"],noStyle:""},{default:a(()=>[l(k,{disabled:"",value:j.porcentaje,"onUpdate:value":le=>j.porcentaje=le,min:0,precision:0,step:1,placeholder:e.$t("lead.percentage"),style:{width:"80px"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]))),128))]),_:1})]),_:1},8,["label"])]),_:1})):D("",!0),e.data.is_sale&&e.data.is_sale.aplicaBeneficiariosAsist===1?(d(),b(f,{key:1,xs:12,sm:12,md:12,lg:12},{default:a(()=>[l(g,{class:"label-bold",label:e.$t("lead.beneficiary_asist_information"),labelCol:{span:24},wrapperCol:{span:24}},{default:a(()=>[l(C,{direction:"vertical",style:{width:"100%"}},{default:a(()=>[(d(!0),U(L,null,G(e.beneficiariosAsist,(j,te)=>(d(),U("div",{key:te,style:{display:"flex",gap:"1rem"}},[l(g,{name:["beneficiarios",te,"nombre"],noStyle:""},{default:a(()=>[l(w,{value:j.nombre,placeholder:e.$t("lead.name"),style:{flex:"1"}},null,8,["value","placeholder"])]),_:2},1032,["name"]),l(g,{name:["beneficiarios",te,"porcentaje"],noStyle:""},{default:a(()=>[l(k,{disabled:"",value:j.porcentaje,"onUpdate:value":le=>j.porcentaje=le,min:0,precision:0,step:1,placeholder:e.$t("lead.percentage"),style:{width:"80px"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]))),128))]),_:1})]),_:1},8,["label"])]),_:1})):D("",!0)]),_:1})]),_:1}),l(E,{key:"calidad_data",class:"text-center"},{tab:a(()=>[M("span",null,[l(m),c(" "+i(e.$t("common.information"))+" "+i(e.$t("menu.quality")),1)])]),default:a(()=>[e.plantillaCalidad?(d(),b(W,{key:1,ref:"formRef",model:e.datos.calidad,rules:e.rules},{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e.plantillaCalidad.nombre?(d(),U("h2",Sg,[M("strong",null,i(e.$t("common.template"))+": "+i(e.plantillaCalidad.nombre),1)])):D("",!0),M("strong",null,[e.plantillaCalidad.descripcion?(d(),U("small",$g,i(e.plantillaCalidad.descripcion),1)):D("",!0)]),e.plantillaCalidad.variables&&e.plantillaCalidad.variables.length?(d(),U("div",Ag,[l(p,{columns:e.columns,dataSource:e.plantillaCalidad.variables,pagination:!1,"row-key":j=>j.xid,bordered:"",size:"middle"},{bodyCell:a(({column:j,record:te})=>[j.dataIndex==="tipo"?(d(),U(L,{key:0},[te.tipo==="critica"?(d(),b($,{key:0,style:{width:"100%","text-align":"center"},color:"#f5b041"},{default:a(()=>[c(i(e.$t("message_template.critical_variable")),1)]),_:1})):(d(),b($,{key:1,style:{width:"100%","text-align":"center"},color:"#4cb050"},{default:a(()=>[c(i(e.$t("message_template.critical_not_variable")),1)]),_:1}))],64)):D("",!0),j.dataIndex==="nota_maxima"?(d(),U(L,{key:1},[c(i(te.tipo==="critica"?"N/A":te.nota_maxima),1)],64)):D("",!0),j.dataIndex==="acciones"?(d(),U(L,{key:2},[e.datos.calidad.accion==="add"?(d(),b(h,{key:0,class:"checkbox-x",onChange:le=>e.selectVariable(te)},null,8,["onChange"])):(d(),b(h,{key:1,checked:te.marcada,"onUpdate:checked":le=>te.marcada=le,onChange:le=>e.selectVariable(te),class:"checkbox-x"},null,8,["checked","onUpdate:checked","onChange"]))],64)):D("",!0)]),footer:a(()=>[M("div",Dg,[M("strong",null,[c(i(e.$t("common.qualification"))+" : ",1),M("span",{style:we({color:e.calificacion===0?"red":e.calificacion>0&&e.calificacion<=50?"#f5b041":"inherit"})},i(e.calificacion),5)])])]),_:1},8,["columns","dataSource","row-key"])])):(d(),b(A,{key:2,type:"warning",strong:""},{default:a(()=>[c(i(e.$t("campaign.no_template")),1)]),_:1}))]),_:1}),e.plantillaCalidad.variables&&e.plantillaCalidad.variables.length?(d(),b(f,{key:0,xs:24,sm:24,md:24,lg:24,style:{"margin-top":"20px"}},{default:a(()=>[l(F,{gutter:[16,16]},{default:a(()=>[l(f,{xs:{span:24},sm:{span:24},md:{span:6},lg:{span:6}},{default:a(()=>[l(g,{name:"minuto_precio","label-col":{span:24},label:e.$t("message_template.minute"),class:"required label-bold"},{default:a(()=>[l(k,{value:e.datos.calidad.minuto_precio,"onUpdate:value":s[0]||(s[0]=j=>e.datos.calidad.minuto_precio=j),style:{width:"100%"},placeholder:e.$t("message_template.minute"),min:0,max:59},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(f,{xs:{span:24},sm:{span:24},md:{span:6},lg:{span:6}},{default:a(()=>[l(g,{name:"duracion","label-col":{span:24},label:e.$t("lead.call_duration"),class:"required label-bold"},{default:a(()=>[l(k,{value:e.datos.calidad.duracion,"onUpdate:value":s[1]||(s[1]=j=>e.datos.calidad.duracion=j),style:{width:"100%"},placeholder:e.$t("lead.call_duration"),min:0},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(f,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12}},{default:a(()=>[l(g,{name:"accion_calidad_id","label-col":{span:24},label:e.$t("common.action"),class:"required label-bold"},{default:a(()=>[l(T,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("common.action")]),allowClear:!0,"show-search":"",optionFilterProp:"title",value:e.datos.calidad.accion_calidad_id,"onUpdate:value":s[2]||(s[2]=j=>e.datos.calidad.accion_calidad_id=j)},{default:a(()=>[(d(!0),U(L,null,G(e.allAccionesCalidad.filter(j=>j.tipo==="accion"),j=>(d(),b(P,{key:j.xid,value:j.xid,title:j.nombre},{default:a(()=>[c(i(j.nombre),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1})]),_:1}),l(F,{gutter:[16,16]},{default:a(()=>[l(f,{xs:{span:24},sm:{span:24},md:{span:e.datos.calidad.cierre_venta?6:12},lg:{span:e.datos.calidad.cierre_venta?6:12}},{default:a(()=>[l(g,{name:"cierre_venta","label-col":{span:24},label:e.$t("common.closing_sale"),class:"required label-bold"},{default:a(()=>[l(T,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("common.closing_sale")]),allowClear:!0,"show-search":"",optionFilterProp:"title",value:e.datos.calidad.cierre_venta,"onUpdate:value":s[3]||(s[3]=j=>e.datos.calidad.cierre_venta=j)},{default:a(()=>[l(P,{key:"si",value:!0,title:e.$t("common.yes")},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1},8,["title"]),l(P,{key:"no",value:!1,title:e.$t("common.no")},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1},8,["title"])]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1},8,["md","lg"]),e.datos.calidad.cierre_venta?(d(),b(f,{key:0,xs:{span:24},sm:{span:24},md:{span:6},lg:{span:6}},{default:a(()=>[l(g,{name:"cerrado_por","label-col":{span:24},label:e.$t("common.closed_by"),class:"required label-bold"},{default:a(()=>[l(T,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("common.closed_by")]),allowClear:!0,"show-search":"",optionFilterProp:"title",value:e.datos.calidad.cerrado_por,"onUpdate:value":s[4]||(s[4]=j=>e.datos.calidad.cerrado_por=j)},{default:a(()=>[(d(!0),U(L,null,G(e.allAccionesCalidad.filter(j=>j.tipo==="cierre"),j=>(d(),b(P,{key:j.xid,value:j.xid,title:j.nombre},{default:a(()=>[c(i(j.nombre),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1})):D("",!0),l(f,{xs:{span:24},sm:{span:24},md:{span:(e.datos.calidad.estado==="CERTIFICADA"||e.datos.calidad.estado==="RELLAMADA_CERTIFICADA"||e.datos.calidad.estado==="CANCELADA_CALIDAD"||e.datos.calidad.estado==="REASIGNADA",12)},lg:{span:e.datos.calidad.estado==="CERTIFICADA"||e.datos.calidad.estado==="RELLAMADA_CERTIFICADA"||e.datos.calidad.estado==="CANCELADA_CALIDAD"||e.datos.calidad.estado==="REASIGNADA"?6:12}},{default:a(()=>[l(g,{label:e.$t("common.status"),name:"estado",class:"required label-bold","label-col":{span:24}},{default:a(()=>[l(T,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("common.status")]),allowClear:!0,"show-search":"",optionFilterProp:"title",value:e.datos.calidad.estado,"onUpdate:value":s[5]||(s[5]=j=>e.datos.calidad.estado=j)},{default:a(()=>[(d(!0),U(L,null,G(e.cierreVentaOptions,j=>(d(),b(P,{key:j.value,value:j.value,title:j.label},{default:a(()=>[c(i(j.label),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1},8,["md","lg"]),e.datos.calidad.estado==="CERTIFICADA"?(d(),b(f,{key:1,xs:{span:24},sm:{span:24},md:{span:e.datos.calidad.estado==="CERTIFICADA"?24:12},lg:{span:e.datos.calidad.estado==="CERTIFICADA"?6:12}},{default:a(()=>[l(g,{label:e.$t("common.policy"),name:"numero_poliza",class:"label-bold","label-col":{span:24}},{default:a(()=>[l(w,{maxlength:99,value:e.datos.calidad.numero_poliza,"onUpdate:value":s[6]||(s[6]=j=>e.datos.calidad.numero_poliza=j),placeholder:e.$t("common.policy")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["md","lg"])):D("",!0),e.datos.calidad.estado==="RELLAMADA_CERTIFICADA"?(d(),b(f,{key:2,xs:{span:24},sm:{span:24},md:{span:e.datos.calidad.estado==="RELLAMADA_CERTIFICADA"?24:12},lg:{span:e.datos.calidad.estado==="RELLAMADA_CERTIFICADA"?6:12}},{default:a(()=>[l(g,{label:e.$t("common.call_certificate"),name:"numero_certificado",class:"required label-bold","label-col":{span:24}},{default:a(()=>[l(w,{maxlength:99,value:e.datos.calidad.numero_certificado,"onUpdate:value":s[7]||(s[7]=j=>e.datos.calidad.numero_certificado=j),placeholder:e.$t("common.call_certificate")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["md","lg"])):D("",!0),e.datos.calidad.estado==="CANCELADA_CALIDAD"?(d(),b(f,{key:3,xs:{span:24},sm:{span:24},md:{span:e.datos.calidad.estado==="CANCELADA_CALIDAD"?24:12},lg:{span:e.datos.calidad.estado==="CANCELADA_CALIDAD"?6:12}},{default:a(()=>[l(g,{label:e.$t("message_template.reason"),name:"motivo_cancelacion_id",class:"required label-bold","label-col":{span:24}},{default:a(()=>[l(T,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("message_template.reason")]),allowClear:!0,"show-search":"",optionFilterProp:"title",value:e.datos.calidad.motivo_cancelacion_id,"onUpdate:value":s[8]||(s[8]=j=>e.datos.calidad.motivo_cancelacion_id=j)},{default:a(()=>[(d(!0),U(L,null,G(e.allMotivosCalidad,j=>(d(),b(P,{key:j.xid,value:j.xid,title:j.motivo},{default:a(()=>[c(i(j.motivo),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1},8,["md","lg"])):D("",!0),e.datos.calidad.estado==="REASIGNADA"?(d(),b(f,{key:4,xs:{span:24},sm:{span:24},md:{span:e.datos.calidad.estado==="REASIGNADA"?24:12},lg:{span:e.datos.calidad.estado==="REASIGNADA"?6:12}},{default:a(()=>[l(g,{label:e.$t("lead.agent"),name:"reasignado_a",class:"required label-bold","label-col":{span:24}},{default:a(()=>[l(T,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("lead.agent")]),allowClear:!0,"show-search":"",optionFilterProp:"title",value:e.datos.calidad.reasignado_a,"onUpdate:value":s[9]||(s[9]=j=>e.datos.calidad.reasignado_a=j)},{default:a(()=>[(d(!0),U(L,null,G(e.agenteCampana,j=>(d(),b(P,{title:j.name,key:j,value:j.id},{default:a(()=>[c(i(j.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1},8,["md","lg"])):D("",!0),l(f,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12}},{default:a(()=>[l(g,{label:`${e.$t("common.status")} ${e.$t("lead_notes.sale")}`,class:"required label-bold","label-col":{span:24},name:"estadoVenta"},{default:a(()=>[l(T,{placeholder:e.$t("common.select_default_text",[e.$t("common.status")]),allowClear:!0,"show-search":"",value:e.datos.calidad.estadoVenta,"onUpdate:value":s[10]||(s[10]=j=>e.datos.calidad.estadoVenta=j)},{default:a(()=>[l(P,{key:"Efectiva",value:"Efectiva"},{default:a(()=>[c(i(e.$t("lead_notes.effective")),1)]),_:1}),l(P,{key:"Cancelada",value:"Cancelada"},{default:a(()=>[c(i(e.$t("lead_notes.canceled")),1)]),_:1})]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1}),l(f,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12}},{default:a(()=>[l(g,{label:e.$t("common.improvement_options"),class:"label-bold","label-col":{span:24},name:"oportunidades"},{default:a(()=>[l(T,{placeholder:e.$t("common.select_default_text",[e.$t("common.improvement_options")]),mode:"multiple",allowClear:!0,"show-search":"",value:e.datos.calidad.oportunidades,"onUpdate:value":s[11]||(s[11]=j=>e.datos.calidad.oportunidades=j)},{default:a(()=>[(d(!0),U(L,null,G(e.allAccionesCalidad.filter(j=>j.tipo==="mejora"),j=>(d(),b(P,{key:j.xid,value:j.id,title:j.nombre},{default:a(()=>[c(i(j.nombre),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label"])]),_:1}),e.datos.calidad.oportunidades.length>=1?(d(),b(f,{key:5,xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24}},{default:a(()=>[l(g,{label:`${e.$t("common.comments")} ${e.$t("common.improvement_options")}`,name:"comentarios",class:"label-bold","label-col":{span:24}},{default:a(()=>[l(V,{value:e.datos.calidad.comentarios_oportunidades,"onUpdate:value":s[12]||(s[12]=j=>e.datos.calidad.comentarios_oportunidades=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.comments")+" "+e.$t("common.improvement_options")]),rows:2,maxlength:2e3},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})):D("",!0),l(f,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24}},{default:a(()=>[l(g,{label:e.$t("common.comments"),name:"comentarios",class:"label-bold","label-col":{span:24}},{default:a(()=>[l(V,{value:e.datos.calidad.comentarios,"onUpdate:value":s[13]||(s[13]=j=>e.datos.calidad.comentarios=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.comments")]),rows:2,maxlength:2e3},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),e.datos.calidad.fecha_calidad?(d(),b(u,{key:6,layout:e.descLayout,column:{xs:1,sm:1,md:2,lg:3}},{default:a(()=>[l(r,{class:"label-bold",label:e.$t("common.date_time")},{default:a(()=>[c(i(e.datos.calidad&&e.datos.calidad.fecha_calidad?e.formatDateTime(e.datos.calidad.fecha_calidad):"-"),1)]),_:1},8,["label"]),l(r,null,{default:a(()=>[e.isQualityDateExpired?(d(),b(A,{key:0,type:"warning",strong:""},{default:a(()=>[c(i(e.$t("common.non_editable_quality")),1)]),_:1})):D("",!0)]),_:1})]),_:1},8,["layout"])):D("",!0),l(f,{class:"text-center",xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24}},{default:a(()=>[l(K,{disabled:e.isQualityDateExpired,key:"submit",type:"primary",onClick:e.submitQuality,style:{"margin-right":"1%"},loading:e.loading},{default:a(()=>[l(z),c(" "+i(e.datos.calidad.accion==="add"?e.$t("common.add"):e.$t("common.edit")),1)]),_:1},8,["disabled","onClick","loading"]),l(O,{title:e.$t("menu.you_agree"),onConfirm:e.onDelete},{icon:a(()=>[l(R,{style:{color:"red"}})]),default:a(()=>[e.datos.calidad.accion==="edit"?(d(),b(K,{key:0,danger:"",type:"primary",loading:e.loading},{default:a(()=>[l(B),c(" "+i(e.$t("common.delete")),1)]),_:1},8,["loading"])):D("",!0)]),_:1},8,["title","onConfirm"])]),_:1})]),_:1})]),_:1})):D("",!0)]),_:1},8,["model","rules"])):(d(),b(A,{key:0,type:"warning",strong:""},{default:a(()=>[c(i(e.$t("campaign.no_template")),1)]),_:1}))]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["title","width","open","onClose"])}const Eg=Y(yg,[["render",Tg],["__scopeId","data-v-ebfd8a5b"]]),Ug={props:{pageName:{default:"index"},soloVer:{type:Boolean,default:!0},leadId:{default:void 0},managing:{default:void 0},leadInfo:{default:void 0},logType:{default:"notes"},scrollStyle:{default:{}},showCampaignStatus:{default:!1},showTableSearch:{default:!1},showUserFilter:{default:!1},showDateFilter:{default:!0},showAddButton:{default:!1},showActionButton:{default:!0},showFormFields:{default:!1},showLeadDetails:{default:!1}},emits:["success"],components:{PlusOutlined:de,EditOutlined:Oe,EyeOutlined:aa,DeleteOutlined:Se,PlayCircleOutlined:oa,StopOutlined:Oa,DownloadOutlined:ga,AddEdit:Eg,DateRangePicker:qa},setup(e,{emit:s}){const{t:_}=x(),{permsArray:n,appSetting:v,user:y,formatDateTime:r,convertStringToKey:u,getCampaignUrl:m}=Z(),{url:p,addEditUrl:h,initData:g,columns:f,filterableColumns:w,allCalidadTemplates:k,allAccionesCalidad:C,allMotivosCalidad:S,allProductos:E,hashableColumns:A,allCampaigns:$,allUsers:P,getPrefetchData:T}=bg(e),F=Fe(),V=I({}),z=sa(),K=I({page_name:e.pageName,log_type:e.logType,campaign_id:void 0,campaign_status:"active",lead_id:e.leadId,leadInfo:e.leadInfo,dates:[]}),B=I({"isSale_calidad.estado":void 0,"isSale.estadoVenta":void 0,"isSale.calidad":void 0,log_type:e.logType,isSale:1});ie(()=>{T().then(j=>{B.value={...B.value},V.value=e.leadInfo,F.crudUrl.value=h,F.langKey.value="notes",F.initData.value={...g,lead_id:e.leadId},F.formData.value={...g,lead_id:e.leadId},F.hashableColumns.value=[...A],F.hashable.value=[...A],R()})});const R=()=>{F.hashableColumns.value=[...A],F.tableUrl.value={url:p,filters:B,extraFilters:K},F.table.filterableColumns=w,F.table.pagination={...F.table.pagination,current:1},F.fetch({page:1}),s("updateNotesCount")},O=(j,te)=>{var le="-";return Ee(te,ue=>{j.includes(ue.field_name)&&(le=ue.field_value)}),le},W=j=>{F.addEditSuccess(j),s("success")},q=j=>{K.value={...K.value,campaign_id:void 0};const te=m(K.value.campaign_status),le=axiosAdmin.get(te);Promise.all([le]).then(([ue])=>{$.value=ue.data,R()})};return he(()=>e.leadId,j=>{j?(V.value=e.leadInfo,K.value.lead_id=j,F.formData.value={...g,lead_id:e.leadId},T(),R()):(V.value={},F.table.data=[],F.table.pagination.current=1,s("update:leadId",null))},{immediate:!0}),{cierreVentaOptions:[{value:"CERTIFICADA",label:_("common.certified")},{value:"RELLAMADA_CERTIFICADA",label:_("common.certified_recall")},{value:"RELLAMADA",label:_("common.recall")},{value:"CANCELADA_CALIDAD",label:_("common.cancelled_quality")},{value:"CANCELADA_SUPERVISION",label:_("common.cancelled_supervision")},{value:"REASIGNADA",label:_("common.reassigned")}],permsArray:n,appSetting:v,columns:f,...F,...z,filterableColumns:w,user:y,formatDateTime:r,allCalidadTemplates:k,allAccionesCalidad:C,allMotivosCalidad:S,allProductos:E,findFieldValue:O,convertStringToKey:u,onAddEditSuccess:W,allCampaigns:$,allUsers:P,filters:B,extraFilters:K,setUrlData:R,campaignTypeChanged:q}}},Og={class:"table-responsive lead-notes-table"},Ig={key:1},Pg={style:{"text-align":"justify"}},Mg={key:0};function Fg(e,s,_,n,v,y){const r=o("AddEdit"),u=o("PlayCircleOutlined"),m=o("a-tab-pane"),p=o("StopOutlined"),h=o("a-tabs"),g=o("a-col"),f=o("a-row"),w=o("a-select-option"),k=o("a-select"),C=o("a-input-search"),S=o("a-input-group"),E=o("a-form-item"),A=o("DateRangePicker"),$=o("a-button"),P=o("a-tag"),T=o("a-avatar"),F=o("a-typography-paragraph"),V=o("a-comment"),z=o("DownloadOutlined"),K=o("a-typography-link"),B=o("a-table");return d(),U(L,null,[l(r,{visible:e.addEditVisible,onAddEditSuccess:n.onAddEditSuccess,onAddEditDelete:n.onAddEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,allCalidadTemplates:n.allCalidadTemplates,allAccionesCalidad:n.allAccionesCalidad,allMotivosCalidad:n.allMotivosCalidad,allProductos:n.allProductos,data:e.viewData,successMessage:e.successMessage},null,8,["visible","onAddEditSuccess","onAddEditDelete","onClosed","formData","allCalidadTemplates","allAccionesCalidad","allMotivosCalidad","allProductos","data","successMessage"]),_.showCampaignStatus?(d(),b(f,{key:0},{default:a(()=>[l(g,{span:24},{default:a(()=>[l(h,{activeKey:n.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=R=>n.extraFilters.campaign_status=R),onChange:n.campaignTypeChanged},{default:a(()=>[l(m,{key:"active"},{tab:a(()=>[M("span",null,[l(u),c(" "+i(e.$t("campaign.active_campaign")),1)])]),_:1}),n.permsArray.includes("view_completed_campaigns")||n.permsArray.includes("admin")?(d(),b(m,{key:"completed"},{tab:a(()=>[M("span",null,[l(p),c(" "+i(e.$t("campaign.completed_campaign")),1)])]),_:1})):D("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):D("",!0),_.showAddButton||_.showTableSearch||_.showDateFilter||_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(f,{key:1,gutter:[15,15],class:"mb-20"},{default:a(()=>[l(g,{xs:24,sm:24,md:6,lg:6,xl:6},{default:a(()=>[l(S,{class:"d-flex",compact:""},{default:a(()=>[l(k,{value:e.table.searchColumn,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""]),class:"flex-none",style:{width:"45%"},allowClear:!0},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(w,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(C,{value:e.table.searchString,"onUpdate:value":s[2]||(s[2]=R=>e.table.searchString=R),placeholder:e.$t("common.select_default_text",[e.$t("common.information")]),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading,class:"flex-1",style:{"min-width":"0"}},null,8,["value","placeholder","onChange","onSearch","loading"])]),_:1})]),_:1}),_.showUserFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:0,xs:24,sm:24,md:4,lg:4,xl:4},{default:a(()=>[l(k,{value:n.filters["isSale.user_id"],"onUpdate:value":s[3]||(s[3]=R=>n.filters["isSale.user_id"]=R),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allUsers,R=>(d(),b(w,{key:R.xid,title:R.name,value:R.id},{default:a(()=>[c(i(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),l(g,{xs:24,sm:24,md:12,lg:5,xl:5},{default:a(()=>[l(E,null,{default:a(()=>[l(k,{value:n.filters["isSale.estadoVenta"],"onUpdate:value":s[4]||(s[4]=R=>n.filters["isSale.estadoVenta"]=R),placeholder:e.$t("common.select_default_text",[e.$t("common.status")]),allowClear:!0,"show-search":"",onChange:n.setUrlData},{default:a(()=>[l(w,{key:"Efectiva",value:"Efectiva"},{default:a(()=>[c(i(e.$t("lead_notes.effective")),1)]),_:1}),l(w,{key:"Cancelada",value:"Cancelada"},{default:a(()=>[c(i(e.$t("lead_notes.canceled")),1)]),_:1})]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1}),l(g,{xs:24,sm:24,md:12,lg:5,xl:5},{default:a(()=>[l(E,null,{default:a(()=>[l(k,{value:n.filters["isSale_calidad.estado"],"onUpdate:value":s[5]||(s[5]=R=>n.filters["isSale_calidad.estado"]=R),placeholder:e.$t("common.select_default_text",[e.$t("common.status")]),allowClear:!0,"show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.cierreVentaOptions,R=>(d(),b(w,{key:R.value,value:R.value,title:R.label},{default:a(()=>[c(i(R.label),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1}),l(g,{xs:24,sm:24,md:12,lg:4,xl:4},{default:a(()=>[l(E,null,{default:a(()=>[l(k,{value:n.filters["isSale.calidad"],"onUpdate:value":s[6]||(s[6]=R=>n.filters["isSale.calidad"]=R),placeholder:e.$t("common.select_default_text",[e.$t("menu.quality")]),allowClear:!0,"show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(),b(w,{key:1,value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1})),(d(),b(w,{key:"0",value:"0"},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1}))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1}),_.showDateFilter||n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(g,{key:1,xs:24,sm:24,md:6,lg:6,xl:6},{default:a(()=>[l(A,{onDateTimeChanged:s[7]||(s[7]=R=>{n.extraFilters.dates=R,n.setUrlData()})})]),_:1})):D("",!0)]),_:1})):D("",!0),l(f,{class:"mt-20"},{default:a(()=>[l(g,{span:24},{default:a(()=>[M("div",Og,[l(B,{columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,onChange:e.handleTableChange,scroll:_.scrollStyle},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="is_sale.idVenta"?(d(),U(L,{key:0},[c(i(O.is_sale&&O.is_sale.idVenta?O.is_sale.idVenta:"-"),1)],64)):D("",!0),R.dataIndex==="id"?(d(),U(L,{key:1},[c(i(O.lead&&O.lead.id!=""&&O.lead.id!=null?O.lead.id:"---"),1)],64)):D("",!0),R.dataIndex==="cedula"?(d(),U(L,{key:2},[_.showLeadDetails?(d(),b($,{key:0,type:"link",class:"p-0",onClick:W=>e.editItem(O)},{default:a(()=>[c(i(O.lead&&O.lead.cedula!=""&&O.lead.cedula!=null?O.lead.cedula:"---"),1)]),_:2},1032,["onClick"])):(d(),U("span",Ig,i(O.lead.cedula),1))],64)):D("",!0),R.dataIndex==="nombre"?(d(),U(L,{key:3},[c(i(O.lead&&O.lead.nombre&&O.lead.nombre!=null?`${O.lead.nombre} ${O.lead.apellido1} ${O.lead.apellido2}`:"-"),1)],64)):D("",!0),R.dataIndex==="campaign"?(d(),U(L,{key:4},[c(i(O.lead&&O.lead.campaign&&O.lead.campaign.name?O.lead.campaign.name:"-"),1)],64)):D("",!0),R.dataIndex==="is_sale.estadoVenta"?(d(),U(L,{key:5},[O.is_sale.estadoVenta==="Efectiva"?(d(),b(P,{key:0,color:"#4cb050"},{default:a(()=>[c(i(e.$t("lead_notes.effective")),1)]),_:1})):(d(),b(P,{key:1,color:"#f5b041"},{default:a(()=>[c(i(e.$t("lead_notes.canceled")),1)]),_:1}))],64)):D("",!0),R.dataIndex==="is_sale.calidad"?(d(),U(L,{key:6},[O.is_sale.calidad===1?(d(),b(P,{key:0,color:"#4cb050"},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1})):(d(),b(P,{key:1,color:"#f5b041"},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1}))],64)):D("",!0),R.dataIndex==="notes"?(d(),b(V,{key:7},{author:a(()=>[c(i(O.is_sale.user.name),1)]),avatar:a(()=>[l(T,{src:O.is_sale.user.profile_image_url,alt:O.is_sale.user.name},null,8,["src","alt"])]),content:a(()=>[M("p",Pg,[l(F,{ellipsis:{rows:2,expandable:!0,symbol:e.$t("common.more")},content:[O.notes_typification_name_1,O.notes_typification_name_2,O.notes_typification_name_3,O.notes_typification_name_4].filter(Boolean).join(" - ")},null,8,["ellipsis","content"])]),M("strong",null,[O.next_contact?(d(),U("small",Mg,i(`${e.$t("common.next_contact")} : ${n.formatDateTime(O.next_contact)}`),1)):D("",!0)])]),datetime:a(()=>[c(i(n.formatDateTime(O.date_time)),1)]),_:2},1024)):D("",!0),R.dataIndex==="notes_file"?(d(),b(K,{key:8,href:O.notes_file_url,target:"_blank"},{default:a(()=>[l(P,{color:"success"},{icon:a(()=>[l(z)]),default:a(()=>[c(" "+i(e.$t("common.download")),1)]),_:1})]),_:2},1032,["href"])):D("",!0)]),_:1},8,["columns","row-key","data-source","pagination","onChange","scroll"])])]),_:1})]),_:1})],64)}const Rg=Y(Ug,[["render",Fg]]),Lg={components:{EyeOutlined:aa,PlayCircleOutlined:oa,DownOutlined:Pa,AdminPageHeader:Ce,LeadNotesTable:Rg},setup(){return{...sa()}}};function Bg(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("LeadNotesTable"),f=o("a-card"),w=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.quality"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.quality")),1)]),_:1})]),_:1})]),_:1}),l(w,null,{default:a(()=>[l(f,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(g,{logType:"notes",showFormFields:!0,showCampaignStatus:!0,showTableSearch:!0,showLeadDetails:!0,showAddButton:!1,showActionButton:!1})]),_:1})]),_:1})],64)}const qg=Y(Lg,[["render",Bg]]),Vg=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/leads",component:Hf,name:"admin.leads.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"leads",permission:"leads_view"}},{path:"/admin/call-logs",component:Gf,name:"admin.call_logs.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"call_logs",permission:"call_logs_view"}},{path:"/admin/notes",component:Xf,name:"admin.lead_notes.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"lead_notes",permission:"lead_notes_view"}},{path:"/admin/ventas",component:vg,name:"admin.lead_notes_ventas.index",meta:{requireAuth:!0,menuKey:"lead_notes_ventas",permission:"lead_notes_ventas_view"}},{path:"/admin/calidad",component:qg,name:"admin.lead_notes_calidad.index",meta:{requireAuth:!0,menuKey:"lead_notes_calidad",permission:"lead_notes_calidad_view"}}]}];const Vt=e=>{const s=e=="admin"?"currencies?fields=id,xid,name,symbol,position,code":"superadmin/currencies?fields=id,xid,name,symbol,position,code",_=e=="admin"?"currencies":"superadmin/currencies",{t:n}=x(),v={name:"",symbol:"",position:"",code:""},y=[{title:n("currency.id"),dataIndex:"id"},{title:n("currency.name"),dataIndex:"name"},{title:n("currency.symbol"),dataIndex:"symbol"},{title:n("currency.position"),dataIndex:"position"},{title:n("currency.code"),dataIndex:"code"},{title:n("common.action"),dataIndex:"action"}],r=[{key:"name",value:n("common.name")}];return{url:s,addEditUrl:_,initData:v,columns:y,filterableColumns:r}},Kg=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{appSetting:y}=Z(),r=Ke();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{y.value.currency&&y.value.currency.xid==p.xid&&r.dispatch("auth/updateApp"),s("addEditSuccess",p.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function zg(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-radio"),g=o("a-radio-group"),f=o("a-form"),w=o("SaveOutlined"),k=o("a-button"),C=o("a-modal");return d(),b(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(k,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(f,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("currency.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=S=>e.formData.name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("currency.symbol"),name:"symbol",help:e.rules.symbol?e.rules.symbol.message:null,validateStatus:e.rules.symbol?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.symbol,"onUpdate:value":s[1]||(s[1]=S=>e.formData.symbol=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.symbol")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("currency.position"),name:"position",help:e.rules.position?e.rules.position.message:null,validateStatus:e.rules.position?"error":null},{default:a(()=>[l(g,{value:e.formData.position,"onUpdate:value":s[2]||(s[2]=S=>e.formData.position=S)},{default:a(()=>[l(h,{value:"front"},{default:a(()=>[c(i(e.$t("currency.front"))+" ("+i(e.$t("currency.front_position_example"))+") ",1)]),_:1}),l(h,{value:"behind"},{default:a(()=>[c(i(e.$t("currency.behind"))+" ("+i(e.$t("currency.behind_position_example"))+") ",1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("currency.code"),name:"code",help:e.rules.code?e.rules.code.message:null,validateStatus:e.rules.code?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.code,"onUpdate:value":s[3]||(s[3]=S=>e.formData.code=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Kt=Y(Kg,[["render",zg]]),Ng=ne({props:{panelType:{type:String,default:"admin"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:Kt},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=Vt(e.panelType),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),jg={key:0};function Hg(e,s,_,n,v,y){const r=o("a-menu-item"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),h=o("AddEdit");return e.panelType=="admin"&&(e.permsArray.includes("currencies_create")||e.permsArray.includes("admin"))||e.panelType=="superadmin"?(d(),U("div",jg,[e.customType=="menu"?(d(),b(r,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick"])):(d(),U(L,{key:1},[e.tooltip?(d(),b(p,{key:0,placement:"topLeft",title:e.$t("currency.add"),"arrow-point-at-center":""},{default:a(()=>[l(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),l(h,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("currency.add"),successMessage:e.$t("currency.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const Tn=Y(Ng,[["render",Hg]]),En=()=>{const e=je("langs?fields=id,xid,name,image,image_url,key,enabled"),s=je("langs"),{t:_}=x(),n={name:"",key:"",image:void 0,image_url:void 0,enabled:!0},v=[{title:_("langs.id"),dataIndex:"id"},{title:_("langs.name"),dataIndex:"name"},{title:_("langs.key"),dataIndex:"key"},{title:_("langs.enabled"),dataIndex:"enabled"},{title:_("common.action"),dataIndex:"action"}],y=[{key:"name",value:_("langs.name")}];return{url:e,addEditUrl:s,initData:n,columns:v,filterableColumns:y}},Wg=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,Upload:ka},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y=Ke();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:m=>{s("addEditSuccess",m.xid),y.dispatch("auth/updateAllLangs")}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Yg(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("Upload"),g=o("a-form"),f=o("SaveOutlined"),w=o("a-button"),k=o("a-modal");return d(),b(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(w,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(f)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(w,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("langs.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("langs.key"),name:"key",help:e.rules.key?e.rules.key.message:null,validateStatus:e.rules.key?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.key,"onUpdate:value":s[1]||(s[1]=C=>e.formData.key=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,null,{default:a(()=>[l(m,{span:24},{default:a(()=>[l(u,{label:e.$t("langs.flag"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[l(h,{formData:e.formData,folder:"langs",onOnFileUploaded:s[2]||(s[2]=C=>{e.formData.image=C.file,e.formData.image_url=C.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Un=Y(Wg,[["render",Yg]]),Gg=ne({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:de,AddEdit:Un},setup(e,{emit:s}){const{permsArray:_}=Z(),{initData:n,addEditUrl:v}=En(),y=I(!1),r=I("add"),u=I({...n});return{permsArray:_,visible:y,addEditType:r,addEditUrl:v,formData:u,addEditSuccess:()=>{y.value=!1,u.value={...n},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Jg={key:0};function Qg(e,s,_,n,v,y){const r=o("a-menu-item"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),h=o("AddEdit");return e.permsArray.includes("translations_create")||e.permsArray.includes("admin")?(d(),U("div",Jg,[e.customType=="menu"?(d(),b(r,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ke(e.$slots,"icon")]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick"])):(d(),U(L,{key:1},[e.tooltip?(d(),b(p,{key:0,placement:"topLeft",title:e.$t("langs.add"),"arrow-point-at-center":""},{default:a(()=>[l(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),b(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[l(u)]),default:a(()=>[ke(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),l(h,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("langs.add"),successMessage:e.$t("langs.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):D("",!0)}const pt=Y(Gg,[["render",Qg]]);const Xg=ne({components:{LaptopOutlined:ko,UserOutlined:Co,TranslationOutlined:wo,ShopOutlined:So,SolutionOutlined:$o,ScheduleOutlined:lt,DollarOutlined:Ao,AccountBookOutlined:Do,AppstoreAddOutlined:To,ApartmentOutlined:Bl,FolderOpenOutlined:Eo,MailOutlined:dt,HistoryOutlined:Ll,FormOutlined:Uo,DatabaseOutlined:Oo,RedoOutlined:Io,SettingOutlined:Ja,FileOutlined:Tl,CommentOutlined:Ml,IeOutlined:Fl},setup(){const{appSetting:e,user:s,permsArray:_,appModules:n,appType:v}=Z(),y=et();Ke();const r=I([]);return ie(()=>{const u=typeof y.meta.menuKey=="function"?y.meta.menuKey(y):y.meta.menuKey;r.value=[u.replace("-","_")]}),he(y,(u,m)=>{const p=typeof u.meta.menuKey=="function"?u.meta.menuKey(u):u.meta.menuKey;r.value=[p.replace("-","_")]}),{permsArray:_,selectedKeys:r,appType:v}}}),Zg={class:"setting-sidebar"};function xg(e,s,_,n,v,y){const r=o("LaptopOutlined"),u=o("a-menu-item"),m=o("UserOutlined"),p=o("SettingOutlined"),h=o("RedoOutlined"),g=o("FileOutlined"),f=o("TranslationOutlined"),w=o("SolutionOutlined"),k=o("DollarOutlined"),C=o("MailOutlined"),S=o("a-menu"),E=o("perfect-scrollbar");return d(),U("div",Zg,[l(E,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l(S,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":s[9]||(s[9]=A=>e.selectedKeys=A),style:{border:"none"}},{default:a(()=>[e.permsArray.includes("companies_edit")||e.permsArray.includes("admin")?(d(),b(u,{key:"company",onClick:s[0]||(s[0]=A=>e.$router.push({name:"admin.settings.company.index"}))},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("menu.company")),1)]),_:1})):D("",!0),l(u,{key:"profile",onClick:s[1]||(s[1]=A=>e.$router.push({name:"admin.settings.profile.index"}))},{icon:a(()=>[l(m)]),default:a(()=>[c(" "+i(e.$t("menu.profile")),1)]),_:1}),e.permsArray.includes("password_settings_view")||e.permsArray.includes("admin")?(d(),b(u,{key:"password_settings",onClick:s[2]||(s[2]=A=>e.$router.push({name:"admin.settings.password-settings.index"}))},{icon:a(()=>[l(p)]),default:a(()=>[c(" "+i(e.$t("menu.password_settings")),1)]),_:1})):D("",!0),e.permsArray.includes("lead_status_view")||e.permsArray.includes("admin")?(d(),b(u,{key:"lead_status",onClick:s[3]||(s[3]=A=>e.$router.push({name:"admin.settings.lead-status.index"}))},{icon:a(()=>[l(h)]),default:a(()=>[c(" "+i(e.$t("menu.lead_status")),1)]),_:1})):D("",!0),e.permsArray.includes("audits_view")||e.permsArray.includes("admin")?(d(),b(u,{key:"audits",onClick:s[4]||(s[4]=A=>e.$router.push({name:"admin.settings.audits.index"}))},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.$t("menu.audits")),1)]),_:1})):D("",!0),e.appType=="non-saas"&&(e.permsArray.includes("translations_view")||e.permsArray.includes("admin"))?(d(),b(u,{key:"translations",onClick:s[5]||(s[5]=A=>e.$router.push({name:"admin.settings.translations.index"}))},{icon:a(()=>[l(f)]),default:a(()=>[c(" "+i(e.$t("menu.translations")),1)]),_:1})):D("",!0),e.permsArray.includes("roles_view")||e.permsArray.includes("admin")?(d(),b(u,{key:"roles",onClick:s[6]||(s[6]=A=>e.$router.push({name:"admin.settings.roles.index"}))},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("menu.roles")),1)]),_:1})):D("",!0),e.permsArray.includes("currencies_view")||e.permsArray.includes("admin")?(d(),b(u,{key:"currencies",onClick:s[7]||(s[7]=A=>e.$router.push({name:"admin.settings.currencies.index"}))},{icon:a(()=>[l(k)]),default:a(()=>[c(" "+i(e.$t("menu.currencies")),1)]),_:1})):D("",!0),e.appType=="saas"&&(e.permsArray.includes("email_edit")||e.permsArray.includes("admin"))?(d(),b(u,{key:"email_settings",onClick:s[8]||(s[8]=A=>e.$router.push({name:"admin.settings.email.index"}))},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("menu.email_settings")),1)]),_:1})):D("",!0),e.appType=="non-saas"?(d(),U(L,{key:8},[],64)):D("",!0)]),_:1},8,["selectedKeys"])]),_:1})])}const ta=Y(Xg,[["render",xg]]),e1=ne({emits:["success"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,SettingOutlined:Ja},setup(e,{emit:s}){const{appSetting:_,addMenus:n}=Z(),{addEditRequestAdmin:v,loading:y,rules:r}=pe(),{t:u}=x(),m=I(_.value.shortcut_menus),p=I(n.value),h=I(!1),g=Ke(),f=()=>{const C={position:m.value,shortcut_menus_settings:p.value};v({url:"companies/update-create-menu",data:C,successMessage:u("company.menu_setting_updated"),success:S=>{s("success",m.value),g.dispatch("auth/updateApp"),h.value=!1}})},w=()=>{r.value={},h.value=!0},k=()=>{r.value={},h.value=!1};return he(_,(C,S)=>{m.value=C.shortcut_menus}),{visible:h,loading:y,rules:r,onClose:k,openDrawer:w,onSubmit:f,createMenuPosition:m,createMenus:p,drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function a1(e,s,_,n,v,y){const r=o("SettingOutlined"),u=o("a-button"),m=o("a-select-option"),p=o("a-select"),h=o("a-form-item"),g=o("a-col"),f=o("a-row"),w=o("a-checkbox"),k=o("a-checkbox-group"),C=o("a-form"),S=o("SaveOutlined"),E=o("a-drawer");return d(),U(L,null,[l(u,{type:"primary",onClick:e.openDrawer},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("company.shortcut_menu_setting")),1)]),_:1},8,["onClick"]),l(E,{title:e.$t("company.shortcut_menu_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(u,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[l(S)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(u,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(C,{layout:"vertical"},{default:a(()=>[l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:e.rules.shortcut_menus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[l(p,{value:e.createMenuPosition,"onUpdate:value":s[0]||(s[0]=A=>e.createMenuPosition=A),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[l(m,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[c(i(e.$t("company.top_and_bottom")),1)]),_:1}),l(m,{key:"top",value:"top"},{default:a(()=>[c(i(e.$t("company.top_header")),1)]),_:1}),l(m,{key:"bottom",value:"bottom"},{default:a(()=>[c(i(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(f,{gutter:16},{default:a(()=>[l(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(h,{label:e.$t("company.shortcut_menu_setting"),name:"shortcut_menus",help:e.rules.createMenus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null},{default:a(()=>[l(k,{value:e.createMenus,"onUpdate:value":s[1]||(s[1]=A=>e.createMenus=A),style:{width:"100%"}},{default:a(()=>[l(f,{gutter:[16,10]},{default:a(()=>[l(g,{span:24},{default:a(()=>[l(w,{value:"staff_member"},{default:a(()=>[c(i(e.$t("topbar_add_button.add_staff_member")),1)]),_:1})]),_:1}),l(g,{span:24},{default:a(()=>[l(w,{value:"language"},{default:a(()=>[c(i(e.$t("topbar_add_button.add_language")),1)]),_:1})]),_:1}),l(g,{span:24},{default:a(()=>[l(w,{value:"role"},{default:a(()=>[c(i(e.$t("topbar_add_button.add_role")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const On=Y(e1,[["render",a1]]),t1={components:{EyeOutlined:aa,PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,ExclamationCircleOutlined:De,SaveOutlined:$e,SettingOutlined:Ja,ColorPicker:Ot,CurrencyAddButton:Tn,Upload:ka,SettingSidebar:ta,AdminPageHeader:Ce,CreateMenuSetting:On,LanguageAddButton:pt},setup(){const{addEditRequestAdmin:e,loading:s,rules:_}=pe(),{permsArray:n,appSetting:v,dayjsObject:y,appType:r,themeMode:u}=Z(),{t:m}=x(),p=Ke(),h=I({}),g=I([]),f="currencies?limit=10000",w=I([]),k=I([]),C=I([]),S=I([]),E=v.value,A="timezones",$="all-langs",P=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),T=window.config.theme_mode,F=I("#ffffff");ie(()=>{const O=axiosAdmin.get(A),W=axiosAdmin.get(f),q=axiosAdmin.get($);Promise.all([O,W,q]).then(([N,j,te])=>{k.value=N.data.timezones,C.value=N.data.date_formates,S.value=N.data.time_formates,g.value=j.data,w.value=te.data.langs,V()})});const V=()=>{h.value={name:E.name,short_name:E.short_name,email:E.email,phone:E.phone,address:E.address,left_sidebar_theme:E.left_sidebar_theme,dark_logo:E.dark_logo,dark_logo_url:E.dark_logo_url,light_logo:E.light_logo,light_logo_url:E.light_logo_url,small_dark_logo:E.small_dark_logo,small_light_logo:E.small_light_logo,small_dark_logo_url:E.small_dark_logo_url,small_light_logo_url:E.small_light_logo_url,login_image:E.login_image,login_image_url:E.login_image_url,shortcut_menus:E.shortcut_menus,rtl:E.rtl,currency_id:E.x_currency_id,lang_id:E.x_lang_id,primary_color:E.primary_color,login_card_color:E.login_card_color,timezone:E.timezone,date_format:E.date_format,time_format:E.time_format,auto_detect_timezone:E.auto_detect_timezone,app_debug:E.app_debug,update_app_notification:E.update_app_notification,_method:"PUT"}};return{appType:r,permsArray:n,formData:h,loading:s,rules:_,onSubmit:()=>{e({url:`companies/${E.xid}`,data:h.value,successMessage:m("company.updated"),success:O=>{p.dispatch("auth/updateApp")}})},gradientColor:P,timezones:k,dateFormats:C,timeFormats:S,dayjsObject:y,appThemeMode:T,themeMode:u,addMenuSettingUpdated:O=>{h.value.shortcut_menus=O},currencyAdded:()=>{axiosAdmin.get(f).then(O=>{g.value=O.data})},currencies:g,allLangs:w,languageAdded:()=>{axiosAdmin.get($).then(O=>{w.value=O.data.langs})},loginCardColor:F}}},l1={style:{display:"flex"}},n1={style:{display:"flex"}};function o1(e,s,_,n,v,y){const r=o("SaveOutlined"),u=o("a-button"),m=o("CreateMenuSetting"),p=o("a-space"),h=o("a-page-header"),g=o("router-link"),f=o("a-breadcrumb-item"),w=o("a-breadcrumb"),k=o("AdminPageHeader"),C=o("SettingSidebar"),S=o("a-col"),E=o("a-input"),A=o("a-form-item"),$=o("a-row"),P=o("a-textarea"),T=o("a-select-option"),F=o("a-select"),V=o("color-picker"),z=o("Upload"),K=o("CurrencyAddButton"),B=o("LanguageAddButton"),R=o("a-switch"),O=o("a-form"),W=o("a-card"),q=o("admin-page-table-content");return d(),U(L,null,[l(k,null,{header:a(()=>[l(h,{title:e.$t("menu.company"),class:"p-0"},Fa({_:2},[n.permsArray.includes("companies_edit")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[l(p,null,{default:a(()=>[l(u,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick"]),l(m,{onSuccess:n.addMenuSettingUpdated},null,8,["onSuccess"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:a(()=>[l(w,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(f,null,{default:a(()=>[l(g,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(f,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(f,null,{default:a(()=>[c(i(e.$t("menu.company")),1)]),_:1})]),_:1})]),_:1}),l($,null,{default:a(()=>[l(S,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(C)]),_:1},8,["style"]),l(S,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(q,null,{default:a(()=>[l(W,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(O,{layout:"vertical"},{default:a(()=>[l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[l(E,{value:n.formData.name,"onUpdate:value":s[0]||(s[0]=N=>n.formData.name=N),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.short_name"),name:"short_name",help:n.rules.short_name?n.rules.short_name.message:null,validateStatus:n.rules.short_name?"error":null,class:"required"},{default:a(()=>[l(E,{value:n.formData.short_name,"onUpdate:value":s[1]||(s[1]=N=>n.formData.short_name=N),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[l(E,{value:n.formData.email,"onUpdate:value":s[2]||(s[2]=N=>n.formData.email=N),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null,class:"required"},{default:a(()=>[l(E,{value:n.formData.phone,"onUpdate:value":s[3]||(s[3]=N=>n.formData.phone=N),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(A,{label:e.$t("company.address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[l(P,{value:n.formData.address,"onUpdate:value":s[4]||(s[4]=N=>n.formData.address=N),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:n.rules.left_sidebar_theme?n.rules.left_sidebar_theme.message:null,validateStatus:n.rules.left_sidebar_theme?"error":null},{default:a(()=>[l(F,{value:n.formData.left_sidebar_theme,"onUpdate:value":s[5]||(s[5]=N=>n.formData.left_sidebar_theme=N),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:a(()=>[l(T,{key:"dark",value:"dark"},{default:a(()=>[c(i(e.$t("company.dark")),1)]),_:1}),n.appThemeMode!="dark"?(d(),b(T,{key:"light",value:"light"},{default:a(()=>[c(i(e.$t("company.light")),1)]),_:1})):D("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.primary_color"),name:"primary_color",help:n.rules.primary_color?n.rules.primary_color.message:null,validateStatus:n.rules.primary_color?"error":null},{default:a(()=>[l(V,{pureColor:n.formData.primary_color,"onUpdate:pureColor":s[6]||(s[6]=N=>n.formData.primary_color=N),format:"hex",useType:"pure",gradientColor:n.gradientColor,"onUpdate:gradientColor":s[7]||(s[7]=N=>n.gradientColor=N)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.login_card_color"),name:"login_card_color",help:n.rules.login_card_color?n.rules.login_card_color.message:null,validateStatus:n.rules.login_card_color?"error":null},{default:a(()=>[l(V,{pureColor:n.formData.login_card_color,"onUpdate:pureColor":s[8]||(s[8]=N=>n.formData.login_card_color=N),format:"hex",useType:"pure",gradientColor:n.loginCardColor,"onUpdate:gradientColor":s[9]||(s[9]=N=>n.loginCardColor=N)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.dark_logo"),name:"dark_logo",help:n.rules.dark_logo?n.rules.dark_logo.message:null,validateStatus:n.rules.dark_logo?"error":null},{default:a(()=>[l(z,{formData:n.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:s[10]||(s[10]=N=>{n.formData.dark_logo=N.file,n.formData.dark_logo_url=N.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.light_logo"),name:"light_logo",help:n.rules.light_logo?n.rules.light_logo.message:null,validateStatus:n.rules.light_logo?"error":null},{default:a(()=>[l(z,{formData:n.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:s[11]||(s[11]=N=>{n.formData.light_logo=N.file,n.formData.light_logo_url=N.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:n.rules.small_dark_logo?n.rules.small_dark_logo.message:null,validateStatus:n.rules.small_dark_logo?"error":null},{default:a(()=>[l(z,{formData:n.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:s[12]||(s[12]=N=>{n.formData.small_dark_logo=N.file,n.formData.small_dark_logo_url=N.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:n.rules.small_light_logo?n.rules.small_light_logo.message:null,validateStatus:n.rules.small_light_logo?"error":null},{default:a(()=>[l(z,{formData:n.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:s[13]||(s[13]=N=>{n.formData.small_light_logo=N.file,n.formData.small_light_logo_url=N.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.currency"),name:"currency_id",help:n.rules.currency_id?n.rules.currency_id.message:null,validateStatus:n.rules.currency_id?"error":null,class:"required"},{default:a(()=>[M("span",l1,[l(F,{value:n.formData.currency_id,"onUpdate:value":s[14]||(s[14]=N=>n.formData.currency_id=N),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.currencies,N=>(d(),b(T,{key:N.xid,value:N.xid},{default:a(()=>[c(i(`${N.name} (${N.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(K,{onOnAddSuccess:n.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.language"),name:"lang_id",help:n.rules.lang_id?n.rules.lang_id.message:null,validateStatus:n.rules.lang_id?"error":null,class:"required"},{default:a(()=>[M("span",n1,[l(F,{value:n.formData.lang_id,"onUpdate:value":s[15]||(s[15]=N=>n.formData.lang_id=N),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.allLangs,N=>(d(),b(T,{key:N.xid,value:N.xid},{default:a(()=>[c(i(N.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(B,{onOnAddSuccess:n.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.layout"),name:"rtl",help:n.rules.rtl?n.rules.rtl.message:null,validateStatus:n.rules.rtl?"error":null,class:"required"},{default:a(()=>[l(F,{value:n.formData.rtl,"onUpdate:value":s[16]||(s[16]=N=>n.formData.rtl=N),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),optionFilterProp:"label","show-search":""},{default:a(()=>[l(T,{key:"rtl",value:1},{default:a(()=>[c(i(e.$t("company.rtl")),1)]),_:1}),l(T,{key:"ltr",value:0},{default:a(()=>[c(i(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:n.rules.shortcut_menus?n.rules.shortcut_menus.message:null,validateStatus:n.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[l(F,{value:n.formData.shortcut_menus,"onUpdate:value":s[17]||(s[17]=N=>n.formData.shortcut_menus=N),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),optionFilterProp:"label","show-search":""},{default:a(()=>[l(T,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[c(i(e.$t("company.top_and_bottom")),1)]),_:1}),l(T,{key:"top",value:"top"},{default:a(()=>[c(i(e.$t("company.top_header")),1)]),_:1}),l(T,{key:"bottom",value:"bottom"},{default:a(()=>[c(i(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[l(A,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:n.rules.auto_detect_timezone?n.rules.auto_detect_timezone.message:null,validateStatus:n.rules.auto_detect_timezone?"error":null},{default:a(()=>[l(R,{checked:n.formData.auto_detect_timezone,"onUpdate:checked":s[18]||(s[18]=N=>n.formData.auto_detect_timezone=N),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(A,{label:e.$t("company.default_timezone"),name:"timezone",help:n.rules.timezone?n.rules.timezone.message:null,validateStatus:n.rules.timezone?"error":null,class:"required"},{default:a(()=>[l(F,{value:n.formData.timezone,"onUpdate:value":s[19]||(s[19]=N=>n.formData.timezone=N),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.timezones,(N,j)=>(d(),b(T,{key:j,value:N},{default:a(()=>[c(i(N),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.appType=="non-saas"?(d(),b(S,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[l(A,{label:e.$t("company.app_debug"),name:"app_debug",help:n.rules.app_debug?n.rules.app_debug.message:null,validateStatus:n.rules.app_debug?"error":null},{default:a(()=>[l(R,{checked:n.formData.app_debug,"onUpdate:checked":s[20]||(s[20]=N=>n.formData.app_debug=N),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),n.appType=="non-saas"?(d(),b(S,{key:1,xs:24,sm:24,md:4,lg:4},{default:a(()=>[l(A,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:n.rules.update_app_notification?n.rules.update_app_notification.message:null,validateStatus:n.rules.update_app_notification?"error":null},{default:a(()=>[l(R,{checked:n.formData.update_app_notification,"onUpdate:checked":s[21]||(s[21]=N=>n.formData.update_app_notification=N),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1}),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.date_format"),name:"date_format",help:n.rules.date_format?n.rules.date_format.message:null,validateStatus:n.rules.date_format?"error":null,class:"required"},{default:a(()=>[l(F,{value:n.formData.date_format,"onUpdate:value":s[22]||(s[22]=N=>n.formData.date_format=N),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.dateFormats,(N,j)=>(d(),b(T,{key:j,value:N},{default:a(()=>[c(i(`(${j}) => `+n.dayjsObject().format(N)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(S,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(A,{label:e.$t("company.time_format"),name:"time_format",help:n.rules.time_format?n.rules.time_format.message:null,validateStatus:n.rules.time_format?"error":null,class:"required"},{default:a(()=>[l(F,{value:n.formData.time_format,"onUpdate:value":s[23]||(s[23]=N=>n.formData.time_format=N),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.timeFormats,(N,j)=>(d(),b(T,{key:j,value:j},{default:a(()=>[c(i(`(${N}) => `+n.dayjsObject().format(j)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.appType=="non-saas"?(d(),b($,{key:0,gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(A,{label:e.$t("company.login_image"),name:"login_image",help:n.rules.login_image?n.rules.login_image.message:null,validateStatus:n.rules.login_image?"error":null},{default:a(()=>[l(z,{formData:n.formData,folder:"company",imageField:"login_image",onOnFileUploaded:s[24]||(s[24]=N=>{n.formData.login_image=N.file,n.formData.login_image_url=N.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):D("",!0),l($,{gutter:16},{default:a(()=>[l(S,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(A,null,{default:a(()=>[l(u,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const s1=Y(t1,[["render",o1]]),d1={components:{EyeOutlined:aa,PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,ExclamationCircleOutlined:De,SaveOutlined:$e,Upload:ka,SettingSidebar:ta,AdminPageHeader:Ce},setup(){const{addEditRequestAdmin:e,loading:s,rules:_}=pe(),{themeMode:n}=Z(),{t:v}=x(),y=Ke(),r=I({}),u=I({}),m=y.state.auth.user;return ie(()=>{r.value={name:m.name,email:m.email,password:"",phone:m.phone,profile_image:m.profile_image,profile_image_url:m.profile_image_url}}),{loading:s,rules:_,formData:r,currencies:u,onSubmit:()=>{e({url:"profile",data:r.value,successMessage:v("user.profile_updated"),success:h=>{y.commit("auth/updateUser",h.user)}})},themeMode:n}}},i1={class:"small-text-message"};function r1(e,s,_,n,v,y){const r=o("SaveOutlined"),u=o("a-button"),m=o("a-page-header"),p=o("router-link"),h=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),w=o("SettingSidebar"),k=o("a-col"),C=o("a-input"),S=o("a-form-item"),E=o("a-row"),A=o("Upload"),$=o("a-textarea"),P=o("a-form"),T=o("a-card"),F=o("admin-page-table-content");return d(),U(L,null,[l(f,null,{header:a(()=>[l(m,{title:e.$t("menu.profile"),class:"p-0"},{extra:a(()=>[l(u,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[l(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(h,null,{default:a(()=>[l(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(w)]),_:1},8,["style"]),l(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(F,null,{default:a(()=>[l(T,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(P,{layout:"vertical"},{default:a(()=>[l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("user.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.name,"onUpdate:value":s[0]||(s[0]=V=>n.formData.name=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("user.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.email,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")]),disabled:""},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(S,{label:e.$t("user.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null},{default:a(()=>[l(C,{value:n.formData.password,"onUpdate:value":s[1]||(s[1]=V=>n.formData.password=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),type:"password",autocomplete:"off"},null,8,["value","placeholder"]),M("small",i1,i(e.$t("user.password_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("user.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null},{default:a(()=>[l(C,{value:n.formData.phone,"onUpdate:value":s[2]||(s[2]=V=>n.formData.phone=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(S,{label:e.$t("user.profile_image"),name:"profile_image",help:n.rules.profile_image?n.rules.profile_image.message:null,validateStatus:n.rules.profile_image?"error":null},{default:a(()=>[l(A,{formData:n.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[3]||(s[3]=V=>{n.formData.profile_image=V.file,n.formData.profile_image_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(S,{label:e.$t("user.address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[l($,{value:n.formData.address,"onUpdate:value":s[4]||(s[4]=V=>n.formData.address=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(S,null,{default:a(()=>[l(u,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const u1=Y(d1,[["render",r1]]),m1={components:{EyeOutlined:aa,PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,ExclamationCircleOutlined:De,SaveOutlined:$e,FormItemHeading:ct,SettingSidebar:ta,AdminPageHeader:Ce},setup(){const{addEditRequestAdmin:e,loading:s,rules:_}=pe(),{t:n}=x(),v=I({}),y=I({}),r="password-settings?fields=id,xid,upper_case,lower_case,special_character,number,password_length,password_expiration,login_failed_attempts,last_used_passwords,disable_inactive_user",u=I(""),{themeMode:m,permsArray:p}=Z();return ie(()=>{const g=axiosAdmin.get(r);Promise.all([g]).then(([f])=>{y.value=f.data,Ee(y.value,w=>{v.value.upper_case=w.upper_case,v.value.lower_case=w.lower_case,v.value.special_character=w.special_character,v.value.number=w.number,v.value.password_length=w.password_length,v.value.password_expiration=w.password_expiration,v.value.disable_inactive_user=w.disable_inactive_user,v.value.login_failed_attempts=w.login_failed_attempts,v.value.last_used_passwords=w.last_used_passwords,u.value=w.xid})})}),{loading:s,rules:_,formData:v,onSubmit:()=>{e({url:`password-settings/${u.value}`,data:{...v.value,_method:"PUT"},successMessage:n("password_setting.updated"),success:g=>{}})},themeMode:m,permsArray:p}}};function c1(e,s,_,n,v,y){const r=o("SaveOutlined"),u=o("a-button"),m=o("a-page-header"),p=o("router-link"),h=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),w=o("SettingSidebar"),k=o("a-col"),C=o("a-input-number"),S=o("a-form-item"),E=o("a-row"),A=o("FormItemHeading"),$=o("a-radio-button"),P=o("a-radio-group"),T=o("a-form"),F=o("a-card"),V=o("admin-page-table-content");return d(),U(L,null,[l(f,null,{header:a(()=>[l(m,{title:e.$t("menu.profile"),class:"p-0"},{extra:a(()=>[l(u,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[l(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(h,null,{default:a(()=>[l(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(w)]),_:1},8,["style"]),l(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(V,null,{default:a(()=>[l(F,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(T,{layout:"vertical"},{default:a(()=>[l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("password_setting.password_expiration"),name:"password_expiration",help:n.rules.password_expiration?n.rules.password_expiration.message:null,validateStatus:n.rules.password_expiration?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.password_expiration,"onUpdate:value":s[0]||(s[0]=z=>n.formData.password_expiration=z),style:{width:"100%"},placeholder:e.$t("common.placeholder_default_text",[e.$t("password_setting.password_expiration")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("password_setting.login_failed_attempts"),name:"login_failed_attempts",help:n.rules.login_failed_attempts?n.rules.login_failed_attempts.message:null,validateStatus:n.rules.login_failed_attempts?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.login_failed_attempts,"onUpdate:value":s[1]||(s[1]=z=>n.formData.login_failed_attempts=z),style:{width:"100%"},placeholder:e.$t("common.placeholder_default_text",[e.$t("password_setting.login_failed_attempts")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("password_setting.last_used_passwords"),name:"last_used_passwords",help:n.rules.last_used_passwords?n.rules.last_used_passwords.message:null,validateStatus:n.rules.last_used_passwords?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.last_used_passwords,"onUpdate:value":s[2]||(s[2]=z=>n.formData.last_used_passwords=z),style:{width:"100%"},placeholder:e.$t("common.placeholder_default_text",[e.$t("password_setting.last_used_passwords")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("password_setting.disable_inactive_user"),name:"disable_inactive_user",help:n.rules.disable_inactive_user?n.rules.disable_inactive_user.message:null,validateStatus:n.rules.disable_inactive_user?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.disable_inactive_user,"onUpdate:value":s[3]||(s[3]=z=>n.formData.disable_inactive_user=z),style:{width:"100%"},placeholder:e.$t("common.placeholder_default_text",[e.$t("password_setting.disable_inactive_user")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(A,null,{default:a(()=>[c(i(e.$t("password_setting.password_formats")),1)]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(S,{label:e.$t("password_setting.lower_case"),name:"lower_case",help:n.rules.lower_case?n.rules.lower_case.message:null,validateStatus:n.rules.lower_case?"error":null},{default:a(()=>[l(P,{value:n.formData.lower_case,"onUpdate:value":s[4]||(s[4]=z=>n.formData.lower_case=z),"button-style":"solid",size:"small"},{default:a(()=>[l($,{value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l($,{value:0},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(S,{label:e.$t("password_setting.upper_case"),name:"upper_case",help:n.rules.upper_case?n.rules.upper_case.message:null,validateStatus:n.rules.upper_case?"error":null},{default:a(()=>[l(P,{value:n.formData.upper_case,"onUpdate:value":s[5]||(s[5]=z=>n.formData.upper_case=z),"button-style":"solid",size:"small"},{default:a(()=>[l($,{value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l($,{value:0},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(S,{label:e.$t("password_setting.special_character"),name:"special_character",help:n.rules.special_character?n.rules.special_character.message:null,validateStatus:n.rules.special_character?"error":null},{default:a(()=>[l(P,{value:n.formData.special_character,"onUpdate:value":s[6]||(s[6]=z=>n.formData.special_character=z),"button-style":"solid",size:"small"},{default:a(()=>[l($,{value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l($,{value:0},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(S,{label:e.$t("password_setting.number"),name:"number",help:n.rules.number?n.rules.number.message:null,validateStatus:n.rules.number?"error":null},{default:a(()=>[l(P,{value:n.formData.number,"onUpdate:value":s[7]||(s[7]=z=>n.formData.number=z),"button-style":"solid",size:"small"},{default:a(()=>[l($,{value:1},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l($,{value:0},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(S,{label:e.$t("password_setting.password_length"),name:"password_length",help:n.rules.password_length?n.rules.password_length.message:null,validateStatus:n.rules.password_length?"error":null,class:"required"},{default:a(()=>[l(C,{value:n.formData.password_length,"onUpdate:value":s[8]||(s[8]=z=>n.formData.password_length=z),style:{width:"100%"},placeholder:e.$t("common.placeholder_default_text",[e.$t("password_setting.password_length")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(E,{gutter:16},{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(S,null,{default:a(()=>[n.permsArray.includes("password_settings_edit")||n.permsArray.includes("admin")?(d(),b(u,{key:0,type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const p1=Y(m1,[["render",c1]]),_1={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Un,DownloadOutlined:ga},setup(){const{addEditRequestAdmin:e,loading:s}=pe(),{permsArray:_,downloadLangCsvUrl:n}=Z(),{url:v,addEditUrl:y,initData:r,columns:u,filterableColumns:m}=En(),p=Fe(),{t:h}=x();return ie(()=>{p.tableUrl.value={url:v},p.table.filterableColumns=m,p.fetch({page:1}),p.crudUrl.value=y,p.langKey.value="langs",p.initData.value={...r},p.formData.value={...r}}),{permsArray:_,downloadLangCsvUrl:n,columns:u,...p,filterableColumns:m,changeLangStatus:f=>{e({url:je(`langs/${f.xid}`),data:{name:f.name,key:f.key,enabled:f.enabled,_method:"PUT"},successMessage:h("langs.status_updated"),success:w=>{}})},loading:s}}},f1={class:"table-responsive"};function g1(e,s,_,n,v,y){const r=o("DeleteOutlined"),u=o("a-button"),m=o("a-space"),p=o("a-col"),h=o("a-select-option"),g=o("a-select"),f=o("a-input-search"),w=o("a-input-group"),k=o("a-row"),C=o("admin-page-filters"),S=o("AddEdit"),E=o("a-avatar"),A=o("a-list-item-meta"),$=o("a-list-item"),P=o("a-switch"),T=o("EditOutlined"),F=o("DownloadOutlined"),V=o("a-typography-link"),z=o("a-table"),K=o("admin-page-table-content");return d(),U(L,null,[l(C,null,{default:a(()=>[l(k,{gutter:[16,16]},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(m,null,{default:a(()=>[ke(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))?(d(),b(u,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:3})]),_:3}),l(p,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(k,{gutter:[16,16],justify:"end"},{default:a(()=>[l(p,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[l(w,{compact:""},{default:a(()=>[l(g,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=B=>e.table.searchColumn=B),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,B=>(d(),b(h,{key:B.key},{default:a(()=>[c(i(B.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(f,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=B=>e.table.searchString=B),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),l(K,null,{default:a(()=>[l(S,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(k,null,{default:a(()=>[l(p,{span:24},{default:a(()=>[M("div",f1,[l(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:B=>({disabled:!((_.panelType=="admin"&&(n.permsArray.includes("translations_delete")||n.permsArray.includes("admin"))||_.panelType=="superadmin")&&B.key!="en"),name:B.xid})},columns:n.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading||n.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:B,record:R})=>[B.dataIndex==="name"?(d(),b($,{key:0},{default:a(()=>[l(A,null,{title:a(()=>[c(i(R.name),1)]),avatar:a(()=>[l(E,{shape:"square",size:"small",src:R.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)):D("",!0),B.dataIndex==="enabled"?(d(),b(P,{key:1,checked:R.enabled,"onUpdate:checked":O=>R.enabled=O,checkedValue:1,unCheckedValue:0,onChange:O=>n.changeLangStatus(R),size:"small",disabled:_.panelType=="admin"&&!(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))||R.key=="en"},null,8,["checked","onUpdate:checked","onChange","disabled"])):D("",!0),B.dataIndex==="action"?(d(),U(L,{key:2},[(_.panelType=="admin"&&(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))||_.panelType=="superadmin")&&R.key!="en"?(d(),b(u,{key:0,type:"primary",onClick:O=>e.editItem(R),style:{"margin-left":"4px"}},{icon:a(()=>[l(T)]),_:2},1032,["onClick"])):D("",!0),(_.panelType=="admin"&&(n.permsArray.includes("translations_delete")||n.permsArray.includes("admin"))||_.panelType=="superadmin")&&R.key!="en"?(d(),b(u,{key:1,type:"primary",onClick:O=>e.showDeleteConfirm(R.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(r)]),_:2},1032,["onClick"])):D("",!0),l(V,{href:`${n.downloadLangCsvUrl}/${R.xid}`,target:"_blank"},{default:a(()=>[l(u,{type:"primary",style:{"margin-left":"4px"}},{icon:a(()=>[l(F)]),_:1})]),_:2},1032,["href"])],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const h1=Y(_1,[["render",g1]]),v1={components:{PlusOutlined:de,SettingSidebar:ta,AdminPageHeader:Ce,LanguageSettings:h1,ImportTranslation:Va},setup(){const{permsArray:e,appType:s,themeMode:_}=Z(),n=I(null),v=window.config.translatioins_sample_file;return{permsArray:e,themeMode:_,appType:s,langSettingRef:n,addItem:()=>{n.value.addItem()},sampleFileUrl:v}}};function b1(e,s,_,n,v,y){const r=o("ImportTranslation"),u=o("PlusOutlined"),m=o("a-button"),p=o("a-space"),h=o("a-page-header"),g=o("router-link"),f=o("a-breadcrumb-item"),w=o("a-breadcrumb"),k=o("AdminPageHeader"),C=o("SettingSidebar"),S=o("a-col"),E=o("LanguageSettings"),A=o("a-row");return d(),U(L,null,[l(k,null,{header:a(()=>[l(h,{title:e.$t("menu.languages"),onBack:s[0]||(s[0]=()=>e.$router.push({name:"admin.settings.translations.index"})),class:"p-0"},Fa({_:2},[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[l(p,null,{default:a(()=>[n.appType=="non-saas"?(d(),b(r,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):D("",!0),l(m,{type:"primary",onClick:n.addItem},{default:a(()=>[l(u),c(" "+i(e.$t("langs.add")),1)]),_:1},8,["onClick"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:a(()=>[l(w,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(f,null,{default:a(()=>[l(g,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(f,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(f,null,{default:a(()=>[l(g,{to:{name:"admin.settings.translations.index"}},{default:a(()=>[c(i(e.$t("menu.translations")),1)]),_:1},8,["to"])]),_:1}),l(f,null,{default:a(()=>[c(i(e.$t("menu.languages")),1)]),_:1})]),_:1})]),_:1}),l(A,null,{default:a(()=>[l(S,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(C)]),_:1},8,["style"]),l(S,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(E,{ref:"langSettingRef"},{actionButtons:a(()=>[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?(d(),b(p,{key:0},{default:a(()=>[l(m,{type:"primary",onClick:n.addItem},{default:a(()=>[l(u),c(" "+i(e.$t("langs.add")),1)]),_:1},8,["onClick"]),n.appType=="non-saas"?(d(),b(r,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):D("",!0)]),_:1})):D("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const y1=Y(v1,[["render",b1]]);const k1={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Ql,SettingSidebar:ta,AdminPageHeader:Ce},setup(){const{permsArray:e,themeMode:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r,preFetchData:u,getPreFetchData:m}=Jl(),p=Fe();return ie(()=>{m(),p.tableUrl.value={url:_,filters:""},p.table.filterableColumns=r,p.fetch({page:1}),p.crudUrl.value=n,p.langKey.value="role",p.initData.value={...v},p.formData.value={...v}}),{permsArray:e,themeMode:s,columns:y,...p,filterableColumns:r,preFetchData:u}}},C1={class:"table-responsive"};function w1(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("PlusOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-space"),E=o("a-row"),A=o("admin-page-filters"),$=o("AddEdit"),P=o("EditOutlined"),T=o("a-table"),F=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.roles"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.roles")),1)]),_:1})]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(A,null,{default:a(()=>[l(E,{gutter:[16,16]},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(S,null,{default:a(()=>[n.permsArray.includes("roles_create")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(w),c(" "+i(e.$t("role.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))?(d(),b(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(F,null,{default:a(()=>[l($,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(E,null,{default:a(()=>[l(f,{span:24},{default:a(()=>[M("div",C1,[l(T,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:V=>({disabled:!((n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))&&V.name!="admin"),name:V.xid})},columns:n.columns,"row-key":V=>V.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:V,record:z})=>[V.dataIndex==="action"?(d(),U(L,{key:0},[(n.permsArray.includes("roles_edit")||n.permsArray.includes("admin"))&&z.name!="admin"?(d(),b(k,{key:0,type:"primary",onClick:K=>e.editItem(z),style:{"margin-left":"4px"}},{icon:a(()=>[l(P)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))&&z.name!="admin"?(d(),b(k,{key:1,type:"primary",danger:"",onClick:K=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(C)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const S1=Y(k1,[["render",w1]]),$1={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Kt},setup(e){const{permsArray:s,appSetting:_}=Z(),{url:n,addEditUrl:v,initData:y,columns:r,filterableColumns:u}=Vt(e.panelType),m=Fe();return ie(()=>{m.tableUrl.value={url:n},m.table.filterableColumns=u,m.fetch({page:1}),m.crudUrl.value=v,m.langKey.value="currency",m.initData.value={...y},m.formData.value={...y}}),{permsArray:s,appSetting:_,columns:r,...m,filterableColumns:u}}},A1={class:"table-responsive"};function D1(e,s,_,n,v,y){const r=o("DeleteOutlined"),u=o("a-button"),m=o("a-space"),p=o("a-col"),h=o("a-select-option"),g=o("a-select"),f=o("a-input-search"),w=o("a-input-group"),k=o("a-row"),C=o("admin-page-filters"),S=o("AddEdit"),E=o("EditOutlined"),A=o("a-table"),$=o("admin-page-table-content");return d(),U(L,null,[l(C,null,{default:a(()=>[l(k,{gutter:[16,16]},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(m,null,{default:a(()=>[ke(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))?(d(),b(u,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:3})]),_:3}),l(p,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(k,{gutter:[16,16],justify:"end"},{default:a(()=>[l(p,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[l(w,{compact:""},{default:a(()=>[l(g,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=P=>e.table.searchColumn=P),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,P=>(d(),b(h,{key:P.key},{default:a(()=>[c(i(P.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(f,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=P=>e.table.searchString=P),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),l($,null,{default:a(()=>[l(S,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(k,null,{default:a(()=>[l(p,{span:24},{default:a(()=>[M("div",A1,[l(A,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:P=>({disabled:!((_.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||_.panelType=="superadmin")&&n.appSetting.x_currency_id!=P.xid),name:P.xid})},columns:n.columns,"row-key":P=>P.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:P,record:T})=>[P.dataIndex==="action"?(d(),U(L,{key:0},[_.panelType=="admin"&&(n.permsArray.includes("currencies_edit")||n.permsArray.includes("admin"))||_.panelType=="superadmin"?(d(),b(u,{key:0,type:"primary",onClick:F=>e.editItem(T),style:{"margin-left":"4px"}},{icon:a(()=>[l(E)]),_:2},1032,["onClick"])):D("",!0),(_.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||_.panelType=="superadmin")&&n.appSetting.x_currency_id!=T.xid?(d(),b(u,{key:1,type:"primary",onClick:F=>e.showDeleteConfirm(T.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(r)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const T1=Y($1,[["render",D1]]),E1={components:{PlusOutlined:de,SettingSidebar:ta,AdminPageHeader:Ce,CurrencySettings:T1},setup(){const{permsArray:e,themeMode:s}=Z(),_=I(null);return{themeMode:s,permsArray:e,currencySettingRef:_,addItem:()=>{_.value.addItem()}}}};function U1(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button"),m=o("a-page-header"),p=o("router-link"),h=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),w=o("SettingSidebar"),k=o("a-col"),C=o("CurrencySettings"),S=o("a-row");return d(),U(L,null,[l(f,null,{header:a(()=>[l(m,{title:e.$t("menu.currencies"),class:"p-0"},Fa({_:2},[n.permsArray.includes("currencies_create")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[l(u,{type:"primary",onClick:n.addItem},{default:a(()=>[l(r),c(" "+i(e.$t("currency.add")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:a(()=>[l(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(h,null,{default:a(()=>[l(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.currencies")),1)]),_:1})]),_:1})]),_:1}),l(S,null,{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(w)]),_:1},8,["style"]),l(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(C,{ref:"currencySettingRef"},{actionButtons:a(()=>[n.permsArray.includes("currencies_create")||n.permsArray.includes("admin")?(d(),b(u,{key:0,type:"primary",onClick:n.addItem},{default:a(()=>[l(r),c(" "+i(e.$t("currency.add")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const O1=Y(E1,[["render",U1]]),I1=ne({emits:["fetchTranslationsSuccesss"],components:{SyncOutlined:Ta},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n}=pe(),{t:v}=x();return{loading:n,refetchTranslations:()=>{_({url:je("translations/refetch"),data:{},successMessage:v("translations.fetched_successfully"),success:r=>{s("fetchTranslationsSuccesss")}})}}}});function P1(e,s,_,n,v,y){const r=o("SyncOutlined"),u=o("a-button");return d(),b(u,{onClick:e.refetchTranslations,loading:e.loading},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("translations.fetch_new_translations")),1)]),_:1},8,["onClick","loading"])}const M1=Y(I1,[["render",P1]]);const F1={components:{FetchNewTranslation:M1,LangAddButton:pt,EditOutlined:Oe,CheckOutlined:Ga},setup(){const{permsArray:e,rightSidebarValue:s}=Z(),_=I([]),n=I([]),v=I([]),y=I(void 0),r=I([]),u=Ke(),m=_e(()=>u.state.auth.lang),p=Le({data:[]}),h=Le({}),g=I(0),f=(A,$)=>{h[A[`${$}_id`]]={id:A[`${$}_id`],value:A[$]}},w=A=>{axiosAdmin.post(je(`translations/${A}`),{value:h[A].value,_method:"PUT"}).then(()=>{S(),delete h[A]})};var k={};const C=()=>{const A=[{title:"Group",key:"group",dataIndex:"group",fixed:"left"}],$=[];_.value.map(V=>{A.push({title:V.name,key:V.key,dataIndex:V.key}),$.push({key:V.key})}),v.value=$,n.value=A;const P=[];_.value.map(V=>{k[V.key]={},V.translations.map(z=>{k[V.key][z.group]==null&&(k[V.key][z.group]={},V.key=="en"&&P.push(z.group)),k[V.key][z.group][z.key]={id:z.xid,value:z.value}})}),y.value===void 0&&(y.value=P[0]);const T=k.en[y.value],F=[];Object.keys(T).forEach(V=>{const z={};A.map(K=>{K.key=="group"?z[K.key]=V:(z[K.key]=k[K.key][y.value][V]&&k[K.key][y.value][V].value?k[K.key][y.value][V].value:"",z[`${K.key}_id`]=k[K.key][y.value][V]&&k[K.key][y.value][V].id?k[K.key][y.value][V].id:"")}),F.push(z)}),r.value=P,p.data=F};ie(()=>{S()});const S=()=>{axiosAdmin.get("lang-trans").then(A=>{_.value=A.data.data,Wl(A,i18n,m.value),C()})};return{columns:n,table:p,editableData:h,activeTab:g,langKeys:v,group:y,groupKeys:r,getData:S,edit:f,save:w,permsArray:e,langAdded:()=>{S()},rightSidebarValue:s}}},R1={key:0,class:"editable-cell"},L1={key:0,class:"editable-cell-input-wrapper"},B1={key:1,class:"editable-cell-text-wrapper"};function q1(e,s,_,n,v,y){const r=o("a-col"),u=o("a-select-option"),m=o("a-select"),p=o("FetchNewTranslation"),h=o("a-row"),g=o("admin-page-filters"),f=o("a-input"),w=o("check-outlined"),k=o("edit-outlined"),C=o("a-table"),S=o("admin-page-table-content");return d(),U(L,null,[l(g,null,{default:a(()=>[l(h,{gutter:[16,16]},{default:a(()=>[l(r,{xs:24,sm:24,md:12,lg:10,xl:n.rightSidebarValue==!0?11:12},{default:a(()=>[ke(e.$slots,"actionButtons")]),_:3},8,["xl"]),l(r,{xs:24,sm:24,md:12,lg:14,xl:12},{default:a(()=>[l(h,{gutter:[16,16],justify:"end"},{default:a(()=>[l(r,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l(m,{value:n.group,"onUpdate:value":s[0]||(s[0]=E=>n.group=E),"show-search":"",placeholder:"Select group...",style:{width:"100%"},onChange:n.getData},{default:a(()=>[(d(!0),U(L,null,G(n.groupKeys,E=>(d(),b(u,{key:E,value:E},{default:a(()=>[c(i(E),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1}),l(r,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l(p,{onFetchTranslationsSuccesss:n.getData},null,8,["onFetchTranslationsSuccesss"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),l(S,null,{default:a(()=>[l(C,{columns:n.columns,"row-key":E=>E.group,"data-source":n.table.data,pagination:!1,bordered:"",size:"middle"},{bodyCell:a(({column:E,text:A,record:$})=>[(d(!0),U(L,null,G(n.langKeys,P=>(d(),U(L,{key:P},[E.dataIndex===P.key?(d(),U("div",R1,[n.editableData[$[`${P.key}_id`]]?(d(),U("div",L1,[l(f,{value:n.editableData[$[`${P.key}_id`]].value,"onUpdate:value":T=>n.editableData[$[`${P.key}_id`]].value=T,onPressEnter:T=>n.save($[`${P.key}_id`])},null,8,["value","onUpdate:value","onPressEnter"]),l(w,{class:"editable-cell-icon-check",onClick:T=>n.save($[`${P.key}_id`])},null,8,["onClick"])])):(d(),U("div",B1,[c(i(A||" ")+" ",1),l(k,{class:"editable-cell-icon",onClick:T=>n.edit($,P.key)},null,8,["onClick"])]))])):D("",!0)],64))),128))]),_:1},8,["columns","row-key","data-source"])]),_:1})],64)}const V1=Y(F1,[["render",q1]]),K1={components:{EyeOutlined:aa,SettingSidebar:ta,AdminPageHeader:Ce,TranslationsSettings:V1,LangAddButton:pt,ImportTranslation:Va},setup(){const{permsArray:e,appType:s,themeMode:_}=Z(),n=I(null),v=window.config.translatioins_sample_file;return{langAdded:()=>{n.value.getData()},permsArray:e,themeMode:_,appType:s,transSettingRef:n,sampleFileUrl:v}}};function z1(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("LangAddButton"),k=o("ImportTranslation"),C=o("EyeOutlined"),S=o("a-button"),E=o("a-space"),A=o("TranslationsSettings"),$=o("a-row");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.translations"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.translations")),1)]),_:1})]),_:1})]),_:1}),l($,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(A,{ref:"transSettingRef"},{actionButtons:a(()=>[l(E,null,{default:a(()=>[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?(d(),b(w,{key:0,onOnAddSuccess:n.langAdded,btnType:"primary",tooltip:!1},{default:a(()=>[c(i(e.$t("langs.add")),1)]),_:1},8,["onOnAddSuccess"])):D("",!0),n.appType=="non-saas"?(d(),b(k,{key:1,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import",onOnUploadSuccess:n.langAdded},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])):D("",!0),l(S,{type:"primary",onClick:s[0]||(s[0]=P=>e.$router.push({name:"admin.settings.langs.index"}))},{default:a(()=>[l(C),c(" "+i(e.$t("langs.view_all_langs")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const N1=Y(K1,[["render",z1]]),In=()=>{const e=I([]),s=I({}),_=I(""),n=I(""),v=I(""),y=I(!1),{t:r}=x(),u=I(window.config.product_name),m=I(window.config.product_version),p=Ke(),h=I([]),g=I([]),f=I(!1),w=I(""),k=I(0);var C;const S=()=>{const P=window.config.product_name,T=axiosAdmin.get(je("modules")),F=va.post("https://envato.codeifly.com/product",{verified_name:P,domain:window.location.host});var V=[];Promise.all([T,F]).then(([z,K])=>{const B=K.data.product,R=window.config.installed_modules,O=window.config.modules;h.value=K.data.offers,g.value=K.data.settings,Ee(B.modules,W=>{const q=ba(R,["verified_name",W.verified_name]);if(V.push({...W,current_version:q?q.current_version:"-",status:fa(O,W.verified_name),installed:q!=null}),!W.verified||W.other_domain_verified){var N=[...window.config.modules],j=Po(N,function(te){return te!=W.verified_name});p.commit("auth/updateActiveModules",j),window.config.modules=j}}),e.value=V})},E=P=>{const{success:T}=P;y.value=!0,s.value={},n.value="",va.post("https://envato.codeifly.com/verify",{verified_name:u.value,purchase_code:_.value,domain:window.location.host,app_url:window.location.href,version:m.value}).then(F=>{y.value=!1,F.data.status=="success"?(y.value=!1,Ve.success({message:r("common.success")}),v.value=r("messages.verify_success"),T(F.data)):(Ve.error({message:r("common.error")}),n.value=F.data.message)}).catch(F=>{y.value=!1;const V=F.response.data,z=F.response.status;var K={};if(z==422){if(V.errors&&typeof V.errors<"u")for(var B=Object.keys(V.errors),R=0;R<B.length;R++){var O=B[R].replace(".","\\.");K[O]={required:!0,message:V.errors[B[R]][0]}}s.value=K,Xe.error(r("common.fix_errors"))}else n.value=V.message?V.message:r("messages.somehing_went_wrong")})},A=P=>{f.value=!0,k.value=0,w.value="";const T={verified_name:P,domain:window.location.host};C=window.setInterval(function(){$()},1500),axiosAdmin.post(je("modules/install"),T).then(F=>{f.value=!1,k.value=100,w.value="started",axiosAdmin.post(je("modules/extract"),T).then(V=>{w.value="completed",va.post("https://envato.codeifly.com/version-update",{verified_name:V.data.verified_name,version:V.data.version,domain:window.location.host}),p.commit("auth/updateActiveModules",V.data.enabled_modules),window.config.modules=V.data.enabled_modules,window.config.installed_modules=V.data.installed_modules}).catch(V=>{w.value="failed"})}).catch(F=>{f.value=!1,k.value=0,clearInterval(C)})},$=()=>{axiosAdmin(je("modules/download-percentage")).then(P=>{k.value=parseInt(P.data.percentage),k.value>=100&&clearInterval(C)})};return{allModules:e,getModuleData:S,install:A,verifyPurchase:E,rules:s,purchaseCode:_,errorMessage:n,successMessage:v,loading:y,productName:u,version:m,offers:h,settings:g,downloading:f,downloadPercentage:k,extracting:w}},j1=ne({props:["module"],emits:["updateSuccess"],setup(e,{emit:s}){const _=I(!1),n=I(!1),v=Ke(),{t:y}=x();return ie(()=>{!e.module.verified||e.module.other_domain_verified?_.value=!1:_.value=e.module.status}),{checked:_,loading:n,updateStatus:(u,m)=>{axiosAdmin.post(je("modules/update-status"),{verified_name:e.module.verified_name,checked:u}).then(p=>{Ve.success({placement:"bottomRight",message:y("common.success"),description:y("module.module_status_updated")}),v.commit("auth/updateActiveModules",p.data.enabled_modules),window.config.modules=p.data.enabled_modules,s("updateSuccess")})}}}}),H1={key:0},W1=["innerHTML"],Y1={key:1};function G1(e,s,_,n,v,y){const r=o("a-switch"),u=o("a-tooltip");return e.module.verified&&e.module.installed?(d(),U("span",H1,[l(u,null,Fa({default:a(()=>[l(r,{checked:e.checked,"onUpdate:checked":s[0]||(s[0]=m=>e.checked=m),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:a(()=>[M("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,W1)]),key:"0"}:void 0]),1024)])):(d(),U("span",Y1," - "))}const J1=Y(j1,[["render",G1]]),Q1=ne({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:Ga,InfoCircleOutlined:ua},setup(e,{emit:s}){const _=I(!1),n=window.location.host,{rules:v,purchaseCode:y,errorMessage:r,successMessage:u,loading:m,verifyPurchase:p,productName:h,version:g}=In();return ie(()=>{h.value=e.module.verified_name,g.value=e.module.current_version}),{visible:_,showModal:()=>{_.value=!0},handleCancel:()=>{y.value="",_.value=!1},domain:n,rules:v,purchaseCode:y,loading:m,verify:()=>p({success:C=>{s("verifySuccess"),y.value="",_.value=!1}}),errorMessage:r,successMessage:u}}}),X1={key:0},Z1=M("br",null,null,-1),x1=["innerHTML"],eh=["innerHTML"];function ah(e,s,_,n,v,y){const r=o("a-tag"),u=o("a-button"),m=o("a-typography-text"),p=o("a-alert"),h=o("a-col"),g=o("a-row"),f=o("InfoCircleOutlined"),w=o("a-typography-link"),k=o("a-typography-paragraph"),C=o("a-form-item"),S=o("a-input"),E=o("a-form"),A=o("CheckOutlined"),$=o("a-modal");return d(),U(L,null,[e.module.other_domain_verified?(d(),U("div",X1,[l(r,{color:"red"},{default:a(()=>[c(i(e.$t("messages.other_domain_linked")),1)]),_:1}),Z1,l(u,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:a(()=>[c(i(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(d(),b(m,{key:1,type:"success",strong:""},{default:a(()=>[c(i(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(d(),b(m,{key:2,type:"success",strong:""},{default:a(()=>[c(" - ")]),_:1})):(d(),b(u,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:a(()=>[c(i(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),l($,{open:e.visible,"onUpdate:open":s[1]||(s[1]=P=>e.visible=P),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:a(()=>[l(u,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:a(()=>[l(A)]),default:a(()=>[c(" "+i(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),l(u,{key:"back",onClick:e.handleCancel},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[e.successMessage!=""?(d(),b(p,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:a(()=>[M("span",{innerHTML:e.successMessage},null,8,x1)]),_:1})):D("",!0),e.errorMessage!=""?(d(),b(p,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:a(()=>[M("span",{innerHTML:e.errorMessage},null,8,eh)]),_:1})):D("",!0),e.module.other_domain_verified&&e.errorMessage==""?(d(),b(g,{key:2,class:"mb-10"},{default:a(()=>[l(h,{span:24},{default:a(()=>[l(p,{type:"error","show-icon":""},{message:a(()=>[c(i(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):D("",!0),l(g,{class:"mb-10"},{default:a(()=>[l(h,{span:24},{default:a(()=>[l(k,null,{default:a(()=>[M("blockquote",null,[l(w,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:a(()=>[l(f),c(" "+i(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),l(E,{layout:"vertical"},{default:a(()=>[l(C,{label:e.$t("common.domain"),name:"domain"},{default:a(()=>[l(m,{strong:""},{default:a(()=>[c(i(e.domain),1)]),_:1})]),_:1},8,["label"]),l(C,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:a(()=>[l(S,{value:e.purchaseCode,"onUpdate:value":s[0]||(s[0]=P=>e.purchaseCode=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const th=Y(Q1,[["render",ah]]),lh=ne({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:ga,ShoppingCartOutlined:Ra,ReloadOutlined:Vl,SyncOutlined:Ta,CheckCircleOutlined:It,InfoOutlined:Kl,CheckOutlined:Ga},setup(e,{emit:s}){const{t:_}=x(),n=I(!1),v=I("");return na(),{install:()=>{Ne.confirm({title:_("common.install"),icon:l(De),content:_("messages.are_you_sure_install_message"),okText:_("common.yes"),okType:"danger",cancelText:_("common.no"),onOk(){v.value=_("common.installing")+"...",s("install",e.module.verified_name),n.value=!0},onCancel(){}})},update:()=>{Ne.confirm({title:_("common.update"),icon:l(De),content:_("messages.are_you_sure_update_message"),okText:_("common.yes"),okType:"danger",cancelText:_("common.no"),onOk(){v.value=_("common.updating")+"...",s("install",e.module.verified_name),n.value=!0},onCancel(){}})},installUpdateModalVisible:n,closeInstallUpdateModal:()=>{n.value=!1,window.location.reload()}}}});function nh(e,s,_,n,v,y){const r=o("DownloadOutlined"),u=o("a-button"),m=o("ReloadOutlined"),p=o("ShoppingCartOutlined"),h=o("a-typography-text"),g=o("SyncOutlined"),f=o("CheckCircleOutlined"),w=o("a-progress"),k=o("a-col"),C=o("a-row"),S=o("InfoOutlined"),E=o("CheckOutlined"),A=o("a-modal");return d(),U(L,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(d(),b(u,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(d(),b(u,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:a(()=>[l(m)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(d(),b(u,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:a(()=>[l(p)]),default:a(()=>[c(" "+i(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(d(),b(h,{key:3,type:"success",strong:""},{default:a(()=>[c(" - ")]),_:1})),l(A,{open:e.installUpdateModalVisible,"onUpdate:open":s[0]||(s[0]=$=>e.installUpdateModalVisible=$),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:a(()=>[l(C,{class:"mb-10"},{default:a(()=>[l(k,{span:24},{default:a(()=>[e.downloadPercentage<100?(d(),b(h,{key:0},{default:a(()=>[l(g,{spin:""}),c(" "+i(e.$t("messages.downloading_started_message")),1)]),_:1})):(d(),b(h,{key:1,strong:"",type:"success"},{default:a(()=>[l(f),c(" "+i(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(d(),b(w,{key:2,percent:e.downloadPercentage},null,8,["percent"])):D("",!0)]),_:1})]),_:1}),l(C,{class:"mb-10"},{default:a(()=>[l(k,{span:24},{default:a(()=>[e.extracting==""?(d(),b(h,{key:0,type:"secondary"},{default:a(()=>[l(S),c(" "+i(e.$t("module.extract_zip_file")),1)]),_:1})):D("",!0),e.extracting=="started"?(d(),b(h,{key:1},{default:a(()=>[l(g,{spin:""}),c(" "+i(e.$t("messages.file_extracting_message")),1)]),_:1})):D("",!0),e.extracting=="completed"?(d(),b(h,{key:2,strong:"",type:"success"},{default:a(()=>[l(f),c(" "+i(e.$t("module.file_extracted")),1)]),_:1})):D("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(d(),b(C,{key:0,class:"mt-10 mb-10"},{default:a(()=>[l(k,{span:24},{default:a(()=>[l(u,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:a(()=>[l(E),c(" "+i(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):D("",!0)]),_:1},8,["open","title"])],64)}const oh=Y(lh,[["render",nh]]);const sh=ne({components:{ModuleStatus:J1,VerifyModule:th,ModuleAction:oh,LeftCircleOutlined:zl,RightCircleOutlined:Nl},setup(){const{t:e}=x();Ke();const s=window.config.app_env,{allModules:_,dataLoading:n,getModuleData:v,offers:y,settings:r,install:u,downloading:m,downloadPercentage:p,extracting:h}=In(),g=[{title:e("module.name"),dataIndex:"name",width:"25%"},{title:e("module.verified"),dataIndex:"verified",width:"15%"},{title:e("module.current_version"),dataIndex:"current_version"},{title:e("module.latest_version"),dataIndex:"version"},{title:e("module.status"),dataIndex:"status"},{title:e("common.action"),dataIndex:"action"}];return ie(()=>{v()}),{modulesTableColumns:g,allModules:_,getModuleData:v,installModule:w=>{u(w)},dataLoading:n,offers:y,settings:r,downloading:m,downloadPercentage:p,extracting:h,appEnv:s}}}),dh={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},ih={class:"custom-slick-arrow",style:{right:"10px"}},rh=["src"],uh={key:0,class:"table-responsive"},mh={key:1};function ch(e,s,_,n,v,y){const r=o("left-circle-outlined"),u=o("right-circle-outlined"),m=o("a-typography-link"),p=o("a-carousel"),h=o("a-col"),g=o("a-row"),f=o("a-avatar"),w=o("a-list-item-meta"),k=o("a-list-item"),C=o("a-list"),S=o("VerifyModule"),E=o("ModuleStatus"),A=o("ModuleAction"),$=o("a-table"),P=o("admin-page-table-content");return d(),U(L,null,[e.offers&&e.offers.length>0?(d(),b(g,{key:0},{default:a(()=>[l(h,{span:24},{default:a(()=>[l(p,{arrows:""},{prevArrow:a(()=>[M("div",dh,[l(r)])]),nextArrow:a(()=>[M("div",ih,[l(u)])]),default:a(()=>[(d(!0),U(L,null,G(e.offers,T=>(d(),U("div",{key:T.id},[l(m,{href:T.url,target:"_blank"},{default:a(()=>[M("img",{src:T.image_url,style:we({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,rh)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):D("",!0),l(P,null,{default:a(()=>[l(g,{class:"mt-20 mb-20"},{default:a(()=>[l(h,{span:24},{default:a(()=>[e.allModules?(d(),U("div",uh,[l($,{columns:e.modulesTableColumns,"row-key":T=>T.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:a(({column:T,record:F})=>[T.dataIndex=="name"?(d(),b(C,{key:0},{default:a(()=>[l(k,null,{default:a(()=>[l(w,{description:F.description},{title:a(()=>[c(i(F.name),1)]),avatar:a(()=>[l(f,{src:F.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):D("",!0),T.dataIndex=="verified"?(d(),b(S,{key:1,module:F,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):D("",!0),T.dataIndex=="status"?(d(),b(E,{key:2,module:F,status:F.status,moduleName:F.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):D("",!0),T.dataIndex=="action"?(d(),U(L,{key:3},[e.appEnv=="envato"?(d(),b(A,{key:0,module:F,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(d(),U("span",mh,"-"))],64)):D("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):D("",!0)]),_:1})]),_:1})]),_:1})],64)}const ph=Y(sh,[["render",ch]]),_h=ne({components:{LeftCircleOutlined:zl,RightCircleOutlined:Nl,SettingSidebar:ta,AdminPageHeader:Ce,ModuleSetting:ph},setup(){const{themeMode:e}=Z();return{themeMode:e}}});function fh(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("ModuleSetting"),k=o("a-row");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:e.themeMode=="dark"?"#141414":"#fff",borderRight:e.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(w)]),_:1})]),_:1})],64)}const gh=Y(_h,[["render",fh]]),hh={components:{SaveOutlined:$e},setup(){const{addEditRequestAdmin:e,loading:s,rules:_}=pe(),{t:n}=x(),v=I({}),y=I([]);return ie(()=>{axiosAdmin.get(je("settings/storage")).then(u=>{v.value=u.data.storage,y.value=u.data.regions})}),{loading:s,rules:_,awsRegions:y,formData:v,onSubmit:()=>{e({url:je("settings/storage/update"),data:v.value,successMessage:n("storage_settings.updated"),success:u=>{}})}}}},vh={key:0};function bh(e,s,_,n,v,y){const r=o("a-select-option"),u=o("a-select"),m=o("a-form-item"),p=o("a-col"),h=o("a-row"),g=o("a-input"),f=o("a-input-password"),w=o("SaveOutlined"),k=o("a-button"),C=o("a-form");return d(),b(C,{layout:"vertical"},{default:a(()=>[l(h,{gutter:16},{default:a(()=>[l(p,{span:24},{default:a(()=>[l(m,{label:e.$t("storage_settings.storage"),name:"filesystem",help:n.rules.filesystem?n.rules.filesystem.message:null,validateStatus:n.rules.filesystem?"error":null},{default:a(()=>[l(u,{value:n.formData.filesystem,"onUpdate:value":s[0]||(s[0]=S=>n.formData.filesystem=S),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.storage")])},{default:a(()=>[l(r,{key:"local",value:"local"},{default:a(()=>[c(i(e.$t("storage_settings.local")),1)]),_:1}),l(r,{key:"aws",value:"aws"},{default:a(()=>[c(i(e.$t("storage_settings.aws")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.formData.filesystem=="aws"?(d(),U("div",vh,[l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("storage_settings.aws_key"),name:"key",help:n.rules.key?n.rules.key.message:null,validateStatus:n.rules.key?"error":null,class:"required"},{default:a(()=>[l(g,{value:n.formData.key,"onUpdate:value":s[1]||(s[1]=S=>n.formData.key=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("storage_settings.aws_secret"),name:"secret",help:n.rules.secret?n.rules.secret.message:null,validateStatus:n.rules.secret?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.secret,"onUpdate:value":s[2]||(s[2]=S=>n.formData.secret=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_secret")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("storage_settings.aws_region"),name:"region",help:n.rules.region?n.rules.region.message:null,validateStatus:n.rules.region?"error":null},{default:a(()=>[l(u,{value:n.formData.region,"onUpdate:value":s[3]||(s[3]=S=>n.formData.region=S),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.aws_region")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.awsRegions,(S,E)=>(d(),b(r,{key:E,value:E,label:S},{default:a(()=>[c(i(S),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("storage_settings.aws_bucket"),name:"bucket",help:n.rules.bucket?n.rules.bucket.message:null,validateStatus:n.rules.bucket?"error":null,class:"required"},{default:a(()=>[l(g,{value:n.formData.bucket,"onUpdate:value":s[4]||(s[4]=S=>n.formData.bucket=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_bucket")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):D("",!0),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,null,{default:a(()=>[l(k,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})}const yh=Y(hh,[["render",bh]]),kh={components:{SettingSidebar:ta,AdminPageHeader:Ce,StorageSettings:yh,SaveOutlined:$e},setup(){const e=I(null),{themeMode:s}=Z();return{themeMode:s,onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function Ch(e,s,_,n,v,y){const r=o("SaveOutlined"),u=o("a-button"),m=o("a-page-header"),p=o("router-link"),h=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),w=o("SettingSidebar"),k=o("a-col"),C=o("StorageSettings"),S=o("a-card"),E=o("admin-page-table-content"),A=o("a-row");return d(),U(L,null,[l(f,null,{header:a(()=>[l(m,{title:e.$t("menu.storage_settings"),class:"p-0"},{extra:a(()=>[l(u,{type:"primary",onClick:n.onSubmit,loading:!!(n.settingRef&&n.settingRef.loading)},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[l(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(h,null,{default:a(()=>[l(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.storage_settings")),1)]),_:1})]),_:1})]),_:1}),l(A,null,{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(w)]),_:1},8,["style"]),l(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(E,null,{default:a(()=>[l(S,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const wh=Y(kh,[["render",Ch]]),Sh=ne({props:["formData","verified"],components:{SendOutlined:Ma},setup(){const{addEditRequestAdmin:e,loading:s,rules:_}=pe(),n=I(!1),v=I(""),y=I(""),{t:r}=x();return{loading:s,rules:_,email:v,visible:n,showModal:()=>{n.value=!0},sendMail:()=>{y.value="",e({url:je("settings/email/send-test-mail"),data:{email:v.value},success:h=>{y.value="",h.status=="success"?Ve.success({placement:"bottomRight",message:r("common.success"),description:r("mail_settings.test_mail_sent_successfully")}):y.value=h.message},error:h=>{y.value=""}})},handleCancel:()=>{n.value=!1,s.value=!1,v.value="",y.value="",_.value={}},errorMessage:y}}});function $h(e,s,_,n,v,y){const r=o("SendOutlined"),u=o("a-button"),m=o("a-alert"),p=o("a-col"),h=o("a-row"),g=o("a-input"),f=o("a-form-item"),w=o("a-form"),k=o("a-modal");return d(),U(L,null,[e.formData.mail_driver=="mail"||e.formData.mail_driver=="smtp"?(d(),b(u,{key:0,onClick:e.showModal,disabled:!e.verified},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):D("",!0),l(k,{open:e.visible,"onUpdate:open":s[1]||(s[1]=C=>e.visible=C),maskClosable:!1,title:e.$t("mail_settings.send_test_mail"),onCancel:e.handleCancel},{footer:a(()=>[l(u,{key:"submit",type:"primary",loading:e.loading,onClick:e.sendMail},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),l(u,{key:"back",onClick:e.handleCancel},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(w,{layout:"vertical"},{default:a(()=>[e.errorMessage!=""?(d(),b(h,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[l(p,{span:24},{default:a(()=>[l(m,{message:e.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):D("",!0),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(f,{label:e.$t("mail_settings.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[l(g,{value:e.email,"onUpdate:value":s[0]||(s[0]=C=>e.email=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Ah=Y(Sh,[["render",$h]]),Dh={components:{InfoCircleOutlined:ua}};function Th(e,s,_,n,v,y){const r=o("InfoCircleOutlined"),u=o("a-tooltip");return d(),b(u,null,{title:a(()=>[c(i(e.$t("mail_settings.notificaiton_will_be_sent_to_company")),1)]),default:a(()=>[l(r)]),_:1})}const Eh=Y(Dh,[["render",Th]]);const Uh={props:["sendMailSettings"],components:{TooltipCompany:Eh},setup(e){const{addEditRequestAdmin:s}=pe(),{t:_}=x(),n=I([]);return ie(()=>{n.value=e.sendMailSettings.credentials}),{settings:n,settingsChanged:y=>{s({url:je("settings/email/send-mail-settings"),data:{name_key:"company",settings:y},success:r=>{Xe.success(_("mail_settings.send_mail_setting_saved"))}})}}}},Oh={class:"notificaiton-setting-bar"},Ih={style:{marginTop:"8px",paddingBottom:"14px"}};function Ph(e,s,_,n,v,y){const r=o("TooltipCompany"),u=o("a-typography-title"),m=o("a-col"),p=o("a-checkbox"),h=o("a-divider"),g=o("a-row"),f=o("a-checkbox-group"),w=o("a-card"),k=o("perfect-scrollbar");return d(),U("div",Oh,[l(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l(w,{class:"page-content-container"},{title:a(()=>[M("div",Ih,i(e.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[l(f,{value:n.settings,"onUpdate:value":s[0]||(s[0]=C=>n.settings=C),style:{width:"100%"},onChange:n.settingsChanged},{default:a(()=>[l(g,null,{default:a(()=>[l(m,{span:24,class:"mb-5"},{default:a(()=>[l(u,{level:5},{default:a(()=>[c(i(e.$t("menu.staff_members"))+" ",1),l(r)]),_:1})]),_:1}),l(m,{span:24,class:"mb-5"},{default:a(()=>[l(p,{value:"staff_member_create"},{default:a(()=>[c(i(e.$t("common.on_create")),1)]),_:1})]),_:1}),l(m,{span:24,class:"mb-5"},{default:a(()=>[l(p,{value:"staff_member_update"},{default:a(()=>[c(i(e.$t("common.on_update")),1)]),_:1})]),_:1}),l(m,{span:24,class:"mb-5"},{default:a(()=>[l(p,{value:"staff_member_delete"},{default:a(()=>[c(i(e.$t("common.on_delete")),1)]),_:1})]),_:1}),l(h)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const Mh=Y(Uh,[["render",Ph]]),Fh={components:{SaveOutlined:$e,TestMail:Ah,SendMailSetting:Mh},setup(){const{addEditRequestAdmin:e,loading:s,rules:_}=pe(),{appType:n}=Z();pe();const{t:v}=x(),y=I({}),r=I(!1),u=I(""),m=I([]);return ie(()=>{axiosAdmin.get(je("settings/email")).then(h=>{y.value=h.data.settings,m.value=h.data.sendMailSettings,r.value=h.data.verified,u.value=h.data.verified?v("messages.stmp_success_message"):v("messages.stmp_error_message")})}),{appType:n,formData:y,rules:_,loading:s,onSubmit:()=>{e({url:je("settings/email/update"),data:y.value,successMessage:v("mail_settings.updated"),success:h=>{r.value=h.verified,u.value=h.verified?v("messages.stmp_success_message"):h.message}})},verified:r,verifiedMessage:u,sendMailSettings:m}}},Rh={key:0},Lh={key:0},Bh={key:1};function qh(e,s,_,n,v,y){const r=o("a-alert"),u=o("a-select-option"),m=o("a-select"),p=o("a-form-item"),h=o("a-col"),g=o("a-row"),f=o("a-input"),w=o("a-input-password"),k=o("SaveOutlined"),C=o("a-button"),S=o("TestMail"),E=o("a-space"),A=o("a-form"),$=o("a-card"),P=o("SendMailSetting");return d(),b(g,null,{default:a(()=>[l(h,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:n.appType=="saas"?24:18,xl:n.appType=="saas"?24:18},{default:a(()=>[n.formData.mail_driver=="smtp"?(d(),U("div",Rh,[n.verified?(d(),b(r,{key:0,description:n.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(d(),b(r,{key:1,description:n.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):D("",!0),l($,{class:"settings-sidebar-content-container"},{default:a(()=>[l(A,{layout:"vertical"},{default:a(()=>[l(g,{gutter:16},{default:a(()=>[l(h,{span:24},{default:a(()=>[l(p,{label:e.$t("mail_settings.mail_driver"),name:"mail_driver",help:n.rules.mail_driver?n.rules.mail_driver.message:null,validateStatus:n.rules.mail_driver?"error":null},{default:a(()=>[l(m,{value:n.formData.mail_driver,"onUpdate:value":s[0]||(s[0]=T=>n.formData.mail_driver=T),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.mail_driver")])},{default:a(()=>[l(u,{key:"none",value:"none"},{default:a(()=>[c(i(e.$t("mail_settings.none")),1)]),_:1}),l(u,{key:"smtp",value:"smtp"},{default:a(()=>[c(i(e.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.formData.mail_driver=="mail"||n.formData.mail_driver=="smtp"?(d(),U("div",Lh,[l(g,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("mail_settings.from_name"),name:"from_name",help:n.rules.from_name?n.rules.from_name.message:null,validateStatus:n.rules.from_name?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.from_name,"onUpdate:value":s[1]||(s[1]=T=>n.formData.from_name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("mail_settings.from_email"),name:"from_email",help:n.rules.from_email?n.rules.from_email.message:null,validateStatus:n.rules.from_email?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.from_email,"onUpdate:value":s[2]||(s[2]=T=>n.formData.from_email=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):D("",!0),n.formData.mail_driver=="smtp"?(d(),U("div",Bh,[l(g,{gutter:16},{default:a(()=>[n.formData.mail_driver=="smtp"?(d(),b(h,{key:0,xs:24,sm:24,md:24,lg:n.formData.mail_driver=="smtp"?12:24},{default:a(()=>[l(p,{label:e.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:n.rules.enable_mail_queue?n.rules.enable_mail_queue.message:null,validateStatus:n.rules.enable_mail_queue?"error":null,class:"required"},{default:a(()=>[l(m,{value:n.formData.enable_mail_queue,"onUpdate:value":s[3]||(s[3]=T=>n.formData.enable_mail_queue=T),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:a(()=>[l(u,{key:"yes",value:"yes"},{default:a(()=>[c(i(e.$t("common.yes")),1)]),_:1}),l(u,{key:"no",value:"no"},{default:a(()=>[c(i(e.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):D("",!0),n.formData.mail_driver=="smtp"?(d(),b(h,{key:1,xs:24,sm:24,md:24,lg:n.formData.mail_driver=="smtp"?12:24},{default:a(()=>[l(p,{label:e.$t("mail_settings.host"),name:"host",help:n.rules.host?n.rules.host.message:null,validateStatus:n.rules.host?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.host,"onUpdate:value":s[4]||(s[4]=T=>n.formData.host=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):D("",!0)]),_:1}),l(g,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("mail_settings.port"),name:"port",help:n.rules.port?n.rules.port.message:null,validateStatus:n.rules.port?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.port,"onUpdate:value":s[5]||(s[5]=T=>n.formData.port=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("mail_settings.encryption"),name:"encryption",help:n.rules.encryption?n.rules.encryption.message:null,validateStatus:n.rules.encryption?"error":null},{default:a(()=>[l(m,{value:n.formData.encryption,"onUpdate:value":s[6]||(s[6]=T=>n.formData.encryption=T),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.encryption")]),allowClear:!0},{default:a(()=>[l(u,{key:"tls",value:"tls"},{default:a(()=>[c(" tls ")]),_:1}),l(u,{key:"ssl",value:"ssl"},{default:a(()=>[c(" ssl ")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(g,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("mail_settings.username"),name:"username",help:n.rules.username?n.rules.username.message:null,validateStatus:n.rules.username?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.username,"onUpdate:value":s[7]||(s[7]=T=>n.formData.username=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(h,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(p,{label:e.$t("mail_settings.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null,class:"required"},{default:a(()=>[l(w,{value:n.formData.password,"onUpdate:value":s[8]||(s[8]=T=>n.formData.password=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):D("",!0),l(g,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(p,null,{default:a(()=>[l(E,null,{default:a(()=>[l(C,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[l(k)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),l(S,{formData:n.formData,verified:n.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),n.appType=="non-saas"?(d(),b(h,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[n.sendMailSettings&&n.sendMailSettings.xid?(d(),b(P,{key:0,sendMailSettings:n.sendMailSettings},null,8,["sendMailSettings"])):D("",!0)]),_:1})):D("",!0)]),_:1})}const Vh=Y(Fh,[["render",qh]]),Kh={components:{SettingSidebar:ta,AdminPageHeader:Ce,EmailSettings:Vh,SaveOutlined:$e},setup(){const e=I(null),{themeMode:s}=Z();return{themeMode:s,onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function zh(e,s,_,n,v,y){const r=o("SaveOutlined"),u=o("a-button"),m=o("a-page-header"),p=o("router-link"),h=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),w=o("SettingSidebar"),k=o("a-col"),C=o("EmailSettings"),S=o("admin-page-table-content"),E=o("a-row");return d(),U(L,null,[l(f,null,{header:a(()=>[l(m,{title:e.$t("menu.email_settings"),class:"p-0"},{extra:a(()=>[l(u,{type:"primary",onClick:n.onSubmit,loading:!!(n.settingRef&&n.settingRef.loading)},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[l(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(h,null,{default:a(()=>[l(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(h,null,{default:a(()=>[c(i(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(k,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(w)]),_:1},8,["style"]),l(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(S,null,{default:a(()=>[l(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const Nh=Y(Kh,[["render",zh]]),jh=()=>{const e=je("database-backups"),{t:s}=x(),_=[{title:s("database_backup.file"),dataIndex:"name"},{title:s("database_backup.file_size"),dataIndex:"size"},{title:s("common.action"),dataIndex:"action"}];return{url:e,columns:_}},Hh={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,ExclamationCircleOutlined:De},setup(){const{t:e}=x(),{url:s,columns:_}=jh(),n=I([]);return ie(()=>{axiosAdmin.post(je("database-backups")).then(r=>{n.value=r.data.data})}),{columns:_,results:n,deleteBackup:r=>{Ne.confirm({title:e("database_backup.delete_backup"),icon:l(De),content:e("database_backup.are_you_sure_delete_backup"),okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){axiosAdmin.post(je("delete-backup"),{file_name:r}).then(u=>{n.value=u.data.data})},onCancel(){}})},backupCreated:r=>{n.value=r.data}}}},Wh={class:"table-responsive mt-20"};function Yh(e,s,_,n,v,y){const r=o("a-col"),u=o("a-row"),m=o("admin-page-filters"),p=o("a-alert"),h=o("a-typography-link"),g=o("a-button"),f=o("a-space"),w=o("a-table"),k=o("admin-page-table-content");return d(),U(L,null,[l(m,null,{default:a(()=>[l(u,{gutter:[16,16]},{default:a(()=>[l(r,{span:24},{default:a(()=>[ke(e.$slots,"actionButtons")]),_:3})]),_:3})]),_:3}),l(k,null,{default:a(()=>[l(u,{class:"mt-20"},{default:a(()=>[l(r,{span:24},{default:a(()=>[l(p,{type:"warning",showIcon:"",message:e.$t("database_backup.backup_locaion_is")},null,8,["message"]),M("div",Wh,[l(w,{columns:n.columns,"row-key":C=>C.id,"data-source":n.results,pagination:!1,bordered:"",size:"middle"},{bodyCell:a(({column:C,record:S})=>[C.dataIndex=="action"?(d(),b(f,{key:0},{default:a(()=>[l(h,{href:S.url,target:"_blank"},{default:a(()=>[c(i(e.$t("common.download")),1)]),_:2},1032,["href"]),l(g,{type:"link",onClick:E=>n.deleteBackup(S.name)},{default:a(()=>[c(i(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):D("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const Gh=Y(Hh,[["render",Yh]]),Jh=ne({emits:["success"],components:{PlusOutlined:de,ExclamationCircleOutlined:De},setup(e,{emit:s}){const{t:_}=x(),{addEditRequestAdmin:n,loading:v}=pe();return{generateBack:()=>{Ne.confirm({title:_("database_backup.generate_backup"),icon:l(De),content:_("database_backup.are_you_sure_generate_backup"),okText:_("common.yes"),okType:"danger",cancelText:_("common.no"),onOk(){n({url:je("generate-backups"),data:{},successMessage:_("database_backup.backup_generated_successfully"),success:r=>{s("success",r)}})},onCancel(){}})},loading:v}}});function Qh(e,s,_,n,v,y){const r=o("PlusOutlined"),u=o("a-button");return d(),b(u,{type:"primary",onClick:e.generateBack,loading:e.loading},{default:a(()=>[l(r),c(" "+i(e.$t("database_backup.generate_backup")),1)]),_:1},8,["onClick","loading"])}const Xh=Y(Jh,[["render",Qh]]),Zh=ne({components:{SettingOutlined:Ja},setup(){const e=I(!1);return{visible:e,onClose:()=>{e.value=!1},openDrawer:()=>{e.value=!0},drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function xh(e,s,_,n,v,y){const r=o("SettingOutlined"),u=o("a-button"),m=o("a-alert"),p=o("a-col"),h=o("a-row"),g=o("a-typography-text"),f=o("a-typography-paragraph"),w=o("a-form"),k=o("a-drawer");return d(),U(L,null,[l(u,{type:"primary",onClick:e.openDrawer},{icon:a(()=>[l(r)]),default:a(()=>[c(" "+i(e.$t("database_backup.settings")),1)]),_:1},8,["onClick"]),l(k,{title:e.$t("database_backup.backup_command_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(u,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(w,{layout:"vertical"},{default:a(()=>[l(h,{gutter:16,class:"mb-10"},{default:a(()=>[l(p,{span:24},{default:a(()=>[l(m,{type:"warning",showIcon:"",message:e.$t("database_backup.put_dump_path_command_on_env_file")},null,8,["message"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{span:24},{default:a(()=>[l(f,null,{default:a(()=>[M("blockquote",null,[l(g,{type:"warning"},{default:a(()=>[c(i(e.$t("database_backup.window_command_path")),1)]),_:1})]),M("blockquote",null,[l(g,{type:"warning"},{default:a(()=>[c(i(e.$t("database_backup.laragon_command_path")),1)]),_:1})]),M("blockquote",null,[l(g,{type:"warning"},{default:a(()=>[c(i(e.$t("database_backup.linux_command_path")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const ev=Y(Zh,[["render",xh]]),av={components:{SettingSidebar:ta,AdminPageHeader:Ce,DatabaseSettings:Gh,GenerateDbBackup:Xh,BackupCommandSetting:ev},setup(){const e=I(null),{themeMode:s}=Z();return{themeMode:s,backupCreated:n=>{e.value.backupCreated(n)},settingRef:e}}};function tv(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("GenerateDbBackup"),k=o("BackupCommandSetting"),C=o("a-space"),S=o("DatabaseSettings"),E=o("a-row");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.database_backup"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.database_backup")),1)]),_:1})]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(S,{ref:"settingRef"},{actionButtons:a(()=>[l(C,null,{default:a(()=>[l(w,{onSuccess:n.backupCreated},null,8,["onSuccess"]),l(k)]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const lv=Y(av,[["render",tv]]),nv=ne({components:{SyncOutlined:Ta},setup(){const e=I([]),s=Mo,{t:_}=x(),n=I("fetching"),v=I([]),y=Ke(),r=[{title:_("update_app.name"),dataIndex:"name",width:"40%"},{title:_("update_app.value"),dataIndex:"value"}];return ie(()=>{axiosAdmin(je("update-app")).then(m=>{const p=m.data.app_version;e.value=m.data.app_details,va.post("https://envato.codeifly.com/product",{verified_name:window.config.product_name,domain:window.location.host}).then(h=>{v.value=h.data,v.value.product.other_domain_verified?Ne.confirm({title:_("update_app.verify_failed"),icon:l(De),content:_("update_app.verified_with_other_domain"),okText:_("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){y.dispatch("auth/logoutToRootUrl")}}):v.value.product.verified?v.value.product.version!=p?n.value="update_available":n.value="success":Ne.confirm({title:_("update_app.verify_failed"),icon:l(De),content:_("update_app.verify_failed_message"),okText:_("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){y.dispatch("auth/logoutToRootUrl")}})})})}),{tableColumns:r,appDetails:e,vueVersion:s,productStatus:n,product:v,updateApp:()=>{Ne.confirm({title:_("common.install"),icon:l(De),content:_("messages.are_you_sure_install_message"),okText:_("common.yes"),okType:"danger",cancelText:_("common.no"),onOk(){installUpdateModalTitle.value=_("common.installing")+"...",emit("install",props.module.verified_name),installUpdateModalVisible.value=!0},onCancel(){}})}}}}),ov=["innerHTML"],sv={class:"table-responsive mt-10"},dv={key:1},iv={key:0},rv={key:1};function uv(e,s,_,n,v,y){const r=o("SyncOutlined"),u=o("a-alert"),m=o("a-typography-title"),p=o("a-table"),h=o("a-col"),g=o("a-row"),f=o("a-card");return d(),b(f,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[l(g,{class:"mt-20"},{default:a(()=>[l(h,{span:24},{default:a(()=>[e.productStatus=="fetching"?(d(),b(u,{key:0,type:"info",showIcon:"",message:e.$t("messages.fetching_product_details")},{icon:a(()=>[l(r,{spin:""})]),default:a(()=>[M("span",{innerHTML:e.$t("messages.fetching_product_details")},null,8,ov)]),_:1},8,["message"])):D("",!0),e.productStatus=="success"?(d(),b(u,{key:1,type:"success",showIcon:"",message:e.$t("messages.product_is_upto_date")},null,8,["message"])):D("",!0),e.productStatus=="update_available"?(d(),b(u,{key:2,type:"warning",showIcon:"",message:e.$t("messages.new_app_version_avaialbe",[e.product.product.version])},null,8,["message"])):D("",!0),M("div",sv,[l(p,{columns:e.tableColumns,"row-key":w=>w.id,"data-source":e.appDetails,pagination:!1,showHeader:!1},{bodyCell:a(({column:w,record:k})=>[w.dataIndex=="name"?(d(),U(L,{key:0},[k.name=="app_details"?(d(),b(m,{key:0,level:5,strong:""},{default:a(()=>[c(i(e.$t("update_app.app_details")),1)]),_:1})):(d(),U("span",dv,i(e.$t(`update_app.${k.name}`)),1))],64)):D("",!0),w.dataIndex=="value"?(d(),U(L,{key:1},[k.name=="vue_version"?(d(),U("span",iv,i(e.vueVersion),1)):(d(),U("span",rv,i(k.value),1))],64)):D("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})}const mv=Y(nv,[["render",uv]]),cv=ne({props:["productStatus","product"],components:{DownloadOutlined:ga,ShoppingCartOutlined:Ra,ReloadOutlined:Vl,SyncOutlined:Ta,CheckCircleOutlined:It,InfoOutlined:Kl,CheckOutlined:Ga},setup(e,{emit:s}){const _=window.config.app_env,{t:n}=x(),v=I(!1),y=I(""),r=I(!1),u=I(""),m=I(0),p=Ke();var h;const g=()=>{Ne.confirm({title:n("common.update"),icon:l(De),content:l("div",{style:"color:red;"},n("messages.are_you_sure_update_message")),okText:n("common.yes"),okType:"danger",cancelText:n("common.no"),onOk(){y.value=n("common.updating")+"...",f(e.product.name),v.value=!0},onCancel(){}})},f=C=>{r.value=!0,m.value=0,u.value="";const S={verified_name:C,domain:window.location.host};h=window.setInterval(function(){w()},1500),axiosAdmin.post(je("update-app/update"),S).then(E=>{r.value=!1,m.value=100,u.value="started";const A={...S,file_name:E.data.file_name};axiosAdmin.post(je("update-app/extract"),A).then($=>{u.value="completed",va.post("https://envato.codeifly.com/version-update",{verified_name:$.data.verified_name,version:$.data.version,domain:window.location.host}),p.commit("auth/updateActiveModules",$.data.enabled_modules),window.config.modules=$.data.enabled_modules,window.config.installed_modules=$.data.installed_modules}).catch($=>{u.value="failed"})}).catch(E=>{r.value=!1,m.value=0,clearInterval(h)})},w=()=>{axiosAdmin(je("update-app/download-percentage")).then(C=>{m.value=parseInt(C.data.percentage),m.value>=100&&clearInterval(h)})};return{appEnv:_,updateApp:g,installUpdateModalVisible:v,closeInstallUpdateModal:()=>{v.value=!1,p.dispatch("auth/logoutToRootUrl")},downloadPercentage:m,downloading:r,extracting:u}}});function pv(e,s,_,n,v,y){const r=o("SyncOutlined"),u=o("a-button"),m=o("a-typography-text"),p=o("CheckCircleOutlined"),h=o("a-progress"),g=o("a-col"),f=o("a-row"),w=o("InfoOutlined"),k=o("CheckOutlined"),C=o("a-modal");return d(),U(L,null,[e.productStatus=="update_available"&&e.appEnv=="envato"?(d(),b(u,{key:0,type:"primary",onClick:e.updateApp},{default:a(()=>[l(r),c(" "+i(e.$t("update_app.update_app")),1)]),_:1},8,["onClick"])):D("",!0),l(C,{open:e.installUpdateModalVisible,"onUpdate:open":s[0]||(s[0]=S=>e.installUpdateModalVisible=S),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:a(()=>[l(f,{class:"mb-10"},{default:a(()=>[l(g,{span:24},{default:a(()=>[e.downloadPercentage<100?(d(),b(m,{key:0},{default:a(()=>[l(r,{spin:""}),c(" "+i(e.$t("messages.downloading_started_message")),1)]),_:1})):(d(),b(m,{key:1,strong:"",type:"success"},{default:a(()=>[l(p),c(" "+i(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(d(),b(h,{key:2,percent:e.downloadPercentage},null,8,["percent"])):D("",!0)]),_:1})]),_:1}),l(f,{class:"mb-10"},{default:a(()=>[l(g,{span:24},{default:a(()=>[e.extracting==""?(d(),b(m,{key:0,type:"secondary"},{default:a(()=>[l(w),c(" "+i(e.$t("module.extract_zip_file")),1)]),_:1})):D("",!0),e.extracting=="started"?(d(),b(m,{key:1},{default:a(()=>[l(r,{spin:""}),c(" "+i(e.$t("messages.file_extracting_message")),1)]),_:1})):D("",!0),e.extracting=="completed"?(d(),b(m,{key:2,strong:"",type:"success"},{default:a(()=>[l(p),c(" "+i(e.$t("module.file_extracted")),1)]),_:1})):D("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(d(),b(f,{key:0,class:"mt-20 mb-10"},{default:a(()=>[l(g,{span:24},{default:a(()=>[l(u,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:a(()=>[l(k),c(" "+i(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):D("",!0)]),_:1},8,["open","title"])],64)}const _v=Y(cv,[["render",pv]]),fv={components:{SettingSidebar:ta,AdminPageHeader:Ce,UpdateAppSettings:mv,InstallApp:_v},setup(){const e=I(null),{themeMode:s}=Z();return{settingRef:e,themeMode:s}}};function gv(e,s,_,n,v,y){const r=o("InstallApp"),u=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),h=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),w=o("a-col"),k=o("UpdateAppSettings"),C=o("admin-page-table-content"),S=o("a-row");return d(),U(L,null,[l(g,null,{header:a(()=>[l(u,{title:e.$t("menu.update_app"),class:"p-0"},{extra:a(()=>[n.settingRef?(d(),b(r,{key:0,productStatus:n.settingRef.productStatus,product:n.settingRef.product.product},null,8,["productStatus","product"])):D("",!0)]),_:1},8,["title"])]),breadcrumb:a(()=>[l(h,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(p,null,{default:a(()=>[l(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(p,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(p,null,{default:a(()=>[c(i(e.$t("menu.update_app")),1)]),_:1})]),_:1})]),_:1}),l(S,null,{default:a(()=>[l(w,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(f)]),_:1},8,["style"]),l(w,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(C,null,{default:a(()=>[l(k,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const hv=Y(fv,[["render",gv]]),$a=window.config.app_type,Na=$a=="non-saas"?"admin":"superadmin",vv=[{path:"translations",component:N1,name:`${Na}.settings.translations.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:$a=="non-saas"?"translations_view":"superadmin"}},{path:"modules",component:gh,name:`${Na}.settings.modules.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"modules",permission:$a=="non-saas"?"modules_view":"superadmin"}},{path:"storage",component:wh,name:`${Na}.settings.storage.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"storage_settings",permission:$a=="non-saas"?"storage_edit":"superadmin"}},{path:"email",component:Nh,name:`${Na}.settings.email.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:$a=="non-saas"?"email_edit":"superadmin"}},{path:"database-backup",component:lv,name:"admin.settings.database_backup.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"database_backup",permission:$a=="non-saas"?"database_backup":"superadmin"}},{path:"update-app",component:hv,name:`${Na}.settings.update_app.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"update_app",permission:$a=="non-saas"?"update_app":"superadmin"}}],bv={components:{InfoCircleOutlined:ua}};function yv(e,s,_,n,v,y){const r=o("InfoCircleOutlined"),u=o("a-tooltip");return d(),b(u,null,{title:a(()=>[c(i(e.$t("mail_settings.notificaiton_will_be_sent_to_company")),1)]),default:a(()=>[l(r)]),_:1})}const kv=Y(bv,[["render",yv]]);const Cv={props:["sendMailSettings"],components:{TooltipCompany:kv},setup(e){const{addEditRequestAdmin:s}=pe(),{t:_}=x(),n=I([]);return ie(()=>{n.value=e.sendMailSettings.credentials}),{settings:n,settingsChanged:y=>{s({url:"settings/email/send-mail-settings",data:{name_key:"company",settings:y},success:r=>{Xe.success(_("mail_settings.send_mail_setting_saved"))}})}}}},wv={class:"notificaiton-setting-bar"},Sv={style:{marginTop:"8px",paddingBottom:"14px"}};function $v(e,s,_,n,v,y){const r=o("TooltipCompany"),u=o("a-typography-title"),m=o("a-col"),p=o("a-checkbox"),h=o("a-divider"),g=o("a-row"),f=o("a-checkbox-group"),w=o("a-card"),k=o("perfect-scrollbar");return d(),U("div",wv,[l(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[l(w,{class:"page-content-container"},{title:a(()=>[M("div",Sv,i(e.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[l(f,{value:n.settings,"onUpdate:value":s[0]||(s[0]=C=>n.settings=C),style:{width:"100%"},onChange:n.settingsChanged},{default:a(()=>[l(g,null,{default:a(()=>[l(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[l(u,{level:5},{default:a(()=>[c(i(e.$t("menu.staff_members"))+" ",1),l(r)]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[l(p,{value:"staff_member_create"},{default:a(()=>[c(i(e.$t("common.on_create")),1)]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[l(p,{value:"staff_member_update"},{default:a(()=>[c(i(e.$t("common.on_update")),1)]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[l(p,{value:"staff_member_delete"},{default:a(()=>[c(i(e.$t("common.on_delete")),1)]),_:1})]),_:1}),l(h)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const Av=Y(Cv,[["render",$v]]),Dv={components:{SaveOutlined:$e,SettingSidebar:ta,AdminPageHeader:Ce,SendMailSetting:Av},setup(){const e=I([]),{themeMode:s}=Z();return ie(()=>{axiosAdmin.get("settings/email").then(_=>{e.value=_.data.sendMailSettings})}),{themeMode:s,sendMailSettings:e}}};function Tv(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("SendMailSetting"),k=o("a-row");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.email_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(k,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[n.sendMailSettings&&n.sendMailSettings.xid?(d(),b(w,{key:0,sendMailSettings:n.sendMailSettings},null,8,["sendMailSettings"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Ev=Y(Dv,[["render",Tv]]),Uv=window.config.app_type,Ov=Uv=="saas"?[{path:"email",component:Ev,name:"admin.settings.email.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:"email_edit"}}]:[...vv],Iv=()=>{const e="lead-status?fields=id,xid,name,color,type",s="lead-status",{t:_}=x(),n={name:"",color:"1f87e8"},v=[{title:_("lead_status.id"),dataIndex:"id"},{title:_("lead_status.name"),dataIndex:"name"},{title:_("lead_status.color"),dataIndex:"color"},{title:_("lead_status.type"),dataIndex:"type"},{title:_("common.action"),dataIndex:"action"}],y=[{key:"name",value:_("lead_status.name")}];return{url:e,addEditUrl:s,initData:n,columns:v,filterableColumns:y}},Pv=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e,ColorPicker:Ot},setup(e,{emit:s}){const{appSetting:_}=Z(),{addEditRequestAdmin:n,loading:v,rules:y}=pe(),r=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)");return{appSetting:_,loading:v,rules:y,gradientColor:r,onClose:()=>{y.value={},s("closed")},onSubmit:()=>{n({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{s("addEditSuccess",p.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Mv(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-select-option"),h=o("a-select"),g=o("color-picker"),f=o("a-row"),w=o("a-form"),k=o("SaveOutlined"),C=o("a-button"),S=o("a-space"),E=o("a-modal");return d(),b(E,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(S,null,{default:a(()=>[l(C,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(k)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(C,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(w,{layout:"vertical"},{default:a(()=>[l(f,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("lead_status.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=A=>e.formData.name=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead_status.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("lead_status.type"),name:"type",help:e.rules.type?e.rules.type.message:null,validateStatus:e.rules.type?"error":null,class:"required"},{default:a(()=>[l(h,{value:e.formData.type,"onUpdate:value":s[1]||(s[1]=A=>e.formData.type=A),placeholder:e.$t("common.select_default_text",[e.$t("lead_status.type")]),allowClear:!0,"show-search":""},{default:a(()=>[l(p,{key:"lead_status",value:"lead_status"},{default:a(()=>[c(i(e.$t("lead.lead_status")),1)]),_:1}),l(p,{key:"marital_status",value:"marital_status"},{default:a(()=>[c(i(e.$t("lead.marital_status")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e.formData.type==="lead_status"?(d(),b(u,{key:0,label:e.$t("lead_status.color"),name:"color",help:e.rules.color?e.rules.color.message:null,validateStatus:e.rules.color?"error":null,class:"required"},{default:a(()=>[l(g,{pureColor:e.formData.color,"onUpdate:pureColor":s[2]||(s[2]=A=>e.formData.color=A),format:"hex",useType:"pure",gradientColor:e.gradientColor,"onUpdate:gradientColor":s[3]||(s[3]=A=>e.gradientColor=A)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Fv=Y(Pv,[["render",Mv]]),Rv={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Fv,AdminPageHeader:Ce,SettingSidebar:ta},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:_,themeMode:n}=Z(),{url:v,addEditUrl:y,initData:r,columns:u,filterableColumns:m}=Iv(),p=Fe();return ie(()=>{p.tableUrl.value={url:v},p.table.filterableColumns=m,p.fetch({page:1}),p.crudUrl.value=y,p.langKey.value="lead_status",p.initData.value={...r},p.formData.value={...r}}),{permsArray:e,appSetting:s,formatAmountCurrency:_,columns:u,...p,filterableColumns:m,themeMode:n}}},Lv={class:"table-responsive"},Bv={key:0,style:{display:"flex","align-items":"center"}},qv={key:1},Vv={key:0},Kv={key:1};function zv(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("PlusOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-space"),E=o("a-select-option"),A=o("a-select"),$=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),F=o("admin-page-filters"),V=o("AddEdit"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.lead_status"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.lead_status")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(F,null,{default:a(()=>[l(T,{gutter:[16,16]},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(S,null,{default:a(()=>[n.permsArray.includes("lead_status_add")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(w),c(" "+i(e.$t("lead_status.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("lead_status_delete")||n.permsArray.includes("admin"))?(d(),b(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(f,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(T,{gutter:[16,16],justify:"end"},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l(P,{compact:""},{default:a(()=>[l(A,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(E,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(V,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(T,null,{default:a(()=>[l(f,{span:24},{default:a(()=>[M("div",Lv,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="color"?(d(),U(L,{key:0},[O.type==="lead_status"?(d(),U("div",Bv,[M("span",{style:we({display:"inline-block",width:"16px",height:"16px",backgroundColor:`${O.color}`,borderRadius:"50%",marginRight:"8px",border:"1px solid #ccc"})},null,4),M("code",null,i(O.color),1)])):(d(),U("span",qv))],64)):D("",!0),R.dataIndex==="type"?(d(),U(L,{key:1},[O.type=="marital_status"?(d(),U("span",Vv,i(e.$t("lead.marital_status")),1)):(d(),U("span",Kv,i(e.$t("lead.lead_status")),1))],64)):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:2},[n.permsArray.includes("lead_status_edit")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("lead_status_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(k,{key:1,type:"primary",danger:"",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(C)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Nv=Y(Rv,[["render",zv]]),jv=()=>{const e="fields=id,xid,event,auditable_id,tags,url,user_agent,old_values,new_values,ip_address,created_at,updated_at,auditable_type,user_type,user_id,x_user_id,user{id,xid,name}",s=`audits?${e}`,_="audits",{t:n}=x(),v=[{title:n("audit.id"),dataIndex:"id"},{title:n("audit.user_id"),dataIndex:"user_id"},{title:n("audit.date_time"),dataIndex:"created_at"},{title:n("audit.ip_address"),dataIndex:"ip_address"},{title:n("audit.auditable_id"),dataIndex:"auditable_id"},{title:n("audit.event"),dataIndex:"event"},{title:n("common.action"),dataIndex:"action"}],y=[{key:"auditable_id",value:n("audit.auditable_id")},{key:"ip_address",value:n("audit.ip_address")}];return{url:s,fieldsString:e,addEditUrl:_,columns:v,filterableColumns:y}};const Hv=ne({components:{FormItemHeading:ct},props:["auditData","visible"],emits:["closed"],setup(e,{emit:s}){const{formatAmountCurrency:_}=Z();return x(),{formatAmountCurrency:_,onClose:()=>{s("closed")},drawerWidth:window.innerWidth<=991?"90%":"55%"}}}),Wv={class:"user-details"},Yv={style:{"font-weight":"bold"}},Gv={style:{"font-weight":"bold"}};function Jv(e,s,_,n,v,y){const r=o("FormItemHeading"),u=o("a-descriptions-item"),m=o("a-descriptions"),p=o("a-col"),h=o("a-row"),g=o("a-drawer");return d(),b(g,{width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{default:a(()=>[M("div",Wv,[e.auditData&&e.auditData.old_values?(d(),b(h,{key:0,gutter:[16,16]},{default:a(()=>[Object.keys(e.auditData.old_values).length>0?(d(),b(p,{key:0,xs:24,sm:24,md:20,lg:20},{default:a(()=>[l(r,null,{default:a(()=>[c(i(e.$t("audit.old_values")),1)]),_:1}),l(m,null,{default:a(()=>[(d(!0),U(L,null,G(e.auditData.old_values,(f,w)=>(d(),b(u,{key:w},{default:a(()=>[M("span",Yv,i(w),1),c(": "+i(f),1)]),_:2},1024))),128))]),_:1})]),_:1})):D("",!0)]),_:1})):D("",!0),e.auditData&&e.auditData.new_values?(d(),b(h,{key:1,gutter:[16,16]},{default:a(()=>[Object.keys(e.auditData.new_values).length>0?(d(),b(p,{key:0,xs:24,sm:24,md:20,lg:20},{default:a(()=>[l(r,null,{default:a(()=>[c(i(e.$t("audit.new_values")),1)]),_:1}),l(m,null,{default:a(()=>[(d(!0),U(L,null,G(e.auditData.new_values,(f,w)=>(d(),b(u,{key:w},{default:a(()=>[M("span",Gv,i(w),1),c(" : "+i(f),1)]),_:2},1024))),128))]),_:1})]),_:1})):D("",!0)]),_:1})):D("",!0)])]),_:1},8,["width","open","onClose"])}const Qv=Y(Hv,[["render",Jv]]),Xv={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AdminPageHeader:Ce,SettingSidebar:ta,EyeOutlined:aa,AuditView:Qv,DownloadOutlined:ga},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:_,formatDateTime:n,themeMode:v}=Z(),{fieldsString:y,url:r,addEditUrl:u,columns:m,filterableColumns:p}=jv(),h=Fe();Ke();const g=I([]),f=I({user_id:void 0,event:void 0,auditable_type:void 0}),w=I([]);ie(()=>{const A=axiosAdmin.get("audits-data"),$=axiosAdmin.get("users?limit=10000");Promise.all([$,A]).then(([P,T])=>{g.value=P.data,w.value=T.data.data}),k()});const k=()=>{h.tableUrl.value={url:r,extraFilters:f},h.table.filterableColumns=p,h.fetch({page:1}),h.crudUrl.value=u,h.langKey.value="audit"};function C(A){const $=A.split("&"),P={};return $.forEach(T=>{const[F,V]=T.split("=");P[F]=V}),P}return{permsArray:e,appSetting:s,formatAmountCurrency:_,columns:m,...h,filterableColumns:p,formatDateTime:n,breakString:A=>A.slice(11),themeMode:v,staffMembers:g,extraFilters:f,setUrlData:k,auditDatas:w,auditDownload:()=>{var A={};const $=h.getUrlWithQueryStringFromUrl(y),P=C($),T=decodeURIComponent(P.filters);P&&P.filters!=""&&P.filters!=null?A={...P,filters:T}:A={...P},axiosAdmin.post("audit/download",A,{responseType:"blob"}).then(F=>{const V=F,z=URL.createObjectURL(V),K=document.createElement("a");K.href=z,K.download="audit.xlsx",document.body.appendChild(K),K.click(),URL.revokeObjectURL(z),document.body.removeChild(K)}).catch(F=>{})}}}},Zv={class:"table-responsive"};function xv(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("DownloadOutlined"),k=o("a-button"),C=o("a-select-option"),S=o("a-select"),E=o("a-input-search"),A=o("a-input-group"),$=o("a-row"),P=o("admin-page-filters"),T=o("a-popover"),F=o("EyeOutlined"),V=o("a-table"),z=o("AuditView"),K=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.audits"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.audits")),1)]),_:1})]),_:1})]),_:1}),l($,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:n.themeMode=="dark"?"#141414":"#fff",borderRight:n.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(P,null,{default:a(()=>[l($,{gutter:[16,16]},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[l(k,{type:"primary",style:{"margin-left":"4px",width:"50%",padding:"5px"},onClick:n.auditDownload},{icon:a(()=>[l(w),c(" "+i(e.$t("menu.export_audits")),1)]),_:1},8,["onClick"])]),_:1}),l(f,{xs:24,sm:24,md:12,lg:18,xl:18},{default:a(()=>[l($,{gutter:[16,16],justify:"end"},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:4,xl:4},{default:a(()=>[l(S,{value:n.extraFilters.auditable_type,"onUpdate:value":s[0]||(s[0]=B=>n.extraFilters.auditable_type=B),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("audit.auditable_type")]),onChange:n.setUrlData,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(d(!0),U(L,null,G(n.auditDatas,B=>(d(),b(C,{key:B.auditable_type,value:B.auditable_type,label:B.auditable_type},{default:a(()=>[c(i(n.breakString(B.auditable_type)),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(f,{xs:24,sm:24,md:12,lg:4,xl:4},{default:a(()=>[l(S,{value:n.extraFilters.event,"onUpdate:value":s[1]||(s[1]=B=>n.extraFilters.event=B),"show-search":"",style:{width:"100%"},onChange:n.setUrlData,placeholder:e.$t("common.select_default_text",[e.$t("audit.action")]),allowClear:!0},{default:a(()=>[l(C,{value:"created"},{default:a(()=>[c(i(e.$t("audit.created")),1)]),_:1}),l(C,{value:"updated"},{default:a(()=>[c(i(e.$t("audit.updated")),1)]),_:1}),l(C,{value:"deleted"},{default:a(()=>[c(i(e.$t("audit.deleted")),1)]),_:1})]),_:1},8,["value","onChange","placeholder"])]),_:1}),l(f,{xs:24,sm:24,md:12,lg:4,xl:4},{default:a(()=>[l(S,{value:n.extraFilters.user_id,"onUpdate:value":s[2]||(s[2]=B=>n.extraFilters.user_id=B),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("audit.user")]),onChange:n.setUrlData,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(d(!0),U(L,null,G(n.staffMembers,B=>(d(),b(C,{key:B.xid,value:B.xid,label:B.name},{default:a(()=>[c(i(B.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(f,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(A,{compact:""},{default:a(()=>[l(S,{style:{width:"40%"},value:e.table.searchColumn,"onUpdate:value":s[3]||(s[3]=B=>e.table.searchColumn=B),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,B=>(d(),b(C,{key:B.key},{default:a(()=>[c(i(B.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(E,{style:{width:"60%"},value:e.table.searchString,"onUpdate:value":s[4]||(s[4]=B=>e.table.searchString=B),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading,placeholder:e.$t("common.search")},null,8,["value","onChange","onSearch","loading","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,null,{default:a(()=>[l($,null,{default:a(()=>[l(f,{span:24},{default:a(()=>[M("div",Zv,[l(V,{columns:n.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:B,record:R})=>{var O;return[B.dataIndex==="event"?(d(),U(L,{key:0},[c(i(n.breakString(R.auditable_type))+" "+i(R.event=="deleted"?e.$t("audit.deleted"):R.event=="updated"?e.$t("audit.updated"):e.$t("audit.created")),1)],64)):D("",!0),B.dataIndex==="user_id"?(d(),U(L,{key:1},[c(i((O=R.user)==null?void 0:O.name),1)],64)):D("",!0),B.dataIndex==="ip_address"?(d(),b(T,{key:2,title:e.$t("audit.user_agent")},{content:a(()=>[M("p",null,i(R.user_agent),1)]),default:a(()=>[c(" "+i(R.ip_address),1)]),_:2},1032,["title"])):D("",!0),B.dataIndex==="created_at"?(d(),U(L,{key:3},[c(i(n.formatDateTime(R.created_at)),1)],64)):D("",!0),B.dataIndex==="action"?(d(),b(k,{key:4,type:"primary",onClick:W=>e.viewItem(R),style:{"margin-left":"4px"}},{icon:a(()=>[l(F)]),_:2},1032,["onClick"])):D("",!0)]}),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),l(z,{auditData:e.viewData,visible:e.detailsVisible,onClosed:e.onCloseDetails},null,8,["auditData","visible","onClosed"])]),_:1})]),_:1})]),_:1})],64)}const eb=Y(Xv,[["render",xv]]),ab={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:gn,AdminPageHeader:Ce,SettingSidebar:ta},setup(){const{permsArray:e,appSetting:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r}=fn(),u=Fe();return ie(()=>{u.tableUrl.value={url:_},u.table.filterableColumns=r,u.fetch({page:1}),u.crudUrl.value=n,u.langKey.value="message_provider",u.initData.value={...v},u.formData.value={...v}}),{permsArray:e,appSetting:s,columns:y,...u,filterableColumns:r}}},tb={class:"table-responsive"};function lb(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("PlusOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-space"),E=o("a-select-option"),A=o("a-select"),$=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),F=o("admin-page-filters"),V=o("AddEdit"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.message_providers"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.message_providers")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:e.themeMode=="dark"?"#141414":"#fff",borderRight:e.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(F,null,{default:a(()=>[l(T,{gutter:[16,16]},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(S,null,{default:a(()=>[n.permsArray.includes("message_providers_create")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(w),c(" "+i(e.$t("message_provider.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("message_providers_delete")||n.permsArray.includes("admin"))?(d(),b(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(f,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(T,{gutter:[16,16],justify:"end"},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l(P,{compact:""},{default:a(()=>[l(A,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(E,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(V,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(T,null,{default:a(()=>[l(f,{span:24},{default:a(()=>[M("div",tb,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="subdomain"?(d(),U(L,{key:0},[c(i(O.subdomain?O.subdomain:"-"),1)],64)):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:1},[n.permsArray.includes("message_providers_edit")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("message_providers_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(k,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(C)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const nb=Y(ab,[["render",lb]]),ob={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:pn,AdminPageHeader:Ce,SettingSidebar:ta},setup(){const{permsArray:e,appSetting:s}=Z(),{url:_,addEditUrl:n,initData:v,columns:y,filterableColumns:r}=cn(),u=Fe();return ie(()=>{u.tableUrl.value={url:_},u.table.filterableColumns=r,u.fetch({page:1}),u.crudUrl.value=n,u.langKey.value="email_provider",u.initData.value={...v},u.formData.value={...v}}),{permsArray:e,appSetting:s,columns:y,...u,filterableColumns:r}}},sb={class:"table-responsive"};function db(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("SettingSidebar"),f=o("a-col"),w=o("PlusOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-space"),E=o("a-select-option"),A=o("a-select"),$=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),F=o("admin-page-filters"),V=o("AddEdit"),z=o("EditOutlined"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.email_providers"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.settings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.email_providers")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(f,{xs:24,sm:24,md:24,lg:4,xl:4,style:we({background:e.themeMode=="dark"?"#141414":"#fff",borderRight:e.themeMode=="dark"?"1px solid #303030":"1px solid #f0f0f0"})},{default:a(()=>[l(g)]),_:1},8,["style"]),l(f,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[l(F,null,{default:a(()=>[l(T,{gutter:[16,16]},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(S,null,{default:a(()=>[n.permsArray.includes("email_providers_create")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(w),c(" "+i(e.$t("email_provider.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("email_providers_delete")||n.permsArray.includes("admin"))?(d(),b(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(f,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(T,{gutter:[16,16],justify:"end"},{default:a(()=>[l(f,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l(P,{compact:""},{default:a(()=>[l(A,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(E,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(V,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(T,null,{default:a(()=>[l(f,{span:24},{default:a(()=>[M("div",sb,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="subdomain"?(d(),U(L,{key:0},[c(i(O.subdomain?O.subdomain:"-"),1)],64)):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:1},[n.permsArray.includes("email_providers_edit")||n.permsArray.includes("admin")?(d(),b(k,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("email_providers_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(k,{key:1,type:"primary",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(C)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ib=Y(ob,[["render",db]]),rb=[{path:"/admin/settings/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"company",component:s1,name:"admin.settings.company.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"company",permission:"companies_edit"}},{path:"profile",component:u1,name:"admin.settings.profile.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"profile"}},{path:"langs",component:y1,name:"admin.settings.langs.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:"translations_view"}},{path:"roles",component:S1,name:"admin.settings.roles.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"roles",permission:"roles_view"}},{path:"currencies",component:O1,name:"admin.settings.currencies.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"currencies",permission:"currencies_view"}},{path:"lead-status",component:Nv,name:"admin.settings.lead-status.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"lead_status"}},{path:"audits",component:eb,name:"admin.settings.audits.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"audits",permission:"audits_view"}},{path:"password-settings",component:p1,name:"admin.settings.password-settings.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"password_settings",permission:"password_settings_view"}},{path:"message_providers",component:nb,name:"admin.settings.message_providers.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"message_providers",permission:"message_provider_edit"}},{path:"email_providers",component:ib,name:"admin.settings.email_providers.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_providers",permission:"message_provider_edit"}},...Ov]}],ub=()=>{const s="lead-follow-ups?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},lead_follow_up_id,x_lead_follow_up_id,leadFollowUp{id,xid,log_type,time_taken,date_time,lead_id,x_lead_id,user_id,x_user_id},leadFollowUp:user{id,xid,name,profile_image,profile_image_url}",_=["lead_id","campaign_id","user_id"],{t:n}=x(),v=[{title:n("lead.id"),dataIndex:"id"},{title:n("lead.reference_number"),dataIndex:"reference_number"},{title:n("lead.campaign"),dataIndex:"campaign"},{title:n("lead_follow_up.follow_up_time"),dataIndex:"date_time"},{title:n("lead_follow_up.follow_up_by"),dataIndex:"actioner"},{title:n("common.action"),dataIndex:"action"}];return{url:s,columns:v,filterableColumns:[],hashableColumns:_}},mb={components:{DoubleRightOutlined:ya,DeleteOutlined:Se,AdminPageHeader:Ce,DateRangePicker:qa,DeleteBooking:Lt},setup(){const{permsArray:e,getCampaignUrl:s,user:_,formatDateTime:n}=Z(),{url:v,columns:y,hashableColumns:r}=ub(),{t:u}=x(),m=Ke(),p=na(),{addEditRequestAdmin:h,loading:g,rules:f}=pe(),w=rt(),k=I({campaign_id:void 0,dates:[],user_id:void 0}),C=I([]),S=I([]),E=sa();ie(()=>{const T=s(),F=axiosAdmin.get(T),V=axiosAdmin.get("all-users?log_type=lead_follow_up");Promise.all([F,V]).then(([z,K])=>{C.value=z.data,S.value=K.data.users,k.value={...k.value,user_id:_.value.xid},e.value.includes("leads_view_all")||e.value.includes("admin"),w.hashable.value=[...r],A()})});const A=()=>{w.tableUrl.value={url:v,extraFilters:k},w.hashable.value=[...r],w.table.pagination={...w.table.pagination,current:1},w.fetch({page:1})};return{...w,...E,url:v,columns:y,formatDateTime:n,hashableColumns:r,allCampaigns:C,allUsers:S,permsArray:e,extraFilters:k,user:_,startFollowUp:T=>{Ne.confirm({title:u("common.start")+"?",icon:l(De),content:u("lead_follow_up.start_follow_up_message"),centered:!0,okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){h({url:"lead-follow-ups/take-action",data:{x_lead_id:T.xid,booking_type:"lead_follow_up"},success:F=>{F&&F.lead_id&&p.push({name:"admin.call_manager.take_action",params:{id:F.lead_id}})}})},onCancel(){}})},setUrlData:A,showSelectedDeleteConfirm:()=>{Ne.confirm({title:u("common.delete")+"?",icon:l(De),content:u("lead_follow_up.selected_delete_message"),centered:!0,okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){const T=[];Ee(w.table.selectedRowKeys,F=>{T.push(axiosAdmin.post("lead-follow-ups/delete",{x_lead_id:F,booking_type:"lead_follow_up"}))}),Promise.all(T).then(F=>{m.dispatch("auth/updateVisibleSubscriptionModules"),w.fetch({page:w.currentPage.value}),Ve.success({message:u("common.success"),description:u("lead_follow_up.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},cb={class:"table-responsive"};function pb(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("DeleteOutlined"),f=o("a-button"),w=o("a-col"),k=o("a-select-option"),C=o("a-select"),S=o("DateRangePicker"),E=o("a-row"),A=o("admin-page-filters"),$=o("DoubleRightOutlined"),P=o("a-tooltip"),T=o("DeleteBooking"),F=o("a-space"),V=o("a-table"),z=o("admin-page-table-content"),K=o("view-lead-details");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.lead_follow_up"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.bookings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.lead_follow_up")),1)]),_:1})]),_:1})]),_:1}),l(A,null,{default:a(()=>[l(E,{gutter:[16,16]},{default:a(()=>[l(w,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[e.table.selectedRowKeys.length>0&&(n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin"))?(d(),b(f,{key:0,type:"primary",onClick:n.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1}),l(w,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(E,{gutter:[16,16],justify:"end"},{default:a(()=>[l(w,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[l(C,{value:n.extraFilters.campaign_id,"onUpdate:value":s[0]||(s[0]=B=>n.extraFilters.campaign_id=B),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allCampaigns,B=>(d(),b(k,{key:B.xid,title:B.name,value:B.xid},{default:a(()=>[c(i(B.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(w,{key:0,xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[l(C,{value:n.extraFilters.user_id,"onUpdate:value":s[1]||(s[1]=B=>n.extraFilters.user_id=B),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allUsers,B=>(d(),b(k,{key:B.xid,title:B.name,value:B.xid},{default:a(()=>[c(i(B.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):D("",!0),l(w,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[l(S,{onDateTimeChanged:s[2]||(s[2]=B=>{n.extraFilters.dates=B,n.setUrlData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(z,null,{default:a(()=>[l(E,null,{default:a(()=>[l(w,{span:24},{default:a(()=>[M("div",cb,[l(V,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:B=>({disabled:!1,name:B.xid})},columns:n.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:B,record:R})=>[B.dataIndex==="reference_number"?(d(),b(f,{key:0,type:"link",class:"p-0",onClick:O=>e.showViewDrawer(R)},{default:a(()=>[c(i(R.reference_number!=""&&R.reference_number!=null?R.reference_number:"---"),1)]),_:2},1032,["onClick"])):D("",!0),B.dataIndex==="date_time"?(d(),U(L,{key:1},[c(i(n.formatDateTime(R.lead_follow_up.date_time)),1)],64)):D("",!0),B.dataIndex==="campaign"?(d(),U(L,{key:2},[c(i(R.campaign&&R.campaign.name?R.campaign.name:"-"),1)],64)):D("",!0),B.dataIndex==="actioner"?(d(),U(L,{key:3},[c(i(R.lead_follow_up&&R.lead_follow_up.user&&R.lead_follow_up.user.name?R.lead_follow_up.user.name:"-"),1)],64)):D("",!0),B.dataIndex==="action"?(d(),b(F,{key:4},{default:a(()=>[R.lead_follow_up.x_user_id==n.user.xid?(d(),b(P,{key:0,title:e.$t("lead_follow_up.start_follow_up")},{default:a(()=>[l(f,{type:"primary",onClick:O=>n.startFollowUp(R)},{icon:a(()=>[l($)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):D("",!0),n.permsArray.includes("leads_view_all")||n.permsArray.includes("admin")?(d(),b(T,{key:1,bookingType:"lead_follow_up",onSuccess:n.setUrlData,xLeadId:R.xid,showDeleteText:!1},null,8,["onSuccess","xLeadId"])):D("",!0)]),_:2},1024)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),l(K,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const _b=Y(mb,[["render",pb]]),fb=()=>{const s="salesman-bookings?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},salesman_booking_id,x_salesman_booking_id,salesmanBooking{id,xid,log_type,time_taken,date_time,lead_id,x_lead_id,user_id,x_user_id,created_by_id,x_created_by_id},salesmanBooking:user{id,xid,name,profile_image,profile_image_url}",_=["lead_id","campaign_id","user_id"],{t:n}=x(),v=[{title:n("lead.id"),dataIndex:"id"},{title:n("lead.reference_number"),dataIndex:"reference_number"},{title:n("lead.campaign"),dataIndex:"campaign"},{title:n("lead.booking_time"),dataIndex:"date_time"},{title:n("salesman.salesman"),dataIndex:"actioner"},{title:n("common.action"),dataIndex:"action"}];return{url:s,columns:v,filterableColumns:[],hashableColumns:_}},gb={components:{PlayCircleOutlined:oa,InfoCircleOutlined:ua,DeleteOutlined:Se,PlusOutlined:de,AdminPageHeader:Ce,DateRangePicker:qa,DeleteBooking:Lt},setup(){const{permsArray:e,getCampaignUrl:s,user:_,formatDateTime:n}=Z(),{url:v,columns:y,hashableColumns:r}=fb(),{t:u}=x(),m=Ke(),p=na();pe();const h=rt(),g=I({campaign_id:void 0,dates:[],user_id:void 0}),f=I([]),w=I([]),k=sa();ie(()=>{const A=s(),$=axiosAdmin.get(A),P=axiosAdmin.get("all-users?log_type=salesman_bookings");Promise.all([$,P]).then(([T,F])=>{f.value=T.data,w.value=F.data.users,e.value.includes("leads_view_all")||e.value.includes("admin"),h.hashable.value=[...r],C()})});const C=()=>{h.tableUrl.value={url:v,extraFilters:g},h.hashable.value=[...r],h.table.pagination={...h.table.pagination,current:1},h.fetch({page:1})};return{...h,...k,url:v,columns:y,formatDateTime:n,hashableColumns:r,allCampaigns:f,allUsers:w,permsArray:e,extraFilters:g,user:_,setUrlData:C,goAndResumeLead:A=>{Ne.confirm({title:u("common.are_you_sure")+"?",icon:l(De),content:u("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){p.push({name:"admin.call_manager.take_action",params:{id:A.xid}})},onCancel(){}})},showSelectedDeleteConfirm:()=>{Ne.confirm({title:u("common.delete")+"?",icon:l(De),content:u("salesman_booking.selected_delete_message"),centered:!0,okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){const A=[];Ee(h.table.selectedRowKeys,$=>{A.push(axiosAdmin.post("salesman-bookings",{x_lead_id:$,booking_type:"salesman_bookings"}))}),Promise.all(A).then($=>{m.dispatch("auth/updateVisibleSubscriptionModules"),h.fetch({page:h.currentPage.value}),Ve.success({message:u("common.success"),description:u("salesman_booking.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},hb={class:"table-responsive"},vb={key:1};function bb(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("DeleteOutlined"),f=o("a-button"),w=o("a-space"),k=o("a-col"),C=o("a-select-option"),S=o("a-select"),E=o("DateRangePicker"),A=o("a-row"),$=o("admin-page-filters"),P=o("PlayCircleOutlined"),T=o("a-tooltip"),F=o("DeleteBooking"),V=o("InfoCircleOutlined"),z=o("a-table"),K=o("admin-page-table-content"),B=o("view-lead-details");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.salesman_bookings"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.bookings")),1)]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.salesman_bookings")),1)]),_:1})]),_:1})]),_:1}),l($,null,{default:a(()=>[l(A,{gutter:[16,16]},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(w,null,{default:a(()=>[e.table.selectedRowKeys.length>0&&(n.permsArray.includes("salesman_bookings_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:0,type:"primary",onClick:n.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(A,{gutter:[16,16],justify:"end"},{default:a(()=>[l(k,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[l(S,{value:n.extraFilters.campaign_id,"onUpdate:value":s[0]||(s[0]=R=>n.extraFilters.campaign_id=R),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allCampaigns,R=>(d(),b(C,{key:R.xid,title:R.name,value:R.xid},{default:a(()=>[c(i(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(k,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[l(S,{value:n.extraFilters.user_id,"onUpdate:value":s[1]||(s[1]=R=>n.extraFilters.user_id=R),placeholder:e.$t("common.select_default_text",[e.$t("salesman.salesman")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(d(!0),U(L,null,G(n.allUsers,R=>(d(),b(C,{key:R.xid,title:R.name,value:R.xid},{default:a(()=>[c(i(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l(k,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[l(E,{onDateTimeChanged:s[2]||(s[2]=R=>{n.extraFilters.dates=R,n.setUrlData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,null,{default:a(()=>[l(A,{class:"mt-20"},{default:a(()=>[l(k,{span:24},{default:a(()=>[M("div",hb,[l(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="reference_number"?(d(),b(f,{key:0,type:"link",class:"p-0",onClick:W=>e.showViewDrawer(O)},{default:a(()=>[c(i(O.reference_number!=""&&O.reference_number!=null?O.reference_number:"---"),1)]),_:2},1032,["onClick"])):D("",!0),R.dataIndex==="date_time"?(d(),U(L,{key:1},[c(i(n.formatDateTime(O.salesman_booking.date_time)),1)],64)):D("",!0),R.dataIndex==="campaign"?(d(),U(L,{key:2},[c(i(O.campaign&&O.campaign.name?O.campaign.name:"-"),1)],64)):D("",!0),R.dataIndex==="actioner"?(d(),U(L,{key:3},[c(i(O.salesman_booking&&O.salesman_booking.user&&O.salesman_booking.user.name?O.salesman_booking.user.name:"-"),1)],64)):D("",!0),R.dataIndex==="action"?(d(),U(L,{key:4},[O.x_last_action_by==n.user.xid?(d(),b(w,{key:0},{default:a(()=>[l(T,{title:e.$t("lead.go_resume_call")},{default:a(()=>[l(f,{type:"primary",onClick:W=>n.goAndResumeLead(O)},{icon:a(()=>[l(P)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),l(F,{bookingType:"salesman_bookings",onSuccess:n.setUrlData,xLeadId:O.xid,showDeleteText:!1},null,8,["onSuccess","xLeadId"])]),_:2},1024)):(d(),U("span",vb,[l(T,null,{title:a(()=>[c(i(e.$t("salesman_booking.you_are_not_last_actioner")),1)]),default:a(()=>[l(V)]),_:1})]))],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),l(B,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const yb=Y(gb,[["render",bb]]),kb=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/bookings/lead-follow-up",component:_b,name:"admin.bookings.lead_follow_up.index",meta:{requireAuth:!0,menuParent:"lead_follow_up",menuKey:"lead_follow_up"}},{path:"/admin/bookings/salesman-bookings",component:yb,name:"admin.bookings.salesman_bookings.index",meta:{requireAuth:!0,menuParent:"salesmans",menuKey:"salesman_bookings"}}]}],Cb={props:{showFilter:{default:!0},panelType:{type:String,default:"admin"}},emits:["addOrEditSuccess"],components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Kt},setup(e,{emit:s}){const{permsArray:_,appSetting:n}=Z(),{url:v,addEditUrl:y,initData:r,columns:u,filterableColumns:m}=Vt(e.panelType),p=Fe();return ie(()=>{p.tableUrl.value={url:v},p.table.filterableColumns=m,p.fetch({page:1}),p.crudUrl.value=y,p.langKey.value="currency",p.initData.value={...r},p.formData.value={...r}}),{appSetting:n,permsArray:_,columns:u,...p,filterableColumns:m,addOrEditSuccess:g=>{p.addEditSuccess(g),s("addOrEditSuccess",{action_type:p.addEditType.value,xid:g})}}}},wb={class:"table-responsive"};function Sb(e,s,_,n,v,y){const r=o("AddEdit"),u=o("a-select-option"),m=o("a-select"),p=o("a-input-search"),h=o("a-input-group"),g=o("a-col"),f=o("a-row"),w=o("EditOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-table");return d(),U("div",null,[l(r,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),_.showFilter?(d(),b(f,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[l(g,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[l(h,{compact:""},{default:a(()=>[l(m,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=E=>e.table.searchColumn=E),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,E=>(d(),b(u,{key:E.key},{default:a(()=>[c(i(E.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=E=>e.table.searchString=E),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):D("",!0),l(f,{class:"mt-20"},{default:a(()=>[l(g,{span:24},{default:a(()=>[M("div",wb,[l(S,{columns:n.columns,"row-key":E=>E.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:E,record:A})=>[E.dataIndex==="action"?(d(),U(L,{key:0},[_.panelType=="admin"&&(n.permsArray.includes("currencies_edit")||n.permsArray.includes("admin"))||_.panelType=="superadmin"?(d(),b(k,{key:0,type:"primary",onClick:$=>e.editItem(A),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0),(_.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||_.panelType=="superadmin")&&n.appSetting.x_currency_id!=A.xid?(d(),b(k,{key:1,type:"primary",onClick:$=>e.showDeleteConfirm(A.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(C)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const $b=Y(Cb,[["render",Sb]]),Ab={props:{showSubmitButton:{default:!0}},emits:["updateSuccess"],components:{EyeOutlined:aa,PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,ExclamationCircleOutlined:De,SaveOutlined:$e,SettingOutlined:Ja,ColorPicker:Ot,Upload:ka,CurrencyAddButton:Tn,CreateMenuSetting:On,FormItemHeading:ct,LanguageAddButton:pt},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{permsArray:y,appSetting:r,dayjsObject:u,appType:m}=Z(),{t:p}=x(),h=Ke(),g=I({}),f=I([]),w=I([]),k=I([]),C=I([]),S=r.value,E="currencies?limit=10000",A="timezones",$=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),P=window.config.theme_mode,T=I([]),F="all-langs";ie(()=>{const O=axiosAdmin.get(E),W=axiosAdmin.get(A),q=axiosAdmin.get(F);Promise.all([O,W,q]).then(([N,j,te])=>{f.value=N.data,w.value=j.data.timezones,k.value=j.data.date_formates,C.value=j.data.time_formates,T.value=te.data.langs,V()})});const V=()=>{g.value={name:S.name,short_name:S.short_name,email:S.email,phone:S.phone,address:S.address,left_sidebar_theme:S.left_sidebar_theme,dark_logo:S.dark_logo,dark_logo_url:S.dark_logo_url,light_logo:S.light_logo,light_logo_url:S.light_logo_url,small_dark_logo:S.small_dark_logo,small_light_logo:S.small_light_logo,small_dark_logo_url:S.small_dark_logo_url,small_light_logo_url:S.small_light_logo_url,login_image:S.login_image,login_image_url:S.login_image_url,shortcut_menus:S.shortcut_menus,rtl:S.rtl,currency_id:S.x_currency_id,lang_id:S.x_lang_id,primary_color:S.primary_color,timezone:S.timezone,date_format:S.date_format,time_format:S.time_format,auto_detect_timezone:S.auto_detect_timezone,app_debug:S.app_debug,update_app_notification:S.update_app_notification,_method:"PUT"}};return{appType:m,permsArray:y,formData:g,loading:n,rules:v,currencies:f,onSubmit:()=>{_({url:`companies/${S.xid}`,data:g.value,successMessage:p("company.updated"),success:O=>{h.dispatch("auth/updateApp"),s("updateSuccess")}})},currencyAdded:()=>{axiosAdmin.get(E).then(O=>{f.value=O.data})},gradientColor:$,timezones:w,dateFormats:k,timeFormats:C,dayjsObject:u,appThemeMode:P,addMenuSettingUpdated:O=>{g.value.shortcut_menus=O},allLangs:T,languageAdded:()=>{axiosAdmin.get(F).then(O=>{T.value=O.data.langs})}}}},Db={class:"mt-40"},Tb={style:{display:"flex"}},Eb={style:{display:"flex"}},Ub={class:"mt-30"},Ob={class:"mt-30"};function Ib(e,s,_,n,v,y){const r=o("FormItemHeading"),u=o("a-input"),m=o("a-form-item"),p=o("a-col"),h=o("a-row"),g=o("a-select-option"),f=o("a-select"),w=o("CurrencyAddButton"),k=o("LanguageAddButton"),C=o("a-switch"),S=o("color-picker"),E=o("Upload"),A=o("SaveOutlined"),$=o("a-button"),P=o("a-form");return d(),b(P,{layout:"vertical"},{default:a(()=>[M("div",Db,[l(r,null,{default:a(()=>[c(i(e.$t("setup_company.basic_settings")),1)]),_:1})]),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[l(u,{value:n.formData.name,"onUpdate:value":s[0]||(s[0]=T=>n.formData.name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.short_name"),name:"short_name",help:n.rules.short_name?n.rules.short_name.message:null,validateStatus:n.rules.short_name?"error":null,class:"required"},{default:a(()=>[l(u,{value:n.formData.short_name,"onUpdate:value":s[1]||(s[1]=T=>n.formData.short_name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[l(u,{value:n.formData.email,"onUpdate:value":s[2]||(s[2]=T=>n.formData.email=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null,class:"required"},{default:a(()=>[l(u,{value:n.formData.phone,"onUpdate:value":s[3]||(s[3]=T=>n.formData.phone=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.date_format"),name:"date_format",help:n.rules.date_format?n.rules.date_format.message:null,validateStatus:n.rules.date_format?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.date_format,"onUpdate:value":s[4]||(s[4]=T=>n.formData.date_format=T),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.dateFormats,(T,F)=>(d(),b(g,{key:F,value:T},{default:a(()=>[c(i(`(${F}) => `+n.dayjsObject().format(T)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.time_format"),name:"time_format",help:n.rules.time_format?n.rules.time_format.message:null,validateStatus:n.rules.time_format?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.time_format,"onUpdate:value":s[5]||(s[5]=T=>n.formData.time_format=T),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.timeFormats,(T,F)=>(d(),b(g,{key:F,value:F},{default:a(()=>[c(i(`(${T}) => `+n.dayjsObject().format(F)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.currency"),name:"currency_id",help:n.rules.currency_id?n.rules.currency_id.message:null,validateStatus:n.rules.currency_id?"error":null,class:"required"},{default:a(()=>[M("span",Tb,[l(f,{value:n.formData.currency_id,"onUpdate:value":s[6]||(s[6]=T=>n.formData.currency_id=T),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.currencies,T=>(d(),b(g,{key:T.xid,value:T.xid},{default:a(()=>[c(i(`${T.name} (${T.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(w,{onOnAddSuccess:n.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.language"),name:"lang_id",help:n.rules.lang_id?n.rules.lang_id.message:null,validateStatus:n.rules.lang_id?"error":null,class:"required"},{default:a(()=>[M("span",Eb,[l(f,{value:n.formData.lang_id,"onUpdate:value":s[7]||(s[7]=T=>n.formData.lang_id=T),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.allLangs,T=>(d(),b(g,{key:T.xid,value:T.xid},{default:a(()=>[c(i(T.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),l(k,{onOnAddSuccess:n.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[l(m,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:n.rules.auto_detect_timezone?n.rules.auto_detect_timezone.message:null,validateStatus:n.rules.auto_detect_timezone?"error":null},{default:a(()=>[l(C,{checked:n.formData.auto_detect_timezone,"onUpdate:checked":s[8]||(s[8]=T=>n.formData.auto_detect_timezone=T),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[l(m,{label:e.$t("company.default_timezone"),name:"timezone",help:n.rules.timezone?n.rules.timezone.message:null,validateStatus:n.rules.timezone?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.timezone,"onUpdate:value":s[9]||(s[9]=T=>n.formData.timezone=T),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(d(!0),U(L,null,G(n.timezones,(T,F)=>(d(),b(g,{key:F,value:T},{default:a(()=>[c(i(T),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.appType=="non-saas"?(d(),b(p,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[l(m,{label:e.$t("company.app_debug"),name:"app_debug",help:n.rules.app_debug?n.rules.app_debug.message:null,validateStatus:n.rules.app_debug?"error":null},{default:a(()=>[l(C,{checked:n.formData.app_debug,"onUpdate:checked":s[10]||(s[10]=T=>n.formData.app_debug=T),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0),n.appType=="non-saas"?(d(),b(p,{key:1,xs:24,sm:24,md:4,lg:4},{default:a(()=>[l(m,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:n.rules.update_app_notification?n.rules.update_app_notification.message:null,validateStatus:n.rules.update_app_notification?"error":null},{default:a(()=>[l(C,{checked:n.formData.update_app_notification,"onUpdate:checked":s[11]||(s[11]=T=>n.formData.update_app_notification=T),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1}),M("div",Ub,[l(r,null,{default:a(()=>[c(i(e.$t("setup_company.theme_settings")),1)]),_:1})]),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:n.rules.left_sidebar_theme?n.rules.left_sidebar_theme.message:null,validateStatus:n.rules.left_sidebar_theme?"error":null},{default:a(()=>[l(f,{value:n.formData.left_sidebar_theme,"onUpdate:value":s[12]||(s[12]=T=>n.formData.left_sidebar_theme=T),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:a(()=>[l(g,{key:"dark",value:"dark"},{default:a(()=>[c(i(e.$t("company.dark")),1)]),_:1}),n.appThemeMode!="dark"?(d(),b(g,{key:"light",value:"light"},{default:a(()=>[c(i(e.$t("company.light")),1)]),_:1})):D("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.primary_color"),name:"primary_color",help:n.rules.primary_color?n.rules.primary_color.message:null,validateStatus:n.rules.primary_color?"error":null},{default:a(()=>[l(S,{pureColor:n.formData.primary_color,"onUpdate:pureColor":s[13]||(s[13]=T=>n.formData.primary_color=T),format:"hex",useType:"pure",gradientColor:n.gradientColor,"onUpdate:gradientColor":s[14]||(s[14]=T=>n.gradientColor=T)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.layout"),name:"rtl",help:n.rules.rtl?n.rules.rtl.message:null,validateStatus:n.rules.rtl?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.rtl,"onUpdate:value":s[15]||(s[15]=T=>n.formData.rtl=T),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[l(g,{key:"rtl",value:1},{default:a(()=>[c(i(e.$t("company.rtl")),1)]),_:1}),l(g,{key:"ltr",value:0},{default:a(()=>[c(i(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(m,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:n.rules.shortcut_menus?n.rules.shortcut_menus.message:null,validateStatus:n.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[l(f,{value:n.formData.shortcut_menus,"onUpdate:value":s[16]||(s[16]=T=>n.formData.shortcut_menus=T),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[l(g,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[c(i(e.$t("company.top_and_bottom")),1)]),_:1}),l(g,{key:"top",value:"top"},{default:a(()=>[c(i(e.$t("company.top_header")),1)]),_:1}),l(g,{key:"bottom",value:"bottom"},{default:a(()=>[c(i(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),M("div",Ob,[l(r,null,{default:a(()=>[c(i(e.$t("setup_company.logo_settings")),1)]),_:1})]),l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(m,{label:e.$t("company.dark_logo"),name:"dark_logo",help:n.rules.dark_logo?n.rules.dark_logo.message:null,validateStatus:n.rules.dark_logo?"error":null},{default:a(()=>[l(E,{formData:n.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:s[17]||(s[17]=T=>{n.formData.dark_logo=T.file,n.formData.dark_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(m,{label:e.$t("company.light_logo"),name:"light_logo",help:n.rules.light_logo?n.rules.light_logo.message:null,validateStatus:n.rules.light_logo?"error":null},{default:a(()=>[l(E,{formData:n.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:s[18]||(s[18]=T=>{n.formData.light_logo=T.file,n.formData.light_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(m,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:n.rules.small_dark_logo?n.rules.small_dark_logo.message:null,validateStatus:n.rules.small_dark_logo?"error":null},{default:a(()=>[l(E,{formData:n.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:s[19]||(s[19]=T=>{n.formData.small_dark_logo=T.file,n.formData.small_dark_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(m,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:n.rules.small_light_logo?n.rules.small_light_logo.message:null,validateStatus:n.rules.small_light_logo?"error":null},{default:a(()=>[l(E,{formData:n.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:s[20]||(s[20]=T=>{n.formData.small_light_logo=T.file,n.formData.small_light_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.appType=="non-saas"?(d(),b(h,{key:0,gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[l(m,{label:e.$t("company.login_image"),name:"login_image",help:n.rules.login_image?n.rules.login_image.message:null,validateStatus:n.rules.login_image?"error":null},{default:a(()=>[l(E,{formData:n.formData,folder:"company",imageField:"login_image",onOnFileUploaded:s[21]||(s[21]=T=>{n.formData.login_image=T.file,n.formData.login_image_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):D("",!0),_.showSubmitButton?(d(),b(h,{key:1,gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(m,null,{default:a(()=>[l($,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[l(A)]),default:a(()=>[c(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})):D("",!0)]),_:1})}const Pb=Y(Ab,[["render",Ib]]),Mb=ne({components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,DoubleRightOutlined:ya,DoubleLeftOutlined:ot,SaveOutlined:$e,SyncOutlined:Ta,CheckCircleOutlined:It,HomeOutlined:Fo,InfoCircleOutlined:ua,CurrencyTable:$b,EditSetupSetting:Pb},setup(){Z();const e=na(),s=Ke(),_=I(null),n=I(null),v=I(null),y=I([]),r=I(0),u=I(0),m=Le({currencyStepStatus:"wait",companySettingStepStatus:"wait"}),p=I(!1),h=I(!1);ie(()=>{g()});const g=()=>{axiosAdmin.get("app").then(T=>{y.value=T.data,m.currencyStepStatus=y.value.total_currencies>0?"finish":"wait",m.companySettingStepStatus=f()==!1?"finish":"wait",y.value.total_currencies==0?(r.value=0,u.value=0,m.currencyStepStatus="error"):f()?(r.value=1,u.value=1,m.companySettingStepStatus="error"):(r.value=1,u.value=1,h.value=!0,p.value=!0)})},f=()=>y.value.app.x_currency_id==null,w=()=>{n.value.addItem()},k=T=>{g()},C=()=>{v.value.onSubmit()},S=()=>{p.value=!0,axiosAdmin.post("/user").then(function(T){s.commit("auth/updateUser",T.data.user),h.value=!0}).catch(function(T){})},E=()=>{p.value=!1,e.push({name:"admin.dashboard.index"})},A=()=>{r.value=r.value==0?0:r.value-1},$=()=>{r.value=r.value>=1?1:r.value+1},P=()=>{s.dispatch("auth/logout")};return{appDetails:y,currentStep:r,correctStep:u,...Rl(m),warhouseTableRef:_,currencyTableRef:n,addCurrency:w,currencyAddSuccess:k,companySettingRef:v,submitCompanySetting:C,companySettingUpdated:S,showFinalModal:p,setupCompleted:h,goToDashboard:E,goBack:A,goNext:$,logout:P}}}),Fb=["src"],Rb={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"left",zIndex:1,marginBottom:"10px"}},Lb={key:0,style:{color:"#7676e3"}},Bb={key:1,style:{color:"#7676e3"}};function qb(e,s,_,n,v,y){const r=o("a-col"),u=o("a-button"),m=o("a-row"),p=o("a-layout-header"),h=o("a-alert"),g=o("a-step"),f=o("a-steps"),w=o("a-divider"),k=o("PlusOutlined"),C=o("CurrencyTable"),S=o("EditSetupSetting"),E=o("DoubleLeftOutlined"),A=o("DoubleRightOutlined"),$=o("SaveOutlined"),P=o("a-space"),T=o("a-card"),F=o("CheckCircleOutlined"),V=o("InfoCircleOutlined"),z=o("HomeOutlined"),K=o("SyncOutlined"),B=o("a-result"),R=o("a-modal"),O=o("a-layout-content"),W=o("a-layout");return d(),b(W,{class:"layout"},{default:a(()=>[l(p,null,{default:a(()=>[l(m,null,{default:a(()=>[l(r,{span:4},{default:a(()=>[e.appDetails&&e.appDetails.app?(d(),U("img",{key:0,style:{height:"32px"},src:e.appDetails.app.left_sidebar_theme=="dark"?e.appDetails.app.dark_logo_url:e.appDetails.app.light_logo_url},null,8,Fb)):D("",!0)]),_:1}),l(r,{span:20,style:{textAlign:"right"}},{default:a(()=>[l(u,{type:"link",onClick:e.logout,class:"p-0",style:{color:"white"}},{default:a(()=>[c(i(e.$t("menu.logout")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),l(O,{style:{padding:"0 50px"}},{default:a(()=>[l(T,{class:"setup-page-content-container",bodyStyle:{padding:"0px"},style:{height:"100vh",marginTop:"20px",background:"white"}},{default:a(()=>[l(m,null,{default:a(()=>[l(r,{span:21,offset:1},{default:a(()=>[l(h,{message:e.$t("setup_company.setup_not_completed"),description:e.$t("setup_company.setup_not_completed_description"),type:"error","show-icon":"",style:{marginTop:"40px"}},null,8,["message","description"])]),_:1})]),_:1}),l(m,{style:{marginTop:"80px",background:"white"}},{default:a(()=>[l(r,{span:21,offset:1},{default:a(()=>[l(f,{current:e.currentStep},{default:a(()=>[l(g,{status:e.currencyStepStatus},{title:a(()=>[c(i(e.$t("setup_company.currency")),1)]),description:a(()=>[M("span",null,i(e.$t("setup_company.add_first_currency")),1)]),_:1},8,["status"]),l(g,{status:e.companySettingStepStatus},{title:a(()=>[c(i(e.$t("setup_company.company_settings")),1)]),description:a(()=>[M("span",null,i(e.$t("setup_company.set_company_basic_settings")),1)]),_:1},8,["status"])]),_:1},8,["current"]),l(w),e.appDetails&&e.appDetails.app&&e.appDetails.app.name?(d(),U(L,{key:0},[e.currentStep==0?(d(),U(L,{key:0},[l(u,{type:"primary",onClick:e.addCurrency},{default:a(()=>[l(k),c(" "+i(e.$t("currency.add")),1)]),_:1},8,["onClick"]),l(C,{class:"mb-40",ref:"currencyTableRef",showFilter:!1,onAddOrEditSuccess:e.currencyAddSuccess},null,8,["onAddOrEditSuccess"])],64)):D("",!0),e.currentStep==1?(d(),b(S,{key:1,class:"mb-40",ref:"companySettingRef",showSubmitButton:!1,onUpdateSuccess:e.companySettingUpdated},null,8,["onUpdateSuccess"])):D("",!0)],64)):D("",!0)]),_:1})]),_:1}),l(m,{class:"mt-10"},{default:a(()=>[l(r,{span:20,offset:1},{default:a(()=>[M("div",Rb,[l(P,null,{default:a(()=>[e.currentStep>=0&&e.currentStep!=0?(d(),b(u,{key:0,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},onClick:e.goBack},{default:a(()=>[l(E),c(" "+i(e.$t("setup_company.previous_step")),1)]),_:1},8,["onClick"])):D("",!0),e.currentStep<1?(d(),b(u,{key:1,type:"primary",onClick:e.goNext,disabled:e.currentStep>=e.correctStep},{default:a(()=>[c(i(e.$t("setup_company.next_step"))+" ",1),l(A)]),_:1},8,["onClick","disabled"])):D("",!0),e.currentStep==1&&e.companySettingRef?(d(),b(u,{key:2,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.submitCompanySetting,loading:e.companySettingRef.loading},{default:a(()=>[l($),c(" "+i(e.$t("setup_company.save_finish_setup")),1)]),_:1},8,["onClick","loading"])):D("",!0)]),_:1})])]),_:1})]),_:1})]),_:1}),l(R,{open:e.showFinalModal,"onUpdate:open":s[0]||(s[0]=q=>e.showFinalModal=q),maskClosable:!1,closable:!1,footer:null,centered:""},{default:a(()=>[l(B,null,{title:a(()=>[e.setupCompleted?(d(),U("span",Lb,i(e.$t("setup_company.setup_complete_message")),1)):(d(),U("span",Bb,i(e.$t("setup_company.setup_running_message")),1))]),icon:a(()=>[e.setupCompleted?(d(),b(F,{key:0})):(d(),b(V,{key:1}))]),extra:a(()=>[e.setupCompleted?(d(),b(u,{key:0,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.goToDashboard},{default:a(()=>[l(z),c(" "+i(e.$t("setup_company.go_to_dashboard")),1)]),_:1},8,["onClick"])):(d(),b(K,{key:1,style:{fontSize:"38px",color:"#5254cf"},spin:""}))]),_:1})]),_:1},8,["open"])]),_:1})]),_:1})}const Vb=Y(Mb,[["render",qb]]),Cl=[{path:"/admin/setup",component:Vb,name:"admin.setup_app.index",meta:{requireAuth:!0,menuParent:"",menuKey:"setup_company"}}],Kb={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Cn,AdminPageHeader:Ce},setup(){const{addEditUrl:e,initData:s,columns:_,filterableColumns:n}=kn(),v=Fe(),{permsArray:y}=Z();return ie(()=>{v.tableUrl.value={url:"categories?fields=id,xid,name,audits{id,user_type}"},v.table.filterableColumns=n,v.fetch({page:1}),v.crudUrl.value=e,v.langKey.value="category",v.initData.value={...s},v.formData.value={...s}}),{columns:_,...v,filterableColumns:n,permsArray:y}}},zb={class:"table-responsive"};function Nb(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("EditOutlined"),z=o("a-table"),K=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.categories"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.categories")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("categories_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("category.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("categories_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=B=>e.table.searchColumn=B),placeholder:e.$t("common.select_default_text")},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,B=>(d(),b(S,{key:B.key},{default:a(()=>[c(i(B.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=B=>e.table.searchString=B),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading,placeholder:e.$t("common.information")},null,8,["value","onChange","onSearch","loading","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",zb,[l(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:B=>({disabled:!1,name:B.xid})},columns:n.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:B,record:R})=>[B.dataIndex==="action"?(d(),U(L,{key:0},[n.permsArray.includes("categories_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:O=>e.editItem(R),style:{"margin-left":"4px"}},{icon:a(()=>[l(V)]),_:2},1032,["onClick"])):D("",!0),n.permsArray.includes("categories_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:1,type:"primary",danger:"",onClick:O=>e.showDeleteConfirm(R.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const jb=Y(Kb,[["render",Nb]]),Hb=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/categories",component:jb,name:"admin.categories.index",meta:{requireAuth:!0,menuParent:"categories",menuKey:e=>"categories",permission:"categories_view"}}]}],Wb=()=>{const e="uphone-calls?fields=id,xid,campaign,client_id,date,direction,duration,guid,discriptions,number,response_data,campaign_id,x_campaign_id,campaigns{id,xid,name},lead_id,x_lead_id,leadData{id,xid,reference_number,first_action_by,last_action_by,time_taken,x_first_action_by,x_last_action_by,lead_data},leadData:firstActioner{id,xid,name}leadData:lastActioner{id,xid,name},leadData:campaign{id,xid,name}",s=["lead_id","campaign_id"],{t:_}=x(),n=[{title:_("uphone_calls.lead"),dataIndex:"reference_number"},{title:_("uphone_calls.number"),dataIndex:"number"},{title:_("uphone_calls.direction"),dataIndex:"direction"},{title:_("uphone_calls.duration"),dataIndex:"duration"},{title:_("uphone_calls.guid"),dataIndex:"guid"},{title:_("uphone_calls.date"),dataIndex:"date"},{title:_("common.action"),dataIndex:"action"}],v=[{key:"campaign",value:_("uphone_calls.campaign")},{key:"client_id",value:_("uphone_calls.client_id")},{key:"direction",value:_("uphone_calls.direction")},{key:"duration",value:_("uphone_calls.duration")},{key:"guid",value:_("uphone_calls.guid")},{key:"discriptions",value:_("uphone_calls.discriptions")},{key:"number",value:_("uphone_calls.number")}];return{url:e,columns:n,filterableColumns:v,hashableColumns:s}},Yb=ne({props:["data","visible","pageTitle"],setup(e,{emit:s}){const{formatDateTime:_}=Z(),{loading:n,rules:v}=pe();return{rules:v,loading:n,formatDateTime:_,onClose:()=>{v.value={},s("close")}}}}),Gb={key:0,style:{"white-space":"pre-wrap"}},Jb={key:1};function Qb(e,s,_,n,v,y){const r=o("a-descriptions-item"),u=o("a-descriptions"),m=o("a-col"),p=o("a-row"),h=o("a-button"),g=o("a-drawer");return d(),b(g,{title:e.pageTitle,width:720,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"}},{footer:a(()=>[l(h,{key:"back",type:"primary",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{labelStyle:{fontWeight:"bold"},contentStyle:{marginBottom:"15px"},column:1,layout:"vertical",size:"small"},{default:a(()=>[e.data&&e.data.x_lead_id?(d(),b(r,{key:0,label:e.$t("uphone_calls.lead_id")},{default:a(()=>{var f;return[c(i((f=e.data.lead)==null?void 0:f.id),1)]}),_:1},8,["label"])):D("",!0),e.data&&e.data.x_campaign_id?(d(),b(r,{key:1,label:e.$t("uphone_calls.campaign_id")},{default:a(()=>{var f;return[c(i((f=e.data.campaigns)==null?void 0:f.name),1)]}),_:1},8,["label"])):D("",!0),l(r,{label:e.$t("uphone_calls.campaign")},{default:a(()=>[c(i(e.data.campaign),1)]),_:1},8,["label"]),l(r,{label:e.$t("uphone_calls.client_id")},{default:a(()=>[c(i(e.data.client_id),1)]),_:1},8,["label"]),l(r,{label:e.$t("uphone_calls.direction")},{default:a(()=>[c(i(e.data.direction),1)]),_:1},8,["label"]),l(r,{label:e.$t("uphone_calls.duration")},{default:a(()=>[c(i(e.data.duration),1)]),_:1},8,["label"]),l(r,{label:e.$t("uphone_calls.guid")},{default:a(()=>[c(i(e.data.guid),1)]),_:1},8,["label"]),l(r,{label:e.$t("uphone_calls.number")},{default:a(()=>[c(i(e.data.number),1)]),_:1},8,["label"]),l(r,{label:e.$t("uphone_calls.discriptions")},{default:a(()=>[e.data&&e.data.discriptions?(d(),U("div",Gb,i(e.data.discriptions),1)):(d(),U("span",Jb,"-"))]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","open"])}const Xb=Y(Yb,[["render",Qb]]),Zb={components:{DoubleRightOutlined:ya,EyeOutlined:aa,AdminPageHeader:Ce,ViewUphone:Xb},setup(){const{permsArray:e,reloadUphoneStringData:s}=Z(),{url:_,columns:n,hashableColumns:v,filterableColumns:y}=Wb(),r=sa(),u=Fe(),m=I({}),p=I(!1);ie(()=>{g()});const h=w=>{p.value=!0,m.value=w},g=()=>{u.tableUrl.value={url:_},u.table.filterableColumns=y,u.fetch({page:1}),u.hashableColumns.value=[...v]},f=()=>{p.value=!1};return he(s,(w,k)=>{g()}),{...u,...r,filterableColumns:y,url:_,columns:n,hashableColumns:v,permsArray:e,setUrlData:g,viewUphoneCalls:h,uphoneCallsData:m,visibleUphoneCalls:p,closed:f}}},xb={class:"table-responsive"},ey={key:1};function ay(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("a-col"),f=o("a-select-option"),w=o("a-select"),k=o("a-input-search"),C=o("a-input-group"),S=o("a-row"),E=o("admin-page-filters"),A=o("a-button"),$=o("EyeOutlined"),P=o("a-space"),T=o("a-table"),F=o("admin-page-table-content"),V=o("view-lead-details"),z=o("ViewUphone");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.uphone_calls"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.uphone_calls")),1)]),_:1})]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(S,{gutter:[16,16]},{default:a(()=>[l(g,{xs:24,sm:24,md:12,lg:10,xl:10}),l(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(S,{gutter:[16,16],justify:"end"},{default:a(()=>[l(g,{xs:24,sm:24,md:16,lg:8,xl:8}),l(g,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l(C,{compact:""},{default:a(()=>[l(w,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=K=>e.table.searchColumn=K),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,K=>(d(),b(f,{key:K.key},{default:a(()=>[c(i(K.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(k,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=K=>e.table.searchString=K),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(F,null,{default:a(()=>[l(S,null,{default:a(()=>[l(g,{span:24},{default:a(()=>[M("div",xb,[l(T,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:K=>({disabled:!1,name:K.xid})},columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:""},{bodyCell:a(({column:K,record:B})=>[K.dataIndex==="reference_number"?(d(),U(L,{key:0},[B&&B.x_lead_id&&B.lead_data?(d(),b(A,{key:0,type:"link",class:"p-0",onClick:R=>e.showViewDrawer(B.lead_data)},{default:a(()=>[c(i(B.lead_data.reference_number!=""&&B.lead_data.reference_number!=null?B.lead_data.reference_number:"---"),1)]),_:2},1032,["onClick"])):(d(),U("span",ey," - "))],64)):D("",!0),K.dataIndex==="campaign_id"?(d(),U(L,{key:1},[c(i(B.campaigns.name),1)],64)):D("",!0),K.dataIndex==="campaign"?(d(),U(L,{key:2},[c(i(B.campaign),1)],64)):D("",!0),K.dataIndex==="action"?(d(),b(P,{key:3},{default:a(()=>[l(A,{type:"primary",onClick:R=>n.viewUphoneCalls(B),style:{"margin-left":"4px"}},{icon:a(()=>[l($)]),_:2},1032,["onClick"])]),_:2},1024)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),l(V,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"]),l(z,{data:n.uphoneCallsData,visible:n.visibleUphoneCalls,onClose:n.closed,pageTitle:e.$t("uphone_calls.uphone_calls_details")},null,8,["data","visible","onClose","pageTitle"])],64)}const ty=Y(Zb,[["render",ay]]),ly=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/uphone-calls",component:ty,name:"admin.uphone_calls.index",meta:{requireAuth:!0,menuParent:"uphone_calls",menuKey:e=>"uphone_calls",permission:"uphone_calls_view"}}]}],ny=()=>{const e="notes-typifications",{t:s}=x(),_=["parent_id"],n={name:"",parent_id:null,sale:!1,schedule:!1},v=[{title:s("notes_typification.name"),dataIndex:"name"},{title:s("common.action"),dataIndex:"action"}];return{hashableColumns:_,addEditUrl:e,initData:n,columns:v}},oy=ne({props:["formData","data","visible","url","addEditType"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{getRecursiveTypifications:y}=Z(),{t:r}=x(),u=I([]),m=(f=null)=>{var w="notes-typifications?fields=id,xid,name,parent_id,x_parent_id,sale,schedule,status&filters=status eq 1&limit=10000";f!=null&&(w+=`&filters=id ne ${f}&hashable=${f}`),axiosAdmin.get(w).then(k=>{u.value=y(k,f)})},p=_e(()=>e.addEditType=="add"?r("notes_typification.add"):r("notes_typification.edit")),h=()=>{var f={parent_id:null,...e.formData};const w=e.addEditType=="add"?r("notes_typification.created"):r("notes_typification.updated");_({url:e.url,data:f,successMessage:w,success:k=>{m(),s("addEditSuccess",k.xid)}})},g=()=>{e.formData.value=[],v.value={},s("closed")};return he(e,(f,w)=>{f.addEditType=="add"?(e.formData.acciones=!0,m()):m(f.data.xid)}),{loading:n,rules:v,onClose:g,onSubmit:h,pageTitle:p,allTypifications:u}}}),sy={class:"small-text-message"};function dy(e,s,_,n,v,y){const r=o("a-tree-select"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-input"),g=o("a-checkbox"),f=o("a-form"),w=o("SaveOutlined"),k=o("a-button"),C=o("a-modal");return d(),b(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(k,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(f,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[!e.formData.acciones||e.addEditType==="add"?(d(),b(m,{key:0,xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("notes_typification.parent_id"),name:"parent_id",help:e.rules.parent_id?e.rules.parent_id.message:null,validateStatus:e.rules.parent_id?"error":null},{default:a(()=>[l(r,{value:e.formData.parent_id,"onUpdate:value":s[0]||(s[0]=S=>e.formData.parent_id=S),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("notes_typification.parent_id")]),"tree-data":e.allTypifications,"allow-clear":"","tree-default-expand-all":""},null,8,["value","placeholder","tree-data"]),M("small",sy,i(e.$t("messages.leave_blank_to_create_notes_typification")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})):D("",!0)]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("notes_typification.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(h,{value:e.formData.name,"onUpdate:value":s[1]||(s[1]=S=>e.formData.name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("notes_typification.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e.formData.acciones?(d(),b(u,{key:0,label:e.$t("menu.actions"),name:"acciones"},{default:a(()=>[l(g,{style:{"margin-left":"10px"},checked:e.formData.sale,"onUpdate:checked":s[2]||(s[2]=S=>e.formData.sale=S)},{default:a(()=>[c(i(e.$t("lead_notes.sale")),1)]),_:1},8,["checked"]),l(g,{checked:e.formData.schedule,"onUpdate:checked":s[3]||(s[3]=S=>e.formData.schedule=S)},{default:a(()=>[c(i(e.$t("common.scheduled")),1)]),_:1},8,["checked"])]),_:1},8,["label"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const iy=Y(oy,[["render",dy]]),ry=ne({props:["data","visible","pageTitle","addEditType"],components:{PlusOutlined:de,MinusSquareOutlined:Il,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),{t:y}=x(),r=I([{typification_1:"",typification_2:"",typification_3:"",typification_4:"",sale:!1,schedule:!1}]),u=I([]),m=I({}),p=()=>{r.value.push({typification_1:"",typification_2:"",typification_3:"",typification_4:""})},h=()=>{var C={notes:r.value};_({url:"multiple-typifications",data:C,successMessage:y("notes_typification.typification_add"),success:S=>{k(),s("close")}})},g=_e(()=>r.value.length==0?!1:Aa(r.value,{typification_1:""})||Aa(r.value,{typification_2:""})||Aa(r.value,{typification_3:""})||Aa(r.value,{typification_4:""})),f=C=>{let S=r.value.indexOf(C);S!==-1&&r.value.splice(S,1),C.id!=""&&u.value.push(C.id)},w=()=>{v.value={},s("close")},k=()=>{s("setMultiple")};return he(()=>e.visible,(C,S)=>{m.value={},r.value=[{typification_1:"",typification_2:"",typification_3:"",typification_4:""}]}),{rules:v,loading:n,onClose:w,onSubmit:h,formData:r,addMultipleTypification:p,addFormButtonStatus:g,removeFormField:f,setMultipleUrl:k}}});function uy(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("MinusSquareOutlined"),h=o("a-checkbox"),g=o("a-row"),f=o("PlusOutlined"),w=o("a-button"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-modal");return d(),b(S,{width:"70%",open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(w,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading,disabled:e.formData.length==0},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.create")),1)]),_:1},8,["onClick","loading","disabled"]),l(w,{onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(k,{layout:"vertical"},{default:a(()=>[e.formData.length>0?(d(!0),U(L,{key:0},G(e.formData,(E,A)=>(d(),b(g,{gutter:16,key:E.id,style:{display:"flex","align-items":"center"}},{default:a(()=>[l(m,{xs:24,sm:24,md:5,lg:5},{default:a(()=>[l(u,{label:e.$t("lead_notes.typification_1"),name:["form_data",A,"typification_1"],help:e.rules.typification_1?e.rules.typification_1.message:null,validateStatus:e.rules.typification_1?"error":null},{default:a(()=>[l(r,{value:E.typification_1,"onUpdate:value":$=>E.typification_1=$,placeholder:e.$t("common.placeholder_default_text",[e.$t("lead_notes.typification_1")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1024),Xa(l(m,{xs:24,sm:24,md:5,lg:5},{default:a(()=>[l(u,{label:e.$t("lead_notes.typification_2"),name:["form_data",A,"typification_2"],help:e.rules.typification_2?e.rules.typification_2.message:null,validateStatus:e.rules.typification_2?"error":null},{default:a(()=>[l(r,{value:E.typification_2,"onUpdate:value":$=>E.typification_2=$,placeholder:e.$t("common.placeholder_default_text",[e.$t("lead_notes.typification_2")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1536),[[Za,E.typification_1!=""]]),Xa(l(m,{xs:24,sm:24,md:5,lg:5},{default:a(()=>[l(u,{label:e.$t("lead_notes.typification_3"),name:["form_data",A,"typification_3"],help:e.rules.typification_3?e.rules.typification_3.message:null,validateStatus:e.rules.typification_3?"error":null},{default:a(()=>[l(r,{value:E.typification_3,"onUpdate:value":$=>E.typification_3=$,placeholder:e.$t("common.placeholder_default_text",[e.$t("lead_notes.typification_3")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1536),[[Za,E.typification_1!=""&&E.typification_2!=""]]),Xa(l(m,{xs:24,sm:24,md:5,lg:5},{default:a(()=>[l(u,{label:e.$t("lead_notes.typification_4"),name:["form_data",A,"typification_4"],help:e.rules.typification_4?e.rules.typification_4.message:null,validateStatus:e.rules.typification_4?"error":null},{default:a(()=>[l(r,{value:E.typification_4,"onUpdate:value":$=>E.typification_4=$,placeholder:e.$t("common.placeholder_default_text",[e.$t("lead_notes.typification_4")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1536),[[Za,E.typification_1!=""&&E.typification_2!=""&&E.typification_3!=""]]),l(m,{span:1,style:{"margin-top":"6px",display:"inline-flex"}},{default:a(()=>[l(p,{onClick:$=>e.removeFormField(E),danger:""},null,8,["onClick"]),l(h,{style:{"margin-left":"10px"},checked:E.sale,"onUpdate:checked":$=>E.sale=$},{default:a(()=>[c(i(e.$t("lead_notes.sale")),1)]),_:2},1032,["checked","onUpdate:checked"]),l(h,{checked:E.schedule,"onUpdate:checked":$=>E.schedule=$},{default:a(()=>[c(i(e.$t("common.scheduled")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024)]),_:2},1024))),128)):D("",!0),l(g,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:7,lg:7},{default:a(()=>[l(u,null,{default:a(()=>[l(w,{style:{width:"fit-content"},type:"dashed",block:"",onClick:s[0]||(s[0]=E=>e.addMultipleTypification()),disabled:e.addFormButtonStatus},{default:a(()=>[l(f),c(" "+i(e.$t("notes_typification.add_multiple_typification")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const my=Y(ry,[["render",uy]]),cy={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,ExclamationCircleOutlined:De,AddEdit:iy,AdminPageHeader:Ce,AddMultiple:my,ImportNotesTypification:Va},setup(){const e=Ke(),{initData:s,columns:_}=ny(),{permsArray:n}=Z(),{t:v}=x(),y=window.config.notes_typification_sample_file,r=I(!1),u=I({}),m=I(!1),p=I("add"),h=I("notes-typifications"),g=I([]),f=I([]),w=I(!1),k=()=>{w.value=!0},C=I({name:""}),S=I({}),E=I([]);ie(()=>{T()});const A=j=>{E.value=j},$=j=>({disabled:!(!j.children||j.children.length==0),name:j.xid}),P=_e(()=>({selectedRowKeys:xa(E),onChange:A,getCheckboxProps:$})),T=()=>{const j="notes-typifications?fields=id,xid,name,parent_id,x_parent_id,sale,schedule,status&filters=status eq 1&order=id asc&limit=10000";axiosAdmin.get(j).then(te=>{const le=[];var ue=te.data;ue.forEach(ee=>{if(!ee.x_parent_id)return le.push(ee);const ve=ue.findIndex(X=>X.xid===ee.x_parent_id);if(!ue[ve].children)return ue[ve].children=[ee];ue[ve].children.push(ee)}),g.value=le,f.value=le})},F=(j,te)=>Dt(j,le=>{const ue=Lo(le.name)&&le.name.toLowerCase().includes(te.toLowerCase());if(le.children){const ee=F(le.children,te);if(ee.length>0)return{...le,children:ee}}return ue}),V=Dl(()=>{if(C.value.name!=""){let j=Ro(f.value),te=C.value.name;g.value=[],g.value=F(j,te)}else g.value=[...f.value]},400);return{columns:_,addEditSuccess:j=>{p.value=="add"&&(S.value={name:"",parent_id:null,sale:!1,schedule:!1,acciones:!0}),T(),m.value=!1},formData:S,editItem:j=>{const{children:te=[]}=j;S.value={name:j.name,parent_id:j.x_parent_id,sale:j.sale,schedule:j.schedule,acciones:te.length===0,_method:"PUT"},u.value=j,h.value=`notes-typifications/${j.xid}`,p.value="edit",m.value=!0},addEditVisible:m,addItem:()=>{h.value="notes-typifications",p.value="add",m.value=!0},onCloseAddEdit:()=>{S.value={...s},m.value=!1},addEditUrl:h,addEditType:p,showDeleteConfirm:j=>{Ne.confirm({title:v("common.delete")+"?",icon:l(De),content:v("notes_typification.delete_message"),centered:!0,okText:v("common.yes"),okType:"danger",cancelText:v("common.no"),onOk(){axiosAdmin.delete(`notes-typifications/${j}`).then(()=>{T(),Ve.success({message:v("common.success"),description:v("notes_typification.deleted")})})},onCancel(){}})},detailsVisible:r,viewItem:j=>{u.value=j,r.value=!0},viewData:u,allTypifications:g,permsArray:n,getTypifications:T,addMultipleItems:k,selectedRowKeys:E,rowSelection:P,showSelectedDeleteConfirm:()=>{Ne.confirm({title:v("common.delete")+"?",icon:l(De),content:v("notes_typification.delete_message"),centered:!0,okText:v("common.yes"),okType:"danger",cancelText:v("common.no"),onOk(){const j=[];Ee(E.value,te=>{j.push(axiosAdmin.delete(`notes-typifications/${te}`))}),Promise.all(j).then(te=>{E.value=[],e.dispatch("auth/updateVisibleSubscriptionModules"),T(),Ve.success({message:v("common.success"),description:v("notes_typification.deleted"),placement:"bottomRight"})})},onCancel(){}})},visibleAddMultiple:w,closeMultipleItems:()=>{w.value=!1},extraFilters:C,sampleFileUrl:y,searchByName:V}}},py={class:"table-responsive"};function _y(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("ImportNotesTypification"),k=o("a-space"),C=o("DeleteOutlined"),S=o("a-col"),E=o("a-input-search"),A=o("a-input-group"),$=o("a-row"),P=o("admin-page-filters"),T=o("AddEdit"),F=o("EditOutlined"),V=o("a-table"),z=o("admin-page-table-content"),K=o("AddMultiple");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.notes_typifications"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.notes_typifications")),1)]),_:1})]),_:1})]),_:1}),l(P,null,{default:a(()=>[l($,{gutter:[16,16]},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:10,xl:16},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("notes_typifications_add")||n.permsArray.includes("admin")?(d(),b(k,{key:0},{default:a(()=>[l(f,{type:"primary",onClick:n.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("notes_typification.add")),1)]),_:1},8,["onClick"]),l(f,{type:"primary",onClick:n.addMultipleItems},{default:a(()=>[l(g),c(" "+i(e.$t("notes_typification.add_multiple_typification")),1)]),_:1},8,["onClick"]),l(w,{pageTitle:e.$t("notes_typification.import_notes_typification"),sampleFileUrl:n.sampleFileUrl,importUrl:"notes-typifications/import",onOnUploadSuccess:n.getTypifications},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])]),_:1})):D("",!0),n.selectedRowKeys.length>0&&(n.permsArray.includes("notes_typifications_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:n.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(C)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(S,{xs:24,sm:24,md:12,lg:14,xl:8},{default:a(()=>[l($,{gutter:[16,16],justify:"end"},{default:a(()=>[l(S,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l(A,{compact:""},{default:a(()=>[l(E,{style:{width:"100%"},value:n.extraFilters.name,"onUpdate:value":s[0]||(s[0]=B=>n.extraFilters.name=B),"show-search":"",onChange:n.searchByName,onSearch:n.searchByName,allowClear:!0,placeholder:e.$t("notes_typification.search_your_name")},null,8,["value","onChange","onSearch","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(z,null,{default:a(()=>[l(T,{addEditType:n.addEditType,visible:n.addEditVisible,url:n.addEditUrl,onAddEditSuccess:n.addEditSuccess,onClosed:n.onCloseAddEdit,formData:n.formData,data:n.viewData,destroyOnClose:!0},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data"]),l($,null,{default:a(()=>[l(S,{span:24},{default:a(()=>[M("div",py,[l(V,{"row-selection":n.rowSelection,columns:n.columns,"row-key":B=>B.xid,"data-source":n.allTypifications,defaultExpandAllRows:!0,bordered:"",size:"middle"},{bodyCell:a(({column:B,text:R,record:O})=>[B.dataIndex==="action"?(d(),U(L,{key:0},[n.permsArray.includes("notes_typifications_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>n.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(F)]),_:2},1032,["onClick"])):D("",!0),(n.permsArray.includes("notes_typifications_delete")||n.permsArray.includes("admin"))&&(!O.children||O.children.length==0)?(d(),b(f,{key:1,type:"primary",danger:"",onClick:W=>n.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(C)]),_:2},1032,["onClick"])):D("",!0)],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1}),l(K,{visible:n.visibleAddMultiple,onClose:n.closeMultipleItems,pageTitle:e.$t("notes_typification.add_multiple_typification"),onSetMultiple:s[1]||(s[1]=B=>n.getTypifications())},null,8,["visible","onClose","pageTitle"])],64)}const fy=Y(cy,[["render",_y]]),gy=()=>{const e="plantillas-calidad",{t:s}=x(),_={nombre:"",descripcion:"",variable:[],activo:!0},n=[{title:s("common.name"),dataIndex:"nombre"},{title:s("common.description"),dataIndex:"descripcion"},{title:s("common.status"),dataIndex:"activo"},{title:s("campaign.created_at"),dataIndex:"created_at"},{title:s("common.action"),dataIndex:"action"}],v=[{key:"nombre",value:s("common.name")}];return{addEditUrl:e,initData:_,filterableColumns:v,columns:n}},hy=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function vy(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-checkbox"),p=o("a-col"),h=o("a-row"),g=o("a-form"),f=o("SaveOutlined"),w=o("a-button"),k=o("a-modal");return d(),b(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(w,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(f)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(w,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(g,{layout:"vertical"},{default:a(()=>[l(h,{gutter:16},{default:a(()=>[l(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("category.name"),name:"nombre",help:e.rules.nombre?e.rules.nombre.message:null,validateStatus:e.rules.nombre?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.nombre,"onUpdate:value":s[0]||(s[0]=C=>e.formData.nombre=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),l(u,{label:e.$t("common.description"),name:"descripcion",help:e.rules.descripcion?e.rules.descripcion.message:null,validateStatus:e.rules.descripcion?"error":null},{default:a(()=>[l(r,{value:e.formData.descripcion,"onUpdate:value":s[1]||(s[1]=C=>e.formData.descripcion=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.name")]),max:1200},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),l(u,{label:e.$t("common.active"),name:"activo",help:e.rules.activo?e.rules.activo.message:null,validateStatus:e.rules.activo?"error":null},{default:a(()=>[l(m,{checked:e.formData.activo,"onUpdate:checked":s[2]||(s[2]=C=>e.formData.activo=C)},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const by=Y(hy,[["render",vy]]),yy={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:by,AdminPageHeader:Ce,InfoCircleOutlined:ua,ClusterOutlined:Bo,MinusCircleOutlined:Ea},setup(e,{emit:s}){const{t:_}=x(),{addEditUrl:n,initData:v,columns:y,filterableColumns:r}=gy(),u=Fe(),{permsArray:m,formatDateTime:p}=Z(),h=I("templates"),g=I([]),{addEditRequestAdmin:f}=pe(),w=na(),k=I(0),C=()=>{k.value=0,k.value=$.variables.reduce((V,z)=>V+Number(z.nota_maxima||0),0)};ie(()=>{S()});const S=()=>{u.tableUrl.value={url:"plantillas-calidad?fields=id,xid,nombre,descripcion,activo,created_at,variables{id,xid,tipo,nombre,descripcion,nota_maxima}&order=id asc&limit=1000"},u.table.filterableColumns=r,u.fetch({page:1}),u.crudUrl.value=n,u.langKey.value="message_template",u.initData.value={...v},u.formData.value={...v}},E=V=>{h.value="variables",g.value=V,$.variables=[],k.value=0,V.variables&&V.variables.length>0?(g.value.accion="edit",V.variables.forEach(z=>{k.value+=z.nota_maxima,$.variables.push({id:z.id,plantilla_id:g.value.id,tipo:z.tipo,nombre:z.nombre,descripcion:z.descripcion,nota_maxima:z.nota_maxima,identificador:Date.now()})})):g.value.accion="add"},A=I(),$=Le({variables:[],variables_eliminar:[]});return{validarSumaMaxima:C,formRef:A,dynamicValidateForm:$,removeUser:V=>{const z=$.variables.indexOf(V);z!==-1&&($.variables_eliminar.push($.variables[z]),k.value-=$.variables[z].nota_maxima,$.variables.splice(z,1))},addUser:()=>{$.variables.push({plantilla_id:g.value.id,tipo:"no_critica",nombre:"",descripcion:"",nota_maxima:0,identificador:Date.now()})},onSubmit:()=>{k.value===100?($.accion=g.value.accion,f({url:"variables/save",data:$,successMessage:e.successMessage,success:V=>{V?(S(),h.value="templates",w.push({name:"admin.templates.index"}),Ve.success({message:_("common.success"),description:_("message_template.updated_variables")})):console.error("Error al guardar/actualizar variables")}})):Ve.warning({message:_("common.information"),description:_("message_template.maximum_grade_exceded")})},templateSeleccionado:g,suma:k,eddEdditVariables:E,activeTabKey:h,formatDateTime:p,columns:y,...u,filterableColumns:r,permsArray:m}}},ky={class:"table-responsive"};function Cy(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("UnorderedListOutlined"),z=o("a-tag"),K=o("EditOutlined"),B=o("a-tooltip"),R=o("ClusterOutlined"),O=o("a-table"),W=o("a-tab-pane"),q=o("a-form-item"),N=o("a-input"),j=o("a-input-number"),te=o("MinusCircleOutlined"),le=o("InfoCircleOutlined"),ue=o("SaveOutlined"),ee=o("a-form"),ve=o("a-card"),X=o("a-tabs"),oe=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.quality"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.quality")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("plantillas_calidad_create")||n.permsArray.includes("admin")&&n.activeTabKey==="templates"?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("message_template.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("plantillas_calidad_delete")||n.permsArray.includes("admin"))&&n.activeTabKey==="templates"?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=se=>e.table.searchColumn=se),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,se=>(d(),b(S,{key:se.key},{default:a(()=>[c(i(se.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=se=>e.table.searchString=se),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(oe,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(X,{activeKey:n.activeTabKey,"onUpdate:activeKey":s[2]||(s[2]=se=>n.activeTabKey=se)},{default:a(()=>[l(W,{key:"templates"},{tab:a(()=>[M("span",null,[l(V),c(" "+i(e.$t("menu.templates")),1)])]),default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",ky,[l(O,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:se=>({disabled:!1,name:se.xid})},columns:n.columns,"row-key":se=>se.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:se,record:H})=>[se.dataIndex==="activo"?(d(),U(L,{key:0},[H.activo===!0?(d(),b(z,{key:0,style:{width:"100%","text-align":"center"},color:"#4cb050"},{default:a(()=>[c(i(e.$t("common.active")),1)]),_:1})):(d(),b(z,{key:1,style:{width:"100%","text-align":"center"},color:"#f5b041"},{default:a(()=>[c(i(e.$t("common.inactive")),1)]),_:1}))],64)):D("",!0),se.dataIndex==="created_at"?(d(),U(L,{key:1},[c(i(n.formatDateTime(H.created_at)),1)],64)):D("",!0),se.dataIndex==="action"?(d(),U(L,{key:2},[l(B,{title:e.$t("common.edit")},{default:a(()=>[n.permsArray.includes("plantillas_calidad_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:ae=>e.editItem(H),style:{"margin-left":"4px"}},{icon:a(()=>[l(K)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(B,{title:`${e.$t("common.add")} ${e.$t("message_template.variables")}`},{default:a(()=>[n.permsArray.includes("plantillas_calidad_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:ae=>n.eddEdditVariables(H),style:{"margin-left":"4px"}},{icon:a(()=>[l(R)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(B,{title:e.$t("common.delete")},{default:a(()=>[n.permsArray.includes("plantillas_calidad_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",danger:"",onClick:ae=>e.showDeleteConfirm(H.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"])],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),l(W,{disabled:n.activeTabKey.value!="variables",key:"variables"},{tab:a(()=>[M("span",null,[l(V),c(" "+i(e.$t("message_template.variables"))+" "+i(e.$t("menu.quality")),1)])]),default:a(()=>[l(ve,null,{default:a(()=>[l(P,{gutter:16,justify:"center"},{default:a(()=>[l(C,{class:"text-center",xs:24,sm:24,md:24,lg:24},{default:a(()=>[M("h2",null,[M("strong",null,i(e.$t("common.name"))+": "+i(n.templateSeleccionado.nombre),1)]),M("h4",null,[M("strong",null,i(e.$t("common.description"))+": "+i(n.templateSeleccionado.descripcion),1)]),l(q,null,{default:a(()=>[n.templateSeleccionado.activo===!0?(d(),b(z,{key:0,color:"#4cb050"},{default:a(()=>[c(i(e.$t("common.active")),1)]),_:1})):(d(),b(z,{key:1,color:"#f5b041"},{default:a(()=>[c(i(e.$t("common.inactive")),1)]),_:1}))]),_:1})]),_:1})]),_:1}),l(ee,{ref:"formRef",name:"dynamic_form_nest_item",model:n.dynamicValidateForm,onFinish:n.onSubmit},{default:a(()=>[l(P,{gutter:16,justify:"center"},{default:a(()=>[l(C,{class:"text-center",xs:24,sm:24,md:24,lg:24},{default:a(()=>[(d(!0),U(L,null,G(n.dynamicValidateForm.variables,(se,H)=>(d(),b(k,{key:se.identificador},{default:a(()=>[l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,{name:["variables",H,"tipo"],rules:{required:!0,message:e.$t("lead_status.type")}},{default:a(()=>[l(E,{value:se.tipo,"onUpdate:value":ae=>se.tipo=ae,bordered:!1,placeholder:e.$t("common.select_default_text",[e.$t("lead_status.type")]),allowClear:!0,"show-search":""},{default:a(()=>[l(S,{key:"critica",value:"critica"},{default:a(()=>[l(z,{color:"#f5b041",style:{width:"100%",height:"max-content"}},{default:a(()=>[c(i(e.$t("message_template.critical_variable")),1)]),_:1})]),_:1}),l(S,{key:"no_critica",value:"no_critica"},{default:a(()=>[l(z,{color:"#4cb050"},{default:a(()=>[c(i(e.$t("message_template.critical_not_variable")),1)]),_:1})]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"])]),_:2},1024),l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,{name:["variables",H,"nombre"],rules:{required:!0,message:e.$t("common.name")}},{default:a(()=>[l(N,{value:se.nombre,"onUpdate:value":ae=>se.nombre=ae,placeholder:e.$t("common.name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"])]),_:2},1024),l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,{name:["variables",H,"descripcion"],rules:{required:!0,message:e.$t("common.description")}},{default:a(()=>[l(N,{value:se.descripcion,"onUpdate:value":ae=>se.descripcion=ae,placeholder:e.$t("common.description")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name","rules"])]),_:2},1024),l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,{name:["variables",H,"nota_maxima"],rules:{required:!0,message:e.$t("message_template.maximum_grade")}},{default:a(()=>[se.tipo!="critica"?(d(),b(j,{key:0,style:{width:"auto"},onChange:n.validarSumaMaxima,min:0,max:100,value:se.nota_maxima,"onUpdate:value":ae=>se.nota_maxima=ae,placeholder:e.$t("message_template.maximum_grade")},null,8,["onChange","value","onUpdate:value","placeholder"])):(d(),b(N,{key:1,placeholder:"N/A",disabled:""}))]),_:2},1032,["name","rules"])]),_:2},1024),l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,null,{default:a(()=>[l(te,{onClick:ae=>n.removeUser(se)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(C,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,{class:"text-right"},{default:a(()=>[M("h4",{style:we({color:n.suma>100?"red":"inherit"})},[l(B,{style:we({color:n.suma>100?"red":"inherit"}),title:e.$t("message_template.maximum_grade_exceded")},{default:a(()=>[l(le)]),_:1},8,["style","title"]),c(" "+i(e.$t("common.total"))+": "+i(n.suma),1)],4)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,null,{default:a(()=>[l(f,{disabled:n.suma>=100,type:"dashed",block:"",onClick:n.addUser},{default:a(()=>[l(g),c(" "+i(e.$t("common.add")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(q,{style:{display:"flex","text-align":"center"}},{default:a(()=>[l(f,{disabled:n.suma>100||n.suma<100,type:"primary","html-type":"submit"},{icon:a(()=>[l(ue)]),default:a(()=>[c(" "+i(n.templateSeleccionado.accion=="add"?e.$t("common.save"):e.$t("common.update")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","onFinish"])]),_:1})]),_:1},8,["disabled"])]),_:1},8,["activeKey"])]),_:1})],64)}const wy=Y(yy,[["render",Cy]]),Sy=()=>{const e="acciones-calidad",{t:s}=x(),_={nombre:"",descripcion:"",tipo:"accion",users_ids:[]},n=[{title:s("common.id"),dataIndex:"id"},{title:s("common.name"),dataIndex:"nombre"},{title:s("common.description"),dataIndex:"descripcion"},{title:s("lead_status.type"),dataIndex:"tipo"},{title:s("common.action"),dataIndex:"action"}],v=[{key:"nombre",value:s("common.name")},{key:"tipo",value:s("lead_status.type")}];return{addEditUrl:e,initData:_,columns:n,filterableColumns:v}},$y=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage","allUsers"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe(),y=()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},r=()=>{v.value={},s("closed")};return he(()=>e.formData.users_ids,u=>{if(typeof u=="string")try{e.formData.users_ids=JSON.parse(u)}catch{e.formData.users_ids=[]}},{immediate:!0}),{loading:n,rules:v,onClose:r,onSubmit:y,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Ay(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-select-option"),p=o("a-select"),h=o("a-col"),g=o("a-row"),f=o("a-form"),w=o("SaveOutlined"),k=o("a-button"),C=o("a-modal");return d(),b(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(k,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(f,{layout:"vertical"},{default:a(()=>[l(g,{gutter:16},{default:a(()=>[l(h,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("common.name"),name:"nombre",help:e.rules.nombre?e.$t("category.name"):null,validateStatus:e.rules.nombre?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.nombre,"onUpdate:value":s[0]||(s[0]=S=>e.formData.nombre=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),l(u,{label:e.$t("common.description"),name:"descripcion",help:e.rules.descripcion?e.rules.descripcion.message:null,validateStatus:e.rules.descripcion?"error":null},{default:a(()=>[l(r,{value:e.formData.descripcion,"onUpdate:value":s[1]||(s[1]=S=>e.formData.descripcion=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.description")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),l(u,{label:e.$t("lead_status.type"),name:"tipo",help:e.rules.tipo?e.$t("lead_status.type"):null,validateStatus:e.rules.tipo?"error":null,class:"required"},{default:a(()=>[l(p,{value:e.formData.tipo,"onUpdate:value":s[2]||(s[2]=S=>e.formData.tipo=S),placeholder:e.$t("common.select_default_text",[e.$t("lead_status.type")]),allowClear:!0,"show-search":""},{default:a(()=>[l(m,{key:"accion",value:"accion"},{default:a(()=>[c(i(e.$t("common.action")),1)]),_:1}),l(m,{key:"cierre",value:"cierre"},{default:a(()=>[c(i(e.$t("common.closing_sale")),1)]),_:1}),l(m,{key:"mejora",value:"mejora"},{default:a(()=>[c(i(e.$t("common.improvement_options")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),e.formData.tipo==="accion"?(d(),b(u,{key:0,label:e.$t("lead.send_email"),name:"users_ids",help:e.rules.users_ids?e.$t("menu.users"):null,validateStatus:e.rules.users_ids?"error":null,class:"required"},{default:a(()=>[l(p,{style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("menu.users")]),allowClear:!0,"show-search":"",optionFilterProp:"title",mode:"multiple",value:e.formData.users_ids,"onUpdate:value":s[3]||(s[3]=S=>e.formData.users_ids=S)},{default:a(()=>[(d(!0),U(L,null,G(e.allUsers,S=>(d(),b(m,{title:S.name,key:S.id,value:S.id},{default:a(()=>[c(i(S.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["placeholder","value"])]),_:1},8,["label","help","validateStatus"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Dy=Y($y,[["render",Ay]]),Ty={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Dy,AdminPageHeader:Ce},setup(){const{addEditUrl:e,initData:s,columns:_,filterableColumns:n}=Sy(),v=Fe(),{permsArray:y,appSetting:r}=Z(),u=I([]);return ie(async()=>{v.tableUrl.value={url:"acciones-calidad?fields=id,xid,nombre,descripcion,tipo,users_ids"},v.table.filterableColumns=n,v.fetch({page:1}),v.crudUrl.value=e,v.langKey.value="common",v.initData.value={...s},v.formData.value={...s},u.value=[];const m=await axiosAdmin.get("all-users");u.value=m.data.users}),{allUsers:u,columns:_,...v,filterableColumns:n,permsArray:y,appSetting:r}}},Ey={class:"table-responsive"};function Uy(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("a-tag"),z=o("EditOutlined"),K=o("a-tooltip"),B=o("a-table"),R=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.actions"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.actions")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("acciones_calidad_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("common.add")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("acciones_calidad_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=O=>e.table.searchColumn=O),placeholder:e.$t("common.select_default_text")},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,O=>(d(),b(S,{key:O.key},{default:a(()=>[c(i(O.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=O=>e.table.searchString=O),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(R,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage,allUsers:n.allUsers},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage","allUsers"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",Ey,[l(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:O=>({disabled:!1,name:O.xid})},columns:n.columns,"row-key":O=>O.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:O,record:W})=>[O.dataIndex==="tipo"?(d(),U(L,{key:0},[W.tipo==="accion"?(d(),b(V,{key:0,style:{width:"100%","text-align":"center"},color:n.appSetting.primary_color},{default:a(()=>[c(i(e.$t("menu.actions")),1)]),_:1},8,["color"])):W.tipo==="cierre"?(d(),b(V,{key:1,style:{width:"100%","text-align":"center"},color:"#f5b041"},{default:a(()=>[c(i(e.$t("common.closures")),1)]),_:1})):(d(),b(V,{key:2,style:{width:"100%","text-align":"center"},color:"#4cb050"},{default:a(()=>[c(i(e.$t("common.improvement_options")),1)]),_:1}))],64)):D("",!0),O.dataIndex==="action"?(d(),U(L,{key:1},[l(K,{title:e.$t("common.edit")},{default:a(()=>[n.permsArray.includes("acciones_calidad_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:q=>e.editItem(W),style:{"margin-left":"4px"}},{icon:a(()=>[l(z)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(K,{title:e.$t("common.delete")},{default:a(()=>[n.permsArray.includes("acciones_calidad_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",danger:"",onClick:q=>e.showDeleteConfirm(W.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"])],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Oy=Y(Ty,[["render",Uy]]),Iy=()=>{const e="motivos-calidad",{t:s}=x(),_={motivo:""},n=[{title:s("common.id"),dataIndex:"id"},{title:s("message_template.reason"),dataIndex:"motivo"},{title:s("common.action"),dataIndex:"action"}],v=[{key:"name",value:s("common.name")}];return{addEditUrl:e,initData:_,columns:n,filterableColumns:v}},Py=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:de,LoadingOutlined:ze,SaveOutlined:$e},setup(e,{emit:s}){const{addEditRequestAdmin:_,loading:n,rules:v}=pe();return{loading:n,rules:v,onClose:()=>{v.value={},s("closed")},onSubmit:()=>{_({url:e.url,data:e.formData,successMessage:e.successMessage,success:u=>{s("addEditSuccess",u.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function My(e,s,_,n,v,y){const r=o("a-input"),u=o("a-form-item"),m=o("a-col"),p=o("a-row"),h=o("a-form"),g=o("SaveOutlined"),f=o("a-button"),w=o("a-modal");return d(),b(w,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[l(f,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(g)]),default:a(()=>[c(" "+i(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(f,{key:"back",onClick:e.onClose},{default:a(()=>[c(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[l(h,{layout:"vertical"},{default:a(()=>[l(p,{gutter:16},{default:a(()=>[l(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,{label:e.$t("message_template.reason"),name:"motivo",help:e.rules.motivo?e.rules.motivo.message:null,validateStatus:e.rules.motivo?"error":null,class:"required"},{default:a(()=>[l(r,{value:e.formData.motivo,"onUpdate:value":s[0]||(s[0]=k=>e.formData.motivo=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("message_template.reason")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Fy=Y(Py,[["render",My]]),Ry={components:{PlusOutlined:de,EditOutlined:Oe,DeleteOutlined:Se,AddEdit:Fy,AdminPageHeader:Ce},setup(){const{addEditUrl:e,initData:s,columns:_,filterableColumns:n}=Iy(),v=Fe(),{permsArray:y}=Z();return ie(()=>{v.tableUrl.value={url:"motivos-calidad?fields=id,xid,motivo,created_at"},v.table.filterableColumns=n,v.fetch({page:1}),v.crudUrl.value=e,v.langKey.value="common",v.initData.value={...s},v.formData.value={...s}}),{columns:_,...v,filterableColumns:n,permsArray:y}}},Ly={class:"table-responsive"};function By(e,s,_,n,v,y){const r=o("a-page-header"),u=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),h=o("AdminPageHeader"),g=o("PlusOutlined"),f=o("a-button"),w=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),$=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),F=o("AddEdit"),V=o("EditOutlined"),z=o("a-tooltip"),K=o("a-table"),B=o("admin-page-table-content");return d(),U(L,null,[l(h,null,{header:a(()=>[l(r,{title:e.$t("menu.reasons_cancellation"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[l(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[l(m,null,{default:a(()=>[l(u,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),l(m,null,{default:a(()=>[c(i(e.$t("menu.reasons_cancellation")),1)]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(P,{gutter:[16,16]},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[l(k,null,{default:a(()=>[n.permsArray.includes("motivos_calidad_create")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[l(g),c(" "+i(e.$t("common.add"))+" "+i(e.$t("message_template.reason")),1)]),_:1},8,["onClick"])):D("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("motivos_calidad_delete")||n.permsArray.includes("admin"))?(d(),b(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[l(w)]),default:a(()=>[c(" "+i(e.$t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1}),l(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[l(P,{gutter:[16,16],justify:"end"},{default:a(()=>[l(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[l($,{compact:""},{default:a(()=>[l(E,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(d(!0),U(L,null,G(n.filterableColumns,R=>(d(),b(S,{key:R.key},{default:a(()=>[c(i(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),l(A,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,null,{default:a(()=>[l(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l(P,null,{default:a(()=>[l(C,{span:24},{default:a(()=>[M("div",Ly,[l(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:O})=>[R.dataIndex==="action"?(d(),U(L,{key:0},[l(z,{title:e.$t("common.edit")},{default:a(()=>[n.permsArray.includes("motivos_calidad_edit")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",onClick:W=>e.editItem(O),style:{"margin-left":"4px"}},{icon:a(()=>[l(V)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"]),l(z,{title:e.$t("common.delete")},{default:a(()=>[n.permsArray.includes("motivos_calidad_delete")||n.permsArray.includes("admin")?(d(),b(f,{key:0,type:"primary",danger:"",onClick:W=>e.showDeleteConfirm(O.xid),style:{"margin-left":"4px"}},{icon:a(()=>[l(w)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["title"])],64)):D("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const qy=Y(Ry,[["render",By]]),Vy=[{path:"/",component:()=>la(()=>import("./Admin-fe6e1197.js"),["assets/Admin-fe6e1197.js","assets/vendor-43bf694e.js","assets/Admin-499f6be2.css"]),children:[{path:"/admin/notes-typifications",component:fy,name:"admin.notes_typifications.index",meta:{requireAuth:!0,menuParent:"notes_typifications",menuKey:e=>"notes_typifications",permission:"notes_typifications_view"}},{path:"/admin/templates",component:wy,name:"admin.templates.index",meta:{requireAuth:!1,menuParent:"quality_templates",menuKey:e=>"quality_templates",permission:"quality_view"}},{path:"/admin/actions",component:Oy,name:"admin.templates_acciones.index",meta:{requireAuth:!1,menuParent:"templates_acciones",menuKey:e=>"templates_acciones",permission:"acciones_calidad_view"}},{path:"/admin/reasons-cancellation",component:qy,name:"admin.templates_motivos.index",meta:{requireAuth:!1,menuParent:"templates_motivos",menuKey:e=>"templates_motivos",permission:"motivos_calidad_view"}}]}],Pn=window.config.app_type;window.config.modules;const Wa=qo({history:Vo(),routes:[{path:"",redirect:"/admin/login"},...Qs,...Md,...Eu,...rb,...Qp,...G_,...yf,...Sf,...Vg,...kb,...h_,...P_,...Hb,...ly,...Vy],scrollBehavior:()=>({left:0,top:0})}),wl=Pn=="saas"?"superadmin":"";if(Pn=="saas"){const e=vt(Object.assign({}),`../../${wl}/router/index.js`),s=vt(Object.assign({}),`../../${wl}/router/admin/index.js`);Promise.all([e,s]).then(([_,n])=>{_.default.forEach(v=>Wa.addRoute(v)),n.default.forEach(v=>Wa.addRoute(v)),Cl.forEach(v=>Wa.addRoute(v))})}else Cl.forEach(e=>Wa.addRoute(e));const Ya=Wa;const Ky=ne({props:{visible:{default:!1},soloVer:{type:Boolean,default:!0},tipo:{default:""},title:{default:""},lead:{default:{}}},emits:["close"],components:{UnorderedListOutlined:ql,PhoneOutlined:st,FileTextOutlined:Ua,VueLeadUphone:Sn,LeadLogTable:Bt,LeadNotesTable:An},setup(e,{emit:s}){const{formatTimeDuration:_,formatDateTime:n}=Z(),v=Fe(),{uphoneColumn:y,uphoneFilterableColumns:r}=qt(),{t:u}=x(),m=I(u("lead.lead_details")),p=I("lead_data"),h=I(""),g=I({lead_id:""});ie(()=>{h.value=e.tipo});const f=()=>{p.value="lead_data",s("close")},w=()=>{s("setNotesCount")};return he(()=>e.visible,k=>{k&&e.lead.xid&&(g.value.lead_id=e.lead.xid)}),{tipo:h,...v,drawerTitle:m,formatTimeDuration:_,activeTabKey:p,setNotesUrl:w,onClose:f,uphoneColumn:y,formatDateTime:n,drawerWidth:window.innerWidth<=991?"90%":"60%",uphoneFilterableColumns:r}}});function zy(e,s,_,n,v,y){const r=o("a-descriptions-item"),u=o("a-descriptions"),m=o("UnorderedListOutlined"),p=o("a-tab-pane"),h=o("FileTextOutlined"),g=o("LeadNotesTable"),f=o("a-tabs"),w=o("a-drawer");return d(),b(w,{title:e.drawerTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose,destroyOnClose:!0},{default:a(()=>[l(u,{title:e.$t("common.basic_details")},{default:a(()=>[l(r,{label:e.$t("lead.campaign")},{default:a(()=>[c(i(e.lead&&e.lead.campaign?e.lead.campaign.name:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("campaign.first_actioner")},{default:a(()=>[c(i(e.lead&&e.lead.first_actioner&&e.lead.first_actioner.name?e.lead.first_actioner.name:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("campaign.last_actioner")},{default:a(()=>[c(i(e.lead&&e.lead.last_actioner&&e.lead.last_actioner.name?e.lead.last_actioner.name:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("lead.call_duration")},{default:a(()=>[c(i(e.lead&&e.lead.time_taken?e.formatTimeDuration(e.lead.time_taken):"-"),1)]),_:1},8,["label"])]),_:1},8,["title"]),l(f,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[0]||(s[0]=k=>e.activeTabKey=k),class:"mt-20"},{default:a(()=>[l(p,{key:"lead_data"},{tab:a(()=>[M("span",null,[l(m),c(" "+i(e.$t("lead.lead_data")),1)])]),default:a(()=>[l(u,{class:"mt-10"},{default:a(()=>[l(r,{label:e.$t("lead.document")},{default:a(()=>[c(i(e.lead&&e.lead.cedula?e.lead.cedula:"-"),1)]),_:1},8,["label"])]),_:1}),l(u,{class:"mt-10"},{default:a(()=>[l(r,{label:e.$t("lead.name")},{default:a(()=>[c(i(e.lead&&e.lead.nombre&&e.lead.nombre?e.lead.nombre:"-")+" "+i(e.lead&&e.lead.apellido1&&e.lead.apellido1?e.lead.apellido1:"-")+" "+i(e.lead&&e.lead.apellido2&&e.lead.apellido2?e.lead.apellido2:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("lead.date_birth")},{default:a(()=>[c(i(e.lead&&e.lead.fechaNacimiento&&e.lead.fechaNacimiento?e.lead.fechaNacimiento:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("lead.age")},{default:a(()=>[c(i(e.lead&&e.lead.edad&&e.lead.edad?e.lead.edad:"-"),1)]),_:1},8,["label"])]),_:1}),l(u,{class:"mt-10"},{default:a(()=>[l(r,{label:e.$t("lead.base_name")},{default:a(()=>[c(i(e.lead&&e.lead.nombreBase&&e.lead.nombreBase?e.lead.nombreBase:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("lead.nationality")},{default:a(()=>[c(i(e.lead&&e.lead.nacionalidad&&e.lead.nacionalidad?e.lead.nacionalidad:"-"),1)]),_:1},8,["label"]),l(r,{label:e.$t("lead.phone")+" 1"},{default:a(()=>[c(i(e.lead&&e.lead.tel1&&e.lead.tel1?e.lead.tel1:"-"),1)]),_:1},8,["label"])]),_:1})]),_:1}),e.tipo==="lead_note"?(d(),b(p,{key:"notes"},{tab:a(()=>[M("span",null,[l(h),c(" "+i(e.$t("menu.lead_notes")),1)])]),default:a(()=>[l(g,{soloVer:e.soloVer,idNota:e.lead.idNota,soloUna:!0,leadId:e.lead.xid,showAddButton:!1,onSuccess:e.setNotesUrl},null,8,["soloVer","idNota","leadId","onSuccess"])]),_:1})):D("",!0)]),_:1},8,["activeKey"])]),_:1},8,["title","width","open","onClose"])}const Ny=Y(Ky,[["render",zy]]),jy=ne({setup(){const{themeMode:e}=Z();return{themeMode:e}}});function Hy(e,s,_,n,v,y){return d(),U("div",{style:we({padding:"10px 16px",background:e.themeMode=="dark"?"#141414":"#fff"}),class:"mb-20"},[ke(e.$slots,"default")],4)}const Wy=Y(jy,[["render",Hy]]),Yy=ne({setup(){return{}}}),Gy={class:"dashboard-page-content-container"};function Jy(e,s,_,n,v,y){return d(),U("div",Gy,[ke(e.$slots,"default")])}const Qy=Y(Yy,[["render",Jy]]);async function Xy(){ra.getters["auth/isLoggedIn"]&&ra.dispatch("auth/updateUser"),ra.dispatch("auth/updateGlobalSetting"),ra.dispatch("auth/updateApp"),ra.dispatch("auth/updateAllLangs"),ra.commit("auth/updateActiveModules",window.config.modules),ra.dispatch("auth/updateVisibleSubscriptionModules");const e=Ko(Us),s=qs({legacy:!1,globalInjection:!0,locale:ra.state.auth.lang,warnHtmlMessage:!1});await Hl(s,ra.state.auth.lang),e.use(s),e.use(zo),e.use(No),e.use(ra),e.use(jo),e.component("ViewLeadDetails",Ny);const _=window.config.installed_modules,n=[];_.forEach(v=>{const y=v.verified_name,r=vt(Object.assign({}),`../../Modules/${y}/Resources/assets/js/${y}.js`);n.push(r)}),Promise.all(n).then(v=>{v.forEach(y=>{e.use(y.default,{routes:Ya,store:ra})}),Ya.addRoute({path:"/:catchAll(.*)",redirect:"/"}),e.use(Ya)}),e.component("admin-page-filters",Wy),e.component("admin-page-table-content",Qy),window.i18n=s,Ya.isReady().then(()=>{e.mount("#app")})}Xy();export{Tn as C,pt as L,Xl as R,mt as S,Jp as T,Y as _,Dp as a,As as b,Z as c,dn as d,rn as e,Vm as f,pe as g,Hl as l};
